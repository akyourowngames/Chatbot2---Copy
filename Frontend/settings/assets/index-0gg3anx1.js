(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function lw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Am={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function NA(){if(Jv)return Ql;Jv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:i,type:r,key:c,ref:o!==void 0?o:null,props:l}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var Wv;function kA(){return Wv||(Wv=1,Am.exports=NA()),Am.exports}var A=kA(),Rm={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function DA(){if(Zv)return Ae;Zv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,H={};function W(D,X,re){this.props=D,this.context=X,this.refs=H,this.updater=re||P}W.prototype.isReactComponent={},W.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function te(){}te.prototype=W.prototype;function F(D,X,re){this.props=D,this.context=X,this.refs=H,this.updater=re||P}var ie=F.prototype=new te;ie.constructor=F,B(ie,W.prototype),ie.isPureReactComponent=!0;var ye=Array.isArray;function oe(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function x(D,X,re){var ce=re.ref;return{$$typeof:i,type:D,key:X,ref:ce!==void 0?ce:null,props:re}}function M(D,X){return x(D.type,X,D.props)}function U(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function j(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(re){return X[re]})}var N=/\/+/g;function Ot(D,X){return typeof D=="object"&&D!==null&&D.key!=null?j(""+D.key):X.toString(36)}function $t(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(oe,oe):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Q(D,X,re,ce,Ee){var xe=typeof D;(xe==="undefined"||xe==="boolean")&&(D=null);var je=!1;if(D===null)je=!0;else switch(xe){case"bigint":case"string":case"number":je=!0;break;case"object":switch(D.$$typeof){case i:case e:je=!0;break;case b:return je=D._init,Q(je(D._payload),X,re,ce,Ee)}}if(je)return Ee=Ee(D),je=ce===""?"."+Ot(D,0):ce,ye(Ee)?(re="",je!=null&&(re=je.replace(N,"$&/")+"/"),Q(Ee,X,re,"",function(hi){return hi})):Ee!=null&&(U(Ee)&&(Ee=M(Ee,re+(Ee.key==null||D&&D.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+je)),X.push(Ee)),1;je=0;var Ft=ce===""?".":ce+":";if(ye(D))for(var lt=0;lt<D.length;lt++)ce=D[lt],xe=Ft+Ot(ce,lt),je+=Q(ce,X,re,xe,Ee);else if(lt=C(D),typeof lt=="function")for(D=lt.call(D),lt=0;!(ce=D.next()).done;)ce=ce.value,xe=Ft+Ot(ce,lt++),je+=Q(ce,X,re,xe,Ee);else if(xe==="object"){if(typeof D.then=="function")return Q($t(D),X,re,ce,Ee);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return je}function ae(D,X,re){if(D==null)return D;var ce=[],Ee=0;return Q(D,ce,"","",function(xe){return X.call(re,xe,Ee++)}),ce}function pe(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(re){(D._status===0||D._status===-1)&&(D._status=1,D._result=re)},function(re){(D._status===0||D._status===-1)&&(D._status=2,D._result=re)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var Be=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Ge={map:ae,forEach:function(D,X,re){ae(D,function(){X.apply(this,arguments)},re)},count:function(D){var X=0;return ae(D,function(){X++}),X},toArray:function(D){return ae(D,function(X){return X})||[]},only:function(D){if(!U(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ae.Activity=w,Ae.Children=Ge,Ae.Component=W,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=F,Ae.StrictMode=r,Ae.Suspense=p,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(D){return I.H.useMemoCache(D)}},Ae.cache=function(D){return function(){return D.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(D,X,re){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ce=B({},D.props),Ee=D.key;if(X!=null)for(xe in X.key!==void 0&&(Ee=""+X.key),X)!R.call(X,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&X.ref===void 0||(ce[xe]=X[xe]);var xe=arguments.length-2;if(xe===1)ce.children=re;else if(1<xe){for(var je=Array(xe),Ft=0;Ft<xe;Ft++)je[Ft]=arguments[Ft+2];ce.children=je}return x(D.type,Ee,ce)},Ae.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},Ae.createElement=function(D,X,re){var ce,Ee={},xe=null;if(X!=null)for(ce in X.key!==void 0&&(xe=""+X.key),X)R.call(X,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=X[ce]);var je=arguments.length-2;if(je===1)Ee.children=re;else if(1<je){for(var Ft=Array(je),lt=0;lt<je;lt++)Ft[lt]=arguments[lt+2];Ee.children=Ft}if(D&&D.defaultProps)for(ce in je=D.defaultProps,je)Ee[ce]===void 0&&(Ee[ce]=je[ce]);return x(D,xe,Ee)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(D){return{$$typeof:m,render:D}},Ae.isValidElement=U,Ae.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:pe}},Ae.memo=function(D,X){return{$$typeof:g,type:D,compare:X===void 0?null:X}},Ae.startTransition=function(D){var X=I.T,re={};I.T=re;try{var ce=D(),Ee=I.S;Ee!==null&&Ee(re,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(oe,Be)}catch(xe){Be(xe)}finally{X!==null&&re.types!==null&&(X.types=re.types),I.T=X}},Ae.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ae.use=function(D){return I.H.use(D)},Ae.useActionState=function(D,X,re){return I.H.useActionState(D,X,re)},Ae.useCallback=function(D,X){return I.H.useCallback(D,X)},Ae.useContext=function(D){return I.H.useContext(D)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(D,X){return I.H.useDeferredValue(D,X)},Ae.useEffect=function(D,X){return I.H.useEffect(D,X)},Ae.useEffectEvent=function(D){return I.H.useEffectEvent(D)},Ae.useId=function(){return I.H.useId()},Ae.useImperativeHandle=function(D,X,re){return I.H.useImperativeHandle(D,X,re)},Ae.useInsertionEffect=function(D,X){return I.H.useInsertionEffect(D,X)},Ae.useLayoutEffect=function(D,X){return I.H.useLayoutEffect(D,X)},Ae.useMemo=function(D,X){return I.H.useMemo(D,X)},Ae.useOptimistic=function(D,X){return I.H.useOptimistic(D,X)},Ae.useReducer=function(D,X,re){return I.H.useReducer(D,X,re)},Ae.useRef=function(D){return I.H.useRef(D)},Ae.useState=function(D){return I.H.useState(D)},Ae.useSyncExternalStore=function(D,X,re){return I.H.useSyncExternalStore(D,X,re)},Ae.useTransition=function(){return I.H.useTransition()},Ae.version="19.2.3",Ae}var e0;function Lp(){return e0||(e0=1,Rm.exports=DA()),Rm.exports}var bt=Lp();const PA=lw(bt);var Im={exports:{}},Xl={},Cm={exports:{}},xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function MA(){return t0||(t0=1,(function(i){function e(Q,ae){var pe=Q.length;Q.push(ae);e:for(;0<pe;){var Be=pe-1>>>1,Ge=Q[Be];if(0<o(Ge,ae))Q[Be]=ae,Q[pe]=Ge,pe=Be;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ae=Q[0],pe=Q.pop();if(pe!==ae){Q[0]=pe;e:for(var Be=0,Ge=Q.length,D=Ge>>>1;Be<D;){var X=2*(Be+1)-1,re=Q[X],ce=X+1,Ee=Q[ce];if(0>o(re,pe))ce<Ge&&0>o(Ee,re)?(Q[Be]=Ee,Q[ce]=pe,Be=ce):(Q[Be]=re,Q[X]=pe,Be=X);else if(ce<Ge&&0>o(Ee,pe))Q[Be]=Ee,Q[ce]=pe,Be=ce;else break e}}return ae}function o(Q,ae){var pe=Q.sortIndex-ae.sortIndex;return pe!==0?pe:Q.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();i.unstable_now=function(){return c.now()-m}}var p=[],g=[],b=1,w=null,T=3,C=!1,P=!1,B=!1,H=!1,W=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ie(Q){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=Q)r(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(g)}}function ye(Q){if(B=!1,ie(Q),!P)if(t(p)!==null)P=!0,oe||(oe=!0,j());else{var ae=t(g);ae!==null&&$t(ye,ae.startTime-Q)}}var oe=!1,I=-1,R=5,x=-1;function M(){return H?!0:!(i.unstable_now()-x<R)}function U(){if(H=!1,oe){var Q=i.unstable_now();x=Q;var ae=!0;try{e:{P=!1,B&&(B=!1,te(I),I=-1),C=!0;var pe=T;try{t:{for(ie(Q),w=t(p);w!==null&&!(w.expirationTime>Q&&M());){var Be=w.callback;if(typeof Be=="function"){w.callback=null,T=w.priorityLevel;var Ge=Be(w.expirationTime<=Q);if(Q=i.unstable_now(),typeof Ge=="function"){w.callback=Ge,ie(Q),ae=!0;break t}w===t(p)&&r(p),ie(Q)}else r(p);w=t(p)}if(w!==null)ae=!0;else{var D=t(g);D!==null&&$t(ye,D.startTime-Q),ae=!1}}break e}finally{w=null,T=pe,C=!1}ae=void 0}}finally{ae?j():oe=!1}}}var j;if(typeof F=="function")j=function(){F(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ot=N.port2;N.port1.onmessage=U,j=function(){Ot.postMessage(null)}}else j=function(){W(U,0)};function $t(Q,ae){I=W(function(){Q(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var pe=T;T=ae;try{return Q()}finally{T=pe}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=T;T=Q;try{return ae()}finally{T=pe}},i.unstable_scheduleCallback=function(Q,ae,pe){var Be=i.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Be+pe:Be):pe=Be,Q){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=pe+Ge,Q={id:b++,callback:ae,priorityLevel:Q,startTime:pe,expirationTime:Ge,sortIndex:-1},pe>Be?(Q.sortIndex=pe,e(g,Q),t(p)===null&&Q===t(g)&&(B?(te(I),I=-1):B=!0,$t(ye,pe-Be))):(Q.sortIndex=Ge,e(p,Q),P||C||(P=!0,oe||(oe=!0,j()))),Q},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(Q){var ae=T;return function(){var pe=T;T=ae;try{return Q.apply(this,arguments)}finally{T=pe}}}})(xm)),xm}var n0;function UA(){return n0||(n0=1,Cm.exports=MA()),Cm.exports}var Om={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function VA(){if(i0)return on;i0=1;var i=Lp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:b}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,b)},on.flushSync=function(p){var g=c.T,b=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=g,r.p=b,r.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,w=m(b,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?r.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:C}):b==="script"&&r.d.X(p,{crossOrigin:w,integrity:T,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);r.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=m(b,g.crossOrigin);r.d.L(p,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);r.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(p)},on.requestFormReset=function(p){r.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,b){return c.H.useFormState(p,g,b)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.3",on}var r0;function jA(){if(r0)return Om.exports;r0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Om.exports=VA(),Om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function LA(){if(s0)return Xl;s0=1;var i=UA(),e=Lp(),t=jA();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,u=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return p(d),n;if(f===u)return p(d),s;f=f.sibling}throw Error(r(188))}if(a.return!==u.return)a=d,u=f;else{for(var _=!1,E=d.child;E;){if(E===a){_=!0,a=d,u=f;break}if(E===u){_=!0,u=d,a=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===a){_=!0,a=f,u=d;break}if(E===u){_=!0,u=f,a=d;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function b(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=b(n),s!==null)return s;n=n.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function Ot(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case W:return"Profiler";case H:return"StrictMode";case ye:return"Suspense";case oe:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case F:return n.displayName||"Context";case te:return(n._context.displayName||"Context")+".Consumer";case ie:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return s=n.displayName||null,s!==null?s:Ot(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return Ot(n(s))}catch{}}return null}var $t=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Be=[],Ge=-1;function D(n){return{current:n}}function X(n){0>Ge||(n.current=Be[Ge],Be[Ge]=null,Ge--)}function re(n,s){Ge++,Be[Ge]=n.current,n.current=s}var ce=D(null),Ee=D(null),xe=D(null),je=D(null);function Ft(n,s){switch(re(xe,s),re(Ee,n),re(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?bv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=bv(s),n=wv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(ce),re(ce,n)}function lt(){X(ce),X(Ee),X(xe)}function hi(n){n.memoizedState!==null&&re(je,n);var s=ce.current,a=wv(s,n.type);s!==a&&(re(Ee,n),re(ce,a))}function Pi(n){Ee.current===n&&(X(ce),X(Ee)),je.current===n&&(X(je),Fl._currentValue=pe)}var Is,Ta;function Zn(n){if(Is===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Is=s&&s[1]||"",Ta=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+n+Ta}var Cs=!1;function Sa(n,s){if(!n||Cs)return"";Cs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var $=G}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(G){$=G}n.call(Z.prototype)}}else{try{throw Error()}catch(G){$=G}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&$&&typeof G.stack=="string")return[G.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=u.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var O=_.split(`
`),q=E.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===q.length)for(u=O.length-1,d=q.length-1;1<=u&&0<=d&&O[u]!==q[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==q[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==q[d]){var Y=`
`+O[u].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=u&&0<=d);break}}}finally{Cs=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Zn(a):""}function wd(n,s){switch(n.tag){case 26:case 27:case 5:return Zn(n.type);case 16:return Zn("Lazy");case 13:return n.child!==s&&s!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Sa(n.type,!1);case 11:return Sa(n.type.render,!1);case 1:return Sa(n.type,!0);case 31:return Zn("Activity");default:return""}}function Vu(n){try{var s="",a=null;do s+=wd(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Aa=Object.prototype.hasOwnProperty,xs=i.unstable_scheduleCallback,Ra=i.unstable_cancelCallback,Ed=i.unstable_shouldYield,Yo=i.unstable_requestPaint,Gt=i.unstable_now,ju=i.unstable_getCurrentPriorityLevel,Nt=i.unstable_ImmediatePriority,jt=i.unstable_UserBlockingPriority,Mi=i.unstable_NormalPriority,Lu=i.unstable_LowPriority,Qo=i.unstable_IdlePriority,Td=i.log,Os=i.unstable_setDisableYieldValue,_r=null,sn=null;function jn(n){if(typeof Td=="function"&&Os(n),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(_r,n)}catch{}}var dn=Math.clz32?Math.clz32:zu,Sd=Math.log,Xo=Math.LN2;function zu(n){return n>>>=0,n===0?32:31-(Sd(n)/Xo|0)|0}var Ns=256,di=262144,vr=4194304;function ei(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ln(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var d=0,f=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~f,u!==0?d=ei(u):(_&=E,_!==0?d=ei(_):a||(a=E&~n,a!==0&&(d=ei(a))))):(E=u&~f,E!==0?d=ei(E):_!==0?d=ei(_):a||(a=u&~n,a!==0&&(d=ei(a)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:d}function br(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ia(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var n=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),n}function Ui(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function wr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Kt(n,s,a,u,d,f){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,O=n.expirationTimes,q=n.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-dn(a),Z=1<<Y;E[Y]=0,O[Y]=-1;var $=q[Y];if($!==null)for(q[Y]=null,Y=0;Y<$.length;Y++){var G=$[Y];G!==null&&(G.lane&=-536870913)}a&=~Z}u!==0&&Wo(n,u,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(_&~s))}function Wo(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-dn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Er(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-dn(a),d=1<<u;d&s|n[u]&s&&(n[u]|=s),a&=~d}}function Tr(n,s){var a=s&-s;return a=(a&42)!==0?1:Zo(a),(a&(n.suspendedLanes|s))!==0?0:a}function Zo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function el(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Vi(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:$v(n.type))}function Bu(n,s){var a=ae.p;try{return ae.p=n,s()}finally{ae.p=a}}var fi=Math.random().toString(36).slice(2),dt="__reactFiber$"+fi,Yt="__reactProps$"+fi,mi="__reactContainer$"+fi,Sr="__reactEvents$"+fi,pi="__reactListeners$"+fi,qu="__reactHandles$"+fi,tl="__reactResources$"+fi,ji="__reactMarker$"+fi;function ks(n){delete n[dt],delete n[Yt],delete n[Sr],delete n[pi],delete n[qu]}function Li(n){var s=n[dt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[mi]||a[dt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Cv(n);n!==null;){if(a=n[dt])return a;n=Cv(n)}return s}n=a,a=n.parentNode}return null}function zi(n){if(n=n[dt]||n[mi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ds(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ti(n){var s=n[tl];return s||(s=n[tl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function yt(n){n[ji]=!0}var Ca=new Set,Ar={};function fn(n,s){gi(n,s),gi(n+"Capture",s)}function gi(n,s){for(Ar[n]=s,n=0;n<s.length;n++)Ca.add(s[n])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},il={};function Hu(n){return Aa.call(il,n)?!0:Aa.call(nl,n)?!1:Ad.test(n)?il[n]=!0:(nl[n]=!0,!1)}function Rr(n,s,a){if(Hu(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Ir(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function zn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $u(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Rd(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,f=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function xa(n){if(!n._valueTracker){var s=$u(n)?"checked":"value";n._valueTracker=Rd(n,s,""+n[s])}}function rl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=$u(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function Oa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bi=/[\n"\\]/g;function ft(n){return n.replace(Bi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cr(n,s,a,u,d,f,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+mn(s)):n.value!==""+mn(s)&&(n.value=""+mn(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Na(n,_,mn(s)):a!=null?Na(n,_,mn(a)):u!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+mn(E):n.removeAttribute("name")}function Ps(n,s,a,u,d,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null)){xa(n);return}a=a!=null?""+mn(a):"",s=s!=null?""+mn(s):a,E||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),xa(n)}function Na(n,s,a){s==="number"&&Oa(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function qe(n,s,a,u){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+mn(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Ms(n,s,a){if(s!=null&&(s=""+mn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+mn(a):""}function xr(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(r(92));if($t(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=mn(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),xa(n)}function Bn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||Id.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Fu(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&sl(n,d,u)}else for(var f in s)s.hasOwnProperty(f)&&sl(n,f,s[f])}function al(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yi(n){return xd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Lt(){}var ka=null;function Da(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qi=null,Rn=null;function Gu(n){var s=zi(n);if(s&&(n=s.stateNode)){var a=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Cr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ft(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var d=u[Yt]||null;if(!d)throw Error(r(90));Cr(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&rl(u)}break e;case"textarea":Ms(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&qe(n,!!a.multiple,s,!1)}}}var ol=!1;function Ku(n,s,a){if(ol)return n(s,a);ol=!0;try{var u=n(s);return u}finally{if(ol=!1,(qi!==null||Rn!==null)&&(Hc(),qi&&(s=qi,n=Rn,Rn=qi=null,Gu(s),n)))for(s=0;s<n.length;s++)Gu(n[s])}}function _n(n,s){var a=n.stateNode;if(a===null)return null;var u=a[Yt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=!1;if(ni)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){ll=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{ll=!1}var In=null,Pa=null,vi=null;function Or(){if(vi)return vi;var n,s=Pa,a=s.length,u,d="value"in In?In.value:In.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var _=a-n;for(u=1;u<=_&&s[a-u]===d[f-u];u++);return vi=d.slice(n,1<u?1-u:void 0)}function Us(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function nt(){return!1}function an(n){function s(a,u,d,f,_){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Nr:nt,this.isPropagationStopped=nt,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=an(Hi),kr=w({},Hi,{view:0,detail:0}),Yu=an(kr),Dr,Ma,pn,js=w({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pn&&(pn&&n.type==="mousemove"?(Dr=n.screenX-pn.screenX,Ma=n.screenY-pn.screenY):Ma=Dr=0,pn=n),Dr)},movementY:function(n){return"movementY"in n?n.movementY:Ma}}),Qu=an(js),Ls=w({},js,{dataTransfer:0}),Xu=an(Ls),ul=w({},kr,{relatedTarget:0}),Pr=an(ul),Ju=w({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ua=an(Ju),Od=w({},Hi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wu=an(Od),zs=w({},Hi,{data:0}),cl=an(zs),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=dl[n])?!!s[n]:!1}function Mr(){return ec}var tc=w({},kr,{key:function(n){if(n.key){var s=Zu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Us(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(n){return n.type==="keypress"?Us(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Us(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nc=an(tc),$i=w({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=an($i),ic=w({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),rc=an(ic),sc=w({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=an(sc),gn=w({},js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=an(gn),oc=w({},Hi,{newState:0,oldState:0}),Ur=an(oc),h=[9,13,27,32],y=ni&&"CompositionEvent"in window,v=null;ni&&"documentMode"in document&&(v=document.documentMode);var S=ni&&"TextEvent"in window&&!v,L=ni&&(!y||v&&8<v&&11>=v),K=" ",se=!1;function Ke(n,s){switch(n){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Et(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Oe=!1;function zt(n,s){switch(n){case"compositionend":return Et(s);case"keypress":return s.which!==32?null:(se=!0,K);case"textInput":return n=s.data,n===K&&se?null:n;default:return null}}function Bt(n,s){if(Oe)return n==="compositionend"||!y&&Ke(n,s)?(n=Or(),vi=Pa=In=null,Oe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return L&&s.locale!=="ko"?null:s.data;default:return null}}var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Vr[n.type]:s==="textarea"}function Bs(n,s,a,u){qi?Rn?Rn.push(u):Rn=[u]:qi=u,s=Xc(s,"onChange"),0<s.length&&(a=new Vs("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Fi=null,ml=null;function rS(n){mv(n,0)}function lc(n){var s=Ds(n);if(rl(s))return n}function Dg(n,s){if(n==="change")return s}var Pg=!1;if(ni){var Nd;if(ni){var kd="oninput"in document;if(!kd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),kd=typeof Mg.oninput=="function"}Nd=kd}else Nd=!1;Pg=Nd&&(!document.documentMode||9<document.documentMode)}function Ug(){Fi&&(Fi.detachEvent("onpropertychange",Vg),ml=Fi=null)}function Vg(n){if(n.propertyName==="value"&&lc(ml)){var s=[];Bs(s,ml,n,Da(n)),Ku(rS,s)}}function sS(n,s,a){n==="focusin"?(Ug(),Fi=s,ml=a,Fi.attachEvent("onpropertychange",Vg)):n==="focusout"&&Ug()}function aS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lc(ml)}function oS(n,s){if(n==="click")return lc(s)}function lS(n,s){if(n==="input"||n==="change")return lc(s)}function uS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Cn=typeof Object.is=="function"?Object.is:uS;function pl(n,s){if(Cn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!Aa.call(s,d)||!Cn(n[d],s[d]))return!1}return!0}function jg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Lg(n,s){var a=jg(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jg(a)}}function zg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?zg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Bg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Oa(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Oa(n.document)}return s}function Dd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var cS=ni&&"documentMode"in document&&11>=document.documentMode,ja=null,Pd=null,gl=null,Md=!1;function qg(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Md||ja==null||ja!==Oa(u)||(u=ja,"selectionStart"in u&&Dd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gl&&pl(gl,u)||(gl=u,u=Xc(Pd,"onSelect"),0<u.length&&(s=new Vs("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=ja)))}function qs(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var La={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Ud={},Hg={};ni&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Hs(n){if(Ud[n])return Ud[n];if(!La[n])return n;var s=La[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Hg)return Ud[n]=s[a];return n}var $g=Hs("animationend"),Fg=Hs("animationiteration"),Gg=Hs("animationstart"),hS=Hs("transitionrun"),dS=Hs("transitionstart"),fS=Hs("transitioncancel"),Kg=Hs("transitionend"),Yg=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function ii(n,s){Yg.set(n,s),fn(s,[n])}var uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qn=[],za=0,jd=0;function cc(){for(var n=za,s=jd=za=0;s<n;){var a=qn[s];qn[s++]=null;var u=qn[s];qn[s++]=null;var d=qn[s];qn[s++]=null;var f=qn[s];if(qn[s++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}f!==0&&Qg(a,d,f)}}function hc(n,s,a,u){qn[za++]=n,qn[za++]=s,qn[za++]=a,qn[za++]=u,jd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ld(n,s,a,u){return hc(n,s,a,u),dc(n)}function $s(n,s){return hc(n,null,null,s),dc(n)}function Qg(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var d=!1,f=n.return;f!==null;)f.childLanes|=a,u=f.alternate,u!==null&&(u.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&s!==null&&(d=31-dn(a),n=f.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=a|536870912),f):null}function dc(n){if(50<jl)throw jl=0,Qf=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ba={};function mS(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,s,a,u){return new mS(n,s,a,u)}function zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gi(n,s){var a=n.alternate;return a===null?(a=xn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Xg(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function fc(n,s,a,u,d,f){var _=0;if(u=n,typeof n=="function")zd(n)&&(_=1);else if(typeof n=="string")_=vA(n,a,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case x:return n=xn(31,a,s,d),n.elementType=x,n.lanes=f,n;case B:return Fs(a.children,d,f,s);case H:_=8,d|=24;break;case W:return n=xn(12,a,s,d|2),n.elementType=W,n.lanes=f,n;case ye:return n=xn(13,a,s,d),n.elementType=ye,n.lanes=f,n;case oe:return n=xn(19,a,s,d),n.elementType=oe,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:_=10;break e;case te:_=9;break e;case ie:_=11;break e;case I:_=14;break e;case R:_=16,u=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=xn(_,a,s,d),s.elementType=n,s.type=u,s.lanes=f,s}function Fs(n,s,a,u){return n=xn(7,n,u,s),n.lanes=a,n}function Bd(n,s,a){return n=xn(6,n,null,s),n.lanes=a,n}function Jg(n){var s=xn(18,null,null,0);return s.stateNode=n,s}function qd(n,s,a){return s=xn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Wg=new WeakMap;function Hn(n,s){if(typeof n=="object"&&n!==null){var a=Wg.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Vu(s)},Wg.set(n,s),s)}return{value:n,source:s,stack:Vu(s)}}var qa=[],Ha=0,mc=null,yl=0,$n=[],Fn=0,jr=null,bi=1,wi="";function Ki(n,s){qa[Ha++]=yl,qa[Ha++]=mc,mc=n,yl=s}function Zg(n,s,a){$n[Fn++]=bi,$n[Fn++]=wi,$n[Fn++]=jr,jr=n;var u=bi;n=wi;var d=32-dn(u)-1;u&=~(1<<d),a+=1;var f=32-dn(s)+d;if(30<f){var _=d-d%5;f=(u&(1<<_)-1).toString(32),u>>=_,d-=_,bi=1<<32-dn(s)+d|a<<d|u,wi=f+n}else bi=1<<f|a<<d|u,wi=n}function Hd(n){n.return!==null&&(Ki(n,1),Zg(n,1,0))}function $d(n){for(;n===mc;)mc=qa[--Ha],qa[Ha]=null,yl=qa[--Ha],qa[Ha]=null;for(;n===jr;)jr=$n[--Fn],$n[Fn]=null,wi=$n[--Fn],$n[Fn]=null,bi=$n[--Fn],$n[Fn]=null}function ey(n,s){$n[Fn++]=bi,$n[Fn++]=wi,$n[Fn++]=jr,bi=s.id,wi=s.overflow,jr=n}var Qt=null,it=null,Le=!1,Lr=null,Gn=!1,Fd=Error(r(519));function zr(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Hn(s,n)),Fd}function ty(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[dt]=n,s[Yt]=u,a){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(a=0;a<zl.length;a++)De(zl[a],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":De("invalid",s),Ps(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":De("invalid",s);break;case"textarea":De("invalid",s),xr(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||_v(s.textContent,a)?(u.popover!=null&&(De("beforetoggle",s),De("toggle",s)),u.onScroll!=null&&De("scroll",s),u.onScrollEnd!=null&&De("scrollend",s),u.onClick!=null&&(s.onclick=Lt),s=!0):s=!1,s||zr(n,!0)}function ny(n){for(Qt=n.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Qt=Qt.return}}function $a(n){if(n!==Qt)return!1;if(!Le)return ny(n),Le=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||cm(n.type,n.memoizedProps)),a=!a),a&&it&&zr(n),ny(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=Iv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));it=Iv(n)}else s===27?(s=it,es(n.type)?(n=pm,pm=null,it=n):it=s):it=Qt?Yn(n.stateNode.nextSibling):null;return!0}function Gs(){it=Qt=null,Le=!1}function Gd(){var n=Lr;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),Lr=null),n}function _l(n){Lr===null?Lr=[n]:Lr.push(n)}var Kd=D(null),Ks=null,Yi=null;function Br(n,s,a){re(Kd,s._currentValue),s._currentValue=a}function Qi(n){n._currentValue=Kd.current,X(Kd)}function Yd(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Qd(n,s,a,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=d;for(var O=0;O<s.length;O++)if(E.context===s[O]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Yd(f.return,a,n),u||(_=null);break e}f=E.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Yd(_,a,n),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===n){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Fa(n,s,a,u){n=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=d.type;Cn(d.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(d===je.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Fl):n=[Fl])}d=d.return}n!==null&&Qd(s,n,a,u),s.flags|=262144}function pc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ys(n){Ks=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return iy(Ks,n)}function gc(n,s){return Ks===null&&Ys(n),iy(n,s)}function iy(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yi===null){if(n===null)throw Error(r(308));Yi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Yi=Yi.next=s;return a}var pS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},gS=i.unstable_scheduleCallback,yS=i.unstable_NormalPriority,Tt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new pS,data:new Map,refCount:0}}function vl(n){n.refCount--,n.refCount===0&&gS(yS,function(){n.controller.abort()})}var bl=null,Jd=0,Ga=0,Ka=null;function _S(n,s){if(bl===null){var a=bl=[];Jd=0,Ga=tm(),Ka={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Jd++,s.then(ry,ry),s}function ry(){if(--Jd===0&&bl!==null){Ka!==null&&(Ka.status="fulfilled");var n=bl;bl=null,Ga=0,Ka=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function vS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var sy=Q.S;Q.S=function(n,s){q_=Gt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_S(n,s),sy!==null&&sy(n,s)};var Qs=D(null);function Wd(){var n=Qs.current;return n!==null?n:et.pooledCache}function yc(n,s){s===null?re(Qs,Qs.current):re(Qs,s.pool)}function ay(){var n=Wd();return n===null?null:{parent:Tt._currentValue,pool:n}}var Ya=Error(r(460)),Zd=Error(r(474)),_c=Error(r(542)),vc={then:function(){}};function oy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ly(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(Lt,Lt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cy(n),n;default:if(typeof s.status=="string")s.then(Lt,Lt);else{if(n=et,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cy(n),n}throw Js=s,Ya}}function Xs(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Js=a,Ya):a}}var Js=null;function uy(){if(Js===null)throw Error(r(459));var n=Js;return Js=null,n}function cy(n){if(n===Ya||n===_c)throw Error(r(483))}var Qa=null,wl=0;function bc(n){var s=wl;return wl+=1,Qa===null&&(Qa=[]),ly(Qa,n,s)}function El(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function wc(n,s){throw s.$$typeof===T?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function hy(n){function s(V,k){if(n){var z=V.deletions;z===null?(V.deletions=[k],V.flags|=16):z.push(k)}}function a(V,k){if(!n)return null;for(;k!==null;)s(V,k),k=k.sibling;return null}function u(V){for(var k=new Map;V!==null;)V.key!==null?k.set(V.key,V):k.set(V.index,V),V=V.sibling;return k}function d(V,k){return V=Gi(V,k),V.index=0,V.sibling=null,V}function f(V,k,z){return V.index=z,n?(z=V.alternate,z!==null?(z=z.index,z<k?(V.flags|=67108866,k):z):(V.flags|=67108866,k)):(V.flags|=1048576,k)}function _(V){return n&&V.alternate===null&&(V.flags|=67108866),V}function E(V,k,z,J){return k===null||k.tag!==6?(k=Bd(z,V.mode,J),k.return=V,k):(k=d(k,z),k.return=V,k)}function O(V,k,z,J){var me=z.type;return me===B?Y(V,k,z.props.children,J,z.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&Xs(me)===k.type)?(k=d(k,z.props),El(k,z),k.return=V,k):(k=fc(z.type,z.key,z.props,null,V.mode,J),El(k,z),k.return=V,k)}function q(V,k,z,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=qd(z,V.mode,J),k.return=V,k):(k=d(k,z.children||[]),k.return=V,k)}function Y(V,k,z,J,me){return k===null||k.tag!==7?(k=Fs(z,V.mode,J,me),k.return=V,k):(k=d(k,z),k.return=V,k)}function Z(V,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Bd(""+k,V.mode,z),k.return=V,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return z=fc(k.type,k.key,k.props,null,V.mode,z),El(z,k),z.return=V,z;case P:return k=qd(k,V.mode,z),k.return=V,k;case R:return k=Xs(k),Z(V,k,z)}if($t(k)||j(k))return k=Fs(k,V.mode,z,null),k.return=V,k;if(typeof k.then=="function")return Z(V,bc(k),z);if(k.$$typeof===F)return Z(V,gc(V,k),z);wc(V,k)}return null}function $(V,k,z,J){var me=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:E(V,k,""+z,J);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return z.key===me?O(V,k,z,J):null;case P:return z.key===me?q(V,k,z,J):null;case R:return z=Xs(z),$(V,k,z,J)}if($t(z)||j(z))return me!==null?null:Y(V,k,z,J,null);if(typeof z.then=="function")return $(V,k,bc(z),J);if(z.$$typeof===F)return $(V,k,gc(V,z),J);wc(V,z)}return null}function G(V,k,z,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return V=V.get(z)||null,E(k,V,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return V=V.get(J.key===null?z:J.key)||null,O(k,V,J,me);case P:return V=V.get(J.key===null?z:J.key)||null,q(k,V,J,me);case R:return J=Xs(J),G(V,k,z,J,me)}if($t(J)||j(J))return V=V.get(z)||null,Y(k,V,J,me,null);if(typeof J.then=="function")return G(V,k,z,bc(J),me);if(J.$$typeof===F)return G(V,k,z,gc(k,J),me);wc(k,J)}return null}function ue(V,k,z,J){for(var me=null,He=null,he=k,Ce=k=0,Me=null;he!==null&&Ce<z.length;Ce++){he.index>Ce?(Me=he,he=null):Me=he.sibling;var $e=$(V,he,z[Ce],J);if($e===null){he===null&&(he=Me);break}n&&he&&$e.alternate===null&&s(V,he),k=f($e,k,Ce),He===null?me=$e:He.sibling=$e,He=$e,he=Me}if(Ce===z.length)return a(V,he),Le&&Ki(V,Ce),me;if(he===null){for(;Ce<z.length;Ce++)he=Z(V,z[Ce],J),he!==null&&(k=f(he,k,Ce),He===null?me=he:He.sibling=he,He=he);return Le&&Ki(V,Ce),me}for(he=u(he);Ce<z.length;Ce++)Me=G(he,V,Ce,z[Ce],J),Me!==null&&(n&&Me.alternate!==null&&he.delete(Me.key===null?Ce:Me.key),k=f(Me,k,Ce),He===null?me=Me:He.sibling=Me,He=Me);return n&&he.forEach(function(ss){return s(V,ss)}),Le&&Ki(V,Ce),me}function _e(V,k,z,J){if(z==null)throw Error(r(151));for(var me=null,He=null,he=k,Ce=k=0,Me=null,$e=z.next();he!==null&&!$e.done;Ce++,$e=z.next()){he.index>Ce?(Me=he,he=null):Me=he.sibling;var ss=$(V,he,$e.value,J);if(ss===null){he===null&&(he=Me);break}n&&he&&ss.alternate===null&&s(V,he),k=f(ss,k,Ce),He===null?me=ss:He.sibling=ss,He=ss,he=Me}if($e.done)return a(V,he),Le&&Ki(V,Ce),me;if(he===null){for(;!$e.done;Ce++,$e=z.next())$e=Z(V,$e.value,J),$e!==null&&(k=f($e,k,Ce),He===null?me=$e:He.sibling=$e,He=$e);return Le&&Ki(V,Ce),me}for(he=u(he);!$e.done;Ce++,$e=z.next())$e=G(he,V,Ce,$e.value,J),$e!==null&&(n&&$e.alternate!==null&&he.delete($e.key===null?Ce:$e.key),k=f($e,k,Ce),He===null?me=$e:He.sibling=$e,He=$e);return n&&he.forEach(function(OA){return s(V,OA)}),Le&&Ki(V,Ce),me}function Ze(V,k,z,J){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case C:e:{for(var me=z.key;k!==null;){if(k.key===me){if(me=z.type,me===B){if(k.tag===7){a(V,k.sibling),J=d(k,z.props.children),J.return=V,V=J;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&Xs(me)===k.type){a(V,k.sibling),J=d(k,z.props),El(J,z),J.return=V,V=J;break e}a(V,k);break}else s(V,k);k=k.sibling}z.type===B?(J=Fs(z.props.children,V.mode,J,z.key),J.return=V,V=J):(J=fc(z.type,z.key,z.props,null,V.mode,J),El(J,z),J.return=V,V=J)}return _(V);case P:e:{for(me=z.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(V,k.sibling),J=d(k,z.children||[]),J.return=V,V=J;break e}else{a(V,k);break}else s(V,k);k=k.sibling}J=qd(z,V.mode,J),J.return=V,V=J}return _(V);case R:return z=Xs(z),Ze(V,k,z,J)}if($t(z))return ue(V,k,z,J);if(j(z)){if(me=j(z),typeof me!="function")throw Error(r(150));return z=me.call(z),_e(V,k,z,J)}if(typeof z.then=="function")return Ze(V,k,bc(z),J);if(z.$$typeof===F)return Ze(V,k,gc(V,z),J);wc(V,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(V,k.sibling),J=d(k,z),J.return=V,V=J):(a(V,k),J=Bd(z,V.mode,J),J.return=V,V=J),_(V)):a(V,k)}return function(V,k,z,J){try{wl=0;var me=Ze(V,k,z,J);return Qa=null,me}catch(he){if(he===Ya||he===_c)throw he;var He=xn(29,he,null,V.mode);return He.lanes=J,He.return=V,He}finally{}}}var Ws=hy(!0),dy=hy(!1),qr=!1;function ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Hr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $r(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Fe&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=dc(n),Qg(n,null,a),s}return hc(n,u,s,a),dc(n)}function Tl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Er(n,a)}}function nf(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var rf=!1;function Sl(){if(rf){var n=Ka;if(n!==null)throw n}}function Al(n,s,a,u){rf=!1;var d=n.updateQueue;qr=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var O=E,q=O.next;O.next=null,_===null?f=q:_.next=q,_=O;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==_&&(E===null?Y.firstBaseUpdate=q:E.next=q,Y.lastBaseUpdate=O))}if(f!==null){var Z=d.baseState;_=0,Y=q=O=null,E=f;do{var $=E.lane&-536870913,G=$!==E.lane;if(G?(Pe&$)===$:(u&$)===$){$!==0&&$===Ga&&(rf=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ue=n,_e=E;$=s;var Ze=a;switch(_e.tag){case 1:if(ue=_e.payload,typeof ue=="function"){Z=ue.call(Ze,Z,$);break e}Z=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=_e.payload,$=typeof ue=="function"?ue.call(Ze,Z,$):ue,$==null)break e;Z=w({},Z,$);break e;case 2:qr=!0}}$=E.callback,$!==null&&(n.flags|=64,G&&(n.flags|=8192),G=d.callbacks,G===null?d.callbacks=[$]:G.push($))}else G={lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(q=Y=G,O=Z):Y=Y.next=G,_|=$;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;G=E,E=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);Y===null&&(O=Z),d.baseState=O,d.firstBaseUpdate=q,d.lastBaseUpdate=Y,f===null&&(d.shared.lanes=0),Qr|=_,n.lanes=_,n.memoizedState=Z}}function fy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function my(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)fy(a[n],s)}var Xa=D(null),Ec=D(0);function py(n,s){n=rr,re(Ec,n),re(Xa,s),rr=n|s.baseLanes}function sf(){re(Ec,rr),re(Xa,Xa.current)}function af(){rr=Ec.current,X(Xa),X(Ec)}var On=D(null),Kn=null;function Fr(n){var s=n.alternate;re(_t,_t.current&1),re(On,n),Kn===null&&(s===null||Xa.current!==null||s.memoizedState!==null)&&(Kn=n)}function of(n){re(_t,_t.current),re(On,n),Kn===null&&(Kn=n)}function gy(n){n.tag===22?(re(_t,_t.current),re(On,n),Kn===null&&(Kn=n)):Gr()}function Gr(){re(_t,_t.current),re(On,On.current)}function Nn(n){X(On),Kn===n&&(Kn=null),X(_t)}var _t=D(0);function Tc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||fm(a)||mm(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xi=0,Ie=null,Je=null,St=null,Sc=!1,Ja=!1,Zs=!1,Ac=0,Rl=0,Wa=null,bS=0;function mt(){throw Error(r(321))}function lf(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Cn(n[a],s[a]))return!1;return!0}function uf(n,s,a,u,d,f){return Xi=f,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?Zy:Sf,Zs=!1,f=a(u,d),Zs=!1,Ja&&(f=_y(s,a,u,d)),yy(n),f}function yy(n){Q.H=xl;var s=Je!==null&&Je.next!==null;if(Xi=0,St=Je=Ie=null,Sc=!1,Rl=0,Wa=null,s)throw Error(r(300));n===null||At||(n=n.dependencies,n!==null&&pc(n)&&(At=!0))}function _y(n,s,a,u){Ie=n;var d=0;do{if(Ja&&(Wa=null),Rl=0,Ja=!1,25<=d)throw Error(r(301));if(d+=1,St=Je=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=e_,f=s(a,u)}while(Ja);return f}function wS(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?Il(s):s,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Ie.flags|=1024),s}function cf(){var n=Ac!==0;return Ac=0,n}function hf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function df(n){if(Sc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sc=!1}Xi=0,St=Je=Ie=null,Ja=!1,Rl=Ac=0,Wa=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ie.memoizedState=St=n:St=St.next=n,St}function vt(){if(Je===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var s=St===null?Ie.memoizedState:St.next;if(s!==null)St=s,Je=n;else{if(n===null)throw Ie.alternate===null?Error(r(467)):Error(r(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},St===null?Ie.memoizedState=St=n:St=St.next=n}return St}function Rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var s=Rl;return Rl+=1,Wa===null&&(Wa=[]),n=ly(Wa,n,s),s=Ie,(St===null?s.memoizedState:St.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Zy:Sf),n}function Ic(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===F)return Xt(n)}throw Error(r(438,String(n)))}function ff(n){var s=null,a=Ie.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Ie.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Rc(),Ie.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=M;return s.index++,a}function Ji(n,s){return typeof s=="function"?s(n):s}function Cc(n){var s=vt();return mf(s,Je,n)}function mf(n,s,a){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=n.baseQueue,f=u.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}s.baseQueue=d=f,u.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{s=d.next;var E=_=null,O=null,q=s,Y=!1;do{var Z=q.lane&-536870913;if(Z!==q.lane?(Pe&Z)===Z:(Xi&Z)===Z){var $=q.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),Z===Ga&&(Y=!0);else if((Xi&$)===$){q=q.next,$===Ga&&(Y=!0);continue}else Z={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(E=O=Z,_=f):O=O.next=Z,Ie.lanes|=$,Qr|=$;Z=q.action,Zs&&a(f,Z),f=q.hasEagerState?q.eagerState:a(f,Z)}else $={lane:Z,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(E=O=$,_=f):O=O.next=$,Ie.lanes|=Z,Qr|=Z;q=q.next}while(q!==null&&q!==s);if(O===null?_=f:O.next=E,!Cn(f,n.memoizedState)&&(At=!0,Y&&(a=Ka,a!==null)))throw a;n.memoizedState=f,n.baseState=_,n.baseQueue=O,u.lastRenderedState=f}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function pf(n){var s=vt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=n(f,_.action),_=_.next;while(_!==d);Cn(f,s.memoizedState)||(At=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,u]}function vy(n,s,a){var u=Ie,d=vt(),f=Le;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!Cn((Je||d).memoizedState,a);if(_&&(d.memoizedState=a,At=!0),d=d.queue,_f(Ey.bind(null,u,d,n),[n]),d.getSnapshot!==s||_||St!==null&&St.memoizedState.tag&1){if(u.flags|=2048,Za(9,{destroy:void 0},wy.bind(null,u,d,a,s),null),et===null)throw Error(r(349));f||(Xi&127)!==0||by(u,s,a)}return a}function by(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ie.updateQueue,s===null?(s=Rc(),Ie.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function wy(n,s,a,u){s.value=a,s.getSnapshot=u,Ty(s)&&Sy(n)}function Ey(n,s,a){return a(function(){Ty(s)&&Sy(n)})}function Ty(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Cn(n,a)}catch{return!0}}function Sy(n){var s=$s(n,2);s!==null&&Sn(s,n,2)}function gf(n){var s=yn();if(typeof n=="function"){var a=n;if(n=a(),Zs){jn(!0);try{a()}finally{jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},s}function Ay(n,s,a,u){return n.baseState=a,mf(n,Je,typeof u=="function"?u:Ji)}function ES(n,s,a,u,d){if(Nc(n))throw Error(r(485));if(n=s.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};Q.T!==null?a(!0):f.isTransition=!1,u(f),a=s.pending,a===null?(f.next=s.pending=f,Ry(s,f)):(f.next=a.next,s.pending=a.next=f)}}function Ry(n,s){var a=s.action,u=s.payload,d=n.state;if(s.isTransition){var f=Q.T,_={};Q.T=_;try{var E=a(d,u),O=Q.S;O!==null&&O(_,E),Iy(n,s,E)}catch(q){yf(n,s,q)}finally{f!==null&&_.types!==null&&(f.types=_.types),Q.T=f}}else try{f=a(d,u),Iy(n,s,f)}catch(q){yf(n,s,q)}}function Iy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Cy(n,s,u)},function(u){return yf(n,s,u)}):Cy(n,s,a)}function Cy(n,s,a){s.status="fulfilled",s.value=a,xy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,Ry(n,a)))}function yf(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,xy(s),s=s.next;while(s!==u)}n.action=null}function xy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Oy(n,s){return s}function Ny(n,s){if(Le){var a=et.formState;if(a!==null){e:{var u=Ie;if(Le){if(it){t:{for(var d=it,f=Gn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Yn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){it=Yn(d.nextSibling),u=d.data==="F!";break e}}zr(u)}u=!1}u&&(s=a[0])}}return a=yn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:s},a.queue=u,a=Xy.bind(null,Ie,u),u.dispatch=a,u=gf(!1),f=Tf.bind(null,Ie,!1,u.queue),u=yn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,a=ES.bind(null,Ie,d,f,a),d.dispatch=a,u.memoizedState=n,[s,a,!1]}function ky(n){var s=vt();return Dy(s,Je,n)}function Dy(n,s,a){if(s=mf(n,s,Oy)[0],n=Cc(Ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Il(s)}catch(_){throw _===Ya?_c:_}else u=s;s=vt();var d=s.queue,f=d.dispatch;return a!==s.memoizedState&&(Ie.flags|=2048,Za(9,{destroy:void 0},TS.bind(null,d,a),null)),[u,f,n]}function TS(n,s){n.action=s}function Py(n){var s=vt(),a=Je;if(a!==null)return Dy(s,a,n);vt(),s=s.memoizedState,a=vt();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Za(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=Ie.updateQueue,s===null&&(s=Rc(),Ie.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function My(){return vt().memoizedState}function xc(n,s,a,u){var d=yn();Ie.flags|=n,d.memoizedState=Za(1|s,{destroy:void 0},a,u===void 0?null:u)}function Oc(n,s,a,u){var d=vt();u=u===void 0?null:u;var f=d.memoizedState.inst;Je!==null&&u!==null&&lf(u,Je.memoizedState.deps)?d.memoizedState=Za(s,f,a,u):(Ie.flags|=n,d.memoizedState=Za(1|s,f,a,u))}function Uy(n,s){xc(8390656,8,n,s)}function _f(n,s){Oc(2048,8,n,s)}function SS(n){Ie.flags|=4;var s=Ie.updateQueue;if(s===null)s=Rc(),Ie.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function Vy(n){var s=vt().memoizedState;return SS({ref:s,nextImpl:n}),function(){if((Fe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function jy(n,s){return Oc(4,2,n,s)}function Ly(n,s){return Oc(4,4,n,s)}function zy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function By(n,s,a){a=a!=null?a.concat([n]):null,Oc(4,4,zy.bind(null,s,n),a)}function vf(){}function qy(n,s){var a=vt();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&lf(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Hy(n,s){var a=vt();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&lf(s,u[1]))return u[0];if(u=n(),Zs){jn(!0);try{n()}finally{jn(!1)}}return a.memoizedState=[u,s],u}function bf(n,s,a){return a===void 0||(Xi&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=$_(),Ie.lanes|=n,Qr|=n,a)}function $y(n,s,a,u){return Cn(a,s)?a:Xa.current!==null?(n=bf(n,a,u),Cn(n,s)||(At=!0),n):(Xi&42)===0||(Xi&1073741824)!==0&&(Pe&261930)===0?(At=!0,n.memoizedState=a):(n=$_(),Ie.lanes|=n,Qr|=n,s)}function Fy(n,s,a,u,d){var f=ae.p;ae.p=f!==0&&8>f?f:8;var _=Q.T,E={};Q.T=E,Tf(n,!1,s,a);try{var O=d(),q=Q.S;if(q!==null&&q(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Y=vS(O,u);Cl(n,s,Y,Pn(n))}else Cl(n,s,u,Pn(n))}catch(Z){Cl(n,s,{then:function(){},status:"rejected",reason:Z},Pn())}finally{ae.p=f,_!==null&&E.types!==null&&(_.types=E.types),Q.T=_}}function AS(){}function wf(n,s,a,u){if(n.tag!==5)throw Error(r(476));var d=Gy(n).queue;Fy(n,d,s,pe,a===null?AS:function(){return Ky(n),a(u)})}function Gy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:pe},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Ky(n){var s=Gy(n);s.next===null&&(s=n.alternate.memoizedState),Cl(n,s.next.queue,{},Pn())}function Ef(){return Xt(Fl)}function Yy(){return vt().memoizedState}function Qy(){return vt().memoizedState}function RS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Pn();n=Hr(a);var u=$r(s,n,a);u!==null&&(Sn(u,s,a),Tl(u,s,a)),s={cache:Xd()},n.payload=s;return}s=s.return}}function IS(n,s,a){var u=Pn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Nc(n)?Jy(s,a):(a=Ld(n,s,a,u),a!==null&&(Sn(a,n,u),Wy(a,s,u)))}function Xy(n,s,a){var u=Pn();Cl(n,s,a,u)}function Cl(n,s,a,u){var d={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nc(n))Jy(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var _=s.lastRenderedState,E=f(_,a);if(d.hasEagerState=!0,d.eagerState=E,Cn(E,_))return hc(n,s,d,0),et===null&&cc(),!1}catch{}finally{}if(a=Ld(n,s,d,u),a!==null)return Sn(a,n,u),Wy(a,s,u),!0}return!1}function Tf(n,s,a,u){if(u={lane:2,revertLane:tm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Nc(n)){if(s)throw Error(r(479))}else s=Ld(n,a,u,2),s!==null&&Sn(s,n,2)}function Nc(n){var s=n.alternate;return n===Ie||s!==null&&s===Ie}function Jy(n,s){Ja=Sc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Wy(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Er(n,a)}}var xl={readContext:Xt,use:Ic,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt};xl.useEffectEvent=mt;var Zy={readContext:Xt,use:Ic,useCallback:function(n,s){return yn().memoizedState=[n,s===void 0?null:s],n},useContext:Xt,useEffect:Uy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,xc(4194308,4,zy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return xc(4194308,4,n,s)},useInsertionEffect:function(n,s){xc(4,2,n,s)},useMemo:function(n,s){var a=yn();s=s===void 0?null:s;var u=n();if(Zs){jn(!0);try{n()}finally{jn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=yn();if(a!==void 0){var d=a(s);if(Zs){jn(!0);try{a(s)}finally{jn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=IS.bind(null,Ie,n),[u.memoizedState,n]},useRef:function(n){var s=yn();return n={current:n},s.memoizedState=n},useState:function(n){n=gf(n);var s=n.queue,a=Xy.bind(null,Ie,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:vf,useDeferredValue:function(n,s){var a=yn();return bf(a,n,s)},useTransition:function(){var n=gf(!1);return n=Fy.bind(null,Ie,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=Ie,d=yn();if(Le){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),et===null)throw Error(r(349));(Pe&127)!==0||by(u,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,Uy(Ey.bind(null,u,f,n),[n]),u.flags|=2048,Za(9,{destroy:void 0},wy.bind(null,u,f,a,s),null),a},useId:function(){var n=yn(),s=et.identifierPrefix;if(Le){var a=wi,u=bi;a=(u&~(1<<32-dn(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ac++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=bS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Ef,useFormState:Ny,useActionState:Ny,useOptimistic:function(n){var s=yn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Tf.bind(null,Ie,!0,a),a.dispatch=s,[n,s]},useMemoCache:ff,useCacheRefresh:function(){return yn().memoizedState=RS.bind(null,Ie)},useEffectEvent:function(n){var s=yn(),a={impl:n};return s.memoizedState=a,function(){if((Fe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Sf={readContext:Xt,use:Ic,useCallback:qy,useContext:Xt,useEffect:_f,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Ly,useMemo:Hy,useReducer:Cc,useRef:My,useState:function(){return Cc(Ji)},useDebugValue:vf,useDeferredValue:function(n,s){var a=vt();return $y(a,Je.memoizedState,n,s)},useTransition:function(){var n=Cc(Ji)[0],s=vt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:vy,useId:Yy,useHostTransitionStatus:Ef,useFormState:ky,useActionState:ky,useOptimistic:function(n,s){var a=vt();return Ay(a,Je,n,s)},useMemoCache:ff,useCacheRefresh:Qy};Sf.useEffectEvent=Vy;var e_={readContext:Xt,use:Ic,useCallback:qy,useContext:Xt,useEffect:_f,useImperativeHandle:By,useInsertionEffect:jy,useLayoutEffect:Ly,useMemo:Hy,useReducer:pf,useRef:My,useState:function(){return pf(Ji)},useDebugValue:vf,useDeferredValue:function(n,s){var a=vt();return Je===null?bf(a,n,s):$y(a,Je.memoizedState,n,s)},useTransition:function(){var n=pf(Ji)[0],s=vt().memoizedState;return[typeof n=="boolean"?n:Il(n),s]},useSyncExternalStore:vy,useId:Yy,useHostTransitionStatus:Ef,useFormState:Py,useActionState:Py,useOptimistic:function(n,s){var a=vt();return Je!==null?Ay(a,Je,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:ff,useCacheRefresh:Qy};e_.useEffectEvent=Vy;function Af(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:w({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Rf={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Pn(),d=Hr(u);d.payload=s,a!=null&&(d.callback=a),s=$r(n,d,u),s!==null&&(Sn(s,n,u),Tl(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Pn(),d=Hr(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=$r(n,d,u),s!==null&&(Sn(s,n,u),Tl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Pn(),u=Hr(a);u.tag=2,s!=null&&(u.callback=s),s=$r(n,u,a),s!==null&&(Sn(s,n,a),Tl(s,n,a))}};function t_(n,s,a,u,d,f,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,f,_):s.prototype&&s.prototype.isPureReactComponent?!pl(a,u)||!pl(d,f):!0}function n_(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&Rf.enqueueReplaceState(s,s.state,null)}function ea(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=w({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}function i_(n){uc(n)}function r_(n){console.error(n)}function s_(n){uc(n)}function kc(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function a_(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function If(n,s,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){kc(n,s)},a}function o_(n){return n=Hr(n),n.tag=3,n}function l_(n,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=u.value;n.payload=function(){return d(f)},n.callback=function(){a_(s,a,u)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){a_(s,a,u),typeof d!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function CS(n,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Fa(s,a,d,!0),a=On.current,a!==null){switch(a.tag){case 31:case 13:return Kn===null?$c():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===vc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Wf(n,u,d)),!1;case 22:return a.flags|=65536,u===vc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Wf(n,u,d)),!1}throw Error(r(435,a.tag))}return Wf(n,u,d),$c(),!1}if(Le)return s=On.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Fd&&(n=Error(r(422),{cause:u}),_l(Hn(n,a)))):(u!==Fd&&(s=Error(r(423),{cause:u}),_l(Hn(s,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Hn(u,a),d=If(n.stateNode,u,d),nf(n,d),pt!==4&&(pt=2)),!1;var f=Error(r(520),{cause:u});if(f=Hn(f,a),Vl===null?Vl=[f]:Vl.push(f),pt!==4&&(pt=2),s===null)return!0;u=Hn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=If(a.stateNode,u,n),nf(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Xr===null||!Xr.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=o_(d),l_(d,n,a,u),nf(a,d),!1}a=a.return}while(a!==null);return!1}var Cf=Error(r(461)),At=!1;function Jt(n,s,a,u){s.child=n===null?dy(s,null,a,u):Ws(s,n.child,a,u)}function u_(n,s,a,u,d){a=a.render;var f=s.ref;if("ref"in u){var _={};for(var E in u)E!=="ref"&&(_[E]=u[E])}else _=u;return Ys(s),u=uf(n,s,a,_,f,d),E=cf(),n!==null&&!At?(hf(n,s,d),Wi(n,s,d)):(Le&&E&&Hd(s),s.flags|=1,Jt(n,s,u,d),s.child)}function c_(n,s,a,u,d){if(n===null){var f=a.type;return typeof f=="function"&&!zd(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,h_(n,s,f,u,d)):(n=fc(a.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!Uf(n,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(_,u)&&n.ref===s.ref)return Wi(n,s,d)}return s.flags|=1,n=Gi(f,u),n.ref=s.ref,n.return=s,s.child=n}function h_(n,s,a,u,d){if(n!==null){var f=n.memoizedProps;if(pl(f,u)&&n.ref===s.ref)if(At=!1,s.pendingProps=u=f,Uf(n,d))(n.flags&131072)!==0&&(At=!0);else return s.lanes=n.lanes,Wi(n,s,d)}return xf(n,s,a,u,d)}function d_(n,s,a,u){var d=u.children,f=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~f}else u=0,s.child=null;return f_(n,s,f,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&yc(s,f!==null?f.cachePool:null),f!==null?py(s,f):sf(),gy(s);else return u=s.lanes=536870912,f_(n,s,f!==null?f.baseLanes|a:a,a,u)}else f!==null?(yc(s,f.cachePool),py(s,f),Gr(),s.memoizedState=null):(n!==null&&yc(s,null),sf(),Gr());return Jt(n,s,d,a),s.child}function Ol(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function f_(n,s,a,u,d){var f=Wd();return f=f===null?null:{parent:Tt._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},n!==null&&yc(s,null),sf(),gy(s),n!==null&&Fa(n,s,u,!0),s.childLanes=d,null}function Dc(n,s){return s=Mc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function m_(n,s,a){return Ws(s,n.child,null,a),n=Dc(s,s.pendingProps),n.flags|=2,Nn(s),s.memoizedState=null,n}function xS(n,s,a){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Le){if(u.mode==="hidden")return n=Dc(s,u),s.lanes=536870912,Ol(null,n);if(of(s),(n=it)?(n=Rv(n,Gn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:jr!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Jg(n),a.return=s,s.child=a,Qt=s,it=null)):n=null,n===null)throw zr(s);return s.lanes=536870912,null}return Dc(s,u)}var f=n.memoizedState;if(f!==null){var _=f.dehydrated;if(of(s),d)if(s.flags&256)s.flags&=-257,s=m_(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(At||Fa(n,s,a,!1),d=(a&n.childLanes)!==0,At||d){if(u=et,u!==null&&(_=Tr(u,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,$s(n,_),Sn(u,n,_),Cf;$c(),s=m_(n,s,a)}else n=f.treeContext,it=Yn(_.nextSibling),Qt=s,Le=!0,Lr=null,Gn=!1,n!==null&&ey(s,n),s=Dc(s,u),s.flags|=4096;return s}return n=Gi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Pc(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function xf(n,s,a,u,d){return Ys(s),a=uf(n,s,a,u,void 0,d),u=cf(),n!==null&&!At?(hf(n,s,d),Wi(n,s,d)):(Le&&u&&Hd(s),s.flags|=1,Jt(n,s,a,d),s.child)}function p_(n,s,a,u,d,f){return Ys(s),s.updateQueue=null,a=_y(s,u,a,d),yy(n),u=cf(),n!==null&&!At?(hf(n,s,f),Wi(n,s,f)):(Le&&u&&Hd(s),s.flags|=1,Jt(n,s,a,f),s.child)}function g_(n,s,a,u,d){if(Ys(s),s.stateNode===null){var f=Ba,_=a.contextType;typeof _=="object"&&_!==null&&(f=Xt(_)),f=new a(u,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Rf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=u,f.state=s.memoizedState,f.refs={},ef(s),_=a.contextType,f.context=typeof _=="object"&&_!==null?Xt(_):Ba,f.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Af(s,a,_,u),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Rf.enqueueReplaceState(f,f.state,null),Al(s,u,f,d),Sl(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){f=s.stateNode;var E=s.memoizedProps,O=ea(a,E);f.props=O;var q=f.context,Y=a.contextType;_=Ba,typeof Y=="object"&&Y!==null&&(_=Xt(Y));var Z=a.getDerivedStateFromProps;Y=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||q!==_)&&n_(s,f,u,_),qr=!1;var $=s.memoizedState;f.state=$,Al(s,u,f,d),Sl(),q=s.memoizedState,E||$!==q||qr?(typeof Z=="function"&&(Af(s,a,Z,u),q=s.memoizedState),(O=qr||t_(s,a,O,u,$,q,_))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=q),f.props=u,f.state=q,f.context=_,u=O):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{f=s.stateNode,tf(n,s),_=s.memoizedProps,Y=ea(a,_),f.props=Y,Z=s.pendingProps,$=f.context,q=a.contextType,O=Ba,typeof q=="object"&&q!==null&&(O=Xt(q)),E=a.getDerivedStateFromProps,(q=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==Z||$!==O)&&n_(s,f,u,O),qr=!1,$=s.memoizedState,f.state=$,Al(s,u,f,d),Sl();var G=s.memoizedState;_!==Z||$!==G||qr||n!==null&&n.dependencies!==null&&pc(n.dependencies)?(typeof E=="function"&&(Af(s,a,E,u),G=s.memoizedState),(Y=qr||t_(s,a,Y,u,$,G,O)||n!==null&&n.dependencies!==null&&pc(n.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(u,G,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(u,G,O)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),f.props=u,f.state=G,f.context=O,u=Y):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(s.flags|=1024),u=!1)}return f=u,Pc(n,s),u=(s.flags&128)!==0,f||u?(f=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&u?(s.child=Ws(s,n.child,null,d),s.child=Ws(s,null,a,d)):Jt(n,s,a,d),s.memoizedState=f.state,n=s.child):n=Wi(n,s,d),n}function y_(n,s,a,u){return Gs(),s.flags|=256,Jt(n,s,a,u),s.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nf(n){return{baseLanes:n,cachePool:ay()}}function kf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Dn),n}function __(n,s,a){var u=s.pendingProps,d=!1,f=(s.flags&128)!==0,_;if((_=f)||(_=n!==null&&n.memoizedState===null?!1:(_t.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(Le){if(d?Fr(s):Gr(),(n=it)?(n=Rv(n,Gn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:jr!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Jg(n),a.return=s,s.child=a,Qt=s,it=null)):n=null,n===null)throw zr(s);return mm(n)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,d?(Gr(),d=s.mode,E=Mc({mode:"hidden",children:E},d),u=Fs(u,d,a,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=Nf(a),u.childLanes=kf(n,_,a),s.memoizedState=Of,Ol(null,u)):(Fr(s),Df(s,E))}var O=n.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(f)s.flags&256?(Fr(s),s.flags&=-257,s=Pf(n,s,a)):s.memoizedState!==null?(Gr(),s.child=n.child,s.flags|=128,s=null):(Gr(),E=u.fallback,d=s.mode,u=Mc({mode:"visible",children:u.children},d),E=Fs(E,d,a,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,Ws(s,n.child,null,a),u=s.child,u.memoizedState=Nf(a),u.childLanes=kf(n,_,a),s.memoizedState=Of,s=Ol(null,u));else if(Fr(s),mm(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var q=_.dgst;_=q,u=Error(r(419)),u.stack="",u.digest=_,_l({value:u,source:null,stack:null}),s=Pf(n,s,a)}else if(At||Fa(n,s,a,!1),_=(a&n.childLanes)!==0,At||_){if(_=et,_!==null&&(u=Tr(_,a),u!==0&&u!==O.retryLane))throw O.retryLane=u,$s(n,u),Sn(_,n,u),Cf;fm(E)||$c(),s=Pf(n,s,a)}else fm(E)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,it=Yn(E.nextSibling),Qt=s,Le=!0,Lr=null,Gn=!1,n!==null&&ey(s,n),s=Df(s,u.children),s.flags|=4096);return s}return d?(Gr(),E=u.fallback,d=s.mode,O=n.child,q=O.sibling,u=Gi(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,q!==null?E=Gi(q,E):(E=Fs(E,d,a,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,Ol(null,u),u=s.child,E=n.child.memoizedState,E===null?E=Nf(a):(d=E.cachePool,d!==null?(O=Tt._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=ay(),E={baseLanes:E.baseLanes|a,cachePool:d}),u.memoizedState=E,u.childLanes=kf(n,_,a),s.memoizedState=Of,Ol(n.child,u)):(Fr(s),a=n.child,n=a.sibling,a=Gi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=a,s.memoizedState=null,a)}function Df(n,s){return s=Mc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Mc(n,s){return n=xn(22,n,null,s),n.lanes=0,n}function Pf(n,s,a){return Ws(s,n.child,null,a),n=Df(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function v_(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Yd(n.return,s,a)}function Mf(n,s,a,u,d,f){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,treeForkCount:f}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=a,_.tailMode=d,_.treeForkCount=f)}function b_(n,s,a){var u=s.pendingProps,d=u.revealOrder,f=u.tail;u=u.children;var _=_t.current,E=(_&2)!==0;if(E?(_=_&1|2,s.flags|=128):_&=1,re(_t,_),Jt(n,s,u,a),u=Le?yl:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&v_(n,a,s);else if(n.tag===19)v_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Tc(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Mf(s,!1,d,a,f,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Tc(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Mf(s,!0,a,null,f,u);break;case"together":Mf(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Wi(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Qr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Fa(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Gi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Gi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Uf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&pc(n)))}function OS(n,s,a){switch(s.tag){case 3:Ft(s,s.stateNode.containerInfo),Br(s,Tt,n.memoizedState.cache),Gs();break;case 27:case 5:hi(s);break;case 4:Ft(s,s.stateNode.containerInfo);break;case 10:Br(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,of(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Fr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?__(n,s,a):(Fr(s),n=Wi(n,s,a),n!==null?n.sibling:null);Fr(s);break;case 19:var d=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Fa(n,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return b_(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),re(_t,_t.current),u)break;return null;case 22:return s.lanes=0,d_(n,s,a,s.pendingProps);case 24:Br(s,Tt,n.memoizedState.cache)}return Wi(n,s,a)}function w_(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)At=!0;else{if(!Uf(n,a)&&(s.flags&128)===0)return At=!1,OS(n,s,a);At=(n.flags&131072)!==0}else At=!1,Le&&(s.flags&1048576)!==0&&Zg(s,yl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Xs(s.elementType),s.type=n,typeof n=="function")zd(n)?(u=ea(n,u),s.tag=1,s=g_(null,s,n,u,a)):(s.tag=0,s=xf(null,s,n,u,a));else{if(n!=null){var d=n.$$typeof;if(d===ie){s.tag=11,s=u_(null,s,n,u,a);break e}else if(d===I){s.tag=14,s=c_(null,s,n,u,a);break e}}throw s=Ot(n)||n,Error(r(306,s,""))}}return s;case 0:return xf(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=ea(u,s.pendingProps),g_(n,s,u,d,a);case 3:e:{if(Ft(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var f=s.memoizedState;d=f.element,tf(n,s),Al(s,u,null,a);var _=s.memoizedState;if(u=_.cache,Br(s,Tt,u),u!==f.cache&&Qd(s,[Tt],a,!0),Sl(),u=_.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=y_(n,s,u,a);break e}else if(u!==d){d=Hn(Error(r(424)),s),_l(d),s=y_(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(it=Yn(n.firstChild),Qt=s,Le=!0,Lr=null,Gn=!0,a=dy(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gs(),u===d){s=Wi(n,s,a);break e}Jt(n,s,u,a)}s=s.child}return s;case 26:return Pc(n,s),n===null?(a=kv(s.type,null,s.pendingProps,null))?s.memoizedState=a:Le||(a=s.type,n=s.pendingProps,u=Jc(xe.current).createElement(a),u[dt]=s,u[Yt]=n,Wt(u,a,n),yt(u),s.stateNode=u):s.memoizedState=kv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return hi(s),n===null&&Le&&(u=s.stateNode=xv(s.type,s.pendingProps,xe.current),Qt=s,Gn=!0,d=it,es(s.type)?(pm=d,it=Yn(u.firstChild)):it=d),Jt(n,s,s.pendingProps.children,a),Pc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Le&&((d=u=it)&&(u=aA(u,s.type,s.pendingProps,Gn),u!==null?(s.stateNode=u,Qt=s,it=Yn(u.firstChild),Gn=!1,d=!0):d=!1),d||zr(s)),hi(s),d=s.type,f=s.pendingProps,_=n!==null?n.memoizedProps:null,u=f.children,cm(d,f)?u=null:_!==null&&cm(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=uf(n,s,wS,null,null,a),Fl._currentValue=d),Pc(n,s),Jt(n,s,u,a),s.child;case 6:return n===null&&Le&&((n=a=it)&&(a=oA(a,s.pendingProps,Gn),a!==null?(s.stateNode=a,Qt=s,it=null,n=!0):n=!1),n||zr(s)),null;case 13:return __(n,s,a);case 4:return Ft(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ws(s,null,u,a):Jt(n,s,u,a),s.child;case 11:return u_(n,s,s.type,s.pendingProps,a);case 7:return Jt(n,s,s.pendingProps,a),s.child;case 8:return Jt(n,s,s.pendingProps.children,a),s.child;case 12:return Jt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Br(s,s.type,u.value),Jt(n,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ys(s),d=Xt(d),u=u(d),s.flags|=1,Jt(n,s,u,a),s.child;case 14:return c_(n,s,s.type,s.pendingProps,a);case 15:return h_(n,s,s.type,s.pendingProps,a);case 19:return b_(n,s,a);case 31:return xS(n,s,a);case 22:return d_(n,s,a,s.pendingProps);case 24:return Ys(s),u=Xt(Tt),n===null?(d=Wd(),d===null&&(d=et,f=Xd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),s.memoizedState={parent:u,cache:d},ef(s),Br(s,Tt,d)):((n.lanes&a)!==0&&(tf(n,s),Al(s,null,null,a),Sl()),d=n.memoizedState,f=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Br(s,Tt,u)):(u=f.cache,Br(s,Tt,u),u!==d.cache&&Qd(s,[Tt],a,!0))),Jt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Zi(n){n.flags|=4}function Vf(n,s,a,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(Y_())n.flags|=8192;else throw Js=vc,Zd}else n.flags&=-16777217}function E_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Vv(s))if(Y_())n.flags|=8192;else throw Js=vc,Zd}function Uc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jo():536870912,n.lanes|=s,io|=s)}function Nl(n,s){if(!Le)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function rt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function NS(n,s,a){var u=s.pendingProps;switch($d(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Qi(Tt),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&($a(s)?Zi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Gd())),rt(s),null;case 26:var d=s.type,f=s.memoizedState;return n===null?(Zi(s),f!==null?(rt(s),E_(s,f)):(rt(s),Vf(s,d,null,u,a))):f?f!==n.memoizedState?(Zi(s),rt(s),E_(s,f)):(rt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Zi(s),rt(s),Vf(s,d,n,u,a)),null;case 27:if(Pi(s),a=xe.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return rt(s),null}n=ce.current,$a(s)?ty(s):(n=xv(d,u,a),s.stateNode=n,Zi(s))}return rt(s),null;case 5:if(Pi(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return rt(s),null}if(f=ce.current,$a(s))ty(s);else{var _=Jc(xe.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?f.multiple=!0:u.size&&(f.size=u.size);break;default:f=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}f[dt]=s,f[Yt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=f;e:switch(Wt(f,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Zi(s)}}return rt(s),Vf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=xe.current,$a(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,d=Qt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[dt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||_v(n.nodeValue,a)),n||zr(s,!0)}else n=Jc(n).createTextNode(u),n[dt]=s,s.stateNode=n}return rt(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=$a(s),a!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[dt]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),n=!1}else a=Gd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Nn(s),s):(Nn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return rt(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=$a(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[dt]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),d=!1}else d=Gd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Nn(s),s):(Nn(s),null)}return Nn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),f=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),f!==d&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Uc(s,s.updateQueue),rt(s),null);case 4:return lt(),n===null&&sm(s.stateNode.containerInfo),rt(s),null;case 10:return Qi(s.type),rt(s),null;case 19:if(X(_t),u=s.memoizedState,u===null)return rt(s),null;if(d=(s.flags&128)!==0,f=u.rendering,f===null)if(d)Nl(u,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Tc(n),f!==null){for(s.flags|=128,Nl(u,!1),n=f.updateQueue,s.updateQueue=n,Uc(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Xg(a,n),a=a.sibling;return re(_t,_t.current&1|2),Le&&Ki(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Gt()>Bc&&(s.flags|=128,d=!0,Nl(u,!1),s.lanes=4194304)}else{if(!d)if(n=Tc(f),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,Uc(s,n),Nl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Le)return rt(s),null}else 2*Gt()-u.renderingStartTime>Bc&&a!==536870912&&(s.flags|=128,d=!0,Nl(u,!1),s.lanes=4194304);u.isBackwards?(f.sibling=s.child,s.child=f):(n=u.last,n!==null?n.sibling=f:s.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Gt(),n.sibling=null,a=_t.current,re(_t,d?a&1|2:a&1),Le&&Ki(s,u.treeForkCount),n):(rt(s),null);case 22:case 23:return Nn(s),af(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),a=s.updateQueue,a!==null&&Uc(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&X(Qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Qi(Tt),rt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function kS(n,s){switch($d(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Qi(Tt),lt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Pi(s),null;case 31:if(s.memoizedState!==null){if(Nn(s),s.alternate===null)throw Error(r(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Nn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return X(_t),null;case 4:return lt(),null;case 10:return Qi(s.type),null;case 22:case 23:return Nn(s),af(),n!==null&&X(Qs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Qi(Tt),null;case 25:return null;default:return null}}function T_(n,s){switch($d(s),s.tag){case 3:Qi(Tt),lt();break;case 26:case 27:case 5:Pi(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&Nn(s);break;case 13:Nn(s);break;case 19:X(_t);break;case 10:Qi(s.type);break;case 22:case 23:Nn(s),af(),n!==null&&X(Qs);break;case 24:Qi(Tt)}}function kl(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&n)===n){u=void 0;var f=a.create,_=a.inst;u=f(),_.destroy=u}a=a.next}while(a!==d)}}catch(E){Xe(s,s.return,E)}}function Kr(n,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var f=d.next;u=f;do{if((u.tag&n)===n){var _=u.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,d=s;var O=a,q=E;try{q()}catch(Y){Xe(d,O,Y)}}}u=u.next}while(u!==f)}}catch(Y){Xe(s,s.return,Y)}}function S_(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{my(s,a)}catch(u){Xe(n,n.return,u)}}}function A_(n,s,a){a.props=ea(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Xe(n,s,u)}}function Dl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(d){Xe(n,s,d)}}function Ei(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){Xe(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Xe(n,s,d)}else a.current=null}function R_(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){Xe(n,n.return,d)}}function jf(n,s,a){try{var u=n.stateNode;eA(u,n.type,a,s),u[Yt]=s}catch(d){Xe(n,n.return,d)}}function I_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&es(n.type)||n.tag===4}function Lf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||I_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&es(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zf(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Lt));else if(u!==4&&(u===27&&es(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(zf(n,s,a),n=n.sibling;n!==null;)zf(n,s,a),n=n.sibling}function Vc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&es(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Vc(n,s,a),n=n.sibling;n!==null;)Vc(n,s,a),n=n.sibling}function C_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Wt(s,u,a),s[dt]=n,s[Yt]=a}catch(f){Xe(n,n.return,f)}}var er=!1,Rt=!1,Bf=!1,x_=typeof WeakSet=="function"?WeakSet:Set,qt=null;function DS(n,s){if(n=n.containerInfo,lm=rh,n=Bg(n),Dd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,E=-1,O=-1,q=0,Y=0,Z=n,$=null;t:for(;;){for(var G;Z!==a||d!==0&&Z.nodeType!==3||(E=_+d),Z!==f||u!==0&&Z.nodeType!==3||(O=_+u),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)$=Z,Z=G;for(;;){if(Z===n)break t;if($===a&&++q===d&&(E=_),$===f&&++Y===u&&(O=_),(G=Z.nextSibling)!==null)break;Z=$,$=Z.parentNode}Z=G}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(um={focusedElem:n,selectionRange:a},rh=!1,qt=s;qt!==null;)if(s=qt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,qt=n;else for(;qt!==null;){switch(s=qt,f=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)d=n[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,d=f.memoizedProps,f=f.memoizedState,u=a.stateNode;try{var ue=ea(a.type,d);n=u.getSnapshotBeforeUpdate(ue,f),u.__reactInternalSnapshotBeforeUpdate=n}catch(_e){Xe(a,a.return,_e)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)dm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,qt=n;break}qt=s.return}}function O_(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:nr(n,a),u&4&&kl(5,a);break;case 1:if(nr(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(_){Xe(a,a.return,_)}else{var d=ea(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Xe(a,a.return,_)}}u&64&&S_(a),u&512&&Dl(a,a.return);break;case 3:if(nr(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{my(n,s)}catch(_){Xe(a,a.return,_)}}break;case 27:s===null&&u&4&&C_(a);case 26:case 5:nr(n,a),s===null&&u&4&&R_(a),u&512&&Dl(a,a.return);break;case 12:nr(n,a);break;case 31:nr(n,a),u&4&&D_(n,a);break;case 13:nr(n,a),u&4&&P_(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=qS.bind(null,a),lA(n,a))));break;case 22:if(u=a.memoizedState!==null||er,!u){s=s!==null&&s.memoizedState!==null||Rt,d=er;var f=Rt;er=u,(Rt=s)&&!f?ir(n,a,(a.subtreeFlags&8772)!==0):nr(n,a),er=d,Rt=f}break;case 30:break;default:nr(n,a)}}function N_(n){var s=n.alternate;s!==null&&(n.alternate=null,N_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ks(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ot=null,bn=!1;function tr(n,s,a){for(a=a.child;a!==null;)k_(n,s,a),a=a.sibling}function k_(n,s,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(_r,a)}catch{}switch(a.tag){case 26:Rt||Ei(a,s),tr(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Ei(a,s);var u=ot,d=bn;es(a.type)&&(ot=a.stateNode,bn=!1),tr(n,s,a),ql(a.stateNode),ot=u,bn=d;break;case 5:Rt||Ei(a,s);case 6:if(u=ot,d=bn,ot=null,tr(n,s,a),ot=u,bn=d,ot!==null)if(bn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(f){Xe(a,s,f)}else try{ot.removeChild(a.stateNode)}catch(f){Xe(a,s,f)}break;case 18:ot!==null&&(bn?(n=ot,Sv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),ho(n)):Sv(ot,a.stateNode));break;case 4:u=ot,d=bn,ot=a.stateNode.containerInfo,bn=!0,tr(n,s,a),ot=u,bn=d;break;case 0:case 11:case 14:case 15:Kr(2,a,s),Rt||Kr(4,a,s),tr(n,s,a);break;case 1:Rt||(Ei(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&A_(a,s,u)),tr(n,s,a);break;case 21:tr(n,s,a);break;case 22:Rt=(u=Rt)||a.memoizedState!==null,tr(n,s,a),Rt=u;break;default:tr(n,s,a)}}function D_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ho(n)}catch(a){Xe(s,s.return,a)}}}function P_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ho(n)}catch(a){Xe(s,s.return,a)}}function PS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new x_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new x_),s;default:throw Error(r(435,n.tag))}}function jc(n,s){var a=PS(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var d=HS.bind(null,n,u);u.then(d,d)}})}function wn(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],f=n,_=s,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(es(E.type)){ot=E.stateNode,bn=!1;break e}break;case 5:ot=E.stateNode,bn=!1;break e;case 3:case 4:ot=E.stateNode.containerInfo,bn=!0;break e}E=E.return}if(ot===null)throw Error(r(160));k_(f,_,d),ot=null,bn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)M_(s,n),s=s.sibling}var ri=null;function M_(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wn(s,n),En(n),u&4&&(Kr(3,n,n.return),kl(3,n),Kr(5,n,n.return));break;case 1:wn(s,n),En(n),u&512&&(Rt||a===null||Ei(a,a.return)),u&64&&er&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=ri;if(wn(s,n),En(n),u&512&&(Rt||a===null||Ei(a,a.return)),u&4){var f=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ji]||f[dt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(u),d.head.insertBefore(f,d.querySelector("head > title"))),Wt(f,u,a),f[dt]=n,yt(f),u=f;break e;case"link":var _=Mv("link","href",d).get(u+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}f=d.createElement(u),Wt(f,u,a),d.head.appendChild(f);break;case"meta":if(_=Mv("meta","content",d).get(u+(a.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}f=d.createElement(u),Wt(f,u,a),d.head.appendChild(f);break;default:throw Error(r(468,u))}f[dt]=n,yt(f),u=f}n.stateNode=u}else Uv(d,n.type,n.stateNode);else n.stateNode=Pv(d,u,n.memoizedProps);else f!==u?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,u===null?Uv(d,n.type,n.stateNode):Pv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&jf(n,n.memoizedProps,a.memoizedProps)}break;case 27:wn(s,n),En(n),u&512&&(Rt||a===null||Ei(a,a.return)),a!==null&&u&4&&jf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(wn(s,n),En(n),u&512&&(Rt||a===null||Ei(a,a.return)),n.flags&32){d=n.stateNode;try{Bn(d,"")}catch(ue){Xe(n,n.return,ue)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,jf(n,d,a!==null?a.memoizedProps:d)),u&1024&&(Bf=!0);break;case 6:if(wn(s,n),En(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(ue){Xe(n,n.return,ue)}}break;case 3:if(eh=null,d=ri,ri=Wc(s.containerInfo),wn(s,n),ri=d,En(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ho(s.containerInfo)}catch(ue){Xe(n,n.return,ue)}Bf&&(Bf=!1,U_(n));break;case 4:u=ri,ri=Wc(n.stateNode.containerInfo),wn(s,n),En(n),ri=u;break;case 12:wn(s,n),En(n);break;case 31:wn(s,n),En(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jc(n,u)));break;case 13:wn(s,n),En(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=Gt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jc(n,u)));break;case 22:d=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,q=er,Y=Rt;if(er=q||d,Rt=Y||O,wn(s,n),Rt=Y,er=q,En(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||O||er||Rt||ta(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(f=O.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=O.stateNode;var Z=O.memoizedProps.style,$=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ue){Xe(O,O.return,ue)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(ue){Xe(O,O.return,ue)}}}else if(s.tag===18){if(a===null){O=s;try{var G=O.stateNode;d?Av(G,!0):Av(O.stateNode,!1)}catch(ue){Xe(O,O.return,ue)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,jc(n,a))));break;case 19:wn(s,n),En(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,jc(n,u)));break;case 30:break;case 21:break;default:wn(s,n),En(n)}}function En(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(I_(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,f=Lf(n);Vc(n,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(Bn(_,""),a.flags&=-33);var E=Lf(n);Vc(n,E,_);break;case 3:case 4:var O=a.stateNode.containerInfo,q=Lf(n);zf(n,q,O);break;default:throw Error(r(161))}}catch(Y){Xe(n,n.return,Y)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function U_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;U_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function nr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O_(n,s.alternate,s),s=s.sibling}function ta(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Kr(4,s,s.return),ta(s);break;case 1:Ei(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&A_(s,s.return,a),ta(s);break;case 27:ql(s.stateNode);case 26:case 5:Ei(s,s.return),ta(s);break;case 22:s.memoizedState===null&&ta(s);break;case 30:ta(s);break;default:ta(s)}n=n.sibling}}function ir(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,f=s,_=f.flags;switch(f.tag){case 0:case 11:case 15:ir(d,f,a),kl(4,f);break;case 1:if(ir(d,f,a),u=f,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){Xe(u,u.return,q)}if(u=f,d=u.updateQueue,d!==null){var E=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)fy(O[d],E)}catch(q){Xe(u,u.return,q)}}a&&_&64&&S_(f),Dl(f,f.return);break;case 27:C_(f);case 26:case 5:ir(d,f,a),a&&u===null&&_&4&&R_(f),Dl(f,f.return);break;case 12:ir(d,f,a);break;case 31:ir(d,f,a),a&&_&4&&D_(d,f);break;case 13:ir(d,f,a),a&&_&4&&P_(d,f);break;case 22:f.memoizedState===null&&ir(d,f,a),Dl(f,f.return);break;case 30:break;default:ir(d,f,a)}s=s.sibling}}function qf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&vl(a))}function Hf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vl(n))}function si(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)V_(n,s,a,u),s=s.sibling}function V_(n,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:si(n,s,a,u),d&2048&&kl(9,s);break;case 1:si(n,s,a,u);break;case 3:si(n,s,a,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vl(n)));break;case 12:if(d&2048){si(n,s,a,u),n=s.stateNode;try{var f=s.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){Xe(s,s.return,O)}}else si(n,s,a,u);break;case 31:si(n,s,a,u);break;case 13:si(n,s,a,u);break;case 23:break;case 22:f=s.stateNode,_=s.alternate,s.memoizedState!==null?f._visibility&2?si(n,s,a,u):Pl(n,s):f._visibility&2?si(n,s,a,u):(f._visibility|=2,eo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&qf(_,s);break;case 24:si(n,s,a,u),d&2048&&Hf(s.alternate,s);break;default:si(n,s,a,u)}}function eo(n,s,a,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var f=n,_=s,E=a,O=u,q=_.flags;switch(_.tag){case 0:case 11:case 15:eo(f,_,E,O,d),kl(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?eo(f,_,E,O,d):Pl(f,_):(Y._visibility|=2,eo(f,_,E,O,d)),d&&q&2048&&qf(_.alternate,_);break;case 24:eo(f,_,E,O,d),d&&q&2048&&Hf(_.alternate,_);break;default:eo(f,_,E,O,d)}s=s.sibling}}function Pl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,d=u.flags;switch(u.tag){case 22:Pl(a,u),d&2048&&qf(u.alternate,u);break;case 24:Pl(a,u),d&2048&&Hf(u.alternate,u);break;default:Pl(a,u)}s=s.sibling}}var Ml=8192;function to(n,s,a){if(n.subtreeFlags&Ml)for(n=n.child;n!==null;)j_(n,s,a),n=n.sibling}function j_(n,s,a){switch(n.tag){case 26:to(n,s,a),n.flags&Ml&&n.memoizedState!==null&&bA(a,ri,n.memoizedState,n.memoizedProps);break;case 5:to(n,s,a);break;case 3:case 4:var u=ri;ri=Wc(n.stateNode.containerInfo),to(n,s,a),ri=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ml,Ml=16777216,to(n,s,a),Ml=u):to(n,s,a));break;default:to(n,s,a)}}function L_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ul(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];qt=u,B_(u,n)}L_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)z_(n),n=n.sibling}function z_(n){switch(n.tag){case 0:case 11:case 15:Ul(n),n.flags&2048&&Kr(9,n,n.return);break;case 3:Ul(n);break;case 12:Ul(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Lc(n)):Ul(n);break;default:Ul(n)}}function Lc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];qt=u,B_(u,n)}L_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Kr(8,s,s.return),Lc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(s));break;default:Lc(s)}n=n.sibling}}function B_(n,s){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Kr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,qt=u;else e:for(a=n;qt!==null;){u=qt;var d=u.sibling,f=u.return;if(N_(u),u===a){qt=null;break e}if(d!==null){d.return=f,qt=d;break e}qt=f}}}var MS={getCacheForType:function(n){var s=Xt(Tt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Xt(Tt).controller.signal}},US=typeof WeakMap=="function"?WeakMap:Map,Fe=0,et=null,ke=null,Pe=0,Qe=0,kn=null,Yr=!1,no=!1,$f=!1,rr=0,pt=0,Qr=0,na=0,Ff=0,Dn=0,io=0,Vl=null,Tn=null,Gf=!1,zc=0,q_=0,Bc=1/0,qc=null,Xr=null,kt=0,Jr=null,ro=null,sr=0,Kf=0,Yf=null,H_=null,jl=0,Qf=null;function Pn(){return(Fe&2)!==0&&Pe!==0?Pe&-Pe:Q.T!==null?tm():Vi()}function $_(){if(Dn===0)if((Pe&536870912)===0||Le){var n=di;di<<=1,(di&3932160)===0&&(di=262144),Dn=n}else Dn=536870912;return n=On.current,n!==null&&(n.flags|=32),Dn}function Sn(n,s,a){(n===et&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)&&(so(n,0),Wr(n,Pe,Dn,!1)),wr(n,a),((Fe&2)===0||n!==et)&&(n===et&&((Fe&2)===0&&(na|=a),pt===4&&Wr(n,Pe,Dn,!1)),Ti(n))}function F_(n,s,a){if((Fe&6)!==0)throw Error(r(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||br(n,s),d=u?LS(n,s):Jf(n,s,!0),f=u;do{if(d===0){no&&!u&&Wr(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!VS(a)){d=Jf(n,s,!1),f=!1;continue}if(d===2){if(f=s,n.errorRecoveryDisabledLanes&f)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var E=n;d=Vl;var O=E.current.memoizedState.isDehydrated;if(O&&(so(E,_).flags|=256),_=Jf(E,_,!1),_!==2){if($f&&!O){E.errorRecoveryDisabledLanes|=f,na|=f,d=4;break e}f=Tn,Tn=d,f!==null&&(Tn===null?Tn=f:Tn.push.apply(Tn,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){so(n,0),Wr(n,s,0,!0);break}e:{switch(u=n,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Wr(u,s,Dn,!Yr);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=zc+300-Gt(),10<d)){if(Wr(u,s,Dn,!Yr),Ln(u,0,!0)!==0)break e;sr=s,u.timeoutHandle=Ev(G_.bind(null,u,a,Tn,qc,Gf,s,Dn,na,io,Yr,f,"Throttled",-0,0),d);break e}G_(u,a,Tn,qc,Gf,s,Dn,na,io,Yr,f,null,-0,0)}}break}while(!0);Ti(n)}function G_(n,s,a,u,d,f,_,E,O,q,Y,Z,$,G){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt},j_(s,f,Z);var ue=(f&62914560)===f?zc-Gt():(f&4194048)===f?q_-Gt():0;if(ue=wA(Z,ue),ue!==null){sr=f,n.cancelPendingCommit=ue(ev.bind(null,n,s,f,a,u,d,_,E,O,Y,Z,null,$,G)),Wr(n,f,_,!q);return}}ev(n,s,f,a,u,d,_,E,O)}function VS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],f=d.getSnapshot;d=d.value;try{if(!Cn(f(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wr(n,s,a,u){s&=~Ff,s&=~na,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var f=31-dn(d),_=1<<f;u[f]=-1,d&=~_}a!==0&&Wo(n,a,s)}function Hc(){return(Fe&6)===0?(Ll(0),!1):!0}function Xf(){if(ke!==null){if(Qe===0)var n=ke.return;else n=ke,Yi=Ks=null,df(n),Qa=null,wl=0,n=ke;for(;n!==null;)T_(n.alternate,n),n=n.return;ke=null}}function so(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,iA(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),sr=0,Xf(),et=n,ke=a=Gi(n.current,null),Pe=s,Qe=0,kn=null,Yr=!1,no=br(n,s),$f=!1,io=Dn=Ff=na=Qr=pt=0,Tn=Vl=null,Gf=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-dn(u),f=1<<d;s|=n[d],u&=~f}return rr=s,cc(),a}function K_(n,s){Ie=null,Q.H=xl,s===Ya||s===_c?(s=uy(),Qe=3):s===Zd?(s=uy(),Qe=4):Qe=s===Cf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kn=s,ke===null&&(pt=1,kc(n,Hn(s,n.current)))}function Y_(){var n=On.current;return n===null?!0:(Pe&4194048)===Pe?Kn===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Kn:!1}function Q_(){var n=Q.H;return Q.H=xl,n===null?xl:n}function X_(){var n=Q.A;return Q.A=MS,n}function $c(){pt=4,Yr||(Pe&4194048)!==Pe&&On.current!==null||(no=!0),(Qr&134217727)===0&&(na&134217727)===0||et===null||Wr(et,Pe,Dn,!1)}function Jf(n,s,a){var u=Fe;Fe|=2;var d=Q_(),f=X_();(et!==n||Pe!==s)&&(qc=null,so(n,s)),s=!1;var _=pt;e:do try{if(Qe!==0&&ke!==null){var E=ke,O=kn;switch(Qe){case 8:Xf(),_=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(s=!0);var q=Qe;if(Qe=0,kn=null,ao(n,E,O,q),a&&no){_=0;break e}break;default:q=Qe,Qe=0,kn=null,ao(n,E,O,q)}}jS(),_=pt;break}catch(Y){K_(n,Y)}while(!0);return s&&n.shellSuspendCounter++,Yi=Ks=null,Fe=u,Q.H=d,Q.A=f,ke===null&&(et=null,Pe=0,cc()),_}function jS(){for(;ke!==null;)J_(ke)}function LS(n,s){var a=Fe;Fe|=2;var u=Q_(),d=X_();et!==n||Pe!==s?(qc=null,Bc=Gt()+500,so(n,s)):no=br(n,s);e:do try{if(Qe!==0&&ke!==null){s=ke;var f=kn;t:switch(Qe){case 1:Qe=0,kn=null,ao(n,s,f,1);break;case 2:case 9:if(oy(f)){Qe=0,kn=null,W_(s);break}s=function(){Qe!==2&&Qe!==9||et!==n||(Qe=7),Ti(n)},f.then(s,s);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:oy(f)?(Qe=0,kn=null,W_(s)):(Qe=0,kn=null,ao(n,s,f,7));break;case 5:var _=null;switch(ke.tag){case 26:_=ke.memoizedState;case 5:case 27:var E=ke;if(_?Vv(_):E.stateNode.complete){Qe=0,kn=null;var O=E.sibling;if(O!==null)ke=O;else{var q=E.return;q!==null?(ke=q,Fc(q)):ke=null}break t}}Qe=0,kn=null,ao(n,s,f,5);break;case 6:Qe=0,kn=null,ao(n,s,f,6);break;case 8:Xf(),pt=6;break e;default:throw Error(r(462))}}zS();break}catch(Y){K_(n,Y)}while(!0);return Yi=Ks=null,Q.H=u,Q.A=d,Fe=a,ke!==null?0:(et=null,Pe=0,cc(),pt)}function zS(){for(;ke!==null&&!Ed();)J_(ke)}function J_(n){var s=w_(n.alternate,n,rr);n.memoizedProps=n.pendingProps,s===null?Fc(n):ke=s}function W_(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=p_(a,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=p_(a,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:df(s);default:T_(a,s),s=ke=Xg(s,rr),s=w_(a,s,rr)}n.memoizedProps=n.pendingProps,s===null?Fc(n):ke=s}function ao(n,s,a,u){Yi=Ks=null,df(s),Qa=null,wl=0;var d=s.return;try{if(CS(n,d,s,a,Pe)){pt=1,kc(n,Hn(a,n.current)),ke=null;return}}catch(f){if(d!==null)throw ke=d,f;pt=1,kc(n,Hn(a,n.current)),ke=null;return}s.flags&32768?(Le||u===1?n=!0:no||(Pe&536870912)!==0?n=!1:(Yr=n=!0,(u===2||u===9||u===3||u===6)&&(u=On.current,u!==null&&u.tag===13&&(u.flags|=16384))),Z_(s,n)):Fc(s)}function Fc(n){var s=n;do{if((s.flags&32768)!==0){Z_(s,Yr);return}n=s.return;var a=NS(s.alternate,s,rr);if(a!==null){ke=a;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=n}while(s!==null);pt===0&&(pt=5)}function Z_(n,s){do{var a=kS(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);pt=6,ke=null}function ev(n,s,a,u,d,f,_,E,O){n.cancelPendingCommit=null;do Gc();while(kt!==0);if((Fe&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(f=s.lanes|s.childLanes,f|=jd,Kt(n,a,f,_,E,O),n===et&&(ke=et=null,Pe=0),ro=s,Jr=n,sr=a,Kf=f,Yf=d,H_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$S(Mi,function(){return sv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,d=ae.p,ae.p=2,_=Fe,Fe|=4;try{DS(n,s,a)}finally{Fe=_,ae.p=d,Q.T=u}}kt=1,tv(),nv(),iv()}}function tv(){if(kt===1){kt=0;var n=Jr,s=ro,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var d=Fe;Fe|=4;try{M_(s,n);var f=um,_=Bg(n.containerInfo),E=f.focusedElem,O=f.selectionRange;if(_!==E&&E&&E.ownerDocument&&zg(E.ownerDocument.documentElement,E)){if(O!==null&&Dd(E)){var q=O.start,Y=O.end;if(Y===void 0&&(Y=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(Y,E.value.length);else{var Z=E.ownerDocument||document,$=Z&&Z.defaultView||window;if($.getSelection){var G=$.getSelection(),ue=E.textContent.length,_e=Math.min(O.start,ue),Ze=O.end===void 0?_e:Math.min(O.end,ue);!G.extend&&_e>Ze&&(_=Ze,Ze=_e,_e=_);var V=Lg(E,_e),k=Lg(E,Ze);if(V&&k&&(G.rangeCount!==1||G.anchorNode!==V.node||G.anchorOffset!==V.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var z=Z.createRange();z.setStart(V.node,V.offset),G.removeAllRanges(),_e>Ze?(G.addRange(z),G.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),G.addRange(z))}}}}for(Z=[],G=E;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var J=Z[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}rh=!!lm,um=lm=null}finally{Fe=d,ae.p=u,Q.T=a}}n.current=s,kt=2}}function nv(){if(kt===2){kt=0;var n=Jr,s=ro,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var d=Fe;Fe|=4;try{O_(n,s.alternate,s)}finally{Fe=d,ae.p=u,Q.T=a}}kt=3}}function iv(){if(kt===4||kt===3){kt=0,Yo();var n=Jr,s=ro,a=sr,u=H_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,ro=Jr=null,rv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Xr=null),el(a),s=s.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(_r,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,d=ae.p,ae.p=2,Q.T=null;try{for(var f=n.onRecoverableError,_=0;_<u.length;_++){var E=u[_];f(E.value,{componentStack:E.stack})}}finally{Q.T=s,ae.p=d}}(sr&3)!==0&&Gc(),Ti(n),d=n.pendingLanes,(a&261930)!==0&&(d&42)!==0?n===Qf?jl++:(jl=0,Qf=n):jl=0,Ll(0)}}function rv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,vl(s)))}function Gc(){return tv(),nv(),iv(),sv()}function sv(){if(kt!==5)return!1;var n=Jr,s=Kf;Kf=0;var a=el(sr),u=Q.T,d=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Yf,Yf=null;var f=Jr,_=sr;if(kt=0,ro=Jr=null,sr=0,(Fe&6)!==0)throw Error(r(331));var E=Fe;if(Fe|=4,z_(f.current),V_(f,f.current,_,a),Fe=E,Ll(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(_r,f)}catch{}return!0}finally{ae.p=d,Q.T=u,rv(n,s)}}function av(n,s,a){s=Hn(a,s),s=If(n.stateNode,s,2),n=$r(n,s,2),n!==null&&(wr(n,2),Ti(n))}function Xe(n,s,a){if(n.tag===3)av(n,n,a);else for(;s!==null;){if(s.tag===3){av(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xr===null||!Xr.has(u))){n=Hn(a,n),a=o_(2),u=$r(s,a,2),u!==null&&(l_(a,u,s,n),wr(u,2),Ti(u));break}}s=s.return}}function Wf(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new US;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||($f=!0,d.add(a),n=BS.bind(null,n,s,a),s.then(n,n))}function BS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,et===n&&(Pe&a)===a&&(pt===4||pt===3&&(Pe&62914560)===Pe&&300>Gt()-zc?(Fe&2)===0&&so(n,0):Ff|=a,io===Pe&&(io=0)),Ti(n)}function ov(n,s){s===0&&(s=Jo()),n=$s(n,s),n!==null&&(wr(n,s),Ti(n))}function qS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ov(n,a)}function HS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),ov(n,a)}function $S(n,s){return xs(n,s)}var Kc=null,oo=null,Zf=!1,Yc=!1,em=!1,Zr=0;function Ti(n){n!==oo&&n.next===null&&(oo===null?Kc=oo=n:oo=oo.next=n),Yc=!0,Zf||(Zf=!0,GS())}function Ll(n,s){if(!em&&Yc){em=!0;do for(var a=!1,u=Kc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var f=0;else{var _=u.suspendedLanes,E=u.pingedLanes;f=(1<<31-dn(42|n)+1)-1,f&=d&~(_&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,hv(u,f))}else f=Pe,f=Ln(u,u===et?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(f&3)===0||br(u,f)||(a=!0,hv(u,f));u=u.next}while(a);em=!1}}function FS(){lv()}function lv(){Yc=Zf=!1;var n=0;Zr!==0&&nA()&&(n=Zr);for(var s=Gt(),a=null,u=Kc;u!==null;){var d=u.next,f=uv(u,s);f===0?(u.next=null,a===null?Kc=d:a.next=d,d===null&&(oo=a)):(a=u,(n!==0||(f&3)!==0)&&(Yc=!0)),u=d}kt!==0&&kt!==5||Ll(n),Zr!==0&&(Zr=0)}function uv(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var _=31-dn(f),E=1<<_,O=d[_];O===-1?((E&a)===0||(E&u)!==0)&&(d[_]=Ia(E,s)):O<=s&&(n.expiredLanes|=E),f&=~E}if(s=et,a=Pe,a=Ln(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ra(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||br(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Ra(u),el(a)){case 2:case 8:a=jt;break;case 32:a=Mi;break;case 268435456:a=Qo;break;default:a=Mi}return u=cv.bind(null,n),a=xs(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Ra(u),n.callbackPriority=2,n.callbackNode=null,2}function cv(n,s){if(kt!==0&&kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Gc()&&n.callbackNode!==a)return null;var u=Pe;return u=Ln(n,n===et?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(F_(n,u,s),uv(n,Gt()),n.callbackNode!=null&&n.callbackNode===a?cv.bind(null,n):null)}function hv(n,s){if(Gc())return null;F_(n,s,!0)}function GS(){rA(function(){(Fe&6)!==0?xs(Nt,FS):lv()})}function tm(){if(Zr===0){var n=Ga;n===0&&(n=Ns,Ns<<=1,(Ns&261888)===0&&(Ns=256)),Zr=n}return Zr}function dv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yi(""+n)}function fv(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function KS(n,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var f=dv((d[Yt]||null).action),_=u.submitter;_&&(s=(s=_[Yt]||null)?dv(s.formAction):_.getAttribute("formAction"),s!==null&&(f=s,_=null));var E=new Vs("action","action",null,u,d);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zr!==0){var O=_?fv(d,_):new FormData(d);wf(a,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(E.preventDefault(),O=_?fv(d,_):new FormData(d),wf(a,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var nm=0;nm<Vd.length;nm++){var im=Vd[nm],YS=im.toLowerCase(),QS=im[0].toUpperCase()+im.slice(1);ii(YS,"on"+QS)}ii($g,"onAnimationEnd"),ii(Fg,"onAnimationIteration"),ii(Gg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(hS,"onTransitionRun"),ii(dS,"onTransitionStart"),ii(fS,"onTransitionCancel"),ii(Kg,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function mv(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var f=void 0;if(s)for(var _=u.length-1;0<=_;_--){var E=u[_],O=E.instance,q=E.currentTarget;if(E=E.listener,O!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=q;try{f(d)}catch(Y){uc(Y)}d.currentTarget=null,f=O}else for(_=0;_<u.length;_++){if(E=u[_],O=E.instance,q=E.currentTarget,E=E.listener,O!==f&&d.isPropagationStopped())break e;f=E,d.currentTarget=q;try{f(d)}catch(Y){uc(Y)}d.currentTarget=null,f=O}}}}function De(n,s){var a=s[Sr];a===void 0&&(a=s[Sr]=new Set);var u=n+"__bubble";a.has(u)||(pv(s,n,2,!1),a.add(u))}function rm(n,s,a){var u=0;s&&(u|=4),pv(a,n,u,s)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function sm(n){if(!n[Qc]){n[Qc]=!0,Ca.forEach(function(a){a!=="selectionchange"&&(XS.has(a)||rm(a,!1,n),rm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Qc]||(s[Qc]=!0,rm("selectionchange",!1,s))}}function pv(n,s,a,u){switch($v(s)){case 2:var d=SA;break;case 8:d=AA;break;default:d=bm}a=d.bind(null,s,a,n),d=void 0,!ll||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function am(n,s,a,u,d){var f=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var E=u.stateNode.containerInfo;if(E===d)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;E!==null;){if(_=Li(E),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=f=_;continue e}E=E.parentNode}}u=u.return}Ku(function(){var q=f,Y=Da(a),Z=[];e:{var $=Yg.get(n);if($!==void 0){var G=Vs,ue=n;switch(n){case"keypress":if(Us(a)===0)break e;case"keydown":case"keyup":G=nc;break;case"focusin":ue="focus",G=Pr;break;case"focusout":ue="blur",G=Pr;break;case"beforeblur":case"afterblur":G=Pr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=rc;break;case $g:case Fg:case Gg:G=Ua;break;case Kg:G=Va;break;case"scroll":case"scrollend":G=Yu;break;case"wheel":G=ac;break;case"copy":case"cut":case"paste":G=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=fl;break;case"toggle":case"beforetoggle":G=Ur}var _e=(s&4)!==0,Ze=!_e&&(n==="scroll"||n==="scrollend"),V=_e?$!==null?$+"Capture":null:$;_e=[];for(var k=q,z;k!==null;){var J=k;if(z=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||z===null||V===null||(J=_n(k,V),J!=null&&_e.push(Bl(k,J,z))),Ze)break;k=k.return}0<_e.length&&($=new G($,ue,null,a,Y),Z.push({event:$,listeners:_e}))}}if((s&7)===0){e:{if($=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",$&&a!==ka&&(ue=a.relatedTarget||a.fromElement)&&(Li(ue)||ue[mi]))break e;if((G||$)&&($=Y.window===Y?Y:($=Y.ownerDocument)?$.defaultView||$.parentWindow:window,G?(ue=a.relatedTarget||a.toElement,G=q,ue=ue?Li(ue):null,ue!==null&&(Ze=l(ue),_e=ue.tag,ue!==Ze||_e!==5&&_e!==27&&_e!==6)&&(ue=null)):(G=null,ue=q),G!==ue)){if(_e=Qu,J="onMouseLeave",V="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(_e=fl,J="onPointerLeave",V="onPointerEnter",k="pointer"),Ze=G==null?$:Ds(G),z=ue==null?$:Ds(ue),$=new _e(J,k+"leave",G,a,Y),$.target=Ze,$.relatedTarget=z,J=null,Li(Y)===q&&(_e=new _e(V,k+"enter",ue,a,Y),_e.target=z,_e.relatedTarget=Ze,J=_e),Ze=J,G&&ue)t:{for(_e=JS,V=G,k=ue,z=0,J=V;J;J=_e(J))z++;J=0;for(var me=k;me;me=_e(me))J++;for(;0<z-J;)V=_e(V),z--;for(;0<J-z;)k=_e(k),J--;for(;z--;){if(V===k||k!==null&&V===k.alternate){_e=V;break t}V=_e(V),k=_e(k)}_e=null}else _e=null;G!==null&&gv(Z,$,G,_e,!1),ue!==null&&Ze!==null&&gv(Z,Ze,ue,_e,!0)}}e:{if($=q?Ds(q):window,G=$.nodeName&&$.nodeName.toLowerCase(),G==="select"||G==="input"&&$.type==="file")var He=Dg;else if(vn($))if(Pg)He=lS;else{He=aS;var he=sS}else G=$.nodeName,!G||G.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?q&&al(q.elementType)&&(He=Dg):He=oS;if(He&&(He=He(n,q))){Bs(Z,He,a,Y);break e}he&&he(n,$,q),n==="focusout"&&q&&$.type==="number"&&q.memoizedProps.value!=null&&Na($,"number",$.value)}switch(he=q?Ds(q):window,n){case"focusin":(vn(he)||he.contentEditable==="true")&&(ja=he,Pd=q,gl=null);break;case"focusout":gl=Pd=ja=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,qg(Z,a,Y);break;case"selectionchange":if(cS)break;case"keydown":case"keyup":qg(Z,a,Y)}var Ce;if(y)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Oe?Ke(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(L&&a.locale!=="ko"&&(Oe||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Oe&&(Ce=Or()):(In=Y,Pa="value"in In?In.value:In.textContent,Oe=!0)),he=Xc(q,Me),0<he.length&&(Me=new cl(Me,n,null,a,Y),Z.push({event:Me,listeners:he}),Ce?Me.data=Ce:(Ce=Et(a),Ce!==null&&(Me.data=Ce)))),(Ce=S?zt(n,a):Bt(n,a))&&(Me=Xc(q,"onBeforeInput"),0<Me.length&&(he=new cl("onBeforeInput","beforeinput",null,a,Y),Z.push({event:he,listeners:Me}),he.data=Ce)),KS(Z,n,q,a,Y)}mv(Z,s)})}function Bl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Xc(n,s){for(var a=s+"Capture",u=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=_n(n,a),d!=null&&u.unshift(Bl(n,d,f)),d=_n(n,s),d!=null&&u.push(Bl(n,d,f))),n.tag===3)return u;n=n.return}return[]}function JS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function gv(n,s,a,u,d){for(var f=s._reactName,_=[];a!==null&&a!==u;){var E=a,O=E.alternate,q=E.stateNode;if(E=E.tag,O!==null&&O===u)break;E!==5&&E!==26&&E!==27||q===null||(O=q,d?(q=_n(a,f),q!=null&&_.unshift(Bl(a,q,O))):d||(q=_n(a,f),q!=null&&_.push(Bl(a,q,O)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var WS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function yv(n){return(typeof n=="string"?n:""+n).replace(WS,`
`).replace(ZS,"")}function _v(n,s){return s=yv(s),yv(n)===s}function We(n,s,a,u,d,f){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Bn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Bn(n,""+u);break;case"className":Ir(n,"class",u);break;case"tabIndex":Ir(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(n,a,u);break;case"style":Fu(n,u,f);break;case"data":if(s!=="object"){Ir(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=yi(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&We(n,s,"name",d.name,d,null),We(n,s,"formEncType",d.formEncType,d,null),We(n,s,"formMethod",d.formMethod,d,null),We(n,s,"formTarget",d.formTarget,d,null)):(We(n,s,"encType",d.encType,d,null),We(n,s,"method",d.method,d,null),We(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=yi(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=Lt);break;case"onScroll":u!=null&&De("scroll",n);break;case"onScrollEnd":u!=null&&De("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=yi(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":De("beforetoggle",n),De("toggle",n),Rr(n,"popover",u);break;case"xlinkActuate":zn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Rr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cd.get(a)||a,Rr(n,a,u))}}function om(n,s,a,u,d,f){switch(a){case"style":Fu(n,u,f);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof u=="string"?Bn(n,u):(typeof u=="number"||typeof u=="bigint")&&Bn(n,""+u);break;case"onScroll":u!=null&&De("scroll",n);break;case"onScrollEnd":u!=null&&De("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),f=n[Yt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,d),typeof u=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,d);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Rr(n,a,u)}}}function Wt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",n),De("load",n);var u=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:We(n,s,f,_,a,null)}}d&&We(n,s,"srcSet",a.srcSet,a,null),u&&We(n,s,"src",a.src,a,null);return;case"input":De("invalid",n);var E=f=_=d=null,O=null,q=null;for(u in a)if(a.hasOwnProperty(u)){var Y=a[u];if(Y!=null)switch(u){case"name":d=Y;break;case"type":_=Y;break;case"checked":O=Y;break;case"defaultChecked":q=Y;break;case"value":f=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:We(n,s,u,Y,a,null)}}Ps(n,f,E,O,q,_,d,!1);return;case"select":De("invalid",n),u=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(E=a[d],E!=null))switch(d){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":u=E;default:We(n,s,d,E,a,null)}s=f,a=_,n.multiple=!!u,s!=null?qe(n,!!u,s,!1):a!=null&&qe(n,!!u,a,!0);return;case"textarea":De("invalid",n),f=d=u=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":u=E;break;case"defaultValue":d=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:We(n,s,_,E,a,null)}xr(n,u,d,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:We(n,s,O,u,a,null)}return;case"dialog":De("beforetoggle",n),De("toggle",n),De("cancel",n),De("close",n);break;case"iframe":case"object":De("load",n);break;case"video":case"audio":for(u=0;u<zl.length;u++)De(zl[u],n);break;case"image":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"embed":case"source":case"link":De("error",n),De("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(u=a[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:We(n,s,q,u,a,null)}return;default:if(al(s)){for(Y in a)a.hasOwnProperty(Y)&&(u=a[Y],u!==void 0&&om(n,s,Y,u,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(u=a[E],u!=null&&We(n,s,E,u,a,null))}function eA(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,E=null,O=null,q=null,Y=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":O=Z;default:u.hasOwnProperty(G)||We(n,s,G,null,u,Z)}}for(var $ in u){var G=u[$];if(Z=a[$],u.hasOwnProperty($)&&(G!=null||Z!=null))switch($){case"type":f=G;break;case"name":d=G;break;case"checked":q=G;break;case"defaultChecked":Y=G;break;case"value":_=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:G!==Z&&We(n,s,$,G,u,Z)}}Cr(n,_,E,O,q,Y,f,d);return;case"select":G=_=E=$=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":G=O;default:u.hasOwnProperty(f)||We(n,s,f,null,u,O)}for(d in u)if(f=u[d],O=a[d],u.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":$=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==O&&We(n,s,d,f,u,O)}s=E,a=_,u=G,$!=null?qe(n,!!a,$,!1):!!u!=!!a&&(s!=null?qe(n,!!a,s,!0):qe(n,!!a,a?[]:"",!1));return;case"textarea":G=$=null;for(E in a)if(d=a[E],a.hasOwnProperty(E)&&d!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:We(n,s,E,null,u,d)}for(_ in u)if(d=u[_],f=a[_],u.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":$=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&We(n,s,_,d,u,f)}Ms(n,$,G);return;case"option":for(var ue in a)if($=a[ue],a.hasOwnProperty(ue)&&$!=null&&!u.hasOwnProperty(ue))switch(ue){case"selected":n.selected=!1;break;default:We(n,s,ue,null,u,$)}for(O in u)if($=u[O],G=a[O],u.hasOwnProperty(O)&&$!==G&&($!=null||G!=null))switch(O){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:We(n,s,O,$,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)$=a[_e],a.hasOwnProperty(_e)&&$!=null&&!u.hasOwnProperty(_e)&&We(n,s,_e,null,u,$);for(q in u)if($=u[q],G=a[q],u.hasOwnProperty(q)&&$!==G&&($!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,s));break;default:We(n,s,q,$,u,G)}return;default:if(al(s)){for(var Ze in a)$=a[Ze],a.hasOwnProperty(Ze)&&$!==void 0&&!u.hasOwnProperty(Ze)&&om(n,s,Ze,void 0,u,$);for(Y in u)$=u[Y],G=a[Y],!u.hasOwnProperty(Y)||$===G||$===void 0&&G===void 0||om(n,s,Y,$,u,G);return}}for(var V in a)$=a[V],a.hasOwnProperty(V)&&$!=null&&!u.hasOwnProperty(V)&&We(n,s,V,null,u,$);for(Z in u)$=u[Z],G=a[Z],!u.hasOwnProperty(Z)||$===G||$==null&&G==null||We(n,s,Z,$,u,G)}function vv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var d=a[u],f=d.transferSize,_=d.initiatorType,E=d.duration;if(f&&E&&vv(_)){for(_=0,E=d.responseEnd,u+=1;u<a.length;u++){var O=a[u],q=O.startTime;if(q>E)break;var Y=O.transferSize,Z=O.initiatorType;Y&&vv(Z)&&(O=O.responseEnd,_+=Y*(O<E?1:(E-q)/(O-q)))}if(--u,s+=8*(f+_)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var lm=null,um=null;function Jc(n){return n.nodeType===9?n:n.ownerDocument}function bv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function cm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hm=null;function nA(){var n=window.event;return n&&n.type==="popstate"?n===hm?!1:(hm=n,!0):(hm=null,!1)}var Ev=typeof setTimeout=="function"?setTimeout:void 0,iA=typeof clearTimeout=="function"?clearTimeout:void 0,Tv=typeof Promise=="function"?Promise:void 0,rA=typeof queueMicrotask=="function"?queueMicrotask:typeof Tv<"u"?function(n){return Tv.resolve(null).then(n).catch(sA)}:Ev;function sA(n){setTimeout(function(){throw n})}function es(n){return n==="head"}function Sv(n,s){var a=s,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(d),ho(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ql(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ql(a);for(var f=a.firstChild;f;){var _=f.nextSibling,E=f.nodeName;f[ji]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&ql(n.ownerDocument.body);a=d}while(a);ho(s)}function Av(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function dm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dm(a),ks(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function aA(n,s,a,u){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ji])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function oA(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Yn(n.nextSibling),n===null))return null;return n}function Rv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Yn(n.nextSibling),n===null))return null;return n}function fm(n){return n.data==="$?"||n.data==="$~"}function mm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function lA(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var pm=null;function Iv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Yn(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function Cv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function xv(n,s,a){switch(s=Jc(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function ql(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ks(n)}var Qn=new Map,Ov=new Set;function Wc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ar=ae.d;ae.d={f:uA,r:cA,D:hA,C:dA,L:fA,m:mA,X:gA,S:pA,M:yA};function uA(){var n=ar.f(),s=Hc();return n||s}function cA(n){var s=zi(n);s!==null&&s.tag===5&&s.type==="form"?Ky(s):ar.r(n)}var lo=typeof document>"u"?null:document;function Nv(n,s,a){var u=lo;if(u&&typeof s=="string"&&s){var d=ft(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Ov.has(d)||(Ov.add(d),n={rel:n,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Wt(s,"link",n),yt(s),u.head.appendChild(s)))}}function hA(n){ar.D(n),Nv("dns-prefetch",n,null)}function dA(n,s){ar.C(n,s),Nv("preconnect",n,s)}function fA(n,s,a){ar.L(n,s,a);var u=lo;if(u&&n&&s){var d='link[rel="preload"][as="'+ft(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ft(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ft(a.imageSizes)+'"]')):d+='[href="'+ft(n)+'"]';var f=d;switch(s){case"style":f=uo(n);break;case"script":f=co(n)}Qn.has(f)||(n=w({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Qn.set(f,n),u.querySelector(d)!==null||s==="style"&&u.querySelector(Hl(f))||s==="script"&&u.querySelector($l(f))||(s=u.createElement("link"),Wt(s,"link",n),yt(s),u.head.appendChild(s)))}}function mA(n,s){ar.m(n,s);var a=lo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ft(u)+'"][href="'+ft(n)+'"]',f=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=co(n)}if(!Qn.has(f)&&(n=w({rel:"modulepreload",href:n},s),Qn.set(f,n),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(f)))return}u=a.createElement("link"),Wt(u,"link",n),yt(u),a.head.appendChild(u)}}}function pA(n,s,a){ar.S(n,s,a);var u=lo;if(u&&n){var d=ti(u).hoistableStyles,f=uo(n);s=s||"default";var _=d.get(f);if(!_){var E={loading:0,preload:null};if(_=u.querySelector(Hl(f)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Qn.get(f))&&gm(n,a);var O=_=u.createElement("link");yt(O),Wt(O,"link",n),O._p=new Promise(function(q,Y){O.onload=q,O.onerror=Y}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Zc(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:E},d.set(f,_)}}}function gA(n,s){ar.X(n,s);var a=lo;if(a&&n){var u=ti(a).hoistableScripts,d=co(n),f=u.get(d);f||(f=a.querySelector($l(d)),f||(n=w({src:n,async:!0},s),(s=Qn.get(d))&&ym(n,s),f=a.createElement("script"),yt(f),Wt(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function yA(n,s){ar.M(n,s);var a=lo;if(a&&n){var u=ti(a).hoistableScripts,d=co(n),f=u.get(d);f||(f=a.querySelector($l(d)),f||(n=w({src:n,async:!0,type:"module"},s),(s=Qn.get(d))&&ym(n,s),f=a.createElement("script"),yt(f),Wt(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function kv(n,s,a,u){var d=(d=xe.current)?Wc(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=uo(a.href),a=ti(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=uo(a.href);var f=ti(d).hoistableStyles,_=f.get(n);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,_),(f=d.querySelector(Hl(n)))&&!f._p&&(_.instance=f,_.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),f||_A(d,n,a,_.state))),s&&u===null)throw Error(r(528,""));return _}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=co(a),a=ti(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function uo(n){return'href="'+ft(n)+'"'}function Hl(n){return'link[rel="stylesheet"]['+n+"]"}function Dv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function _A(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Wt(s,"link",a),yt(s),n.head.appendChild(s))}function co(n){return'[src="'+ft(n)+'"]'}function $l(n){return"script[async]"+n}function Pv(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+ft(a.href)+'"]');if(u)return s.instance=u,yt(u),u;var d=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),yt(u),Wt(u,"style",d),Zc(u,a.precedence,n),s.instance=u;case"stylesheet":d=uo(a.href);var f=n.querySelector(Hl(d));if(f)return s.state.loading|=4,s.instance=f,yt(f),f;u=Dv(a),(d=Qn.get(d))&&gm(u,d),f=(n.ownerDocument||n).createElement("link"),yt(f);var _=f;return _._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),Wt(f,"link",u),s.state.loading|=4,Zc(f,a.precedence,n),s.instance=f;case"script":return f=co(a.src),(d=n.querySelector($l(f)))?(s.instance=d,yt(d),d):(u=a,(d=Qn.get(f))&&(u=w({},a),ym(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),yt(d),Wt(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Zc(u,a.precedence,n));return s.instance}function Zc(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,f=d,_=0;_<u.length;_++){var E=u[_];if(E.dataset.precedence===s)f=E;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function gm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ym(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var eh=null;function Mv(n,s,a){if(eh===null){var u=new Map,d=eh=new Map;d.set(a,u)}else d=eh,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var f=a[d];if(!(f[ji]||f[dt]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(s)||"";_=n+_;var E=u.get(_);E?E.push(f):u.set(_,[f])}}return u}function Uv(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function vA(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Vv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function bA(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=uo(u.href),f=s.querySelector(Hl(d));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=th.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=f,yt(f);return}f=s.ownerDocument||s,u=Dv(u),(d=Qn.get(d))&&gm(u,d),f=f.createElement("link"),yt(f);var _=f;_._p=new Promise(function(E,O){_.onload=E,_.onerror=O}),Wt(f,"link",u),a.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=th.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var _m=0;function wA(n,s){return n.stylesheets&&n.count===0&&ih(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4+s);0<n.imgBytes&&_m===0&&(_m=62500*tA());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend)){var f=n.unsuspend;n.unsuspend=null,f()}},(n.imgBytes>_m?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ih(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nh=null;function ih(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nh=new Map,s.forEach(EA,n),nh=null,th.call(n))}function EA(n,s){if(!(s.state.loading&4)){var a=nh.get(n);if(a)var u=a.get(null);else{a=new Map,nh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),u=_)}u&&a.set(null,u)}d=s.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||u,f===u&&a.set(null,d),a.set(_,d),this.count++,u=th.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Fl={$$typeof:F,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function TA(n,s,a,u,d,f,_,E,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function jv(n,s,a,u,d,f,_,E,O,q,Y,Z){return n=new TA(n,s,a,_,O,q,Y,Z,E),s=1,f===!0&&(s|=24),f=xn(3,null,null,s),n.current=f,f.stateNode=n,s=Xd(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:u,isDehydrated:a,cache:s},ef(f),n}function Lv(n){return n?(n=Ba,n):Ba}function zv(n,s,a,u,d,f){d=Lv(d),u.context===null?u.context=d:u.pendingContext=d,u=Hr(s),u.payload={element:a},f=f===void 0?null:f,f!==null&&(u.callback=f),a=$r(n,u,s),a!==null&&(Sn(a,n,s),Tl(a,n,s))}function Bv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function vm(n,s){Bv(n,s),(n=n.alternate)&&Bv(n,s)}function qv(n){if(n.tag===13||n.tag===31){var s=$s(n,67108864);s!==null&&Sn(s,n,67108864),vm(n,67108864)}}function Hv(n){if(n.tag===13||n.tag===31){var s=Pn();s=Zo(s);var a=$s(n,s);a!==null&&Sn(a,n,s),vm(n,s)}}var rh=!0;function SA(n,s,a,u){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,bm(n,s,a,u)}finally{ae.p=f,Q.T=d}}function AA(n,s,a,u){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,bm(n,s,a,u)}finally{ae.p=f,Q.T=d}}function bm(n,s,a,u){if(rh){var d=wm(u);if(d===null)am(n,s,u,sh,a),Fv(n,u);else if(IA(d,n,s,a,u))u.stopPropagation();else if(Fv(n,u),s&4&&-1<RA.indexOf(n)){for(;d!==null;){var f=zi(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=ei(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var O=1<<31-dn(_);E.entanglements[1]|=O,_&=~O}Ti(f),(Fe&6)===0&&(Bc=Gt()+500,Ll(0))}}break;case 31:case 13:E=$s(f,2),E!==null&&Sn(E,f,2),Hc(),vm(f,2)}if(f=wm(u),f===null&&am(n,s,u,sh,a),f===d)break;d=f}d!==null&&u.stopPropagation()}else am(n,s,u,null,a)}}function wm(n){return n=Da(n),Em(n)}var sh=null;function Em(n){if(sh=null,n=Li(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=m(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return sh=n,null}function $v(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ju()){case Nt:return 2;case jt:return 8;case Mi:case Lu:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var Tm=!1,ts=null,ns=null,is=null,Gl=new Map,Kl=new Map,rs=[],RA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fv(n,s){switch(n){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Gl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(s.pointerId)}}function Yl(n,s,a,u,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},s!==null&&(s=zi(s),s!==null&&qv(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function IA(n,s,a,u,d){switch(s){case"focusin":return ts=Yl(ts,n,s,a,u,d),!0;case"dragenter":return ns=Yl(ns,n,s,a,u,d),!0;case"mouseover":return is=Yl(is,n,s,a,u,d),!0;case"pointerover":var f=d.pointerId;return Gl.set(f,Yl(Gl.get(f)||null,n,s,a,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Kl.set(f,Yl(Kl.get(f)||null,n,s,a,u,d)),!0}return!1}function Gv(n){var s=Li(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,Bu(n.priority,function(){Hv(a)});return}}else if(s===31){if(s=m(a),s!==null){n.blockedOn=s,Bu(n.priority,function(){Hv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ah(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=wm(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);ka=u,a.target.dispatchEvent(u),ka=null}else return s=zi(a),s!==null&&qv(s),n.blockedOn=a,!1;s.shift()}return!0}function Kv(n,s,a){ah(n)&&a.delete(s)}function CA(){Tm=!1,ts!==null&&ah(ts)&&(ts=null),ns!==null&&ah(ns)&&(ns=null),is!==null&&ah(is)&&(is=null),Gl.forEach(Kv),Kl.forEach(Kv)}function oh(n,s){n.blockedOn===s&&(n.blockedOn=null,Tm||(Tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CA)))}var lh=null;function Yv(n){lh!==n&&(lh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){lh===n&&(lh=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(Em(u||a)===null)continue;break}var f=zi(a);f!==null&&(n.splice(s,3),s-=3,wf(f,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function ho(n){function s(O){return oh(O,n)}ts!==null&&oh(ts,n),ns!==null&&oh(ns,n),is!==null&&oh(is,n),Gl.forEach(s),Kl.forEach(s);for(var a=0;a<rs.length;a++){var u=rs[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<rs.length&&(a=rs[0],a.blockedOn===null);)Gv(a),a.blockedOn===null&&rs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],f=a[u+1],_=d[Yt]||null;if(typeof f=="function")_||Yv(a);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[Yt]||null)E=_.formAction;else if(Em(d)!==null)continue}else E=_.action;typeof E=="function"?a[u+1]=E:(a.splice(u,3),u-=3),Yv(a)}}}function Qv(){function n(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Sm(n){this._internalRoot=n}uh.prototype.render=Sm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,u=Pn();zv(a,u,n,s,null,null)},uh.prototype.unmount=Sm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;zv(n.current,2,null,n,null,null),Hc(),s[mi]=null}};function uh(n){this._internalRoot=n}uh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Vi();n={blockedOn:null,target:n,priority:s};for(var a=0;a<rs.length&&s!==0&&s<rs[a].priority;a++);rs.splice(a,0,n),a===0&&Gv(n)}};var Xv=e.version;if(Xv!=="19.2.3")throw Error(r(527,Xv,"19.2.3"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var xA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{_r=ch.inject(xA),sn=ch}catch{}}return Xl.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,u="",d=i_,f=r_,_=s_;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=jv(n,1,!1,null,null,a,u,null,d,f,_,Qv),n[mi]=s.current,sm(n),new Sm(s)},Xl.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var u=!1,d="",f=i_,_=r_,E=s_,O=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=jv(n,1,!0,s,a??null,u,d,O,f,_,E,Qv),s.context=Lv(null),a=s.current,u=Pn(),u=Zo(u),d=Hr(u),d.callback=null,$r(a,d,u),a=u,s.current.lanes=a,wr(s,a),Ti(s),n[mi]=s.current,sm(n),new uh(s)},Xl.version="19.2.3",Xl}var a0;function zA(){if(a0)return Im.exports;a0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=LA(),Im.exports}var BA=zA();const qA=lw(BA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$A=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o0=i=>{const e=$A(i);return e.charAt(0).toUpperCase()+e.slice(1)},uw=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),FA=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=bt.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...m},p)=>bt.createElement("svg",{ref:p,...GA,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:uw("lucide",o),...!l&&!FA(m)&&{"aria-hidden":"true"},...m},[...c.map(([g,b])=>bt.createElement(g,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=(i,e)=>{const t=bt.forwardRef(({className:r,...o},l)=>bt.createElement(KA,{ref:l,iconNode:e,className:uw(`lucide-${HA(o0(i))}`,`lucide-${i}`,r),...o}));return t.displayName=o0(i),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],QA=at("activity",YA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],np=at("bell",XA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],WA=at("camera",JA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],e1=at("check",ZA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],n1=at("chevron-down",t1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],r1=at("chevron-right",i1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],cw=at("cpu",s1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],o1=at("database",a1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],u1=at("globe",l1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],l0=at("info",c1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],d1=at("key",h1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nm=at("loader-circle",f1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],u0=at("lock",m1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],g1=at("menu",p1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],_1=at("message-square",y1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],b1=at("radio",v1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],E1=at("refresh-cw",w1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],S1=at("save",T1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],R1=at("server",A1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],C1=at("shield-check",I1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],O1=at("terminal",x1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],k1=at("triangle-alert",N1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],P1=at("user",D1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],c0=at("x",M1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hw=at("zap",U1);var Dt=(i=>(i.PROFILE="PROFILE",i.SECURITY="SECURITY",i.TELEMETRY="TELEMETRY",i.UPLINK="UPLINK",i.NOTIFICATIONS="NOTIFICATIONS",i))(Dt||{});const V1=()=>{};var h0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},j1=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],m=i[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,m=c?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,b=l>>2,w=(l&3)<<4|m>>4;let T=(m&15)<<2|g>>6,C=g&63;p||(C=64,c||(T=64)),r.push(t[b],t[w],t[T],t[C])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(dw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):j1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const g=o<i.length?t[i.charAt(o)]:64;++o;const w=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||m==null||g==null||w==null)throw new L1;const T=l<<2|m>>4;if(r.push(T),g!==64){const C=m<<4&240|g>>2;if(r.push(C),w!==64){const P=g<<6&192|w;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class L1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z1=function(i){const e=dw(i);return fw.encodeByteArray(e,!0)},Dh=function(i){return z1(i).replace(/\./g,"")},mw=function(i){try{return fw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=()=>B1().__FIREBASE_DEFAULTS__,H1=()=>{if(typeof process>"u"||typeof h0>"u")return;const i=h0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&mw(i[1]);return e&&JSON.parse(e)},nd=()=>{try{return V1()||q1()||H1()||$1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},pw=i=>{var e,t;return(t=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},F1=i=>{const e=pw(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gw=()=>{var i;return(i=nd())===null||i===void 0?void 0:i.config},yw=i=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _w(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Dh(JSON.stringify(t)),Dh(JSON.stringify(c)),""].join(".")}const nu={};function Y1(){const i={prod:[],emulator:[]};for(const e of Object.keys(nu))nu[e]?i.emulator.push(e):i.prod.push(e);return i}function Q1(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let d0=!1;function vw(i,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||nu[i]===e||nu[i]||d0)return;nu[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=Y1().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{d0=!0,c()},T}function b(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=Q1(r),C=t("text"),P=document.getElementById(C)||document.createElement("span"),B=t("learnmore"),H=document.getElementById(B)||document.createElement("a"),W=t("preprendIcon"),te=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;m(F),b(H,B);const ie=g();p(te,W),F.append(te,P,H,ie),document.body.appendChild(F)}l?(P.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function J1(){var i;const e=(i=nd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function W1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function eR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tR(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function nR(){return!J1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iR(){try{return typeof indexedDB=="object"}catch{return!1}}function rR(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="FirebaseError";class gr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sR,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?aR(l,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new gr(o,m,r)}}function aR(i,e){return i.replace(oR,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oR=/\{\$([^}]+)}/g;function lR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(f0(l)&&f0(c)){if(!fa(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function f0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uR(i,e){const t=new cR(i,e);return t.subscribe.bind(t)}class cR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=km),o.error===void 0&&(o.error=km),o.complete===void 0&&(o.complete=km);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(i){return i&&i._delegate?i._delegate:i}class ma{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new G1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fR(i){return i===sa?void 0:i}function mR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const gR={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},yR=Ue.INFO,_R={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},vR=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=_R[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zp{constructor(e){this.name=e,this._logLevel=yR,this._logHandler=vR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const bR=(i,e)=>e.some(t=>i instanceof t);let m0,p0;function wR(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ER(){return p0||(p0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bw=new WeakMap,ip=new WeakMap,ww=new WeakMap,Dm=new WeakMap,Bp=new WeakMap;function TR(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(ms(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bw.set(t,i)}).catch(()=>{}),Bp.set(e,i),e}function SR(i){if(ip.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});ip.set(i,e)}let rp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ip.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ww.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ms(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function AR(i){rp=i(rp)}function RR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Pm(this),e,...t);return ww.set(r,e.sort?e.sort():[e]),ms(r)}:ER().includes(i)?function(...e){return i.apply(Pm(this),e),ms(bw.get(this))}:function(...e){return ms(i.apply(Pm(this),e))}}function IR(i){return typeof i=="function"?RR(i):(i instanceof IDBTransaction&&SR(i),bR(i,wR())?new Proxy(i,rp):i)}function ms(i){if(i instanceof IDBRequest)return TR(i);if(Dm.has(i))return Dm.get(i);const e=IR(i);return e!==i&&(Dm.set(i,e),Bp.set(e,i)),e}const Pm=i=>Bp.get(i);function CR(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),m=ms(c);return r&&c.addEventListener("upgradeneeded",p=>{r(ms(c.result),p.oldVersion,p.newVersion,ms(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const xR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],Mm=new Map;function g0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=OR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||xR.includes(t)))return;const l=async function(c,...m){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),o&&p.done]))[0]};return Mm.set(e,l),l}AR(i=>({...i,get:(e,t,r)=>g0(e,t)||i.get(e,t,r),has:(e,t)=>!!g0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",y0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new zp("@firebase/app"),DR="@firebase/app-compat",PR="@firebase/analytics-compat",MR="@firebase/analytics",UR="@firebase/app-check-compat",VR="@firebase/app-check",jR="@firebase/auth",LR="@firebase/auth-compat",zR="@firebase/database",BR="@firebase/data-connect",qR="@firebase/database-compat",HR="@firebase/functions",$R="@firebase/functions-compat",FR="@firebase/installations",GR="@firebase/installations-compat",KR="@firebase/messaging",YR="@firebase/messaging-compat",QR="@firebase/performance",XR="@firebase/performance-compat",JR="@firebase/remote-config",WR="@firebase/remote-config-compat",ZR="@firebase/storage",eI="@firebase/storage-compat",tI="@firebase/firestore",nI="@firebase/ai",iI="@firebase/firestore-compat",rI="firebase",sI="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",aI={[sp]:"fire-core",[DR]:"fire-core-compat",[MR]:"fire-analytics",[PR]:"fire-analytics-compat",[VR]:"fire-app-check",[UR]:"fire-app-check-compat",[jR]:"fire-auth",[LR]:"fire-auth-compat",[zR]:"fire-rtdb",[BR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[HR]:"fire-fn",[$R]:"fire-fn-compat",[FR]:"fire-iid",[GR]:"fire-iid-compat",[KR]:"fire-fcm",[YR]:"fire-fcm-compat",[QR]:"fire-perf",[XR]:"fire-perf-compat",[JR]:"fire-rc",[WR]:"fire-rc-compat",[ZR]:"fire-gcs",[eI]:"fire-gcs-compat",[tI]:"fire-fst",[iI]:"fire-fst-compat",[nI]:"fire-vertex","fire-js":"fire-js",[rI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,oI=new Map,op=new Map;function _0(i,e){try{i.container.addComponent(e)}catch(t){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Po(i){const e=i.name;if(op.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,i);for(const t of Ph.values())_0(t,i);for(const t of oI.values())_0(t,i);return!0}function qp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ai(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new Ru("app","Firebase",lI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=sI;function Hp(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ap,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ps.create("bad-app-name",{appName:String(o)});if(t||(t=gw()),!t)throw ps.create("no-options");const l=Ph.get(o);if(l){if(fa(t,l.options)&&fa(r,l.config))return l;throw ps.create("duplicate-app",{appName:o})}const c=new pR(o);for(const p of op.values())c.addComponent(p);const m=new uI(t,r,c);return Ph.set(o,m),m}function Ew(i=ap){const e=Ph.get(i);if(!e&&i===ap&&gw())return Hp();if(!e)throw ps.create("no-app",{appName:i});return e}function gs(i,e,t){var r;let o=(r=aI[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const m=[`Unable to register library "${o}" with version "${e}":`];l&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&m.push("and"),c&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(m.join(" "));return}Po(new ma(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="firebase-heartbeat-database",hI=1,cu="firebase-heartbeat-store";let Um=null;function Tw(){return Um||(Um=CR(cI,hI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ps.create("idb-open",{originalErrorMessage:i.message})})),Um}async function dI(i){try{const t=(await Tw()).transaction(cu),r=await t.objectStore(cu).get(Sw(i));return await t.done,r}catch(e){if(e instanceof gr)hr.warn(e.message);else{const t=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(t.message)}}}async function v0(i,e){try{const r=(await Tw()).transaction(cu,"readwrite");await r.objectStore(cu).put(e,Sw(i)),await r.done}catch(t){if(t instanceof gr)hr.warn(t.message);else{const r=ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hr.warn(r.message)}}}function Sw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1024,mI=30;class pI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=b0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>mI){const c=_I(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=b0(),{heartbeatsToSend:r,unsentEntries:o}=gI(this._heartbeatsCache.heartbeats),l=Dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hr.warn(t),""}}}function b0(){return new Date().toISOString().substring(0,10)}function gI(i,e=fI){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),w0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),w0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class yI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iR()?rR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return v0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return v0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function w0(i){return Dh(JSON.stringify({version:2,heartbeats:i})).length}function _I(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(i){Po(new ma("platform-logger",e=>new NR(e),"PRIVATE")),Po(new ma("heartbeat",e=>new pI(e),"PRIVATE")),gs(sp,y0,i),gs(sp,y0,"esm2017"),gs("fire-js","")}vI("");var bI="firebase",wI="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(bI,wI,"app");function _a(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function EI(i,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function m(b){try{g(r.next(b))}catch(w){c(w)}}function p(b){try{g(r.throw(b))}catch(w){c(w)}}function g(b){b.done?l(b.value):o(b.value).then(m,p)}g((r=r.apply(i,e||[])).next())})}function Aw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TI=Aw,Rw=new Ru("auth","Firebase",Aw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new zp("@firebase/auth");function SI(i,...e){Mh.logLevel<=Ue.WARN&&Mh.warn(`Auth (${qo}): ${i}`,...e)}function Eh(i,...e){Mh.logLevel<=Ue.ERROR&&Mh.error(`Auth (${qo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(i,...e){throw $p(i,...e)}function Ri(i,...e){return $p(i,...e)}function Iw(i,e,t){const r=Object.assign(Object.assign({},TI()),{[e]:t});return new Ru("auth","Firebase",r).create(e,{appName:i.name})}function ha(i){return Iw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Rw.create(i,...e)}function Te(i,e,...t){if(!i)throw $p(e,...t)}function lr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Eh(e),new Error(e)}function fr(i,e){i||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function AI(){return E0()==="http:"||E0()==="https:"}function E0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AI()||Z1()||"connection"in navigator)?navigator.onLine:!0}function II(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,fr(t>e,"Short delay should be less than long delay!"),this.isMobile=X1()||eR()}get(){return RI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(i,e){fr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OI=new Cu(3e4,6e4);function Gp(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ho(i,e,t,r,o={}){return xw(i,o,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const m=Iu(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},l);return W1()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(g.credentials="include"),Cw.fetch()(await Ow(i,i.config.apiHost,t,m),g)})}async function xw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},CI),e);try{const o=new kI(i),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw hh(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw hh(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw hh(i,"user-disabled",c);const b=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Iw(i,b,g);dr(i,b)}}catch(o){if(o instanceof gr)throw o;dr(i,"network-request-failed",{message:String(o)})}}async function NI(i,e,t,r,o={}){const l=await Ho(i,e,t,r,o);return"mfaPendingCredential"in l&&dr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function Ow(i,e,t,r){const o=`${e}${t}?${r}`,l=i,c=l.config.emulator?Fp(i.config,o):`${i.config.apiScheme}://${o}`;return xI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class kI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ri(this.auth,"network-request-failed")),OI.get())})}}function hh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ri(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(i,e){return Ho(i,"POST","/v1/accounts:delete",e)}async function Uh(i,e){return Ho(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PI(i,e=!1){const t=Wn(i),r=await t.getIdToken(e),o=Kp(r);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:iu(Vm(o.auth_time)),issuedAtTime:iu(Vm(o.iat)),expirationTime:iu(Vm(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Vm(i){return Number(i)*1e3}function Kp(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=mw(t);return o?JSON.parse(o):(Eh("Failed to decode base64 JWT payload"),null)}catch(o){return Eh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function T0(i){const e=Kp(i);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gr&&MI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function MI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(i){var e;const t=i.auth,r=await i.getIdToken(),o=await hu(i,Uh(t,{idToken:r}));Te(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];i._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Nw(l.providerUserInfo):[],m=jI(i.providerData,c),p=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!(m!=null&&m.length),b=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new up(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(i,w)}async function VI(i){const e=Wn(i);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Nw(i){return i.map(e=>{var{providerId:t}=e,r=_a(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(i,e){const t=await xw(i,{},async()=>{const r=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=i.config,c=await Ow(i,o,"/v1/token",`key=${l}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:r};return i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(p.credentials="include"),Cw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zI(i,e){return Ho(i,"POST","/v2/accounts:revokeToken",Gp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=T0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await LI(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,c=new Co;return r&&(Te(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Te(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(i,e){Te(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=_a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new up(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PI(this,e)}reload(){return VI(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(ha(this.auth));const e=await this.getIdToken();return await hu(this,DI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,c,m,p,g,b;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,P=(c=t.photoURL)!==null&&c!==void 0?c:void 0,B=(m=t.tenantId)!==null&&m!==void 0?m:void 0,H=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,W=(g=t.createdAt)!==null&&g!==void 0?g:void 0,te=(b=t.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:F,emailVerified:ie,isAnonymous:ye,providerData:oe,stsTokenManager:I}=t;Te(F&&I,e,"internal-error");const R=Co.fromJSON(this.name,I);Te(typeof F=="string",e,"internal-error"),as(w,e.name),as(T,e.name),Te(typeof ie=="boolean",e,"internal-error"),Te(typeof ye=="boolean",e,"internal-error"),as(C,e.name),as(P,e.name),as(B,e.name),as(H,e.name),as(W,e.name),as(te,e.name);const x=new ui({uid:F,auth:e,email:T,emailVerified:ie,displayName:w,isAnonymous:ye,photoURL:P,phoneNumber:C,tenantId:B,stsTokenManager:R,createdAt:W,lastLoginAt:te});return oe&&Array.isArray(oe)&&(x.providerData=oe.map(M=>Object.assign({},M))),H&&(x._redirectEventId=H),x}static async _fromIdTokenResponse(e,t,r=!1){const o=new Co;o.updateFromServerResponse(t);const l=new ui({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Vh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Nw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new Co;m.updateFromIdToken(r);const p=new ui({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new up(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function ur(i){fr(i instanceof Function,"Expected a class definition");let e=S0.get(i);return e?(fr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,S0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kw.type="NONE";const A0=kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(i,e,t){return`firebase:${i}:${e}:${t}`}class xo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Th(this.userKey,o.apiKey,l),this.fullPersistenceKey=Th("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Uh(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xo(ur(A0),e,r);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ur(A0);const c=Th(r,e.config.apiKey,e.name);let m=null;for(const g of t)try{const b=await g._get(c);if(b){let w;if(typeof b=="string"){const T=await Uh(e,{idToken:b}).catch(()=>{});if(!T)break;w=await ui._fromGetAccountInfoResponse(e,T,b)}else w=ui._fromJSON(e,b);g!==l&&(m=w),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new xo(l,e,r):(l=p[0],m&&await l._set(c,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new xo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(Lw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||Mw(e))&&!e.includes("edge/"))return"Chrome";if(Vw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dw(i=hn()){return/firefox\//i.test(i)}function Pw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mw(i=hn()){return/crios\//i.test(i)}function Uw(i=hn()){return/iemobile/i.test(i)}function Vw(i=hn()){return/android/i.test(i)}function jw(i=hn()){return/blackberry/i.test(i)}function Lw(i=hn()){return/webos/i.test(i)}function Yp(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function BI(i=hn()){var e;return Yp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qI(){return tR()&&document.documentMode===10}function zw(i=hn()){return Yp(i)||Vw(i)||Lw(i)||jw(i)||/windows phone/i.test(i)||Uw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(i,e=[]){let t;switch(i){case"Browser":t=R0(hn());break;case"Worker":t=`${R0(hn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,m)=>{try{const p=e(l);c(p)}catch(p){m(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(i,e={}){return Ho(i,"GET","/v2/passwordPolicy",Gp(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=6;class GI{constructor(e){var t,r,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:FI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,c,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I0(this),this.idTokenSubscription=new I0(this),this.beforeStateQueue=new HI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Uh(this,{idToken:e}),r=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===m)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=II()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(ha(this));const t=e?Wn(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $I(this),t=new GI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&SI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qp(i){return Wn(i)}class I0{constructor(e){this.auth=e,this.observer=null,this.addObserver=uR(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YI(i){Xp=i}function QI(i){return Xp.loadJS(i)}function XI(){return Xp.gapiScript}function JI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(i,e){const t=qp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fa(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function ZI(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ur);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eC(i,e,t){const r=Qp(i);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=qw(e),{host:c,port:m}=tC(e),p=m===null?"":`:${m}`,g={url:`${l}//${c}${p}/`},b=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(fa(g,r.config.emulator)&&fa(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Bo(c)?(_w(`${l}//${c}${p}`),vw("Auth",!0)):nC()}function qw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function tC(i){const e=qw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:C0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:C0(c)}}}function C0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function nC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(i,e){return NI(i,"POST","/v1/accounts:signInWithIdp",Gp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="http://localhost";class pa extends Hw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,l=_a(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new pa(r,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:iC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Iu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends $w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends xu{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pa._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return us.credential(t,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends xu{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends xu{constructor(){super("twitter.com")}static credential(e,t){return pa._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await ui._fromIdTokenResponse(e,r,o),c=x0(r);return new Mo({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=x0(r);return new Mo({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function x0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends gr{constructor(e,t,r,o){var l;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new jh(e,t,r,o)}}function Fw(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(i,l,e,r):l})}async function rC(i,e,t=!1){const r=await hu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Mo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(i,e,t=!1){const{auth:r}=i;if(Ai(r.app))return Promise.reject(ha(r));const o="reauthenticate";try{const l=await hu(i,Fw(r,o,e,i),t);Te(l.idToken,r,"internal-error");const c=Kp(l.idToken);Te(c,r,"internal-error");const{sub:m}=c;return Te(i.uid===m,r,"user-mismatch"),Mo._forOperation(i,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(i,e,t=!1){if(Ai(i.app))return Promise.reject(ha(i));const r="signIn",o=await Fw(i,r,e),l=await Mo._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(l.user),l}function oC(i,e,t,r){return Wn(i).onIdTokenChanged(e,t,r)}function lC(i,e,t){return Wn(i).beforeAuthStateChanged(e,t)}function Gw(i,e,t,r){return Wn(i).onAuthStateChanged(e,t,r)}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1e3,cC=10;class Yw extends Kw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);qI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,cC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const hC=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Kw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qw.type="SESSION";const Xw=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async g=>g(t.origin,l)),p=await dC(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((m,p)=>{const g=Jp("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(b),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function mC(i){Ii().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function pC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function yC(){return Jw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="firebaseLocalStorageDb",_C=1,zh="firebaseLocalStorage",Zw="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rd(i,e){return i.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function vC(){const i=indexedDB.deleteDatabase(Ww);return new Ou(i).toPromise()}function cp(){const i=indexedDB.open(Ww,_C);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(zh,{keyPath:Zw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await vC(),e(await cp()))})})}async function O0(i,e,t){const r=rd(i,!0).put({[Zw]:e,value:t});return new Ou(r).toPromise()}async function bC(i,e){const t=rd(i,!1).get(e),r=await new Ou(t).toPromise();return r===void 0?null:r.value}function N0(i,e){const t=rd(i,!0).delete(e);return new Ou(t).toPromise()}const wC=800,EC=3;class eE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>EC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(yC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await pC(),!this.activeServiceWorker)return;this.sender=new fC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await O0(e,Lh,"1"),await N0(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>O0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>bC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=rd(o,!1).getAll();return new Ou(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eE.type="LOCAL";const TC=eE;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(i,e){return e?ur(e):(Te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends Hw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AC(i){return aC(i.auth,new Wp(i),i.bypassAuthState)}function RC(i){const{auth:e,user:t}=i;return Te(t,e,"internal-error"),sC(t,new Wp(i),i.bypassAuthState)}async function IC(i){const{auth:e,user:t}=i;return Te(t,e,"internal-error"),rC(t,new Wp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:c,type:m}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AC;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return RC;default:dr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Cu(2e3,1e4);class Ro extends tE{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CC.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="pendingRedirect",Sh=new Map;class OC extends tE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const r=await NC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NC(i,e){const t=PC(e),r=DC(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function kC(i,e){Sh.set(i._key(),e)}function DC(i){return ur(i._redirectPersistence)}function PC(i){return Th(xC,i.config.apiKey,i.name)}async function MC(i,e,t=!1){if(Ai(i.app))return Promise.reject(ha(i));const r=Qp(i),o=SC(r,e),c=await new OC(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=600*1e3;class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!nE(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UC&&this.cachedEventUids.clear(),this.cachedEventUids.has(k0(e))}saveEventToCache(e){this.cachedEventUids.add(k0(e)),this.lastProcessedEventTime=Date.now()}}function k0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function nE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(i,e={}){return Ho(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BC=/^https?/;async function qC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await LC(i);for(const t of e)try{if(HC(t))return}catch{}dr(i,"unauthorized-domain")}function HC(i){const e=lp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!BC.test(t))return!1;if(zC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new Cu(3e4,6e4);function D0(){const i=Ii().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function FC(i){return new Promise((e,t)=>{var r,o,l;function c(){D0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D0(),t(Ri(i,"network-request-failed"))},timeout:$C.get()})}if(!((o=(r=Ii().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Ii().gapi)===null||l===void 0)&&l.load)c();else{const m=JI("iframefcb");return Ii()[m]=()=>{gapi.load?c():t(Ri(i,"network-request-failed"))},QI(`${XI()}?onload=${m}`).catch(p=>t(p))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function GC(i){return Ah=Ah||FC(i),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new Cu(5e3,15e3),YC="__/auth/iframe",QC="emulator/auth/iframe",XC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WC(i){const e=i.config;Te(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Fp(e,QC):`https://${i.config.authDomain}/${YC}`,r={apiKey:e.apiKey,appName:i.name,v:qo},o=JC.get(i.config.apiHost);o&&(r.eid=o);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Iu(r).slice(1)}`}async function ZC(i){const e=await GC(i),t=Ii().gapi;return Te(t,i,"internal-error"),e.open({where:document.body,url:WC(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XC,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ri(i,"network-request-failed"),m=Ii().setTimeout(()=>{l(c)},KC.get());function p(){Ii().clearTimeout(m),o(r)}r.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tx=500,nx=600,ix="_blank",rx="http://localhost";class P0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sx(i,e,t,r=tx,o=nx){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const p=Object.assign(Object.assign({},ex),{width:r.toString(),height:o.toString(),top:l,left:c}),g=hn().toLowerCase();t&&(m=Mw(g)?ix:t),Dw(g)&&(e=e||rx,p.scrollbars="yes");const b=Object.entries(p).reduce((T,[C,P])=>`${T}${C}=${P},`,"");if(BI(g)&&m!=="_self")return ax(e||"",m),new P0(null);const w=window.open(e||"",m,b);Te(w,i,"popup-blocked");try{w.focus()}catch{}return new P0(w)}function ax(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="__/auth/handler",lx="emulator/auth/handler",ux=encodeURIComponent("fac");async function M0(i,e,t,r,o,l){Te(i.config.authDomain,i,"auth-domain-config-required"),Te(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:qo,eventId:o};if(e instanceof $w){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",lR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))c[b]=w}if(e instanceof xu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(c.scopes=b.join(","))}i.tenantId&&(c.tid=i.tenantId);const m=c;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await i._getAppCheckToken(),g=p?`#${ux}=${encodeURIComponent(p)}`:"";return`${cx(i)}?${Iu(m).slice(1)}${g}`}function cx({config:i}){return i.emulator?Fp(i,lx):`https://${i.authDomain}/${ox}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class hx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xw,this._completeRedirectFn=MC,this._overrideRedirectResult=kC}async _openPopup(e,t,r,o){var l;fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await M0(e,t,r,lp(),o);return sx(e,c,Jp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await M0(e,t,r,lp(),o);return mC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ZC(e),r=new VC(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jm,{type:jm},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[jm];c!==void 0&&t(!!c),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zw()||Pw()||Yp()}}const dx=hx;var U0="@firebase/auth",V0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function px(i){Po(new ma("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bw(i)},g=new KI(r,o,l,p);return ZI(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Po(new ma("auth-internal",e=>{const t=Qp(e.getProvider("auth").getImmediate());return(r=>new fx(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(U0,V0,mx(i)),gs(U0,V0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=300,yx=yw("authIdTokenMaxAge")||gx;let j0=null;const _x=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>yx)return;const o=t==null?void 0:t.token;j0!==o&&(j0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function iE(i=Ew()){const e=qp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=WI(i,{popupRedirectResolver:dx,persistence:[TC,hC,Xw]}),r=yw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=_x(l.toString());lC(t,c,()=>c(t.currentUser)),oC(t,m=>c(m))}}const o=pw("auth");return o&&eC(t,`http://${o}`),t}function vx(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}YI({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const l=Ri("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",vx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});px("Browser");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,rE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.D=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(M,U,j){for(var N=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)N[Ot-2]=arguments[Ot];return R.prototype[U].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,x){x||(x=0);var M=Array(16);if(typeof R=="string")for(var U=0;16>U;++U)M[U]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(U=0;16>U;++U)M[U]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],U=I.g[2];var j=I.g[3],N=R+(j^x&(U^j))+M[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=j+(U^R&(x^U))+M[1]+3905402710&4294967295,j=R+(N<<12&4294967295|N>>>20),N=U+(x^j&(R^x))+M[2]+606105819&4294967295,U=j+(N<<17&4294967295|N>>>15),N=x+(R^U&(j^R))+M[3]+3250441966&4294967295,x=U+(N<<22&4294967295|N>>>10),N=R+(j^x&(U^j))+M[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(U^R&(x^U))+M[5]+1200080426&4294967295,j=R+(N<<12&4294967295|N>>>20),N=U+(x^j&(R^x))+M[6]+2821735955&4294967295,U=j+(N<<17&4294967295|N>>>15),N=x+(R^U&(j^R))+M[7]+4249261313&4294967295,x=U+(N<<22&4294967295|N>>>10),N=R+(j^x&(U^j))+M[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(U^R&(x^U))+M[9]+2336552879&4294967295,j=R+(N<<12&4294967295|N>>>20),N=U+(x^j&(R^x))+M[10]+4294925233&4294967295,U=j+(N<<17&4294967295|N>>>15),N=x+(R^U&(j^R))+M[11]+2304563134&4294967295,x=U+(N<<22&4294967295|N>>>10),N=R+(j^x&(U^j))+M[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(U^R&(x^U))+M[13]+4254626195&4294967295,j=R+(N<<12&4294967295|N>>>20),N=U+(x^j&(R^x))+M[14]+2792965006&4294967295,U=j+(N<<17&4294967295|N>>>15),N=x+(R^U&(j^R))+M[15]+1236535329&4294967295,x=U+(N<<22&4294967295|N>>>10),N=R+(U^j&(x^U))+M[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^U&(R^x))+M[6]+3225465664&4294967295,j=R+(N<<9&4294967295|N>>>23),N=U+(R^x&(j^R))+M[11]+643717713&4294967295,U=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(U^j))+M[0]+3921069994&4294967295,x=U+(N<<20&4294967295|N>>>12),N=R+(U^j&(x^U))+M[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^U&(R^x))+M[10]+38016083&4294967295,j=R+(N<<9&4294967295|N>>>23),N=U+(R^x&(j^R))+M[15]+3634488961&4294967295,U=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(U^j))+M[4]+3889429448&4294967295,x=U+(N<<20&4294967295|N>>>12),N=R+(U^j&(x^U))+M[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^U&(R^x))+M[14]+3275163606&4294967295,j=R+(N<<9&4294967295|N>>>23),N=U+(R^x&(j^R))+M[3]+4107603335&4294967295,U=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(U^j))+M[8]+1163531501&4294967295,x=U+(N<<20&4294967295|N>>>12),N=R+(U^j&(x^U))+M[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^U&(R^x))+M[2]+4243563512&4294967295,j=R+(N<<9&4294967295|N>>>23),N=U+(R^x&(j^R))+M[7]+1735328473&4294967295,U=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(U^j))+M[12]+2368359562&4294967295,x=U+(N<<20&4294967295|N>>>12),N=R+(x^U^j)+M[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^U)+M[8]+2272392833&4294967295,j=R+(N<<11&4294967295|N>>>21),N=U+(j^R^x)+M[11]+1839030562&4294967295,U=j+(N<<16&4294967295|N>>>16),N=x+(U^j^R)+M[14]+4259657740&4294967295,x=U+(N<<23&4294967295|N>>>9),N=R+(x^U^j)+M[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^U)+M[4]+1272893353&4294967295,j=R+(N<<11&4294967295|N>>>21),N=U+(j^R^x)+M[7]+4139469664&4294967295,U=j+(N<<16&4294967295|N>>>16),N=x+(U^j^R)+M[10]+3200236656&4294967295,x=U+(N<<23&4294967295|N>>>9),N=R+(x^U^j)+M[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^U)+M[0]+3936430074&4294967295,j=R+(N<<11&4294967295|N>>>21),N=U+(j^R^x)+M[3]+3572445317&4294967295,U=j+(N<<16&4294967295|N>>>16),N=x+(U^j^R)+M[6]+76029189&4294967295,x=U+(N<<23&4294967295|N>>>9),N=R+(x^U^j)+M[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^U)+M[12]+3873151461&4294967295,j=R+(N<<11&4294967295|N>>>21),N=U+(j^R^x)+M[15]+530742520&4294967295,U=j+(N<<16&4294967295|N>>>16),N=x+(U^j^R)+M[2]+3299628645&4294967295,x=U+(N<<23&4294967295|N>>>9),N=R+(U^(x|~j))+M[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~U))+M[7]+1126891415&4294967295,j=R+(N<<10&4294967295|N>>>22),N=U+(R^(j|~x))+M[14]+2878612391&4294967295,U=j+(N<<15&4294967295|N>>>17),N=x+(j^(U|~R))+M[5]+4237533241&4294967295,x=U+(N<<21&4294967295|N>>>11),N=R+(U^(x|~j))+M[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~U))+M[3]+2399980690&4294967295,j=R+(N<<10&4294967295|N>>>22),N=U+(R^(j|~x))+M[10]+4293915773&4294967295,U=j+(N<<15&4294967295|N>>>17),N=x+(j^(U|~R))+M[1]+2240044497&4294967295,x=U+(N<<21&4294967295|N>>>11),N=R+(U^(x|~j))+M[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~U))+M[15]+4264355552&4294967295,j=R+(N<<10&4294967295|N>>>22),N=U+(R^(j|~x))+M[6]+2734768916&4294967295,U=j+(N<<15&4294967295|N>>>17),N=x+(j^(U|~R))+M[13]+1309151649&4294967295,x=U+(N<<21&4294967295|N>>>11),N=R+(U^(x|~j))+M[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~U))+M[11]+3174756917&4294967295,j=R+(N<<10&4294967295|N>>>22),N=U+(R^(j|~x))+M[2]+718787259&4294967295,U=j+(N<<15&4294967295|N>>>17),N=x+(j^(U|~R))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+U&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var x=R-this.blockSize,M=this.B,U=this.h,j=0;j<R;){if(U==0)for(;j<=x;)o(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<R;)if(M[U++]=I.charCodeAt(j++),U==this.blockSize){o(this,M),U=0;break}}else for(;j<R;)if(M[U++]=I[j++],U==this.blockSize){o(this,M),U=0;break}}this.h=U,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var x=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.u(I),I=Array(16),R=x=0;4>R;++R)for(var M=0;32>M;M+=8)I[x++]=this.g[R]>>>M&255;return I};function l(I,R){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function c(I,R){this.h=R;for(var x=[],M=!0,U=I.length-1;0<=U;U--){var j=I[U]|0;M&&j==R||(x[U]=j,M=!1)}this.g=x}var m={};function p(I){return-128<=I&&128>I?l(I,function(R){return new c([R|0],0>R?-1:0)}):new c([I|0],0>I?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return H(g(-I));for(var R=[],x=1,M=0;I>=x;M++)R[M]=I/x|0,x*=4294967296;return new c(R,0)}function b(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return H(b(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(R,8)),M=w,U=0;U<I.length;U+=8){var j=Math.min(8,I.length-U),N=parseInt(I.substring(U,U+j),R);8>j?(j=g(Math.pow(R,j)),M=M.j(j).add(g(N))):(M=M.j(x),M=M.add(g(N)))}return M}var w=p(0),T=p(1),C=p(16777216);i=c.prototype,i.m=function(){if(B(this))return-H(this).m();for(var I=0,R=1,x=0;x<this.g.length;x++){var M=this.i(x);I+=(0<=M?M:4294967296+M)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P(this))return"0";if(B(this))return"-"+H(this).toString(I);for(var R=g(Math.pow(I,6)),x=this,M="";;){var U=ie(x,R).g;x=W(x,U.j(R));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=U,P(x))return j+M;for(;6>j.length;)j="0"+j;M=j+M}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function P(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function B(I){return I.h==-1}i.l=function(I){return I=W(this,I),B(I)?-1:P(I)?0:1};function H(I){for(var R=I.g.length,x=[],M=0;M<R;M++)x[M]=~I.g[M];return new c(x,~I.h).add(T)}i.abs=function(){return B(this)?H(this):this},i.add=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],M=0,U=0;U<=R;U++){var j=M+(this.i(U)&65535)+(I.i(U)&65535),N=(j>>>16)+(this.i(U)>>>16)+(I.i(U)>>>16);M=N>>>16,j&=65535,N&=65535,x[U]=N<<16|j}return new c(x,x[x.length-1]&-2147483648?-1:0)};function W(I,R){return I.add(H(R))}i.j=function(I){if(P(this)||P(I))return w;if(B(this))return B(I)?H(this).j(H(I)):H(H(this).j(I));if(B(I))return H(this.j(H(I)));if(0>this.l(C)&&0>I.l(C))return g(this.m()*I.m());for(var R=this.g.length+I.g.length,x=[],M=0;M<2*R;M++)x[M]=0;for(M=0;M<this.g.length;M++)for(var U=0;U<I.g.length;U++){var j=this.i(M)>>>16,N=this.i(M)&65535,Ot=I.i(U)>>>16,$t=I.i(U)&65535;x[2*M+2*U]+=N*$t,te(x,2*M+2*U),x[2*M+2*U+1]+=j*$t,te(x,2*M+2*U+1),x[2*M+2*U+1]+=N*Ot,te(x,2*M+2*U+1),x[2*M+2*U+2]+=j*Ot,te(x,2*M+2*U+2)}for(M=0;M<R;M++)x[M]=x[2*M+1]<<16|x[2*M];for(M=R;M<2*R;M++)x[M]=0;return new c(x,0)};function te(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function F(I,R){this.g=I,this.h=R}function ie(I,R){if(P(R))throw Error("division by zero");if(P(I))return new F(w,w);if(B(I))return R=ie(H(I),R),new F(H(R.g),H(R.h));if(B(R))return R=ie(I,H(R)),new F(H(R.g),R.h);if(30<I.g.length){if(B(I)||B(R))throw Error("slowDivide_ only works with positive integers.");for(var x=T,M=R;0>=M.l(I);)x=ye(x),M=ye(M);var U=oe(x,1),j=oe(M,1);for(M=oe(M,2),x=oe(x,2);!P(M);){var N=j.add(M);0>=N.l(I)&&(U=U.add(x),j=N),M=oe(M,1),x=oe(x,1)}return R=W(I,U.j(R)),new F(U,R)}for(U=w;0<=I.l(R);){for(x=Math.max(1,Math.floor(I.m()/R.m())),M=Math.ceil(Math.log(x)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),j=g(x),N=j.j(R);B(N)||0<N.l(I);)x-=M,j=g(x),N=j.j(R);P(j)&&(j=T),U=U.add(j),I=W(I,N)}return new F(U,I)}i.A=function(I){return ie(this,I).h},i.and=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],M=0;M<R;M++)x[M]=this.i(M)&I.i(M);return new c(x,this.h&I.h)},i.or=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],M=0;M<R;M++)x[M]=this.i(M)|I.i(M);return new c(x,this.h|I.h)},i.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],M=0;M<R;M++)x[M]=this.i(M)^I.i(M);return new c(x,this.h^I.h)};function ye(I){for(var R=I.g.length+1,x=[],M=0;M<R;M++)x[M]=I.i(M)<<1|I.i(M-1)>>>31;return new c(x,I.h)}function oe(I,R){var x=R>>5;R%=32;for(var M=I.g.length-x,U=[],j=0;j<M;j++)U[j]=0<R?I.i(j+x)>>>R|I.i(j+x+1)<<32-R:I.i(j+x);return new c(U,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=b,ys=c}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sE,Jl,aE,Rh,hp,oE,lE,uE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break e;v=v[L]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,S=!1,L={next:function(){if(!S&&v<h.length){var K=v++;return{value:y(K,h[K]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},m=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function b(h,y,v){return h.call.apply(h.bind,arguments)}function w(h,y,v){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),h.apply(y,L)}}return function(){return h.apply(y,arguments)}}function T(h,y,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:w,T.apply(null,arguments)}function C(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function P(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(S,L,K){for(var se=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)se[Ke-2]=arguments[Ke];return y.prototype[L].apply(S,se)}}function B(h){const y=h.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function H(h,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(p(S)){const L=h.length||0,K=S.length||0;h.length=L+K;for(let se=0;se<K;se++)h[L+se]=S[se]}else h.push(S)}}class W{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var ye=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function oe(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function I(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function R(h){const y={};for(const v in h)y[v]=h[v];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,y){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let K=0;K<x.length;K++)v=x[K],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function U(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function j(h){m.setTimeout(()=>{throw h},0)}function N(){var h=Be;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Ot{constructor(){this.h=this.g=null}add(y,v){const S=$t.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var $t=new W(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,pe=!1,Be=new Ot,Ge=()=>{const h=m.Promise.resolve(void 0);ae=()=>{h.then(D)}};var D=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(v){j(v)}var y=$t;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}pe=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return h})();function Ee(h,y){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ye){e:{try{ie(y.nodeName);var L=!0;break e}catch{}L=!1}L||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:xe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ee.aa.h.call(this)}}P(Ee,re);var xe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function lt(h,y,v,S,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=L,this.key=++Ft,this.da=this.fa=!1}function hi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pi(h){this.src=h,this.g={},this.h=0}Pi.prototype.add=function(h,y,v,S,L){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var se=Ta(h,y,S,L);return-1<se?(y=h[se],v||(y.fa=!1)):(y=new lt(y,this.src,K,!!S,L),y.fa=v,h.push(y)),y};function Is(h,y){var v=y.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,y,void 0),K;(K=0<=L)&&Array.prototype.splice.call(S,L,1),K&&(hi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ta(h,y,v,S){for(var L=0;L<h.length;++L){var K=h[L];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==S)return L}return-1}var Zn="closure_lm_"+(1e6*Math.random()|0),Cs={};function Sa(h,y,v,S,L){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Sa(h,y[K],v,S,L);return null}return v=ju(v),h&&h[je]?h.K(y,v,g(S)?!!S.capture:!1,L):wd(h,y,v,!1,S,L)}function wd(h,y,v,S,L,K){if(!y)throw Error("Invalid event type");var se=g(L)?!!L.capture:!!L,Ke=Yo(h);if(Ke||(h[Zn]=Ke=new Pi(h)),v=Ke.add(y,v,S,se,K),v.proxy)return v;if(S=Vu(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)ce||(L=se),L===void 0&&(L=!1),h.addEventListener(y.toString(),S,L);else if(h.attachEvent)h.attachEvent(Ra(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vu(){function h(v){return y.call(h.src,h.listener,v)}const y=Ed;return h}function Aa(h,y,v,S,L){if(Array.isArray(y))for(var K=0;K<y.length;K++)Aa(h,y[K],v,S,L);else S=g(S)?!!S.capture:!!S,v=ju(v),h&&h[je]?(h=h.i,y=String(y).toString(),y in h.g&&(K=h.g[y],v=Ta(K,v,S,L),-1<v&&(hi(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete h.g[y],h.h--)))):h&&(h=Yo(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ta(y,v,S,L)),(v=-1<h?y[h]:null)&&xs(v))}function xs(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[je])Is(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(Ra(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Yo(y))?(Is(v,h),v.h==0&&(v.src=null,y[Zn]=null)):hi(h)}}}function Ra(h){return h in Cs?Cs[h]:Cs[h]="on"+h}function Ed(h,y){if(h.da)h=!0;else{y=new Ee(y,this);var v=h.listener,S=h.ha||h.src;h.fa&&xs(h),h=v.call(S,y)}return h}function Yo(h){return h=h[Zn],h instanceof Pi?h:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ju(h){return typeof h=="function"?h:(h[Gt]||(h[Gt]=function(y){return h.handleEvent(y)}),h[Gt])}function Nt(){X.call(this),this.i=new Pi(this),this.M=this,this.F=null}P(Nt,X),Nt.prototype[je]=!0,Nt.prototype.removeEventListener=function(h,y,v,S){Aa(this,h,y,v,S)};function jt(h,y){var v,S=h.F;if(S)for(v=[];S;S=S.F)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new re(y,h);else if(y instanceof re)y.target=y.target||h;else{var L=y;y=new re(S,h),M(y,L)}if(L=!0,v)for(var K=v.length-1;0<=K;K--){var se=y.g=v[K];L=Mi(se,S,!0,y)&&L}if(se=y.g=h,L=Mi(se,S,!0,y)&&L,L=Mi(se,S,!1,y)&&L,v)for(K=0;K<v.length;K++)se=y.g=v[K],L=Mi(se,S,!1,y)&&L}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],S=0;S<v.length;S++)hi(v[S]);delete h.g[y],h.h--}}this.F=null},Nt.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Nt.prototype.L=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Mi(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var L=!0,K=0;K<y.length;++K){var se=y[K];if(se&&!se.da&&se.capture==v){var Ke=se.listener,Et=se.ha||se.src;se.fa&&Is(h.i,se),L=Ke.call(Et,S)!==!1&&L}}return L&&!S.defaultPrevented}function Lu(h,y,v){if(typeof h=="function")v&&(h=T(h,v));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(h,y||0)}function Qo(h){h.g=Lu(()=>{h.g=null,h.i&&(h.i=!1,Qo(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Td extends X{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(h){X.call(this),this.h=h,this.g={}}P(Os,X);var _r=[];function sn(h){oe(h.g,function(y,v){this.g.hasOwnProperty(v)&&xs(y)},h),h.g={}}Os.prototype.N=function(){Os.aa.N.call(this),sn(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=m.JSON.stringify,dn=m.JSON.parse,Sd=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Xo(){}Xo.prototype.h=null;function zu(h){return h.h||(h.h=h.i())}function Ns(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vr(){re.call(this,"d")}P(vr,re);function ei(){re.call(this,"c")}P(ei,re);var Ln={},br=null;function Ia(){return br=br||new Nt}Ln.La="serverreachability";function Jo(h){re.call(this,Ln.La,h)}P(Jo,re);function Ui(h){const y=Ia();jt(y,new Jo(y))}Ln.STAT_EVENT="statevent";function wr(h,y){re.call(this,Ln.STAT_EVENT,h),this.stat=y}P(wr,re);function Kt(h){const y=Ia();jt(y,new wr(y,h))}Ln.Ma="timingevent";function Wo(h,y){re.call(this,Ln.Ma,h),this.size=y}P(Wo,re);function Er(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function Tr(){this.g=!0}Tr.prototype.xa=function(){this.g=!1};function Zo(h,y,v,S,L,K){h.info(function(){if(h.g)if(K)for(var se="",Ke=K.split("&"),Et=0;Et<Ke.length;Et++){var Oe=Ke[Et].split("=");if(1<Oe.length){var zt=Oe[0];Oe=Oe[1];var Bt=zt.split("_");se=2<=Bt.length&&Bt[1]=="type"?se+(zt+"="+Oe+"&"):se+(zt+"=redacted&")}}else se=null;else se=K;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+y+`
`+v+`
`+se})}function el(h,y,v,S,L,K,se){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+y+`
`+v+`
`+K+" "+se})}function Vi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+fi(h,v)+(S?" "+S:"")})}function Bu(h,y){h.info(function(){return"TIMEOUT: "+y})}Tr.prototype.info=function(){};function fi(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var S=v[h];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var K=L[0];if(K!="noop"&&K!="stop"&&K!="close")for(var se=1;se<L.length;se++)L[se]=""}}}}return jn(v)}catch{return y}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mi;function Sr(){}P(Sr,Xo),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},mi=new Sr;function pi(h,y,v,S){this.j=h,this.i=y,this.l=v,this.R=S||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var tl={},ji={};function ks(h,y,v){h.L=1,h.v=Ms(ft(y)),h.m=v,h.P=!0,Li(h,null)}function Li(h,y){h.F=Date.now(),ti(h),h.A=ft(h.v);var v=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),qi(v.i,"t",S),h.C=0,v=h.j.J,h.h=new qu,h.g=rc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Td(T(h.Y,h,h.g),h.O)),y=h.U,v=h.g,S=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(_r[0]=L.toString()),L=_r);for(var K=0;K<L.length;K++){var se=Sa(v,L[K],S||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ui(),Zo(h.i,h.u,h.A,h.l,h.R,h.m)}pi.prototype.ca=function(h){h=h.target;const y=this.M;y&&pn(h)==3?y.j():this.Y(h)},pi.prototype.Y=function(h){try{if(h==this.g)e:{const Bt=pn(this.g);var y=this.g.Ba();const Vr=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||js(this.g)))){this.J||Bt!=4||y==7||(y==8||0>=Vr?Ui(3):Ui(2)),Ca(this);var v=this.g.Z();this.X=v;t:if(zi(this)){var S=js(this.g);h="";var L=S.length,K=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ar(this);var se="";break t}this.h.i=new m.TextDecoder}for(y=0;y<L;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(K&&y==L-1)});S.length=0,this.h.g+=h,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,el(this.i,this.u,this.A,this.l,this.R,Bt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Et=this.g;if((Ke=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Ke)){var Oe=Ke;break t}}Oe=null}if(v=Oe)Vi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gi(this,v);else{this.o=!1,this.s=3,Kt(12),fn(this),Ar(this);break e}}if(this.P){v=!0;let vn;for(;!this.J&&this.C<se.length;)if(vn=Ds(this,se),vn==ji){Bt==4&&(this.s=4,Kt(14),v=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==tl){this.s=4,Kt(15),Vi(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Vi(this.i,this.l,vn,null),gi(this,vn);if(zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||se.length!=0||this.h.h||(this.s=1,Kt(16),v=!1),this.o=this.o&&v,!v)Vi(this.i,this.l,se,"[Invalid Chunked Response]"),fn(this),Ar(this);else if(0<se.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),dl(zt),zt.M=!0,Kt(11))}}else Vi(this.i,this.l,se,null),gi(this,se);Bt==4&&fn(this),this.o&&!this.J&&(Bt==4?tc(this.j,this):(this.o=!1,ti(this)))}else Qu(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),fn(this),Ar(this)}}}catch{}finally{}};function zi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ds(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?ji:(v=Number(y.substring(v,S)),isNaN(v)?tl:(S+=1,S+v>y.length?ji:(y=y.slice(S,S+v),h.C=S+v,y)))}pi.prototype.cancel=function(){this.J=!0,fn(this)};function ti(h){h.S=Date.now()+h.I,yt(h,h.I)}function yt(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Er(T(h.ba,h),y)}function Ca(h){h.B&&(m.clearTimeout(h.B),h.B=null)}pi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bu(this.i,this.A),this.L!=2&&(Ui(),Kt(17)),fn(this),this.s=2,Ar(this)):yt(this,this.S-h)};function Ar(h){h.j.G==0||h.J||tc(h.j,h)}function fn(h){Ca(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,sn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function gi(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Rr(v.h,h))){if(!h.K&&Rr(v.h,h)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Mr(v),Pr(v);else break e;hl(v),Kt(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Er(T(v.Za,v),6e3));if(1>=Hu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else $i(v,11)}else if((h.K||v.g==h)&&Mr(v),!te(y))for(L=v.Da.g.parse(y),y=0;y<L.length;y++){let Oe=L[y];if(v.T=Oe[0],Oe=Oe[1],v.G==2)if(Oe[0]=="c"){v.K=Oe[1],v.ia=Oe[2];const zt=Oe[3];zt!=null&&(v.la=zt,v.j.info("VER="+v.la));const Bt=Oe[4];Bt!=null&&(v.Aa=Bt,v.j.info("SVER="+v.Aa));const Vr=Oe[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(S=1.5*Vr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const vn=h.g;if(vn){const Bs=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var K=S.h;K.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ir(K,K.h),K.h=null))}if(S.D){const Fi=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fi&&(S.ya=Fi,qe(S.I,S.D,Fi))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var se=h;if(S.qa=ic(S,S.J?S.ia:null,S.W),se.K){zn(S.h,se);var Ke=se,Et=S.L;Et&&(Ke.I=Et),Ke.B&&(Ca(Ke),ti(Ke)),S.g=se}else Zu(S);0<v.i.length&&Ua(v)}else Oe[0]!="stop"&&Oe[0]!="close"||$i(v,7);else v.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?$i(v,7):ul(v):Oe[0]!="noop"&&v.l&&v.l.ta(Oe),v.v=0)}}Ui(4)}catch{}}var Ad=class{constructor(h,y){this.g=h,this.map=y}};function nl(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Hu(h){return h.h?1:h.g?h.g.size:0}function Rr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ir(h,y){h.g?h.g.add(y):h.h=y}function zn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}nl.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return B(h.i)}function $u(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],v=h.length,S=0;S<v;S++)y.push(h[S]);return y}y=[],v=0;for(S in h)y[v++]=h[S];return y}function Rd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const S in h)y[v++]=S;return y}}}function xa(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Rd(h),S=$u(h),L=S.length,K=0;K<L;K++)y.call(void 0,S[K],v&&v[K],h)}var rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var S=h[v].indexOf("="),L=null;if(0<=S){var K=h[v].substring(0,S);L=h[v].substring(S+1)}else K=h[v];y(K,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Bi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bi){this.h=h.h,Cr(this,h.j),this.o=h.o,this.g=h.g,Ps(this,h.s),this.l=h.l;var y=h.i,v=new yi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Na(this,v),this.m=h.m}else h&&(y=String(h).match(rl))?(this.h=!1,Cr(this,y[1]||"",!0),this.o=xr(y[2]||""),this.g=xr(y[3]||"",!0),Ps(this,y[4]),this.l=xr(y[5]||"",!0),Na(this,y[6]||"",!0),this.m=xr(y[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Bi.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Bn(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Bn(y,sl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Bn(v,v.charAt(0)=="/"?al:Fu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Bn(v,xd)),h.join("")};function ft(h){return new Bi(h)}function Cr(h,y,v){h.j=v?xr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ps(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Na(h,y,v){y instanceof yi?(h.i=y,Gu(h.i,h.h)):(v||(y=Bn(y,Cd)),h.i=new yi(y,h.h))}function qe(h,y,v){h.i.set(y,v)}function Ms(h){return qe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function xr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bn(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Id),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Id(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var sl=/[#\/\?@]/g,Fu=/[#\?:]/g,al=/[#\?]/g,Cd=/[#\?@]/g,xd=/#/g;function yi(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Lt(h){h.g||(h.g=new Map,h.h=0,h.i&&Oa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=yi.prototype,i.add=function(h,y){Lt(this),this.i=null,h=Rn(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function ka(h,y){Lt(h),y=Rn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Da(h,y){return Lt(h),y=Rn(h,y),h.g.has(y)}i.forEach=function(h,y){Lt(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(y,L,S,this)},this)},this)},i.na=function(){Lt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const L=h[S];for(let K=0;K<L.length;K++)v.push(y[S])}return v},i.V=function(h){Lt(this);let y=[];if(typeof h=="string")Da(this,h)&&(y=y.concat(this.g.get(Rn(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},i.set=function(h,y){return Lt(this),this.i=null,h=Rn(this,h),Da(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function qi(h,y,v){ka(h,y),0<v.length&&(h.i=null,h.g.set(Rn(h,y),B(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const K=encodeURIComponent(String(S)),se=this.V(S);for(S=0;S<se.length;S++){var L=K;se[S]!==""&&(L+="="+encodeURIComponent(String(se[S]))),h.push(L)}}return this.i=h.join("&")};function Rn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Gu(h,y){y&&!h.j&&(Lt(h),h.i=null,h.g.forEach(function(v,S){var L=S.toLowerCase();S!=L&&(ka(this,S),qi(this,L,v))},h)),h.j=y}function ol(h,y){const v=new Tr;if(m.Image){const S=new Image;S.onload=C(_n,v,"TestLoadImage: loaded",!0,y,S),S.onerror=C(_n,v,"TestLoadImage: error",!1,y,S),S.onabort=C(_n,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=C(_n,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Ku(h,y){const v=new Tr,S=new AbortController,L=setTimeout(()=>{S.abort(),_n(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(K=>{clearTimeout(L),K.ok?_n(v,"TestPingServer: ok",!0,y):_n(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),_n(v,"TestPingServer: error",!1,y)})}function _n(h,y,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function ni(){this.g=new Sd}function ll(h,y,v){const S=v||"";try{xa(h,function(L,K){let se=L;g(L)&&(se=jn(L)),y.push(S+K+"="+encodeURIComponent(se))})}catch(L){throw y.push(S+"type="+encodeURIComponent("_badmap")),L}}function _i(h){this.l=h.Ub||null,this.j=h.eb||!1}P(_i,Xo),_i.prototype.g=function(){return new In(this.l,this.j)},_i.prototype.i=(function(h){return function(){return h}})({});function In(h,y){Nt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(In,Nt),i=In.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Or(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pa(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pa(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vi(this):Or(this),this.readyState==3&&Pa(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,vi(this))},i.Qa=function(h){this.g&&(this.response=h,vi(this))},i.ga=function(){this.g&&vi(this)};function vi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Or(h)}i.setRequestHeader=function(h,y){this.u.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(In.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Us(h){let y="";return oe(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Nr(h,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Us(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):qe(h,y,v))}function nt(h){Nt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(nt,Nt);var an=/^https?$/i,Hi=["POST","PUT"];i=nt.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mi.g(),this.v=this.o?zu(this.o):zu(mi),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Vs(this,K);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())v.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),L=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Hi,y,void 0))||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of v)this.g.setRequestHeader(K,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ma(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){Vs(this,K)}};function Vs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,kr(h),Dr(h)}function kr(h){h.A||(h.A=!0,jt(h,"complete"),jt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,jt(this,"complete"),jt(this,"abort"),Dr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Yu(this):this.bb())},i.bb=function(){Yu(this)};function Yu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||pn(h)!=4||h.Z()!=2)){if(h.u&&pn(h)==4)Lu(h.Ea,0,h);else if(jt(h,"readystatechange"),pn(h)==4){h.h=!1;try{const se=h.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=se===0){var L=String(h.D).match(rl)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),S=!an.test(L?L.toLowerCase():"")}v=S}if(v)jt(h,"complete"),jt(h,"success");else{h.m=6;try{var K=2<pn(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",kr(h)}}finally{Dr(h)}}}}function Dr(h,y){if(h.g){Ma(h);const v=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||jt(h,"ready");try{v.onreadystatechange=S}catch{}}}function Ma(h){h.I&&(m.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function pn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),dn(y)}};function js(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(h){const y={};h=(h.g&&2<=pn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(te(h[S]))continue;var v=U(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[L]||[];y[L]=K,K.push(v)}I(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Xu(h){this.Aa=0,this.i=[],this.j=new Tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,h),this.cb=Ls("retryDelaySeedMs",1e4,h),this.Wa=Ls("forwardChannelMaxRetries",2,h),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(h&&h.concurrentRequestLimit),this.Da=new ni,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Xu.prototype,i.la=8,i.G=1,i.connect=function(h,y,v,S){Kt(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=ic(this,null,this.W),Ua(this)};function ul(h){if(Ju(h),h.G==3){var y=h.U++,v=ft(h.I);if(qe(v,"SID",h.K),qe(v,"RID",y),qe(v,"TYPE","terminate"),zs(h,v),y=new pi(h,h.j,y),y.L=2,y.v=Ms(ft(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=rc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ti(y)}fl(h)}function Pr(h){h.g&&(dl(h),h.g.cancel(),h.g=null)}function Ju(h){Pr(h),h.u&&(m.clearTimeout(h.u),h.u=null),Mr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Ua(h){if(!il(h.h)&&!h.s){h.s=!0;var y=h.Ga;ae||Ge(),pe||(ae(),pe=!0),Be.add(y,h),h.B=0}}function Od(h,y){return Hu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Er(T(h.Ga,h,y),nc(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new pi(this,this.j,h);let K=this.o;if(this.S&&(K?(K=R(K),M(K,this.S)):K=this.S),this.m!==null||this.O||(L.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=cl(this,L,y),v=ft(this.I),qe(v,"RID",h),qe(v,"CVER",22),this.D&&qe(v,"X-HTTP-Session-Id",this.D),zs(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(Us(K)))+"&"+y:this.m&&Nr(v,this.m,K)),Ir(this.h,L),this.Ua&&qe(v,"TYPE","init"),this.P?(qe(v,"$req",y),qe(v,"SID","null"),L.T=!0,ks(L,v,null)):ks(L,v,y),this.G=2}}else this.G==3&&(h?Wu(this,h):this.i.length==0||il(this.h)||Wu(this))};function Wu(h,y){var v;y?v=y.l:v=h.U++;const S=ft(h.I);qe(S,"SID",h.K),qe(S,"RID",v),qe(S,"AID",h.T),zs(h,S),h.m&&h.o&&Nr(S,h.m,h.o),v=new pi(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=cl(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ir(h.h,v),ks(v,S,y)}function zs(h,y){h.H&&oe(h.H,function(v,S){qe(y,S,v)}),h.l&&xa({},function(v,S){qe(y,S,v)})}function cl(h,y,v){v=Math.min(h.i.length,v);var S=h.l?T(h.l.Na,h.l,h):null;e:{var L=h.i;let K=-1;for(;;){const se=["count="+v];K==-1?0<v?(K=L[0].g,se.push("ofs="+K)):K=0:se.push("ofs="+K);let Ke=!0;for(let Et=0;Et<v;Et++){let Oe=L[Et].g;const zt=L[Et].map;if(Oe-=K,0>Oe)K=Math.max(0,L[Et].g-100),Ke=!1;else try{ll(zt,se,"req"+Oe+"_")}catch{S&&S(zt)}}if(Ke){S=se.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,S}function Zu(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ae||Ge(),pe||(ae(),pe=!0),Be.add(y,h),h.v=0}}function hl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Er(T(h.Fa,h),nc(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Er(T(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),Pr(this),ec(this))};function dl(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function ec(h){h.g=new pi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=ft(h.qa);qe(y,"RID","rpc"),qe(y,"SID",h.K),qe(y,"AID",h.T),qe(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&qe(y,"TO",h.ja),qe(y,"TYPE","xmlhttp"),zs(h,y),h.m&&h.o&&Nr(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ms(ft(y)),v.m=null,v.P=!0,Li(v,h)}i.Za=function(){this.C!=null&&(this.C=null,Pr(this),hl(this),Kt(19))};function Mr(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function tc(h,y){var v=null;if(h.g==y){Mr(h),dl(h),h.g=null;var S=2}else if(Rr(h.h,y))v=y.D,zn(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var L=h.B;S=Ia(),jt(S,new Wo(S,v)),Ua(h)}else Zu(h);else if(L=y.s,L==3||L==0&&0<y.X||!(S==1&&Od(h,y)||S==2&&hl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),L){case 1:$i(h,5);break;case 4:$i(h,10);break;case 3:$i(h,6);break;default:$i(h,2)}}}function nc(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function $i(h,y){if(h.j.info("Error code "+y),y==2){var v=T(h.fb,h),S=h.Xa;const L=!S;S=new Bi(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Cr(S,"https"),Ms(S),L?ol(S.toString(),v):Ku(S.toString(),v)}else Kt(2);h.G=0,h.l&&h.l.sa(y),fl(h),Ju(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function fl(h){if(h.G=0,h.ka=[],h.l){const y=mn(h.h);(y.length!=0||h.i.length!=0)&&(H(h.ka,y),H(h.ka,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.ra()}}function ic(h,y,v){var S=v instanceof Bi?ft(v):new Bi(v);if(S.g!="")y&&(S.g=y+"."+S.g),Ps(S,S.s);else{var L=m.location;S=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;var K=new Bi(null);S&&Cr(K,S),y&&(K.g=y),L&&Ps(K,L),v&&(K.l=v),S=K}return v=h.D,y=h.ya,v&&y&&qe(S,v,y),qe(S,"VER",h.la),zs(h,S),S}function rc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new nt(new _i({eb:v})):new nt(h.pa),y.Ha(h.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}i=sc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Va(){}Va.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){Nt.call(this),this.g=new Xu(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!te(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!te(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ur(this)}P(gn,Nt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){ul(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=jn(h),h=v);y.i.push(new Ad(y.Ya++,h)),y.G==3&&Ua(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,gn.aa.N.call(this)};function ac(h){vr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}P(ac,vr);function oc(){ei.call(this),this.status=1}P(oc,ei);function Ur(h){this.g=h}P(Ur,sc),Ur.prototype.ua=function(){jt(this.g,"a")},Ur.prototype.ta=function(h){jt(this.g,new ac(h))},Ur.prototype.sa=function(h){jt(this.g,new oc)},Ur.prototype.ra=function(){jt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,uE=function(){return new Va},lE=function(){return Ia()},oE=Ln,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,Rh=dt,Yt.COMPLETE="complete",aE=Yt,Ns.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Jl=Ns,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,sE=nt}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const z0="@firebase/firestore",B0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new zp("@firebase/firestore");function vo(){return ga.logLevel}function le(i,...e){if(ga.logLevel<=Ue.DEBUG){const t=e.map(Zp);ga.debug(`Firestore (${$o}): ${i}`,...t)}}function mr(i,...e){if(ga.logLevel<=Ue.ERROR){const t=e.map(Zp);ga.error(`Firestore (${$o}): ${i}`,...t)}}function bs(i,...e){if(ga.logLevel<=Ue.WARN){const t=e.map(Zp);ga.warn(`Firestore (${$o}): ${i}`,...t)}}function Zp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,cE(i,r,t)}function cE(i,e,t){let r=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw mr(r),new Error(r)}function Ye(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||cE(e,o,r)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class wx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ex{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new hE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class Tx{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sx{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Tx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ax{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const r=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new q0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Rx(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Ne(i,e){return i<e?-1:i>e?1:0}function dp(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ne(r,o);{const l=dE(),c=Ix(l.encode(H0(i,t)),l.encode(H0(e,t)));return c!==0?c:Ne(r,o)}}t+=r>65535?2:1}return Ne(i.length,e.length)}function H0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function Ix(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ne(i[t],e[t]);return Ne(i.length,e.length)}function Uo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="__name__";class Si{constructor(e,t,r){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&we(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=Si.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const r=Si.isNumericId(e),o=Si.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Si.extractNumericId(e).compare(Si.extractNumericId(t)):dp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class ct extends Si{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new ct(t)}static emptyPath(){return new ct([])}}const Cx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Si{construct(e,t,r){return new nn(e,t,r)}static isValidIdentifier(e){return Cx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$0}static keyField(){return new nn([$0])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(l(),o++)}if(l(),c)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(ct.fromString(e))}static fromName(e){return new ge(ct.fromString(e).popFirst(5))}static empty(){return new ge(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(i,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Ox(i,e,t,r){if(e===!0&&r===!0)throw new fe(ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function F0(i){if(!ge.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function fE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function tg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function vs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tg(i);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Nu(i,e){if(!fE(i))throw new fe(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new fe(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=-62135596800,K0=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*K0);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<G0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/K0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:xt("string",st._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new st(0,0))}static max(){return new Se(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function Nx(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new ws(o,ge.empty(),e)}function kx(i){return new ws(i.readTime,i.key,du)}class ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ws(Se.min(),ge.empty(),du)}static max(){return new ws(Se.max(),ge.empty(),du)}}function Dx(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(i.documentKey,e.documentKey),t!==0?t:Ne(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==Px)throw i;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let o=0,l=0,c=!1;e.forEach((m=>{++o,m.next((()=>{++l,c&&l===o&&t()}),(p=>r(p)))})),c=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((o=>o?ee.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,o)=>{const l=e.length,c=new Array(l);let m=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((b=>{c[g]=b,++m,m===l&&r(c)}),(b=>o(b)))}}))}static doWhile(e,t){return new ee(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}function Ux(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}sd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function ad(i){return i==null}function Bh(i){return i===0&&1/i==-1/0}function Vx(i){return typeof i=="number"&&Number.isInteger(i)&&!Bh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="";function jx(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Y0(e)),e=Lx(i.get(t),e);return Y0(e)}function Lx(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case mE:t+="";break;default:t+=l}}return t}function Y0(i){return i+mE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function va(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function pE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new tn(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X0(this.data.getIterator())}getIteratorFrom(e){return new X0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class X0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new ci([])}unionWith(e){let t=new Vt(nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gE("Invalid base64 string: "+l):l}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const zx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(i){if(Ye(!!i,39018),typeof i=="string"){let e=0;const t=zx.exec(i);if(Ye(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(i.seconds),nanos:wt(i.nanos)}}function wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ts(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="server_timestamp",_E="__type__",vE="__previous_value__",bE="__local_write_time__";function ig(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[_E])===null||t===void 0?void 0:t.stringValue)===yE}function od(i){const e=i.mapValue.fields[vE];return ig(e)?od(e):e}function fu(i){const e=Es(i.mapValue.fields[bE].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,r,o,l,c,m,p,g,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const qh="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||qh}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="__type__",qx="__max__",mh={mapValue:{}},EE="__vector__",Hh="value";function Ss(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:$x(i)?9007199254740991:Hx(i)?10:11:we(28295,{value:i})}function ki(i,e){if(i===e)return!0;const t=Ss(i);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fu(i).isEqual(fu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Es(o.timestampValue),m=Es(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return Ts(o.bytesValue).isEqual(Ts(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return wt(o.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return wt(o.integerValue)===wt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=wt(o.doubleValue),m=wt(l.doubleValue);return c===m?Bh(c)===Bh(m):isNaN(c)&&isNaN(m)}return!1})(i,e);case 9:return Uo(i.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},m=l.mapValue.fields||{};if(Q0(c)!==Q0(m))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(m[p]===void 0||!ki(c[p],m[p])))return!1;return!0})(i,e);default:return we(52216,{left:i})}}function pu(i,e){return(i.values||[]).find((t=>ki(t,e)))!==void 0}function Vo(i,e){if(i===e)return 0;const t=Ss(i),r=Ss(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=wt(l.integerValue||l.doubleValue),p=wt(c.integerValue||c.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return J0(i.timestampValue,e.timestampValue);case 4:return J0(fu(i),fu(e));case 5:return dp(i.stringValue,e.stringValue);case 6:return(function(l,c){const m=Ts(l),p=Ts(c);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),p=c.split("/");for(let g=0;g<m.length&&g<p.length;g++){const b=Ne(m[g],p[g]);if(b!==0)return b}return Ne(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=Ne(wt(l.latitude),wt(c.latitude));return m!==0?m:Ne(wt(l.longitude),wt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return W0(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var m,p,g,b;const w=l.fields||{},T=c.fields||{},C=(m=w[Hh])===null||m===void 0?void 0:m.arrayValue,P=(p=T[Hh])===null||p===void 0?void 0:p.arrayValue,B=Ne(((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0,((b=P==null?void 0:P.values)===null||b===void 0?void 0:b.length)||0);return B!==0?B:W0(C,P)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===mh.mapValue&&c===mh.mapValue)return 0;if(l===mh.mapValue)return 1;if(c===mh.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),g=c.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let w=0;w<p.length&&w<b.length;++w){const T=dp(p[w],b[w]);if(T!==0)return T;const C=Vo(m[p[w]],g[b[w]]);if(C!==0)return C}return Ne(p.length,b.length)})(i.mapValue,e.mapValue);default:throw we(23264,{le:t})}}function J0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ne(i,e);const t=Es(i),r=Es(e),o=Ne(t.seconds,r.seconds);return o!==0?o:Ne(t.nanos,r.nanos)}function W0(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Vo(t[o],r[o]);if(l)return l}return Ne(t.length,r.length)}function jo(i){return fp(i)}function fp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ts(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return ge.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=fp(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${fp(t.fields[c])}`;return o+"}"})(i.mapValue):we(61005,{value:i})}function Ih(i){switch(Ss(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=od(i);return e?16+Ih(e):16;case 5:return 2*i.stringValue.length;case 6:return Ts(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+Ih(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return va(r.fields,((l,c)=>{o+=l.length+Ih(c)})),o})(i.mapValue);default:throw we(13486,{value:i})}}function mp(i){return!!i&&"integerValue"in i}function rg(i){return!!i&&"arrayValue"in i}function Z0(i){return!!i&&"nullValue"in i}function eb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ch(i){return!!i&&"mapValue"in i}function Hx(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[wE])===null||t===void 0?void 0:t.stringValue)===EE}function ru(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return va(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ru(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(i.arrayValue.values[t]);return e}return Object.assign({},i)}function $x(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===qx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=nn.emptyPath(),r={},o=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=ru(c):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ch(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){va(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new Xn(ru(this.value))}}function TE(i){const e=[];return va(i.fields,((t,r)=>{const o=new nn([t]);if(Ch(r)){const l=TE(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,r,o,l,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new cn(e,0,Se.min(),Se.min(),Se.min(),Xn.empty(),0)}static newFoundDocument(e,t,r,o){return new cn(e,1,t,Se.min(),r,o,0)}static newNoDocument(e,t){return new cn(e,2,t,Se.min(),Se.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Se.min(),Se.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.position=e,this.inclusive=t}}function tb(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=ge.comparator(ge.fromName(c.referenceValue),t.key):r=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function nb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ki(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fx(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{}class Mt extends SE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kx(e,t,r):t==="array-contains"?new Xx(e,r):t==="in"?new Jx(e,r):t==="not-in"?new Wx(e,r):t==="array-contains-any"?new Zx(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yx(e,r):new Qx(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends SE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Di(e,t)}matches(e){return AE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AE(i){return i.op==="and"}function RE(i){return Gx(i)&&AE(i)}function Gx(i){for(const e of i.filters)if(e instanceof Di)return!1;return!0}function pp(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+jo(i.value);if(RE(i))return i.filters.map((e=>pp(e))).join(",");{const e=i.filters.map((t=>pp(t))).join(",");return`${i.op}(${e})`}}function IE(i,e){return i instanceof Mt?(function(r,o){return o instanceof Mt&&r.op===o.op&&r.field.isEqual(o.field)&&ki(r.value,o.value)})(i,e):i instanceof Di?(function(r,o){return o instanceof Di&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,m)=>l&&IE(c,o.filters[m])),!0):!1})(i,e):void we(19439)}function CE(i){return i instanceof Mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${jo(t.value)}`})(i):i instanceof Di?(function(t){return t.op.toString()+" {"+t.getFilters().map(CE).join(" ,")+"}"})(i):"Filter"}class Kx extends Mt{constructor(e,t,r){super(e,t,r),this.key=ge.fromName(r.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yx extends Mt{constructor(e,t){super(e,"in",t),this.keys=xE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Qx extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=xE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ge.fromName(r.referenceValue)))}class Xx extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rg(t)&&pu(t.arrayValue,this.value)}}class Jx extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pu(this.value.arrayValue,t)}}class Wx extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pu(this.value.arrayValue,t)}}class Zx extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>pu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t=null,r=[],o=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=m,this.Pe=null}}function ib(i,e=null,t=[],r=[],o=null,l=null,c=null){return new e2(i,e,t,r,o,l,c)}function sg(i){const e=Re(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>pp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>jo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>jo(r))).join(",")),e.Pe=t}return e.Pe}function ag(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Fx(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!IE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nb(i.startAt,e.startAt)&&nb(i.endAt,e.endAt)}function gp(i){return ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t=null,r=[],o=[],l=null,c="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function t2(i,e,t,r,o,l,c,m){return new ld(i,e,t,r,o,l,c,m)}function ud(i){return new ld(i)}function rb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function n2(i){return i.collectionGroup!==null}function su(i){const e=Re(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Vt(nn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Fh(l,r))})),t.has(nn.keyField().canonicalString())||e.Te.push(new Fh(nn.keyField(),r))}return e.Te}function Ci(i){const e=Re(i);return e.Ie||(e.Ie=i2(e,su(i))),e.Ie}function i2(i,e){if(i.limitType==="F")return ib(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Fh(o.field,l)}));const t=i.endAt?new $h(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new $h(i.startAt.position,i.startAt.inclusive):null;return ib(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function yp(i,e,t){return new ld(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function cd(i,e){return ag(Ci(i),Ci(e))&&i.limitType===e.limitType}function OE(i){return`${sg(Ci(i))}|lt:${i.limitType}`}function bo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>CE(o))).join(", ")}]`),ad(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>jo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>jo(o))).join(",")),`Target(${r})`})(Ci(i))}; limitType=${i.limitType})`}function hd(i,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ge.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,o){for(const l of su(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(c,m,p){const g=tb(c,m,p);return c.inclusive?g<=0:g<0})(r.startAt,su(r),o)||r.endAt&&!(function(c,m,p){const g=tb(c,m,p);return c.inclusive?g>=0:g>0})(r.endAt,su(r),o))})(i,e)}function r2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function NE(i){return(e,t)=>{let r=!1;for(const o of su(i)){const l=s2(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function s2(i,e,t){const r=i.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,c,m){const p=c.data.field(l),g=m.data.field(l);return p!==null&&g!==null?Vo(p,g):we(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return pE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new ht(ge.comparator);function pr(){return a2}const kE=new ht(ge.comparator);function Wl(...i){let e=kE;for(const t of i)e=e.insert(t.key,t);return e}function DE(i){let e=kE;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ua(){return au()}function PE(){return au()}function au(){return new ba((i=>i.toString()),((i,e)=>i.isEqual(e)))}const o2=new ht(ge.comparator),l2=new Vt(ge.comparator);function Ve(...i){let e=l2;for(const t of i)e=e.add(t);return e}const u2=new Vt(Ne);function c2(){return u2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bh(e)?"-0":e}}function ME(i){return{integerValue:""+i}}function h2(i,e){return Vx(e)?ME(e):og(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(){this._=void 0}}function d2(i,e,t){return i instanceof Gh?(function(o,l){const c={fields:{[_E]:{stringValue:yE},[bE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ig(l)&&(l=od(l)),l&&(c.fields[vE]=l),{mapValue:c}})(t,e):i instanceof gu?VE(i,e):i instanceof yu?jE(i,e):(function(o,l){const c=UE(o,l),m=sb(c)+sb(o.Ee);return mp(c)&&mp(o.Ee)?ME(m):og(o.serializer,m)})(i,e)}function f2(i,e,t){return i instanceof gu?VE(i,e):i instanceof yu?jE(i,e):t}function UE(i,e){return i instanceof Kh?(function(r){return mp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Gh extends dd{}class gu extends dd{constructor(e){super(),this.elements=e}}function VE(i,e){const t=LE(e);for(const r of i.elements)t.some((o=>ki(o,r)))||t.push(r);return{arrayValue:{values:t}}}class yu extends dd{constructor(e){super(),this.elements=e}}function jE(i,e){let t=LE(e);for(const r of i.elements)t=t.filter((o=>!ki(o,r)));return{arrayValue:{values:t}}}class Kh extends dd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function sb(i){return wt(i.integerValue||i.doubleValue)}function LE(i){return rg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function m2(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof gu&&o instanceof gu||r instanceof yu&&o instanceof yu?Uo(r.elements,o.elements,ki):r instanceof Kh&&o instanceof Kh?ki(r.Ee,o.Ee):r instanceof Gh&&o instanceof Gh})(i.transform,e.transform)}class p2{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class fd{}function zE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new qE(i.key,cr.none()):new ku(i.key,i.data,cr.none());{const t=i.data,r=Xn.empty();let o=new Vt(nn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new wa(i.key,r,new ci(o.toArray()),cr.none())}}function g2(i,e,t){i instanceof ku?(function(o,l,c){const m=o.value.clone(),p=ob(o.fieldTransforms,l,c.transformResults);m.setAll(p),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):i instanceof wa?(function(o,l,c){if(!xh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const m=ob(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(BE(o)),p.setAll(m),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ou(i,e,t,r){return i instanceof ku?(function(l,c,m,p){if(!xh(l.precondition,c))return m;const g=l.value.clone(),b=lb(l.fieldTransforms,p,c);return g.setAll(b),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof wa?(function(l,c,m,p){if(!xh(l.precondition,c))return m;const g=lb(l.fieldTransforms,p,c),b=c.data;return b.setAll(BE(l)),b.setAll(g),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((w=>w.field)))})(i,e,t,r):(function(l,c,m){return xh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(i,e,t)}function y2(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=UE(r.transform,o||null);l!=null&&(t===null&&(t=Xn.empty()),t.set(r.field,l))}return t||null}function ab(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Uo(r,o,((l,c)=>m2(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ku extends fd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wa extends fd{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function BE(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function ob(i,e,t){const r=new Map;Ye(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,m=e.data.field(l.field);r.set(l.field,f2(c,m,t[o]))}return r}function lb(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,d2(l,c,e))}return r}class qE extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _2 extends fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&g2(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PE();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(o.key)?null:m;const p=zE(c,m);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,r)=>ab(t,r)))&&Uo(this.baseMutations,e.baseMutations,((t,r)=>ab(t,r)))}}class lg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return o2})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new lg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,ze;function E2(i){switch(i){case ne.OK:return we(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function HE(i){if(i===void 0)return mr("GRPC error has no .code"),ne.UNKNOWN;switch(i){case It.OK:return ne.OK;case It.CANCELLED:return ne.CANCELLED;case It.UNKNOWN:return ne.UNKNOWN;case It.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case It.INTERNAL:return ne.INTERNAL;case It.UNAVAILABLE:return ne.UNAVAILABLE;case It.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case It.NOT_FOUND:return ne.NOT_FOUND;case It.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case It.ABORTED:return ne.ABORTED;case It.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case It.DATA_LOSS:return ne.DATA_LOSS;default:return we(39323,{code:i})}}(ze=It||(It={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new ys([4294967295,4294967295],0);function ub(i){const e=dE().encode(i),t=new rE;return t.update(e),new Uint8Array(t.digest())}function cb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ys([t,r],0),new ys([o,l],0)]}class ug{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ys.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(ys.fromNumber(r)));return o.compare(T2)===1&&(o=new ys([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=ub(e),[r,o]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ug(l,o,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.fe===0)return;const t=ub(e),[r,o]=cb(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new md(Se.min(),o,new ht(Ne),pr(),Ve())}}class Du{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Du(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class $E{constructor(e,t){this.targetId=e,this.De=t}}class FE{constructor(e,t,r=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class hb{constructor(){this.ve=0,this.Ce=db(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),r=Ve();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:we(38017,{changeType:l})}})),new Du(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=db()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class S2{constructor(e){this.We=e,this.Ge=new Map,this.ze=pr(),this.je=ph(),this.Je=ph(),this.He=new ht(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const l=o.target;if(gp(l))if(r===0){const c=new ge(l.path);this.Xe(t,c,cn.newNoDocument(c,Se.min()))}else Ye(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const m=this._t(e),p=m?this.ut(m,e,c):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,m;try{c=Ts(r).toUint8Array()}catch(p){if(p instanceof gE)return bs("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new ug(c,o,l)}catch(p){return bs(p instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.fe===0?null:m}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const c=this.We.lt(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const m=this.st(c);if(m){if(l.current&&gp(m.target)){const p=new ge(m.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,cn.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=Ve();this.Je.forEach(((l,c)=>{let m=!0;c.forEachWhile((p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new md(e,t,this.He,this.ze,r);return this.ze=pr(),this.je=ph(),this.Je=ph(),this.He=new ht(Ne),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new hb,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Vt(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Vt(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hb),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function ph(){return new ht(ge.comparator)}function db(){return new ht(ge.comparator)}const A2={asc:"ASCENDING",desc:"DESCENDING"},R2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I2={and:"AND",or:"OR"};class C2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _p(i,e){return i.useProto3Json||ad(e)?e:{value:e}}function Yh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function x2(i,e){return Yh(i,e.toTimestamp())}function xi(i){return Ye(!!i,49232),Se.fromTimestamp((function(t){const r=Es(t);return new st(r.seconds,r.nanos)})(i))}function cg(i,e){return vp(i,e).canonicalString()}function vp(i,e){const t=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function KE(i){const e=ct.fromString(i);return Ye(WE(e),10190,{key:e.toString()}),e}function bp(i,e){return cg(i.databaseId,e.path)}function Lm(i,e){const t=KE(e);if(t.get(1)!==i.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ge(QE(t))}function YE(i,e){return cg(i.databaseId,e)}function O2(i){const e=KE(i);return e.length===4?ct.emptyPath():QE(e)}function wp(i){return new ct(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function QE(i){return Ye(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function fb(i,e,t){return{name:bp(i,e),fields:t.value.mapValue.fields}}function N2(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,b){return g.useProto3Json?(Ye(b===void 0||typeof b=="string",58123),rn.fromBase64String(b||"")):(Ye(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),rn.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(g){const b=g.code===void 0?ne.UNKNOWN:HE(g.code);return new fe(b,g.message||"")})(c);t=new FE(r,o,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Lm(i,r.document.name),l=xi(r.document.updateTime),c=r.document.createTime?xi(r.document.createTime):Se.min(),m=new Xn({mapValue:{fields:r.document.fields}}),p=cn.newFoundDocument(o,l,c,m),g=r.targetIds||[],b=r.removedTargetIds||[];t=new Oh(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Lm(i,r.document),l=r.readTime?xi(r.readTime):Se.min(),c=cn.newNoDocument(o,l),m=r.removedTargetIds||[];t=new Oh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Lm(i,r.document),l=r.removedTargetIds||[];t=new Oh([],l,o,null)}else{if(!("filter"in e))return we(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new w2(o,l),m=r.targetId;t=new $E(m,c)}}return t}function k2(i,e){let t;if(e instanceof ku)t={update:fb(i,e.key,e.value)};else if(e instanceof qE)t={delete:bp(i,e.key)};else if(e instanceof wa)t={update:fb(i,e.key,e.data),updateMask:B2(e.fieldMask)};else{if(!(e instanceof _2))return we(16599,{Rt:e.type});t={verify:bp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const m=c.transform;if(m instanceof Gh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kh)return{fieldPath:c.field.canonicalString(),increment:m.Ee};throw we(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:x2(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(i,e.precondition)),t}function D2(i,e){return i&&i.length>0?(Ye(e!==void 0,14353),i.map((t=>(function(o,l){let c=o.updateTime?xi(o.updateTime):xi(l);return c.isEqual(Se.min())&&(c=xi(l)),new p2(c,o.transformResults||[])})(t,e)))):[]}function P2(i,e){return{documents:[YE(i,e.path)]}}function M2(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YE(i,o);const l=(function(g){if(g.length!==0)return JE(Di.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((b=>(function(T){return{field:wo(T.field),direction:j2(T.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=_p(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:o}}function U2(i){let e=O2(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ye(r===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(w){const T=XE(w);return T instanceof Di&&RE(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((T=>(function(P){return new Fh(Eo(P.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let m=null;t.limit&&(m=(function(w){let T;return T=typeof w=="object"?w.value:w,ad(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(w){const T=!!w.before,C=w.values||[];return new $h(C,T)})(t.startAt));let g=null;return t.endAt&&(g=(function(w){const T=!w.before,C=w.values||[];return new $h(C,T)})(t.endAt)),t2(e,o,c,l,m,"F",p,g)}function V2(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XE(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eo(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(t.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Eo(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Eo(t.unaryFilter.field);return Mt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Mt.create(Eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Di.create(t.compositeFilter.filters.map((r=>XE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(i):we(30097,{filter:i})}function j2(i){return A2[i]}function L2(i){return R2[i]}function z2(i){return I2[i]}function wo(i){return{fieldPath:i.canonicalString()}}function Eo(i){return nn.fromServerFormat(i.fieldPath)}function JE(i){return i instanceof Mt?(function(t){if(t.op==="=="){if(eb(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(Z0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eb(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(Z0(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:L2(t.op),value:t.value}}})(i):i instanceof Di?(function(t){const r=t.getFilters().map((o=>JE(o)));return r.length===1?r[0]:{compositeFilter:{op:z2(t.op),filters:r}}})(i):we(54877,{filter:i})}function B2(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,r,o,l=Se.min(),c=Se.min(),m=rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.gt=e}}function H2(i){const e=U2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?yp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Dn=new F2}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ws.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class F2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Vt(ct.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Vt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZE=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(ZE,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Lo(0)}static ur(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="LruGarbageCollector",G2=1048576;function gb([i,e],[t,r]){const o=Ne(i,t);return o===0?Ne(e,r):o}class K2{constructor(e){this.Tr=e,this.buffer=new Vt(gb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Y2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){le(pb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?le(pb,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Rr(3e5)}))}}class Q2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(sd.ue);const r=new K2(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(mb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mb):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,l,c,m,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,m=Date.now(),this.removeTargets(e,r,t)))).next((w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(g=Date.now(),vo()<=Ue.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w}))))}}function X2(i,e){return new Q2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&ou(r.mutation,o,ci.empty(),st.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const o=ua();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let c=Wl();return l.forEach(((m,p)=>{c=c.insert(m,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ua();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,o){let l=pr();const c=au(),m=(function(){return au()})();return t.forEach(((p,g)=>{const b=r.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof wa)?l=l.insert(g.key,g):b!==void 0?(c.set(g.key,b.mutation.getFieldMask()),ou(b.mutation,g,b.mutation.getFieldMask(),st.now())):c.set(g.key,ci.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,b)=>c.set(g,b))),t.forEach(((g,b)=>{var w;return m.set(g,new W2(b,(w=c.get(g))!==null&&w!==void 0?w:null))})),m)))}recalculateAndSaveOverlays(e,t){const r=au();let o=new ht(((c,m)=>c-m)),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let b=r.get(p)||ci.empty();b=m.applyToLocalView(g,b),r.set(p,b);const w=(o.get(m.batchId)||Ve()).add(p);o=o.insert(m.batchId,w)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,b=p.value,w=PE();b.forEach((T=>{if(!l.has(T)){const C=zE(t.get(T),r.get(T));C!==null&&w.set(T,C),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):ee.resolve(ua());let m=du,p=l;return c.next((g=>ee.forEach(g,((b,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),l.get(b)?ee.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{p=p.insert(b,T)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ve()))).next((b=>({batchId:m,changes:DE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((r=>{let o=Wl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=Wl();return this.indexManager.getCollectionParents(e,l).next((m=>ee.forEach(m,(p=>{const g=(function(w,T){return new ld(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((b=>{b.forEach(((w,T)=>{c=c.insert(w,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((c=>{l.forEach(((p,g)=>{const b=g.getKey();c.get(b)===null&&(c=c.insert(b,cn.newInvalidDocument(b)))}));let m=Wl();return c.forEach(((p,g)=>{const b=l.get(p);b!==void 0&&ou(b.mutation,g,ci.empty(),st.now()),hd(t,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:xi(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:H2(o.bundledQuery),readTime:xi(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.overlays=new ht(ge.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ua();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.wt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const o=ua(),l=t.length+1,c=new ge(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new ht(((g,b)=>g-b));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let b=l.get(g.largestBatchId);b===null&&(b=ua(),l=l.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const m=ua(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,b)=>m.set(g,b))),!(m.size()>=o)););return ee.resolve(m)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new b2(t,r));let l=this.kr.get(t);l===void 0&&(l=Ve(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.qr=new Vt(Ht.Qr),this.$r=new Vt(Ht.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ht(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new ge(new ct([])),r=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.$r.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ge(new ct([])),r=new Ht(t,e),o=new Ht(t,e+1);let l=Ve();return this.$r.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ge.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Vt(Ht.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new v2(l,t,r,o);this.mutationQueue.push(c);for(const m of o)this.Yr=this.Yr.add(new Ht(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?ng:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,o],(c=>{const m=this.Zr(c.Hr);l.push(m)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ne);return t.forEach((o=>{const l=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(m=>{r=r.add(m.Hr)}))})),ee.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ge.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new ge(l),0);let m=new Vt(Ne);return this.Yr.forEachWhile((p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Hr)),!0)}),c),ee.resolve(this.ei(m))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ee.forEach(t.mutations,(o=>{const l=new Ht(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Ht(t,0),o=this.Yr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.ni=e,this.docs=(function(){return new ht(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=pr();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():cn.newInvalidDocument(o))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=pr();const c=t.path,m=new ge(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Dx(kx(b),r)<=0||(o.has(b.key)||hd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,r,o){we(9500)}ri(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new sO(this)}getSize(e){return ee.resolve(this.size)}}class sO extends J2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.persistence=e,this.ii=new ba((t=>sg(t)),ag),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new hg,this.targetCount=0,this._i=Lo.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.ii.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.ai={},this.overlays={},this.ui=new sd(0),this.ci=!1,this.ci=!0,this.li=new nO,this.referenceDelegate=e(this),this.hi=new aO(this),this.indexManager=new $2,this.remoteDocumentCache=(function(o){return new rO(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new q2(t),this.Ti=new eO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new iO(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const o=new oO(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class oO extends Mx{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Ai=new hg,this.Ri=null}static Vi(e){return new dg(e)}get mi(){if(this.Ri)return this.Ri;throw we(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,(r=>{const o=ge.fromPath(r);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Se.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Qh{constructor(e,t){this.persistence=e,this.gi=new ba((r=>jx(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=X2(this,t)}static Vi(e,t){return new Qh(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return ee.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((m=>{m||(r++,l.removeEntry(c,Se.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ih(e.data.value)),t}Sr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new fg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return nR()?8:Ux(hn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new lO;return this.ws(e,t,c).next((m=>{if(l.result=m,this.Rs)return this.Ss(e,t,c,m.size)}))})).next((()=>l.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(vo()<=Ue.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(vo()<=Ue.DEBUG&&le("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(vo()<=Ue.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):ee.resolve())}ps(e,t){if(rb(t))return ee.resolve(null);let r=Ci(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=yp(t,null,"F"),r=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ve(...l);return this.gs.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((p=>{const g=this.bs(t,m);return this.Ds(t,g,c,p.readTime)?this.ps(e,yp(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ys(e,t,r,o){return rb(t)||o.isEqual(Se.min())?ee.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,o)?ee.resolve(null):(vo()<=Ue.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,c,t,Nx(o,du)).next((m=>m)))}))}bs(e,t){let r=new Vt(NE(e));return t.forEach(((o,l)=>{hd(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,r){return vo()<=Ue.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",cO=3e8;class hO{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new ht(Ne),this.Ms=new ba((l=>sg(l)),ag),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function dO(i,e,t,r){return new hO(i,e,t,r)}async function tT(i,e){const t=Re(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],m=[];let p=Ve();for(const g of o){c.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of l){m.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:m})))}))}))}function fO(i,e){const t=Re(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,b){const w=g.batch,T=w.keys();let C=ee.resolve();return T.forEach((P=>{C=C.next((()=>b.getEntry(p,P))).next((B=>{const H=g.docVersions.get(P);Ye(H!==null,48541),B.version.compareTo(H)<0&&(w.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),b.addEntry(B)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(p,w)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let p=Ve();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function nT(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function mO(i,e){const t=Re(i),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const m=[];e.targetChanges.forEach(((b,w)=>{const T=o.get(w);if(!T)return;m.push(t.hi.removeMatchingKeys(l,b.removedDocuments,w).next((()=>t.hi.addMatchingKeys(l,b.addedDocuments,w))));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,r)),o=o.insert(w,C),(function(B,H,W){return B.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=cO?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(T,C,b)&&m.push(t.hi.updateTargetData(l,C))}));let p=pr(),g=Ve();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),m.push(pO(l,c,e.documentUpdates).next((b=>{p=b.Ls,g=b.ks}))),!r.isEqual(Se.min())){const b=t.hi.getLastRemoteSnapshotVersion(l).next((w=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(b)}return ee.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Fs=o,l)))}function pO(i,e,t){let r=Ve(),o=Ve();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=pr();return t.forEach(((m,p)=>{const g=l.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),c=c.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(m,p)):le(mg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Ls:c,ks:o}}))}function gO(i,e){const t=Re(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ng),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function yO(i,e){const t=Re(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((l=>l?(o=l,ee.resolve(o)):t.hi.allocateTargetId(r).next((c=>(o=new fs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Ep(i,e,t){const r=Re(i),o=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Go(c))throw c;le(mg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function yb(i,e,t){const r=Re(i);let o=Se.min(),l=Ve();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,b){const w=Re(p),T=w.Ms.get(b);return T!==void 0?ee.resolve(w.Fs.get(T)):w.hi.getTargetData(g,b)})(r,c,Ci(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,m.targetId).next((p=>{l=p}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:Ve()))).next((m=>(_O(r,r2(e),m),{documents:m,qs:l})))))}function _O(i,e,t){let r=i.xs.get(e)||Se.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}class _b{constructor(){this.activeTargetIds=c2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vO{constructor(){this.Fo=new _b,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _b,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="ConnectivityMonitor";class bb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){le(vb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){le(vb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Tp(){return gh===null?gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",wO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EO{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===qh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,l){const c=Tp(),m=this.Go(e,t.toUriEncodedString());le(zm,`Sending RPC '${e}' ${c}:`,m,r);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,l);const{host:g}=new URL(m),b=Bo(g);return this.jo(e,m,p,r,b).then((w=>(le(zm,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw bs(zm,`RPC '${e}' ${c} failed with error: `,w,"url: ",m,"request:",r),w}))}Jo(e,t,r,o,l,c){return this.Wo(e,t,r,o,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const r=wO[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class SO extends EO{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,l){const c=Tp();return new Promise(((m,p)=>{const g=new sE;g.setWithCredentials(!0),g.listenOnce(aE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Rh.NO_ERROR:const w=g.getResponseJson();le(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),m(w);break;case Rh.TIMEOUT:le(ln,`RPC '${e}' ${c} timed out`),p(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const T=g.getStatus();if(le(ln,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const B=(function(W){const te=W.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(te)>=0?te:ne.UNKNOWN})(P.status);p(new fe(B,P.message))}else p(new fe(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:we(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{le(ln,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(o);le(ln,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",b,r,15)}))}P_(e,t,r){const o=Tp(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uE(),m=lE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const b=l.join("");le(ln,`Creating RPC '${e}' stream ${o}: ${b}`,p);const w=c.createWebChannel(b,p);this.T_(w);let T=!1,C=!1;const P=new TO({Ho:H=>{C?le(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(T||(le(ln,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),le(ln,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Yo:()=>w.close()}),B=(H,W,te)=>{H.listen(W,(F=>{try{te(F)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return B(w,Jl.EventType.OPEN,(()=>{C||(le(ln,`RPC '${e}' stream ${o} transport opened.`),P.s_())})),B(w,Jl.EventType.CLOSE,(()=>{C||(C=!0,le(ln,`RPC '${e}' stream ${o} transport closed`),P.__(),this.I_(w))})),B(w,Jl.EventType.ERROR,(H=>{C||(C=!0,bs(ln,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),P.__(new fe(ne.UNAVAILABLE,"The operation could not be completed")))})),B(w,Jl.EventType.MESSAGE,(H=>{var W;if(!C){const te=H.data[0];Ye(!!te,16349);const F=te,ie=(F==null?void 0:F.error)||((W=F[0])===null||W===void 0?void 0:W.error);if(ie){le(ln,`RPC '${e}' stream ${o} received error:`,ie);const ye=ie.status;let oe=(function(x){const M=It[x];if(M!==void 0)return HE(M)})(ye),I=ie.message;oe===void 0&&(oe=ne.INTERNAL,I="Unknown error status: "+ye+" with message "+ie.message),C=!0,P.__(new fe(oe,I)),w.close()}else le(ln,`RPC '${e}' stream ${o} received:`,te),P.a_(te)}})),B(m,oE.STAT_EVENT,(H=>{H.stat===hp.PROXY?le(ln,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===hp.NOPROXY&&le(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.o_()}),0),P}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(i){return new C2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="PersistentStream";class rT{constructor(e,t,r,o,l,c,m,p){this.Fi=e,this.w_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new iT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new fe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return le(wb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(le(wb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class AO extends rT{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=N2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?xi(c.readTime):Se.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=wp(this.serializer),t.addTarget=(function(l,c){let m;const p=c.target;if(m=gp(p)?{documents:P2(l,p)}:{query:M2(l,p).Vt},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=GE(l,c.resumeToken);const g=_p(l,c.expectedCount);g!==null&&(m.expectedCount=g)}else if(c.snapshotVersion.compareTo(Se.min())>0){m.readTime=Yh(l,c.snapshotVersion.toTimestamp());const g=_p(l,c.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const r=V2(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=wp(this.serializer),t.removeTarget=e,this.k_(t)}}class RO extends rT{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=D2(e.writeResults,e.commitTime),r=xi(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=wp(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>k2(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{}class CO extends IO{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,vp(t,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ne.UNKNOWN,l.toString())}))}Jo(e,t,r,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Jo(e,vp(t,r),o,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(ne.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class xO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mr(t),this._a=!1):le("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class OO{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{Ea(this)&&(le(ya,"Restarting streams for network reachability change."),await(async function(p){const g=Re(p);g.Ia.add(4),await Pu(g),g.Aa.set("Unknown"),g.Ia.delete(4),await gd(g)})(this))}))})),this.Aa=new xO(r,o)}}async function gd(i){if(Ea(i))for(const e of i.da)await e(!0)}async function Pu(i){for(const e of i.da)await e(!1)}function sT(i,e){const t=Re(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),_g(t)?yg(t):Ko(t).x_()&&gg(t,e))}function pg(i,e){const t=Re(i),r=Ko(t);t.Ta.delete(e),r.x_()&&aT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ea(t)&&t.Aa.set("Unknown"))}function gg(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(i).H_(e)}function aT(i,e){i.Ra.$e(e),Ko(i).Y_(e)}function yg(i){i.Ra=new S2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Ko(i).start(),i.Aa.aa()}function _g(i){return Ea(i)&&!Ko(i).M_()&&i.Ta.size>0}function Ea(i){return Re(i).Ia.size===0}function oT(i){i.Ra=void 0}async function NO(i){i.Aa.set("Online")}async function kO(i){i.Ta.forEach(((e,t)=>{gg(i,e)}))}async function DO(i,e){oT(i),_g(i)?(i.Aa.la(e),yg(i)):i.Aa.set("Unknown")}async function PO(i,e,t){if(i.Aa.set("Online"),e instanceof FE&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const m of l.targetIds)o.Ta.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ta.delete(m),o.Ra.removeTarget(m))})(i,e)}catch(r){le(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xh(i,r)}else if(e instanceof Oh?i.Ra.Ye(e):e instanceof $E?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Se.min()))try{const r=await nT(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const m=l.Ra.Pt(c);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=l.Ta.get(g);b&&l.Ta.set(g,b.withResumeToken(p.resumeToken,c))}})),m.targetMismatches.forEach(((p,g)=>{const b=l.Ta.get(p);if(!b)return;l.Ta.set(p,b.withResumeToken(rn.EMPTY_BYTE_STRING,b.snapshotVersion)),aT(l,p);const w=new fs(b.target,p,g,b.sequenceNumber);gg(l,w)})),l.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(r){le(ya,"Failed to raise snapshot:",r),await Xh(i,r)}}async function Xh(i,e,t){if(!Go(e))throw e;i.Ia.add(1),await Pu(i),i.Aa.set("Offline"),t||(t=()=>nT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{le(ya,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await gd(i)}))}function lT(i,e){return e().catch((t=>Xh(i,t,e)))}async function yd(i){const e=Re(i),t=As(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ng;for(;MO(e);)try{const o=await gO(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,UO(e,o)}catch(o){await Xh(e,o)}uT(e)&&cT(e)}function MO(i){return Ea(i)&&i.Pa.length<10}function UO(i,e){i.Pa.push(e);const t=As(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function uT(i){return Ea(i)&&!As(i).M_()&&i.Pa.length>0}function cT(i){As(i).start()}async function VO(i){As(i).na()}async function jO(i){const e=As(i);for(const t of i.Pa)e.X_(t.mutations)}async function LO(i,e,t){const r=i.Pa.shift(),o=lg.from(r,e,t);await lT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await yd(i)}async function zO(i,e){e&&As(i).Z_&&await(async function(r,o){if((function(c){return E2(c)&&c!==ne.ABORTED})(o.code)){const l=r.Pa.shift();As(r).N_(),await lT(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await yd(r)}})(i,e),uT(i)&&cT(i)}async function Eb(i,e){const t=Re(i);t.asyncQueue.verifyOperationInProgress(),le(ya,"RemoteStore received new credentials");const r=Ea(t);t.Ia.add(3),await Pu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await gd(t)}async function BO(i,e){const t=Re(i);e?(t.Ia.delete(2),await gd(t)):e||(t.Ia.add(2),await Pu(t),t.Aa.set("Unknown"))}function Ko(i){return i.Va||(i.Va=(function(t,r,o){const l=Re(t);return l.ia(),new AO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:NO.bind(null,i),e_:kO.bind(null,i),n_:DO.bind(null,i),J_:PO.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),_g(i)?yg(i):i.Aa.set("Unknown")):(await i.Va.stop(),oT(i))}))),i.Va}function As(i){return i.ma||(i.ma=(function(t,r,o){const l=Re(t);return l.ia(),new RO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:VO.bind(null,i),n_:zO.bind(null,i),ea:jO.bind(null,i),ta:LO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await yd(i)):(await i.ma.stop(),i.Pa.length>0&&(le(ya,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,m=new vg(e,t,c,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bg(i,e){if(mr("AsyncQueue",`${e}: ${i}`),Go(i))return new fe(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ge.comparator(t.key,r.key):(t,r)=>ge.comparator(t.key,r.key),this.keyedMap=Wl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new No;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.fa=new ht(ge.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):we(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class zo{constructor(e,t,r,o,l,c,m,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new zo(e,t,No.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class HO{constructor(){this.queries=Sb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=Re(t),l=o.queries;o.queries=Sb(),l.forEach(((c,m)=>{for(const p of m.wa)p.onError(r)}))})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function Sb(){return new ba((i=>OE(i)),cd)}async function hT(i,e){const t=Re(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(r=2):(l=new qO,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const m=bg(c,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&wg(t)}async function dT(i,e){const t=Re(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $O(i,e){const t=Re(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const m of c.wa)m.Ca(o)&&(r=!0);c.ya=o}}r&&wg(t)}function FO(i,e,t){const r=Re(i),o=r.queries.get(e);if(o)for(const l of o.wa)l.onError(t);r.queries.delete(e)}function wg(i){i.Da.forEach((e=>{e.next()}))}var Sp,Ab;(Ab=Sp||(Sp={})).Fa="default",Ab.Cache="cache";class fT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class GO{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=NE(e),this.eu=new No(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Tb,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const T=o.get(b),C=hd(this.query,w)?w:null,P=!!T&&this.mutatedKeys.has(T.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let H=!1;T&&C?T.data.isEqual(C.data)?P!==B&&(r.track({type:3,doc:C}),H=!0):this.iu(T,C)||(r.track({type:2,doc:C}),H=!0,(p&&this.Xa(C,p)>0||g&&this.Xa(C,g)<0)&&(m=!0)):!T&&C?(r.track({type:0,doc:C}),H=!0):T&&!C&&(r.track({type:1,doc:T}),H=!0,(p||g)&&(m=!0)),H&&(C?(c=c.add(C),l=B?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{eu:c,ru:r,Ds:m,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((b,w)=>(function(C,P){const B=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{At:H})}};return B(C)-B(P)})(b.type,w.type)||this.Xa(b.doc,w.doc))),this.su(r),o=o!=null&&o;const m=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,g=p!==this.Ya;return this.Ya=p,c.length!==0||g?{snapshot:new zo(this.query,e.eu,l,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:m}:{_u:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Tb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new pT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new mT(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return zo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Eg="SyncEngine";class KO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YO{constructor(e){this.key=e,this.lu=!1}}class QO{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ba((m=>OE(m)),cd),this.Tu=new Map,this.Iu=new Set,this.du=new ht(ge.comparator),this.Eu=new Map,this.Au=new hg,this.Ru={},this.Vu=new Map,this.mu=Lo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function XO(i,e,t=!0){const r=wT(i);let o;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await gT(r,e,t,!0),o}async function JO(i,e){const t=wT(i);await gT(t,e,!0,!1)}async function gT(i,e,t,r){const o=await yO(i.localStore,Ci(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await WO(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&sT(i.remoteStore,o),m}async function WO(i,e,t,r,o){i.gu=(w,T,C)=>(async function(B,H,W,te){let F=H.view.nu(W);F.Ds&&(F=await yb(B.localStore,H.query,!1).then((({documents:I})=>H.view.nu(I,F))));const ie=te&&te.targetChanges.get(H.targetId),ye=te&&te.targetMismatches.get(H.targetId)!=null,oe=H.view.applyChanges(F,B.isPrimaryClient,ie,ye);return Ib(B,H.targetId,oe._u),oe.snapshot})(i,w,T,C);const l=await yb(i.localStore,e,!0),c=new GO(e,l.qs),m=c.nu(l.documents),p=Du.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),g=c.applyChanges(m,i.isPrimaryClient,p);Ib(i,t,g._u);const b=new KO(e,t,c);return i.Pu.set(e,b),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),g.snapshot}async function ZO(i,e,t){const r=Re(i),o=r.Pu.get(e),l=r.Tu.get(o.targetId);if(l.length>1)return r.Tu.set(o.targetId,l.filter((c=>!cd(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ep(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&pg(r.remoteStore,o.targetId),Ap(r,o.targetId)})).catch(Fo)):(Ap(r,o.targetId),await Ep(r.localStore,o.targetId,!0))}async function eN(i,e){const t=Re(i),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pg(t.remoteStore,r.targetId))}async function tN(i,e,t){const r=lN(i);try{const o=await(function(c,m){const p=Re(c),g=st.now(),b=m.reduce(((C,P)=>C.add(P.key)),Ve());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let P=pr(),B=Ve();return p.Os.getEntries(C,b).next((H=>{P=H,P.forEach(((W,te)=>{te.isValidDocument()||(B=B.add(W))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,P))).next((H=>{w=H;const W=[];for(const te of m){const F=y2(te,w.get(te.key).overlayedDocument);F!=null&&W.push(new wa(te.key,F,TE(F.value.mapValue),cr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,W,m)})).next((H=>{T=H;const W=H.applyToLocalDocumentSet(w,B);return p.documentOverlayCache.saveOverlays(C,H.batchId,W)}))})).then((()=>({batchId:T.batchId,changes:DE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,p){let g=c.Ru[c.currentUser.toKey()];g||(g=new ht(Ne)),g=g.insert(m,p),c.Ru[c.currentUser.toKey()]=g})(r,o.batchId,t),await Mu(r,o.changes),await yd(r.remoteStore)}catch(o){const l=bg(o,"Failed to persist write");t.reject(l)}}async function yT(i,e){const t=Re(i);try{const r=await mO(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Ye(c.lu,14607):o.removedDocuments.size>0&&(Ye(c.lu,42227),c.lu=!1))})),await Mu(t,r,e)}catch(r){await Fo(r)}}function Rb(i,e,t){const r=Re(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const p=Re(c);p.onlineState=m;let g=!1;p.queries.forEach(((b,w)=>{for(const T of w.wa)T.va(m)&&(g=!0)})),g&&wg(p)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nN(i,e,t){const r=Re(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new ht(ge.comparator);c=c.insert(l,cn.newNoDocument(l,Se.min()));const m=Ve().add(l),p=new md(Se.min(),new Map,new ht(Ne),c,m);await yT(r,p),r.du=r.du.remove(l),r.Eu.delete(e),Tg(r)}else await Ep(r.localStore,e,!1).then((()=>Ap(r,e,t))).catch(Fo)}async function iN(i,e){const t=Re(i),r=e.batch.batchId;try{const o=await fO(t.localStore,e);vT(t,r,null),_T(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Mu(t,o)}catch(o){await Fo(o)}}async function rN(i,e,t){const r=Re(i);try{const o=await(function(c,m){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let b;return p.mutationQueue.lookupMutationBatch(g,m).next((w=>(Ye(w!==null,37113),b=w.keys(),p.mutationQueue.removeMutationBatch(g,w)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,b,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b))).next((()=>p.localDocuments.getDocuments(g,b)))}))})(r.localStore,e);vT(r,e,t),_T(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Mu(r,o)}catch(o){await Fo(o)}}function _T(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function vT(i,e,t){const r=Re(i);let o=r.Ru[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Ap(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||bT(i,r)}))}function bT(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(pg(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),Tg(i))}function Ib(i,e,t){for(const r of t)r instanceof mT?(i.Au.addReference(r.key,e),sN(i,r)):r instanceof pT?(le(Eg,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||bT(i,r.key)):we(19791,{yu:r})}function sN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(le(Eg,"New document in limbo: "+t),i.Iu.add(r),Tg(i))}function Tg(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new ge(ct.fromString(e)),r=i.mu.next();i.Eu.set(r,new YO(t)),i.du=i.du.insert(t,r),sT(i.remoteStore,new fs(Ci(ud(t.path)),r,"TargetPurposeLimboResolution",sd.ue))}}async function Mu(i,e,t){const r=Re(i),o=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((m,p)=>{c.push(r.gu(p,e,t).then((g=>{var b;if((g||t)&&r.isPrimaryClient){const w=g?!g.fromCache:(b=t==null?void 0:t.targetChanges.get(p.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=fg.Es(p.targetId,g);l.push(w)}})))})),await Promise.all(c),r.hu.J_(o),await(async function(p,g){const b=Re(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ee.forEach(g,(T=>ee.forEach(T.Is,(C=>b.persistence.referenceDelegate.addReference(w,T.targetId,C))).next((()=>ee.forEach(T.ds,(C=>b.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))))))}catch(w){if(!Go(w))throw w;le(mg,"Failed to update sequence numbers: "+w)}for(const w of g){const T=w.targetId;if(!w.fromCache){const C=b.Fs.get(T),P=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(P);b.Fs=b.Fs.insert(T,B)}}})(r.localStore,l))}async function aN(i,e){const t=Re(i);if(!t.currentUser.isEqual(e)){le(Eg,"User change. New user:",e.toKey());const r=await tT(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((m=>{m.forEach((p=>{p.reject(new fe(ne.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mu(t,r.Bs)}}function oN(i,e){const t=Re(i),r=t.Eu.get(e);if(r&&r.lu)return Ve().add(r.key);{let o=Ve();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const m=t.Pu.get(c);o=o.unionWith(m.view.tu)}return o}}function wT(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=yT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nN.bind(null,e),e.hu.J_=$O.bind(null,e.eventManager),e.hu.pu=FO.bind(null,e.eventManager),e}function lN(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return dO(this.persistence,new uO,e.initialUser,this.serializer)}Du(e){return new eT(dg.Vi,this.serializer)}bu(e){return new vO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class uN extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ye(this.persistence.referenceDelegate instanceof Qh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Y2(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new eT((r=>Qh.Vi(r,t)),this.serializer)}}class Rp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aN.bind(null,this.syncEngine),await BO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new HO})()}createDatastore(e){const t=pd(e.databaseInfo.databaseId),r=(function(l){return new SO(l)})(e.databaseInfo);return(function(l,c,m,p){return new CO(l,c,m,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,c,m){return new OO(r,o,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Rb(this.syncEngine,t,0)),(function(){return bb.C()?new bb:new bO})())}createSyncEngine(e,t){return(function(o,l,c,m,p,g,b){const w=new QO(o,l,c,m,p,g);return b&&(w.fu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Re(o);le(ya,"RemoteStore shutting down."),l.Ia.add(5),await Pu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Rp.provider={build:()=>new Rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class cN{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{le(Rs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(le(Rs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=bg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qm(i,e){i.asyncQueue.verifyOperationInProgress(),le(Rs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await tT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{bs("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{le("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{bs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e}async function Cb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await hN(i);le(Rs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Eb(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Eb(e.remoteStore,o))),i._onlineComponents=e}async function hN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){le(Rs,"Using user provided OfflineComponentProvider");try{await qm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),await qm(i,new Jh)}}else le(Rs,"Using default OfflineComponentProvider"),await qm(i,new uN(void 0));return i._offlineComponents}async function TT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(le(Rs,"Using user provided OnlineComponentProvider"),await Cb(i,i._uninitializedComponentsProvider._online)):(le(Rs,"Using default OnlineComponentProvider"),await Cb(i,new Rp))),i._onlineComponents}function dN(i){return TT(i).then((e=>e.syncEngine))}async function Ip(i){const e=await TT(i),t=e.eventManager;return t.onListen=XO.bind(null,e.syncEngine),t.onUnlisten=ZO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eN.bind(null,e.syncEngine),t}function fN(i,e,t={}){const r=new _s;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,p,g){const b=new ET({next:T=>{b.Ou(),c.enqueueAndForget((()=>dT(l,w)));const C=T.docs.has(m);!C&&T.fromCache?g.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&T.fromCache&&p&&p.source==="server"?g.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),w=new fT(ud(m.path),b,{includeMetadataChanges:!0,ka:!0});return hT(l,w)})(await Ip(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firestore.googleapis.com",Ob=!0;class Nb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AT,this.ssl=Ob}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ob;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G2)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ox("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ST((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sg{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bx;switch(r.type){case"firstParty":return new Sx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=xb.get(t);r&&(le("ComponentProvider","Removing Datastore"),xb.delete(t),r.terminate())})(this),Promise.resolve()}}function mN(i,e,t,r={}){var o;i=vs(i,Sg);const l=Bo(e),c=i._getSettings(),m=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;l&&(_w(`https://${p}`),vw("Firestore",!0)),c.host!==AT&&c.host!==p&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:r});if(!fa(g,m)&&(i._setSettings(g),r.mockUserToken)){let b,w;if(typeof r.mockUserToken=="string")b=r.mockUserToken,w=un.MOCK_USER;else{b=K1(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new un(T)}i._authCredentials=new wx(new hE(b,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _d(this.firestore,e,this._query)}}class Ut{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Nu(t,Ut._jsonSchema))return new Ut(e,r||null,new ge(ct.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:xt("string",Ut._jsonSchemaVersion),referencePath:xt("string")};class _u extends _d{constructor(e,t,r){super(e,t,ud(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new ge(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function Nh(i,e,...t){if(i=Wn(i),arguments.length===1&&(e=eg.newId()),xx("doc","path",e),i instanceof Sg){const r=ct.fromString(e,...t);return F0(r),new Ut(i,null,new ge(r))}{if(!(i instanceof Ut||i instanceof _u))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ct.fromString(e,...t));return F0(r),new Ut(i.firestore,i instanceof _u?i.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new iT(this,"async_queue_retry"),this.oc=()=>{const r=Bm();r&&le(kb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new _s;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Go(e))throw e;le(kb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,mr("INTERNAL UNHANDLED ERROR: ",Pb(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=vg.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&we(47125,{hc:Pb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Pb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class vu extends Sg{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Db,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function RT(i,e){const t=typeof i=="object"?i:Ew(),r=typeof i=="string"?i:qh,o=qp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=F1("firestore");l&&mN(o,...l)}return o}function Ag(i){if(i._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||pN(i),i._firestoreClient}function pN(i){var e,t,r;const o=i._freezeSettings(),l=(function(m,p,g,b){return new Bx(m,p,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ST(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new cN(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(rn.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:xt("string",Jn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:xt("string",Oi._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ni(e.vectorValues);throw new fe(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:xt("string",Ni._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=/^__.*__$/;class yN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}function CT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ec:i})}}class Ig{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ig(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CT(this.Ec)&&gN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _N{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pd(e)}Dc(e,t,r,o=!1){return new Ig({Ec:e,methodName:t,bc:r,path:nn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vN(i){const e=i._freezeSettings(),t=pd(i._databaseId);return new _N(i._databaseId,!!e.ignoreUndefinedProperties,t)}function bN(i,e,t,r,o,l={}){const c=i.Dc(l.merge||l.mergeFields?2:0,e,t,o);kT("Data must be an object, but it was:",c,r);const m=OT(r,c);let p,g;if(l.merge)p=new ci(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const w of l.mergeFields){const T=wN(e,w,t);if(!c.contains(T))throw new fe(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);TN(b,T)||b.push(T)}p=new ci(b),g=c.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,g=c.fieldTransforms;return new yN(new Xn(m),p,g)}function xT(i,e){if(NT(i=Wn(i)))return kT("Unsupported field value:",e,i),OT(i,e);if(i instanceof IT)return(function(r,o){if(!CT(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const m of r){let p=xT(m,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,o){if((r=Wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return h2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=st.fromDate(r);return{timestampValue:Yh(o.serializer,l)}}if(r instanceof st){const l=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,l)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:GE(o.serializer,r._byteString)};if(r instanceof Ut){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ni)return(function(c,m){return{mapValue:{fields:{[wE]:{stringValue:EE},[Hh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw m.wc("VectorValues must only contain numeric values.");return og(m.serializer,g)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${tg(r)}`)})(i,e)}function OT(i,e){const t={};return pE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(i,((r,o)=>{const l=xT(o,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function NT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof st||i instanceof Oi||i instanceof Jn||i instanceof Ut||i instanceof IT||i instanceof Ni)}function kT(i,e,t){if(!NT(t)||!fE(t)){const r=tg(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function wN(i,e,t){if((e=Wn(e))instanceof Rg)return e._internalPath;if(typeof e=="string")return DT(i,e);throw Wh("Field path arguments must be of type string or ",i,!1,void 0,t)}const EN=new RegExp("[~\\*/\\[\\]]");function DT(i,e,t){if(e.search(EN)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Rg(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Wh(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new fe(ne.INVALID_ARGUMENT,m+i+p)}function TN(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SN extends PT{data(){return super.data()}}function MT(i,e){return typeof e=="string"?DT(i,e):e instanceof Rg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RN{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return va(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Hh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((c=>wt(c.doubleValue)));return new Ni(l)}convertGeoPoint(e){return new Oi(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=od(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Es(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);Ye(WE(r),9688,{name:e});const o=new mu(r.get(1),r.get(3)),l=new ge(r.popFirst(5));return o.isEqual(t)||mr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends PT{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:xt("string",da._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class kh extends da{data(e={}){return super.data(e)}}class ko{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new eu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kh(this._firestore,this._userDataWriter,r.key,r,new eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const p=new kh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new kh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new eu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return m.type!==0&&(g=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),b=c.indexOf(m.doc.key)),{type:CN(m.type),doc:p,oldIndex:g,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(i){i=vs(i,Ut);const e=vs(i.firestore,vu);return fN(Ag(e),i._key).then((t=>VT(e,i,t)))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:xt("string",ko._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class UT extends RN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function Ub(i,e,t){i=vs(i,Ut);const r=vs(i.firestore,vu),o=IN(i.converter,e,t);return NN(r,[bN(vN(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,cr.none())])}function ON(i,...e){var t,r,o;i=Wn(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Mb(e[c])||(l=e[c++]);const m={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Mb(e[c])){const w=e[c];e[c]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[c+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[c+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,b;if(i instanceof Ut)g=vs(i.firestore,vu),b=ud(i._key.path),p={next:w=>{e[c]&&e[c](VT(g,i,w))},error:e[c+1],complete:e[c+2]};else{const w=vs(i,_d);g=vs(w.firestore,vu),b=w._query;const T=new UT(g);p={next:C=>{e[c]&&e[c](new ko(g,T,w,C))},error:e[c+1],complete:e[c+2]},AN(i._query)}return(function(T,C,P,B){const H=new ET(B),W=new fT(C,H,P);return T.asyncQueue.enqueueAndForget((async()=>hT(await Ip(T),W))),()=>{H.Ou(),T.asyncQueue.enqueueAndForget((async()=>dT(await Ip(T),W)))}})(Ag(g),b,m,p)}function NN(i,e){return(function(r,o){const l=new _s;return r.asyncQueue.enqueueAndForget((async()=>tN(await dN(r),o,l))),l.promise})(Ag(i),e)}function VT(i,e,t){const r=t.docs.get(e._key),o=new UT(i);return new da(i,o,e._key,r,new eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){$o=o})(qo),Po(new ma("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),m=new vu(new Ex(r.getProvider("auth-internal")),new Ax(c,r.getProvider("app-check-internal")),(function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(g.options.projectId,b)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),gs(z0,B0,e),gs(z0,B0,"esm2017")})();const kN=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class Cg extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class DN extends Cg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vb extends Cg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jb extends Cg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cp;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Cp||(Cp={}));class PN{constructor(e,{headers:t={},customFetch:r,region:o=Cp.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=kN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return EI(this,arguments,void 0,function*(t,r={}){var o;let l,c;try{const{headers:m,method:p,body:g,signal:b,timeout:w}=r;let T={},{region:C}=r;C||(C=this.region);const P=new URL(`${this.url}/${t}`);C&&C!=="any"&&(T["x-region"]=C,P.searchParams.set("forceFunctionRegion",C));let B;g&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",B=g):typeof g=="string"?(T["Content-Type"]="text/plain",B=g):typeof FormData<"u"&&g instanceof FormData?B=g:(T["Content-Type"]="application/json",B=JSON.stringify(g)):B=g;let H=b;w&&(c=new AbortController,l=setTimeout(()=>c.abort(),w),b?(H=c.signal,b.addEventListener("abort",()=>c.abort())):H=c.signal);const W=yield this.fetch(P.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),m),body:B,signal:H}).catch(ye=>{throw new DN(ye)}),te=W.headers.get("x-relay-error");if(te&&te==="true")throw new Vb(W);if(!W.ok)throw new jb(W);let F=((o=W.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),ie;return F==="application/json"?ie=yield W.json():F==="application/octet-stream"||F==="application/pdf"?ie=yield W.blob():F==="text/event-stream"?ie=W:F==="multipart/form-data"?ie=yield W.formData():ie=yield W.text(),{data:ie,error:null,response:W}}catch(m){return{data:null,error:m,response:m instanceof jb||m instanceof Vb?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var MN=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},UN=class{constructor(i){var e,t;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(e=i.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=i.signal,this.isMaybeSingle=(t=i.isMaybeSingle)!==null&&t!==void 0?t:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,e){return this.headers=new Headers(this.headers),this.headers.set(i,e),this}then(i,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,m=null,p=null,g=l.status,b=l.statusText;if(l.ok){var w,T;if(t.method!=="HEAD"){var C;const W=await l.text();W===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((C=t.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?m=W:m=JSON.parse(W))}const B=(w=t.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),H=(T=l.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");B&&H&&H.length>1&&(p=parseInt(H[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(m)&&(m.length>1?(c={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,g=406,b="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var P;const B=await l.text();try{c=JSON.parse(B),Array.isArray(c)&&l.status===404&&(m=[],c=null,g=200,b="OK")}catch{l.status===404&&B===""?(g=204,b="No Content"):c={message:B}}if(c&&t.isMaybeSingle&&(!(c==null||(P=c.details)===null||P===void 0)&&P.includes("0 rows"))&&(c=null,g=200,b="OK"),c&&t.shouldThrowOnError)throw new MN(c)}return{error:c,data:m,count:p,status:g,statusText:b}});return this.shouldThrowOnError||(o=o.catch(l=>{var c;let m="";const p=l==null?void 0:l.cause;if(p){var g,b,w,T;const P=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",B=(b=p==null?void 0:p.code)!==null&&b!==void 0?b:"";m=`${(w=l==null?void 0:l.name)!==null&&w!==void 0?w:"FetchError"}: ${l==null?void 0:l.message}`,m+=`

Caused by: ${(T=p==null?void 0:p.name)!==null&&T!==void 0?T:"Error"}: ${P}`,B&&(m+=` (${B})`),p!=null&&p.stack&&(m+=`
${p.stack}`)}else{var C;m=(C=l==null?void 0:l.stack)!==null&&C!==void 0?C:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,e)}returns(){return this}overrideTypes(){return this}},VN=class extends UN{select(i){let e=!1;const t=(i??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:o=r}={}){const l=o?`${o}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${i}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${i}`),this}range(i,e,{foreignTable:t,referencedTable:r=t}={}){const o=typeof r>"u"?"offset":`${r}.offset`,l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(l,`${e-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:o=!1,format:l="text"}={}){var c;const m=[i?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${m};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const Lb=new RegExp("[,()]");var To=class extends VN{eq(i,e){return this.url.searchParams.append(i,`eq.${e}`),this}neq(i,e){return this.url.searchParams.append(i,`neq.${e}`),this}gt(i,e){return this.url.searchParams.append(i,`gt.${e}`),this}gte(i,e){return this.url.searchParams.append(i,`gte.${e}`),this}lt(i,e){return this.url.searchParams.append(i,`lt.${e}`),this}lte(i,e){return this.url.searchParams.append(i,`lte.${e}`),this}like(i,e){return this.url.searchParams.append(i,`like.${e}`),this}likeAllOf(i,e){return this.url.searchParams.append(i,`like(all).{${e.join(",")}}`),this}likeAnyOf(i,e){return this.url.searchParams.append(i,`like(any).{${e.join(",")}}`),this}ilike(i,e){return this.url.searchParams.append(i,`ilike.${e}`),this}ilikeAllOf(i,e){return this.url.searchParams.append(i,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(i,e){return this.url.searchParams.append(i,`ilike(any).{${e.join(",")}}`),this}regexMatch(i,e){return this.url.searchParams.append(i,`match.${e}`),this}regexIMatch(i,e){return this.url.searchParams.append(i,`imatch.${e}`),this}is(i,e){return this.url.searchParams.append(i,`is.${e}`),this}isDistinct(i,e){return this.url.searchParams.append(i,`isdistinct.${e}`),this}in(i,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Lb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(i,`in.(${t})`),this}notIn(i,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Lb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(i,`not.in.(${t})`),this}contains(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cs.{${e.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(e)}`),this}containedBy(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cd.{${e.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(e)}`),this}rangeGt(i,e){return this.url.searchParams.append(i,`sr.${e}`),this}rangeGte(i,e){return this.url.searchParams.append(i,`nxl.${e}`),this}rangeLt(i,e){return this.url.searchParams.append(i,`sl.${e}`),this}rangeLte(i,e){return this.url.searchParams.append(i,`nxr.${e}`),this}rangeAdjacent(i,e){return this.url.searchParams.append(i,`adj.${e}`),this}overlaps(i,e){return typeof e=="string"?this.url.searchParams.append(i,`ov.${e}`):this.url.searchParams.append(i,`ov.{${e.join(",")}}`),this}textSearch(i,e,{config:t,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(i,`${o}fts${l}.${e}`),this}match(i){return Object.entries(i).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(i,e,t){return this.url.searchParams.append(i,`not.${e}.${t}`),this}or(i,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${i})`),this}filter(i,e,t){return this.url.searchParams.append(i,`${e}.${t}`),this}},jN=class{constructor(i,{headers:e={},schema:t,fetch:r}){this.url=i,this.headers=new Headers(e),this.schema=t,this.fetch=r}select(i,e){const{head:t=!1,count:r}=e??{},o=t?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",c),r&&this.headers.append("Prefer",`count=${r}`),new To({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:e,defaultToNull:t=!0}={}){var r;const o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const l=i.reduce((c,m)=>c.concat(Object.keys(m)),[]);if(l.length>0){const c=[...new Set(l)].map(m=>`"${m}"`);this.url.searchParams.set("columns",c.join(","))}}return new To({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(i,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:o=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new To({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(i,{count:e}={}){var t;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new To({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:i}={}){var e;const t="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new To({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},LN=class jT{constructor(e,{headers:t={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new jN(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new jT(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:o=!1,count:l}={}){var c;let m;const p=new URL(`${this.url}/rpc/${e}`);let g;r||o?(m=r?"HEAD":"GET",Object.entries(t).filter(([w,T])=>T!==void 0).map(([w,T])=>[w,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([w,T])=>{p.searchParams.append(w,T)})):(m="POST",g=t);const b=new Headers(this.headers);return l&&b.set("Prefer",`count=${l}`),new To({method:m,url:p,headers:b,schema:this.schemaName,body:g,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class zN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const BN="2.89.0",qN=`realtime-js/${BN}`,LT="1.0.0",HN="2.0.0",zb=LT,xp=1e4,$N=1e3,FN=100;var os;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(os||(os={}));var Pt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Pt||(Pt={}));var li;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(li||(li={}));var Op;(function(i){i.websocket="websocket"})(Op||(Op={}));var oa;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(oa||(oa={}));class GN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,r){var o,l;const c=e.topic,m=(o=e.ref)!==null&&o!==void 0?o:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+c.length+g.length+w.length,C=new ArrayBuffer(this.HEADER_LENGTH+T);let P=new DataView(C),B=0;P.setUint8(B++,this.KINDS.userBroadcastPush),P.setUint8(B++,p.length),P.setUint8(B++,m.length),P.setUint8(B++,c.length),P.setUint8(B++,g.length),P.setUint8(B++,w.length),P.setUint8(B++,t),Array.from(p,W=>P.setUint8(B++,W.charCodeAt(0))),Array.from(m,W=>P.setUint8(B++,W.charCodeAt(0))),Array.from(c,W=>P.setUint8(B++,W.charCodeAt(0))),Array.from(g,W=>P.setUint8(B++,W.charCodeAt(0))),Array.from(w,W=>P.setUint8(B++,W.charCodeAt(0)));var H=new Uint8Array(C.byteLength+r.byteLength);return H.set(new Uint8Array(C),0),H.set(new Uint8Array(r),C.byteLength),H.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[o,l,c,m,p]=r;return t({join_ref:o,ref:l,topic:c,event:m,payload:p})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,r){const o=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),m=t.getUint8(4);let p=this.HEADER_LENGTH+4;const g=r.decode(e.slice(p,p+o));p=p+o;const b=r.decode(e.slice(p,p+l));p=p+l;const w=r.decode(e.slice(p,p+c));p=p+c;const T=e.slice(p,e.byteLength),C=m===this.JSON_ENCODING?JSON.parse(r.decode(T)):T,P={type:this.BROADCAST_EVENT,event:b,payload:C};return c>0&&(P.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:P}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class zT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(tt||(tt={}));const Bb=(i,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=KN(c,i,e,o),l),{}):{}},KN=(i,e,t,r)=>{const o=e.find(m=>m.name===i),l=o==null?void 0:o.type,c=t[i];return l&&!r.includes(l)?BT(l,c):Np(c)},BT=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return JN(e,t)}switch(i){case tt.bool:return YN(e);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return QN(e);case tt.json:case tt.jsonb:return XN(e);case tt.timestamp:return WN(e);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Np(e);default:return Np(e)}},Np=i=>i,YN=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},QN=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},XN=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},JN=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let l;const c=i.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(m=>BT(e,m))}return i},WN=i=>typeof i=="string"?i.replace(" ","T"):i,qT=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Hm{constructor(e,t,r={},o=xp){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qb;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(qb||(qb={}));class lu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,o,l,c),this.pendingDiffs.forEach(p=>{this.state=lu.syncDiff(this.state,p,l,c)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=lu.syncDiff(this.state,o,l,c),m())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const l=this.cloneDeep(e),c=this.transformState(t),m={},p={};return this.map(l,(g,b)=>{c[g]||(p[g]=b)}),this.map(c,(g,b)=>{const w=l[g];if(w){const T=b.map(H=>H.presence_ref),C=w.map(H=>H.presence_ref),P=b.filter(H=>C.indexOf(H.presence_ref)<0),B=w.filter(H=>T.indexOf(H.presence_ref)<0);P.length>0&&(m[g]=P),B.length>0&&(p[g]=B)}else m[g]=b}),this.syncDiff(l,{joins:m,leaves:p},r,o)}static syncDiff(e,t,r,o){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(l,(m,p)=>{var g;const b=(g=e[m])!==null&&g!==void 0?g:[];if(e[m]=this.cloneDeep(p),b.length>0){const w=e[m].map(C=>C.presence_ref),T=b.filter(C=>w.indexOf(C.presence_ref)<0);e[m].unshift(...T)}r(m,b,p)}),this.map(c,(m,p)=>{let g=e[m];if(!g)return;const b=p.map(w=>w.presence_ref);g=g.filter(w=>b.indexOf(w.presence_ref)<0),e[m]=g,o(m,g,p),g.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hb;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Hb||(Hb={}));var uu;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(uu||(uu={}));var or;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class Io{constructor(e,t={config:{}},r){var o,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Hm(this,li.join,this.params,this.timeout),this.rejoinTimer=new zT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(li.reply,{},(c,m)=>{this._trigger(this._replyEventName(m),c)}),this.presence=new lu(this),this.broadcastEndpointURL=qT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:c,presence:m,private:p}}=this.params,g=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,w={},T={broadcast:c,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(C=>e==null?void 0:e(or.CHANNEL_ERROR,C)),this._onClose(()=>e==null?void 0:e(or.CLOSED)),this.updateJoinPayload(Object.assign({config:T},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:C})=>{var P;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){e==null||e(or.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,H=(P=B==null?void 0:B.length)!==null&&P!==void 0?P:0,W=[];for(let te=0;te<H;te++){const F=B[te],{filter:{event:ie,schema:ye,table:oe,filter:I}}=F,R=C&&C[te];if(R&&R.event===ie&&Io.isFilterValueEqual(R.schema,ye)&&Io.isFilterValueEqual(R.table,oe)&&Io.isFilterValueEqual(R.filter,I))W.push(Object.assign(Object.assign({},F),{id:R.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=W,e&&e(or.SUBSCRIBED);return}}).receive("error",C=>{this.state=Pt.errored,e==null||e(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Pt.joined&&e===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,m,p;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(m=(c=this.params)===null||c===void 0?void 0:c.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(li.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Hm(this,li.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const o=new AbortController,l=setTimeout(()=>o.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Hm(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>FN){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,l;const c=e.toLocaleLowerCase(),{close:m,error:p,leave:g,join:b}=li;if(r&&[m,p,g,b].indexOf(c)>=0&&r!==this._joinRef())return;let T=this._onMessage(c,t,r);if(t&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(C=>{var P,B,H;return((P=C.filter)===null||P===void 0?void 0:P.event)==="*"||((H=(B=C.filter)===null||B===void 0?void 0:B.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===c}).map(C=>C.callback(T,r)):(l=this.bindings[c])===null||l===void 0||l.filter(C=>{var P,B,H,W,te,F;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in C){const ie=C.id,ye=(P=C.filter)===null||P===void 0?void 0:P.event;return ie&&((B=t.ids)===null||B===void 0?void 0:B.includes(ie))&&(ye==="*"||(ye==null?void 0:ye.toLocaleLowerCase())===((H=t.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const ie=(te=(W=C==null?void 0:C.filter)===null||W===void 0?void 0:W.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return ie==="*"||ie===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===c}).map(C=>{if(typeof T=="object"&&"ids"in T){const P=T.data,{schema:B,table:H,commit_timestamp:W,type:te,errors:F}=P;T=Object.assign(Object.assign({},{schema:B,table:H,commit_timestamp:W,eventType:te,new:{},old:{},errors:F}),this._getPayloadRecords(P))}C.callback(T,r)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&Io.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(li.close,{},e)}_onError(e){this._on(li.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Bb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Bb(e.columns,e.old_record)),t}}const $m=()=>{},yh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZN=[1e3,2e3,5e3,1e4],ek=1e4,tk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nk{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xp,this.transport=null,this.heartbeatIntervalMs=yh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$m,this.ref=0,this.reconnectTimer=null,this.vsn=zb,this.logger=$m,this.conn=null,this.sendBuffer=[],this.serializer=new GN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Op.websocket}`,this.httpEndpoint=qT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case os.connecting:return oa.Connecting;case os.open:return oa.Open;case os.closing:return oa.Closing;default:return oa.Closed}}isConnected(){return this.connectionState()===oa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===r);if(o)return o;{const l=new Io(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:o,ref:l}=e,c=()=>{this.encode(e,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${t} ${r} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($N,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},yh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:l,ref:c}=t,m=c?`(${c})`:"",p=l.status||"";this.log("receive",`${p} ${r} ${o} ${m}`.trim(),l),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(o,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===os.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===os.open||this.conn.readyState===os.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(li.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([tk],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const l={access_token:t,version:qN};t&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(li.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,l,c,m,p,g,b,w,T,C;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:xp,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:yh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:$m,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:zb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(P=>ZN[P-1]||ek),this.vsn){case LT:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:((P,B)=>B(JSON.stringify(P))),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:((P,B)=>B(JSON.parse(P)));break;case HN:this.encode=(T=e==null?void 0:e.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var bu=class extends Error{constructor(i,e){var t;super(i),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ik(i,e,t){const r=new URL(e,i);if(t)for(const[o,l]of Object.entries(t))l!==void 0&&r.searchParams.set(o,l);return r.toString()}async function rk(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function sk(i){const e=i.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:o,body:l,headers:c}){const m=ik(i.baseUrl,r,o),p=await rk(i.auth),g=await e(m,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...p,...c},body:l?JSON.stringify(l):void 0}),b=await g.text(),w=(g.headers.get("content-type")||"").includes("application/json"),T=w&&b?JSON.parse(b):b;if(!g.ok){const C=w?T:void 0,P=C==null?void 0:C.error;throw new bu((P==null?void 0:P.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:C})}return{status:g.status,headers:g.headers,data:T}}}}function _h(i){return i.join("")}var ak=class{constructor(i,e=""){this.client=i,this.prefix=e}async listNamespaces(i){const e=i?{parent:_h(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(i,e){const t={namespace:i.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_h(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_h(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_h(i.namespace)}`}),!0}catch(e){if(e instanceof bu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(i,e){try{return await this.createNamespace(i,e)}catch(t){if(t instanceof bu&&t.status===409)return;throw t}}};function fo(i){return i.join("")}var ok=class{constructor(i,e="",t){this.client=i,this.prefix=e,this.accessDelegation=t}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables`})).data.identifiers}async createTable(i,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(i,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(i,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(i){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,headers:e})).data.metadata}async tableExists(i){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,headers:e}),!0}catch(t){if(t instanceof bu&&t.status===404)return!1;throw t}}async createTableIfNotExists(i,e){try{return await this.createTable(i,e)}catch(t){if(t instanceof bu&&t.status===409)return await this.loadTable({namespace:i.namespace,name:e.name});throw t}}},lk=class{constructor(i){var r;let e="v1";i.catalogName&&(e+=`/${i.catalogName}`);const t=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=sk({baseUrl:t,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(r=i.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new ak(this.client,e),this.tableOps=new ok(this.client,e,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,e){return this.namespaceOps.createNamespace(i,e)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,e){return this.tableOps.createTable(i,e)}async updateTable(i,e){return this.tableOps.updateTable(i,e)}async dropTable(i,e){await this.tableOps.dropTable(i,e)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,e){return this.namespaceOps.createNamespaceIfNotExists(i,e)}async createTableIfNotExists(i,e){return this.tableOps.createTableIfNotExists(i,e)}},vd=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function ut(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var uk=class extends vd{constructor(i,e,t){super(i),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},kp=class extends vd{constructor(i,e){super(i),this.name="StorageUnknownError",this.originalError=e}};const xg=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),ck=()=>Response,Dp=i=>{if(Array.isArray(i))return i.map(t=>Dp(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Dp(r)}),e},hk=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},dk=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function wu(i){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(i)}function fk(i,e){if(wu(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function mk(i){var e=fk(i,"string");return wu(e)=="symbol"?e:e+""}function pk(i,e,t){return(e=mk(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function $b(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function be(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$b(Object(t),!0).forEach(function(r){pk(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):$b(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}const Fm=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},gk=async(i,e,t)=>{i instanceof await ck()&&!(t!=null&&t.noResolveJson)?i.json().then(r=>{const o=i.status||500,l=(r==null?void 0:r.statusCode)||o+"";e(new uk(Fm(r),o,l))}).catch(r=>{e(new kp(Fm(r),r))}):e(new kp(Fm(i),i))},yk=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?o:(hk(r)?(o.headers=be({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),be(be({},o),t))};async function Uu(i,e,t,r,o,l){return new Promise((c,m)=>{i(t,yk(e,r,o,l)).then(p=>{if(!p.ok)throw p;return r!=null&&r.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>gk(p,m,r))})}async function Eu(i,e,t,r){return Uu(i,"GET",e,t,r)}async function oi(i,e,t,r,o){return Uu(i,"POST",e,r,o,t)}async function Pp(i,e,t,r,o){return Uu(i,"PUT",e,r,o,t)}async function _k(i,e,t,r){return Uu(i,"HEAD",e,be(be({},t),{},{noResolveJson:!0}),r)}async function Og(i,e,t,r,o){return Uu(i,"DELETE",e,r,o,t)}var vk=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e}then(i,e){return this.execute().then(i,e)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(ut(e))return{data:null,error:e};throw e}}};let HT;HT=Symbol.toStringTag;var bk=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e,this[HT]="BlobDownloadBuilder",this.promise=null}asStream(){return new vk(this.downloadFn,this.shouldThrowOnError)}then(i,e){return this.getPromise().then(i,e)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(ut(e))return{data:null,error:e};throw e}}};const wk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Ek=class{constructor(i,e={},t,r){this.shouldThrowOnError=!1,this.url=i,this.headers=e,this.bucketId=t,this.fetch=xg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,e,t,r){var o=this;try{let l;const c=be(be({},Fb),r);let m=be(be({},o.headers),i==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),p&&l.append("metadata",o.encodeMetadata(p)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),p&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(p))):(l=t,m["cache-control"]=`max-age=${c.cacheControl}`,m["content-type"]=c.contentType,p&&(m["x-metadata"]=o.toBase64(o.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(m=be(be({},m),r.headers));const g=o._removeEmptyFolders(e),b=o._getFinalPath(g),w=await(i=="PUT"?Pp:oi)(o.fetch,`${o.url}/object/${b}`,l,be({headers:m},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:w.Id,fullPath:w.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(ut(l))return{data:null,error:l};throw l}}async upload(i,e,t){return this.uploadOrUpdate("POST",i,e,t)}async uploadToSignedUrl(i,e,t,r){var o=this;const l=o._removeEmptyFolders(i),c=o._getFinalPath(l),m=new URL(o.url+`/object/upload/sign/${c}`);m.searchParams.set("token",e);try{let p;const g=be({upsert:Fb.upsert},r),b=be(be({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&t instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",t)):typeof FormData<"u"&&t instanceof FormData?(p=t,p.append("cacheControl",g.cacheControl)):(p=t,b["cache-control"]=`max-age=${g.cacheControl}`,b["content-type"]=g.contentType),{data:{path:l,fullPath:(await Pp(o.fetch,m.toString(),p,{headers:b})).Key},error:null}}catch(p){if(o.shouldThrowOnError)throw p;if(ut(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,e){var t=this;try{let r=t._getFinalPath(i);const o=be({},t.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=await oi(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:o}),c=new URL(t.url+l.url),m=c.searchParams.get("token");if(!m)throw new vd("No token returned by API");return{data:{signedUrl:c.toString(),path:i,token:m},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}}async update(i,e,t){return this.uploadOrUpdate("PUT",i,e,t)}async move(i,e,t){var r=this;try{return{data:await oi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}}async copy(i,e,t){var r=this;try{return{data:{path:(await oi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}}async createSignedUrl(i,e,t){var r=this;try{let o=r._getFinalPath(i),l=await oi(r.fetch,`${r.url}/object/sign/${o}`,be({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const c=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return l={signedUrl:encodeURI(`${r.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}}async createSignedUrls(i,e,t){var r=this;try{const o=await oi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:i},{headers:r.headers}),l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:o.map(c=>be(be({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}}download(i,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=r?`?${r}`:"",l=this._getFinalPath(i),c=()=>Eu(this.fetch,`${this.url}/${t}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new bk(c,this.shouldThrowOnError)}async info(i){var e=this;const t=e._getFinalPath(i);try{return{data:Dp(await Eu(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}}async exists(i){var e=this;const t=e._getFinalPath(i);try{return await _k(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ut(r)&&r instanceof kp){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}}getPublicUrl(i,e){const t=this._getFinalPath(i),r=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&r.push(o);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let m=r.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${m}`)}}}async remove(i){var e=this;try{return{data:await Og(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async list(i,e,t){var r=this;try{const o=be(be(be({},wk),e),{},{prefix:i||""});return{data:await oi(r.fetch,`${r.url}/object/list/${r.bucketId}`,o,{headers:r.headers},t),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ut(o))return{data:null,error:o};throw o}}async listV2(i,e){var t=this;try{const r=be({},i);return{data:await oi(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const e=[];return i.width&&e.push(`width=${i.width}`),i.height&&e.push(`height=${i.height}`),i.resize&&e.push(`resize=${i.resize}`),i.format&&e.push(`format=${i.format}`),i.quality&&e.push(`quality=${i.quality}`),e.join("&")}};const $T="2.89.0",FT={"X-Client-Info":`storage-js/${$T}`};var Tk=class{constructor(i,e={},t,r){this.shouldThrowOnError=!1;const o=new URL(i);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=be(be({},FT),e),this.fetch=xg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var e=this;try{const t=e.listBucketOptionsToQueryString(i);return{data:await Eu(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await Eu(e.fetch,`${e.url}/bucket/${i}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async createBucket(i,e={public:!1}){var t=this;try{return{data:await oi(t.fetch,`${t.url}/bucket`,{id:i,name:i,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}}async updateBucket(i,e){var t=this;try{return{data:await Pp(t.fetch,`${t.url}/bucket/${i}`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}}async emptyBucket(i){var e=this;try{return{data:await oi(e.fetch,`${e.url}/bucket/${i}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Og(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(i){const e={};return i&&("limit"in i&&(e.limit=String(i.limit)),"offset"in i&&(e.offset=String(i.offset)),i.search&&(e.search=i.search),i.sortColumn&&(e.sortColumn=i.sortColumn),i.sortOrder&&(e.sortOrder=i.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Sk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},FT),e),this.fetch=xg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await oi(e.fetch,`${e.url}/bucket`,{name:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async listBuckets(i){var e=this;try{const t=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&t.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&t.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&t.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&t.set("sortOrder",i.sortOrder),i!=null&&i.search&&t.set("search",i.search);const r=t.toString(),o=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Eu(e.fetch,o,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Og(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}}from(i){var e=this;if(!dk(i))throw new vd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new lk({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(o,l){const c=o[l];return typeof c!="function"?c:async(...m)=>{try{return{data:await c.apply(o,m),error:null}}catch(p){if(r)throw p;return{data:null,error:p}}}}})}};const Ng={"X-Client-Info":`storage-js/${$T}`,"Content-Type":"application/json"};var GT=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Un(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Gm=class extends GT{constructor(i,e,t){super(i),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ak=class extends GT{constructor(i,e){super(i),this.name="StorageVectorsUnknownError",this.originalError=e}};const kg=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),Rk=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Gb=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Ik=async(i,e,t)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(t!=null&&t.noResolveJson)){const r=i.status||500,o=i;if(typeof o.json=="function")o.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||r+"";e(new Gm(Gb(l),r,c))}).catch(()=>{const l=r+"";e(new Gm(o.statusText||`HTTP ${r} error`,r,l))});else{const l=r+"";e(new Gm(o.statusText||`HTTP ${r} error`,r,l))}}else e(new Ak(Gb(i),i))},Ck=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return r?(Rk(r)?(o.headers=be({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,be(be({},o),t)):o};async function xk(i,e,t,r,o,l){return new Promise((c,m)=>{i(t,Ck(e,r,o,l)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>c(p)).catch(p=>Ik(p,m,r))})}async function Vn(i,e,t,r,o){return xk(i,"POST",e,r,o,t)}var Ok=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},Ng),e),this.fetch=kg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/CreateIndex`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async getIndex(i,e){var t=this;try{return{data:await Vn(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}}async listIndexes(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/ListIndexes`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async deleteIndex(i,e){var t=this;try{return{data:await Vn(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Un(r))return{data:null,error:r};throw r}}},Nk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},Ng),e),this.fetch=kg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var e=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Vn(e.fetch,`${e.url}/PutVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async getVectors(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/GetVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async listVectors(i){var e=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await Vn(e.fetch,`${e.url}/ListVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async queryVectors(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/QueryVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async deleteVectors(i){var e=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Vn(e.fetch,`${e.url}/DeleteVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}},kk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=be(be({},Ng),e),this.fetch=kg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async listBuckets(i={}){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/ListVectorBuckets`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Un(t))return{data:null,error:t};throw t}}},Dk=class extends kk{constructor(i,e={}){super(i,e.headers||{},e.fetch)}from(i){return new Pk(this.url,this.headers,i,this.fetch)}async createBucket(i){var e=()=>super.createBucket,t=this;return e().call(t,i)}async getBucket(i){var e=()=>super.getBucket,t=this;return e().call(t,i)}async listBuckets(i={}){var e=()=>super.listBuckets,t=this;return e().call(t,i)}async deleteBucket(i){var e=()=>super.deleteBucket,t=this;return e().call(t,i)}},Pk=class extends Ok{constructor(i,e,t,r){super(i,e,r),this.vectorBucketName=t}async createIndex(i){var e=()=>super.createIndex,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(i={}){var e=()=>super.listIndexes,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(i){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,i)}async deleteIndex(i){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,i)}index(i){return new Mk(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},Mk=class extends Nk{constructor(i,e,t,r,o){super(i,e,o),this.vectorBucketName=t,this.indexName=r}async putVectors(i){var e=()=>super.putVectors,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(i){var e=()=>super.getVectors,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(i={}){var e=()=>super.listVectors,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(i){var e=()=>super.queryVectors,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(i){var e=()=>super.deleteVectors,t=this;return e().call(t,be(be({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Uk=class extends Tk{constructor(i,e={},t,r){super(i,e,t,r)}from(i){return new Ek(this.url,this.headers,i,this.fetch)}get vectors(){return new Dk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Sk(this.url+"/iceberg",this.headers,this.fetch)}};const KT="2.89.0",So=30*1e3,Mp=3,Km=Mp*So,Vk="http://localhost:9999",jk="supabase.auth.token",Lk={"X-Client-Info":`gotrue-js/${KT}`},Up="X-Supabase-Api-Version",YT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Bk=600*1e3;class Tu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class qk extends Tu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Hk(i){return de(i)&&i.name==="AuthApiError"}class la extends Tu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class yr extends Tu{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class Mn extends yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $k(i){return de(i)&&i.name==="AuthSessionMissingError"}class mo extends yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vh extends yr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bh extends yr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Fk(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}class Kb extends yr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gk extends yr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Vp extends yr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ym(i){return de(i)&&i.name==="AuthRetryableFetchError"}class Yb extends yr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class jp extends yr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qb=` 	
\r=`.split(""),Kk=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Qb.length;e+=1)i[Qb[e].charCodeAt(0)]=-2;for(let e=0;e<Zh.length;e+=1)i[Zh[e].charCodeAt(0)]=e;return i})();function Xb(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Zh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Zh[r]),e.queuedBits-=6}}function QT(i,e,t){const r=Kk[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Jb(i){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{Xk(c,r,t)};for(let c=0;c<i.length;c+=1)QT(i.charCodeAt(c),o,l);return e.join("")}function Yk(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Qk(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}Yk(r,e)}}function Xk(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Do(i){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)QT(i.charCodeAt(o),t,r);return new Uint8Array(e)}function Jk(i){const e=[];return Qk(i,t=>e.push(t)),new Uint8Array(e)}function ca(i){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};return i.forEach(o=>Xb(o,t,r)),Xb(null,t,r),e.join("")}function Wk(i){return Math.round(Date.now()/1e3)+i}function Zk(){return Symbol("auth-callback")}const en=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},XT=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function eD(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const JT=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),tD=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ao=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ra=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Zt=async(i,e)=>{await i.removeItem(e)};class bd{constructor(){this.promise=new bd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bd.promiseConstructor=Promise;function Qm(i){const e=i.split(".");if(e.length!==3)throw new jp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!zk.test(e[r]))throw new jp("JWT not in base64url format");return{header:JSON.parse(Jb(e[0])),payload:JSON.parse(Jb(e[1])),signature:Do(e[2]),raw:{header:e[0],payload:e[1]}}}async function nD(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function iD(i,e){return new Promise((r,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await i(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function rD(i){return("0"+i.toString(16)).substr(-2)}function sD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,rD).join("")}async function aD(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function oD(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await aD(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function po(i,e,t=!1){const r=sD();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await Ao(i,`${e}-code-verifier`,o);const l=await oD(r);return[l,r===l?"plain":"s256"]}const lD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uD(i){const e=i.headers.get(Up);if(!e||!e.match(lD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cD(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function hD(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(i){if(!dD.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xm(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fD(i,e){return new Proxy(i,{get:(t,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,o)}})}function Wb(i){return JSON.parse(JSON.stringify(i))}const aa=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),mD=[502,503,504];async function Zb(i){var e;if(!tD(i))throw new Vp(aa(i),0);if(mD.includes(i.status))throw new Vp(aa(i),i.status);let t;try{t=await i.json()}catch(l){throw new la(aa(l),l)}let r;const o=uD(i);if(o&&o.getTime()>=YT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Yb(aa(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Mn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Yb(aa(t),i.status,t.weak_password.reasons);throw new qk(aa(t),i.status||500,r)}const pD=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function ve(i,e,t,r){var o;const l=Object.assign({},r==null?void 0:r.headers);l[Up]||(l[Up]=YT["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const m=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await gD(i,e,t+m,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(p):{data:Object.assign({},p),error:null}}async function gD(i,e,t,r,o,l){const c=pD(e,r,o,l);let m;try{m=await i(t,Object.assign({},c))}catch(p){throw console.error(p),new Vp(aa(p),0)}if(m.ok||await Zb(m),r!=null&&r.noResolveJson)return m;try{return await m.json()}catch(p){await Zb(p)}}function ai(i){var e;let t=null;vD(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=Wk(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function ew(i){const e=ai(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function ds(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function yD(i){return{data:i,error:null}}function _D(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:l}=i,c=_a(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:l},p=Object.assign({},c);return{data:{properties:m,user:p},error:null}}function tw(i){return i}function vD(i){return i.access_token&&i.refresh_token&&i.expires_in}const Jm=["global","local","others"];class bD{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=JT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Jm[0]){if(Jm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jm.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ds})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=_a(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_D,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(de(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,l,c,m,p;try{const g={nextPage:null,lastPage:0,total:0},b=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:tw});if(b.error)throw b.error;const w=await b.json(),T=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(P=>{const B=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(P.split(";")[1].split("=")[1]);g[`${H}Page`]=B}),g.total=parseInt(T)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(de(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){go(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){go(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ds})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){go(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ds})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){go(e.userId);try{const{data:t,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,o,l,c,m,p;try{const g={nextPage:null,lastPage:0,total:0},b=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:tw});if(b.error)throw b.error;const w=await b.json(),T=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(p=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(P=>{const B=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(P.split(";")[1].split("=")[1]);g[`${H}Page`]=B}),g.total=parseInt(T)),{data:Object.assign(Object.assign({},w),g),error:null}}catch(g){if(de(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}}function nw(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const yo={debug:!!(globalThis&&XT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class WT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wD extends WT{}async function ED(i,e,t){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await t()}finally{yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new wD(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(yo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function TD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ZT(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function SD(i){return parseInt(i,16)}function AD(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function RD(i){var e;const{chainId:t,domain:r,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:m,requestId:p,resources:g,scheme:b,uri:w,version:T}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const C=ZT(i.address),P=b?`${b}://${r}`:r,B=i.statement?`${i.statement}
`:"",H=`${P} wants you to sign in with your Ethereum account:
${C}

${B}`;let W=`URI: ${w}
Version: ${T}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(W+=`
Expiration Time: ${o.toISOString()}`),m&&(W+=`
Not Before: ${m.toISOString()}`),p&&(W+=`
Request ID: ${p}`),g){let te=`
Resources:`;for(const F of g){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);te+=`
- ${F}`}W+=te}return`${H}
${W}`}class Ct extends Error{constructor({message:e,code:t,cause:r,name:o}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=o??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class ed extends Ct{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function ID({error:i,options:e}){var t,r,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Ct({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(eS(c)){if(l.rp.id!==c)return new Ct({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function CD({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Ct({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(eS(r)){if(t.rpId!==r)return new Ct({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class xD{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const OD=new xD;function ND(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:r}=i,o=_a(i,["challenge","user","excludeCredentials"]),l=Do(e).buffer,c=Object.assign(Object.assign({},t),{id:Do(t.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:l,user:c});if(r&&r.length>0){m.excludeCredentials=new Array(r.length);for(let p=0;p<r.length;p++){const g=r[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Do(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function kD(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,r=_a(i,["challenge","allowCredentials"]),o=Do(e).buffer,l=Object.assign(Object.assign({},r),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const m=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},m),{id:Do(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function DD(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:ca(new Uint8Array(i.response.attestationObject)),clientDataJSON:ca(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function PD(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,r=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:ca(new Uint8Array(o.authenticatorData)),clientDataJSON:ca(new Uint8Array(o.clientDataJSON)),signature:ca(new Uint8Array(o.signature)),userHandle:o.userHandle?ca(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eS(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function iw(){var i,e;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MD(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:ID({error:e,options:i})}}}async function UD(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:CD({error:e,options:i})}}}const VD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function td(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of i)if(o)for(const l in o){const c=o[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const m=r[l];e(m)?r[l]=td(m,c):r[l]=td(c)}else r[l]=c}return r}function LD(i,e){return td(VD,i,e||{})}function zD(i,e){return td(jD,i,e||{})}class BD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:o},l){try{const{data:c,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:m};const p=o??OD.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=LD(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:w}=await MD({publicKey:g,signal:p});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const g=zD(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:w}=await UD(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:p}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Tu("rpId is required for WebAuthn authentication")};try{if(!iw())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:o},{request:l});if(!c)return{data:null,error:m};const{webauthn:p}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:p.type,rpId:t,rpOrigins:r,credential_response:p.credential_response}})}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Tu("rpId is required for WebAuthn registration")};try{if(!iw())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:o},{create:l});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:t,rpOrigins:r,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in register",c)}}}}TD();const qD={url:Vk,storageKey:jk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rw(i,e,t){return await t()}const _o={};class Su{get jwks(){var e,t;return(t=(e=_o[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){_o[this.storageKey]=Object.assign(Object.assign({},_o[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=_o[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_o[this.storageKey]=Object.assign(Object.assign({},_o[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},qD),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Su.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Su.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&en()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new bD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=JT(l.fetch),this.lock=l.lock||rw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&en()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ED:this.lock=rw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:XT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=nw(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${KT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(en()&&(t=eD(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),en()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Fk(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",m),await this._saveSession(c),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return de(t)?this._returnResult({error:t}):this._returnResult({error:new la("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const l=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ai}),{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,o;try{let l;if("email"in e){const{email:b,password:w,options:T}=e;let C=null,P=null;this.flowType==="pkce"&&([C,P]=await po(this.storage,this.storageKey)),l=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:b,password:w,data:(t=T==null?void 0:T.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:C,code_challenge_method:P},xform:ai})}else if("phone"in e){const{phone:b,password:w,options:T}=e;l=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:w,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:ai})}else throw new vh("You must provide either an email or phone number and a password");const{data:c,error:m}=l;if(m||!c)return await Zt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:m}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ew})}else if("phone"in e){const{phone:l,password:c,options:m}=e;t=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ew})}else throw new vh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!r||!r.session||!r.user){const l=new mo;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,o,l,c,m,p,g,b,w,T;let C,P;if("message"in e)C=e.message,P=e.signature;else{const{chain:B,wallet:H,statement:W,options:te}=e;let F;if(en())if(typeof H=="object")F=H;else{const x=window;if("ethereum"in x&&typeof x.ethereum=="object"&&"request"in x.ethereum&&typeof x.ethereum.request=="function")F=x.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(te!=null&&te.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=H}const ie=new URL((t=te==null?void 0:te.url)!==null&&t!==void 0?t:window.location.href),ye=await F.request({method:"eth_requestAccounts"}).then(x=>x).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ye||ye.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const oe=ZT(ye[0]);let I=(r=te==null?void 0:te.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const x=await F.request({method:"eth_chainId"});I=SD(x)}const R={domain:ie.host,address:oe,statement:W,uri:ie.href,version:"1",chainId:I,nonce:(o=te==null?void 0:te.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=te==null?void 0:te.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(m=te==null?void 0:te.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=te==null?void 0:te.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=te==null?void 0:te.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(b=te==null?void 0:te.signInWithEthereum)===null||b===void 0?void 0:b.resources};C=RD(R),P=await F.request({method:"personal_sign",params:[AD(C),oe]})}try{const{data:B,error:H}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:P},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ai});if(H)throw H;if(!B||!B.session||!B.user){const W=new mo;return this._returnResult({data:{user:null,session:null},error:W})}return B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),this._returnResult({data:Object.assign({},B),error:H})}catch(B){if(de(B))return this._returnResult({data:{user:null,session:null},error:B});throw B}}async signInWithSolana(e){var t,r,o,l,c,m,p,g,b,w,T,C;let P,B;if("message"in e)P=e.message,B=e.signature;else{const{chain:H,wallet:W,statement:te,options:F}=e;let ie;if(en())if(typeof W=="object")ie=W;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))ie=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof W!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=W}const ye=new URL((t=F==null?void 0:F.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ie&&ie.signIn){const oe=await ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:ye.host,uri:ye.href}),te?{statement:te}:null));let I;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")I=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)I=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)P=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),B=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ie)||typeof ie.signMessage!="function"||!("publicKey"in ie)||typeof ie!="object"||!ie.publicKey||!("toBase58"in ie.publicKey)||typeof ie.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${ye.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${ye.href}`,`Issued At: ${(o=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=F==null?void 0:F.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((m=F==null?void 0:F.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((p=F==null?void 0:F.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((g=F==null?void 0:F.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((w=(b=F==null?void 0:F.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...F.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const oe=await ie.signMessage(new TextEncoder().encode(P),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=oe}}try{const{data:H,error:W}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:ca(B)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:ai});if(W)throw W;if(!H||!H.session||!H.user){const te=new mo;return this._returnResult({data:{user:null,session:null},error:te})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:W})}catch(H){if(de(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async _exchangeCodeForSession(e){const t=await ra(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Gk;const{data:l,error:c}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ai});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const m=new mo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:l,nonce:c}=e,m=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ai}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const b=new mo;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,o,l,c;try{if("email"in e){const{email:m,options:p}=e;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await po(this.storage,this.storageKey));const{error:w}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},create_user:(r=p==null?void 0:p.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:b},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:m,options:p}=e,{data:g,error:b}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(c=p==null?void 0:p.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:b})}throw new vh("You must provide either an email or phone number.")}catch(m){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var t,r;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:m}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:ai});if(m)throw m;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,g=c.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(o){if(de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,r,o,l,c;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await po(this.storage,this.storageKey));const g=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:yD});return!((l=g.data)===null||l===void 0)&&l.url&&en()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(m){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Mn;const{error:o}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(de(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:l}=e,{error:c}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:o,options:l}=e,{data:c,error:m}=await ve(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:m})}throw new vh("You must provide either an email or phone number and a type")}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ra(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Km:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await ra(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Xm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=fD(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async t=>{var r,o,l;const{data:c,error:m}=t;if(m)throw m;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:ds})})}catch(t){if(de(t))return $k(t)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:l}=r;if(l)throw l;if(!o.session)throw new Mn;const c=o.session;let m=null,p=null;this.flowType==="pkce"&&e.email!=null&&([m,p]=await po(this.storage,this.storageKey));const{data:g,error:b}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:p}),jwt:c.access_token,xform:ds});if(b)throw b;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mn;const t=Date.now()/1e3;let r=t,o=!0,l=null;const{payload:c}=Qm(e.access_token);if(c.exp&&(r=c.exp,o=r<=t),o){const{data:m,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(de(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:m}=t;if(m)throw m;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Mn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!en())throw new bh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Kb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kb("No code detected.");const{data:te,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:m,expires_at:p,token_type:g}=e;if(!l||!m||!c||!g)throw new bh("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(m);let T=b+w;p&&(T=parseInt(p));const C=T-b;C*1e3<=So&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${w}s`);const P=T-w;b-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,T,b):b-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,T,b);const{data:B,error:H}=await this._getUser(l);if(H)throw H;const W={provider_token:r,provider_refresh_token:o,access_token:l,expires_in:w,expires_at:T,refresh_token:c,token_type:g,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:W,redirectType:e.type},error:null})}catch(r){if(de(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ra(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=o.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:m}=await this.admin.signOut(c,e);if(m&&!(Hk(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Zk(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await po(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:o}=await this._useSession(async l=>{var c,m,p,g,b;const{data:w,error:T}=l;if(T)throw T;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",C,{headers:this.headers,jwt:(b=(g=w.session)===null||g===void 0?void 0:g.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return en()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(de(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:c,provider:m,token:p,access_token:g,nonce:b}=e,w=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:m,id_token:p,access_token:g,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ai}),{data:T,error:C}=w;return C?this._returnResult({data:{user:null,session:null},error:C}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new mo}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:C}))}catch(o){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:l,error:c}=t;if(c)throw c;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await iD(async o=>(o>0&&await nD(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ai})),(o,l)=>{const c=200*Math.pow(2,o);return l&&Ym(l)&&Date.now()+c-r<So})}catch(r){if(this._debug(t,"error",r),de(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),en()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await ra(this.storage,this.storageKey);if(o&&this.userStorage){let c=await ra(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await Ao(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Xm()}else if(o&&!o.user&&!o.user){const c=await ra(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(o.user=c.user,await Zt(this.storage,this.storageKey+"-user"),await Ao(this.storage,this.storageKey,o)):o.user=Xm()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Km;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Km}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),Ym(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:m}=await this._getUser(o.access_token);!m&&(c!=null&&c.user)?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new bd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Mn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(o,"error",l),de(l)){const c={data:null,error:l};return Ym(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(p){l.push(p)}});if(await Promise.all(c),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Zt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ao(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=Wb(o);await Ao(this.storage,this.storageKey,l)}else{const o=Wb(t);await Ao(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),So);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/So);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${So}ms, refresh threshold is ${Mp} ticks`),o<=Mp&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof WT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await po(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(m.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);o.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?DD(e.webauthn.credential_response):PD(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:p}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:m}=c;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:ND(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:kD(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qm(r.access_token);let c=null;l.aal&&(c=l.aal);let m=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(m="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Mn});const c=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Mn});const c=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Mn})})}catch(e){if(de(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Mn})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(m=>m.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(m=>m.kid===e),r&&this.jwks_cached_at+Bk>o)return r;const{data:l,error:c}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,r=l.keys.find(m=>m.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:C,error:P}=await this.getSession();if(P||!C.session)return this._returnResult({data:null,error:P});r=C.session.access_token}const{header:o,payload:l,signature:c,raw:{header:m,payload:p}}=Qm(r);t!=null&&t.allowExpired||cD(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!g){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:l,header:o,signature:c},error:null}}const b=hD(o.alg),w=await crypto.subtle.importKey("jwk",g,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,c,Jk(`${m}.${p}`)))throw new jp("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(r){if(de(r))return this._returnResult({data:null,error:r});throw r}}}Su.nextInstanceID={};const HD=Su,$D="2.89.0";let tu="";typeof Deno<"u"?tu="deno":typeof document<"u"?tu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tu="react-native":tu="node";const FD={"X-Client-Info":`supabase-js-${tu}/${$D}`},GD={headers:FD},KD={schema:"public"},YD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QD={};function Au(i){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(i)}function XD(i,e){if(Au(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function JD(i){var e=XD(i,"string");return Au(e)=="symbol"?e:e+""}function WD(i,e,t){return(e=JD(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function sw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function gt(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sw(Object(t),!0).forEach(function(r){WD(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):sw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}const ZD=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),e4=()=>Headers,t4=(i,e,t)=>{const r=ZD(t),o=e4();return async(l,c)=>{var m;const p=(m=await e())!==null&&m!==void 0?m:i;let g=new o(c==null?void 0:c.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),r(l,gt(gt({},c),{},{headers:g}))}};function n4(i){return i.endsWith("/")?i:i+"/"}function i4(i,e){var t,r;const{db:o,auth:l,realtime:c,global:m}=i,{db:p,auth:g,realtime:b,global:w}=e,T={db:gt(gt({},p),o),auth:gt(gt({},g),l),realtime:gt(gt({},b),c),storage:{},global:gt(gt(gt({},w),m),{},{headers:gt(gt({},(t=w==null?void 0:w.headers)!==null&&t!==void 0?t:{}),(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?T.accessToken=i.accessToken:delete T.accessToken,T}function r4(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var s4=class extends HD{constructor(i){super(i)}},a4=class{constructor(i,e,t){var r,o;this.supabaseUrl=i,this.supabaseKey=e;const l=r4(i);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,m={db:KD,realtime:QD,auth:gt(gt({},YD),{},{storageKey:c}),global:GD},p=i4(t??{},m);if(this.storageKey=(r=p.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(b,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=p.auth)!==null&&g!==void 0?g:{},this.headers,p.global.fetch)}this.fetch=t4(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(gt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new LN(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Uk(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new PN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,e,t)}channel(i,e={config:{}}){return this.realtime.channel(i,e)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,e,t;if(i.accessToken)return await i.accessToken();const{data:r}=await i.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,storageKey:l,flowType:c,lock:m,debug:p,throwOnError:g},b,w){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s4({url:this.authUrl.href,headers:gt(gt({},T),b),storageKey:l,autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,flowType:c,lock:m,debug:p,throwOnError:g,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new nk(this.realtimeUrl.href,gt(gt({},i),{},{params:gt(gt({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,e)=>{this._handleTokenChanged(i,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(i,e,t){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const o4=(i,e,t)=>new a4(i,e,t);function l4(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}l4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const u4={apiKey:"AIzaSyAVv4EhUiVZSf54iZlB-ud05pxIlO8zBWk",authDomain:"kai-g-80f9c.firebaseapp.com",projectId:"kai-g-80f9c",storageBucket:"kai-g-80f9c.appspot.com",messagingSenderId:"125633190886",appId:"1:125633190886:web:65e1a7b4f59048a1768853"},c4="https://skbfmcwrshxnmaxfqyaw.supabase.co",h4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNrYmZtY3dyc2h4bm1heGZxeWF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQxNjYyMzksImV4cCI6MjA0OTc0MjIzOX0.bPoaXy5XxP4vhrE9VK8F8i_5As78GYUdlGAMLqLLjNw";o4(c4,h4);const tS=Hp(u4),d4=iE(tS),Wm=RT(tS),aw=()=>{var W,te;const[i,e]=bt.useState({name:"",nickname:"",email:"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:""}),[t,r]=bt.useState(""),[o,l]=bt.useState(!1),[c,m]=bt.useState(!0),[p,g]=bt.useState(!1),[b,w]=bt.useState(!1),[T,C]=bt.useState(null),P=bt.useRef(null);bt.useEffect(()=>{const F=Gw(d4,async ie=>{var ye;if(ie){C(ie.uid);try{const oe=await xN(Nh(Wm,"users",ie.uid,"data","profile"));if(oe.exists()){const I=oe.data();e(I),r(((ye=I.interests)==null?void 0:ye.join(", "))||""),console.log("[ProfileSection] Profile loaded from Firebase:",I)}else{const I={name:ie.displayName||"",nickname:"",email:ie.email||"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:ie.photoURL||""};e(I),r(""),console.log("[ProfileSection] No profile found, using defaults from auth")}}catch(oe){console.error("[ProfileSection] Failed to load profile from Firebase:",oe);const I={name:ie.displayName||"",nickname:"",email:ie.email||"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:ie.photoURL||""};e(I),r("")}}else C(null),e({name:"",nickname:"",email:"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:""}),r("");m(!1)});return()=>F()},[]);const B=async F=>{var ye;const ie=(ye=F.target.files)==null?void 0:ye[0];if(!(!ie||!T)){if(ie.size>2*1024*1024){alert("Image must be smaller than 2MB");return}w(!0);try{const oe=new FileReader;oe.onloadend=async()=>{const I=oe.result;e(x=>({...x,avatarUrl:I}));const R={...i,avatarUrl:I};await Ub(Nh(Wm,"users",T,"data","profile"),R,{merge:!0}),console.log("[ProfileSection]  Avatar saved as data URL to Firebase"),w(!1)},oe.onerror=()=>{console.error("Failed to read image file"),alert("Failed to upload image. Please try again."),w(!1)},oe.readAsDataURL(ie)}catch(oe){console.error("Failed to upload image:",oe),alert("Failed to upload image. Please try again."),w(!1)}}},H=async()=>{if(!T){alert("Please sign in to save your profile");return}g(!0);try{const F=t.split(",").map(ye=>ye.trim()).filter(ye=>ye.length>0),ie={...i,interests:F};console.log("[ProfileSection]  Saving profile to Firebase:",ie),console.log("[ProfileSection] User ID:",T),console.log("[ProfileSection] Path:",`users/${T}/data/profile`),await Ub(Nh(Wm,"users",T,"data","profile"),ie),console.log("[ProfileSection]  Profile saved successfully!"),e(ie),console.log("[ProfileSection]  Profile saved, main app will sync automatically"),l(!0),setTimeout(()=>l(!1),2e3)}catch(F){console.error("Failed to save profile:",F),alert("Failed to save profile. Please try again.")}finally{g(!1)}};return c?A.jsxs("div",{className:"flex items-center justify-center h-64",children:[A.jsx(Nm,{className:"w-8 h-8 text-indigo-500 animate-spin"}),A.jsx("span",{className:"ml-3 text-zinc-400",children:"Loading profile..."})]}):T?A.jsxs("div",{className:"space-y-5 sm:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-8",children:[A.jsxs("div",{className:"relative group shrink-0",children:[A.jsxs("div",{className:"w-24 h-24 sm:w-32 sm:h-32 cyber-border bg-indigo-950/20 overflow-hidden rounded-lg",children:[i.avatarUrl?A.jsx("img",{src:i.avatarUrl,alt:"Profile",className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-900/30",children:A.jsx("span",{className:"text-3xl sm:text-4xl text-indigo-400",children:((te=(W=i.name)==null?void 0:W[0])==null?void 0:te.toUpperCase())||"?"})}),A.jsx("div",{onClick:()=>{var F;return(F=P.current)==null?void 0:F.click()},className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 sm:flex items-center justify-center transition-opacity cursor-pointer hidden",children:b?A.jsx(Nm,{className:"text-white animate-spin"}):A.jsx(WA,{className:"text-white"})})]}),A.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:B,className:"hidden"}),A.jsx("div",{className:"mt-2 sm:mt-4 text-center",children:A.jsx("span",{onClick:()=>{var F;return(F=P.current)==null?void 0:F.click()},className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest underline decoration-indigo-500/30 underline-offset-4 cursor-pointer hover:text-indigo-400 active:text-indigo-300",children:b?"Uploading...":"Change Avatar"})})]}),A.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-4 w-full",children:[A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Your Name"}),A.jsx("input",{type:"text",value:i.name,onChange:F=>{console.log("[ProfileSection]  Name changed to:",F.target.value),e({...i,name:F.target.value})},placeholder:"Your Name",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm"}),A.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will address you by this name"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Nickname (Optional)"}),A.jsx("input",{type:"text",value:i.nickname,onChange:F=>{console.log("[ProfileSection]  Nickname changed to:",F.target.value),e({...i,nickname:F.target.value})},placeholder:"Preferred Name",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm"}),A.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"Casual name KAI can use"})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Email"}),A.jsx("input",{type:"email",value:i.email,disabled:!0,className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-zinc-500 font-bold opacity-60 cursor-not-allowed rounded-sm"})]})]})]}),A.jsxs("div",{className:"border-t border-indigo-900/20 pt-5 sm:pt-6",children:[A.jsxs("h3",{className:"text-[11px] sm:text-xs font-bold text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[A.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"AI Personalization"]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Preferred Response Style"}),A.jsxs("select",{value:i.responseStyle,onChange:F=>e({...i,responseStyle:F.target.value}),className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm appearance-none cursor-pointer",children:[A.jsx("option",{value:"casual",children:"Casual & Friendly"}),A.jsx("option",{value:"professional",children:"Professional"}),A.jsx("option",{value:"brief",children:"Brief & Concise"}),A.jsx("option",{value:"detailed",children:"Detailed & Thorough"}),A.jsx("option",{value:"technical",children:"Technical & Precise"})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Response Language"}),A.jsxs("select",{value:i.responseLanguage,onChange:F=>e({...i,responseLanguage:F.target.value}),className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm appearance-none cursor-pointer",children:[A.jsx("option",{value:"english",children:"English"}),A.jsx("option",{value:"hindi",children:"Hindi"}),A.jsx("option",{value:"hinglish",children:"Hinglish"})]})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Your Interests (Comma-Separated)"}),A.jsx("input",{type:"text",value:t,onChange:F=>r(F.target.value),placeholder:"coding, gaming, anime, music, AI",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 rounded-sm"}),A.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will tailor responses based on your interests"})]})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" About You (Bio)"}),A.jsx("textarea",{className:"w-full cyber-input p-3 sm:p-4 text-sm text-indigo-100 min-h-[100px] sm:min-h-[120px] rounded-sm resize-none",value:i.bio,onChange:F=>e({...i,bio:F.target.value}),placeholder:"Tell KAI about yourself..."}),A.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will remember this context in conversations"})]}),A.jsx("div",{className:"mt-6 sm:mt-8 pt-6 sm:pt-8 border-t border-white/10",children:A.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[A.jsx("p",{className:"text-[10px] sm:text-xs text-zinc-500 uppercase tracking-wide",children:"Changes sync automatically with KAI"}),A.jsx("button",{onClick:H,disabled:p,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-3.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-indigo-800 disabled:cursor-not-allowed text-white text-xs sm:text-sm font-bold uppercase tracking-widest rounded-sm transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-indigo-500/50 active:scale-95",children:p?A.jsxs(A.Fragment,{children:[A.jsx(Nm,{size:16,className:"animate-spin"}),A.jsx("span",{children:"Syncing..."})]}):o?A.jsxs(A.Fragment,{children:[A.jsx(e1,{size:16}),A.jsx("span",{children:"Saved!"})]}):A.jsxs(A.Fragment,{children:[A.jsx(S1,{size:16}),A.jsx("span",{children:"Save & Sync"})]})})]})})]}):A.jsx("div",{className:"text-center py-12",children:A.jsx("p",{className:"text-zinc-400 text-sm",children:"Please sign in to manage your profile"})})},f4=()=>{const[i,e]=bt.useState(!0);return A.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("div",{className:"bg-indigo-950/10 border border-indigo-500/10 p-6 rounded-sm",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(C1,{className:"text-indigo-500"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",children:"Transport Layer Security (TLS)"}),A.jsx("p",{className:"text-[10px] text-zinc-500 mt-1 uppercase",children:"Encrypt all outgoing data packets across the mesh network."})]})]}),A.jsx("button",{onClick:()=>e(!i),className:`w-12 h-6 rounded-full relative transition-colors ${i?"bg-indigo-600":"bg-zinc-800"}`,children:A.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${i?"left-7":"left-1"}`})})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/40 border border-indigo-900/20",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx(d1,{size:16,className:"text-indigo-400"}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"ACCESS_KEY_01"})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-[10px] text-zinc-600 font-mono",children:""}),A.jsx("button",{className:"text-indigo-500 hover:text-indigo-400",children:A.jsx(E1,{size:14})})]})]}),A.jsx("button",{className:"w-full py-3 border border-dashed border-indigo-900/30 text-[10px] text-zinc-500 hover:text-indigo-400 hover:border-indigo-500/50 transition-all uppercase font-bold tracking-[0.2em]",children:"+ Generate Secondary Access Key"})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx(ow,{icon:A.jsx(u0,{size:18,className:"text-yellow-500"}),title:"Neural MFA",description:"Requires biometric neural signature for uplink establishment.",active:!0}),A.jsx(ow,{icon:A.jsx(u0,{size:18,className:"text-zinc-500"}),title:"Ghost Protocol",description:"Automated signal scrambling for deep-cover operations.",active:!1})]}),A.jsxs("div",{className:"p-4 border-l-2 border-red-500 bg-red-500/5",children:[A.jsx("h4",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest mb-2",children:"Emergency Purge"}),A.jsx("p",{className:"text-[10px] text-zinc-400 uppercase leading-relaxed mb-4",children:"Wipe all local session logs, cache, and decrypted credentials immediately. This action cannot be undone."}),A.jsx("button",{className:"px-4 py-2 bg-red-500/20 border border-red-500/50 text-red-500 hover:bg-red-500 hover:text-white transition-all text-[10px] font-bold uppercase tracking-widest",children:"Execute Purge Sequence"})]})]})},ow=({icon:i,title:e,description:t,active:r})=>A.jsxs("div",{className:`p-4 border transition-all ${r?"bg-indigo-600/5 border-indigo-500/30":"bg-zinc-950 border-zinc-900 opacity-60"}`,children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i,A.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:e}),r&&A.jsx("span",{className:"ml-auto text-[8px] bg-indigo-500/20 text-indigo-400 px-1.5 py-0.5 rounded-sm",children:"ACTIVE"})]}),A.jsx("p",{className:"text-[9px] text-zinc-500 uppercase leading-normal",children:t})]}),m4=()=>A.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[A.jsx(Zm,{icon:A.jsx(cw,{size:16}),label:"Neural Load",value:"24%",subValue:"3.2 GHz",color:"text-indigo-500"}),A.jsx(Zm,{icon:A.jsx(o1,{size:16}),label:"Mem Stack",value:"12.8 GB",subValue:"Used / 32 GB",color:"text-cyan-500"}),A.jsx(Zm,{icon:A.jsx(QA,{size:16}),label:"Uplink Sync",value:"99.9%",subValue:"Latency: 4ms",color:"text-green-500"})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Neural Load Allocation"}),A.jsx("span",{className:"text-[10px] text-indigo-400 font-bold",children:"450 TFLOPs"})]}),A.jsx("input",{type:"range",className:"w-full h-1 bg-zinc-900 appearance-none cursor-pointer accent-indigo-500"}),A.jsx("p",{className:"text-[8px] text-zinc-600 uppercase",children:"Warning: Exceeding 80% may cause operator burnout."})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Log Retention Period"}),A.jsx("span",{className:"text-[10px] text-indigo-400 font-bold",children:"24 HOURS"})]}),A.jsx("div",{className:"grid grid-cols-4 gap-2",children:["1 HR","12 HR","24 HR","7 DAYS"].map(i=>A.jsx("button",{className:`py-2 text-[10px] font-bold border transition-all ${i==="24 HR"?"bg-indigo-600/20 border-indigo-500 text-indigo-400":"border-zinc-800 text-zinc-600 hover:border-zinc-600"}`,children:i},i))})]})]}),A.jsxs("div",{className:"border border-indigo-500/10 bg-indigo-950/5 p-6 space-y-4",children:[A.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-[0.2em] border-b border-indigo-900/30 pb-4",children:"Background Processes"}),[{name:"Core_System_Watcher",status:"Running",pid:"0122"},{name:"Neural_Uplink_Sync",status:"Idle",pid:"4491"},{name:"Tactical_Overlay_Render",status:"Running",pid:"9902"}].map(i=>A.jsxs("div",{className:"flex items-center justify-between py-1",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${i.status==="Running"?"bg-green-500":"bg-zinc-600"}`}),A.jsx("span",{className:"text-[10px] font-mono text-zinc-400 uppercase",children:i.name})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"text-[8px] text-zinc-600 font-mono",children:["PID: ",i.pid]}),A.jsx("button",{className:"text-[8px] font-bold text-red-500 uppercase hover:underline",children:"Terminate"})]})]},i.pid))]})]}),Zm=({icon:i,label:e,value:t,subValue:r,color:o})=>A.jsxs("div",{className:"bg-black border border-indigo-900/20 p-4 rounded-sm hover:border-indigo-500/40 transition-all group",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[A.jsx("span",{className:`${o} opacity-60 group-hover:opacity-100 transition-opacity`,children:i}),A.jsx("span",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:e})]}),A.jsx("div",{className:"text-xl font-bold tracking-tight mb-1",children:t}),A.jsx("div",{className:"text-[9px] text-zinc-600 font-bold uppercase",children:r})]}),p4=()=>A.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Primary Uplink Node"}),A.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[A.jsx(ep,{icon:A.jsx(u1,{size:18}),title:"North_Global_Server (NG-01)",description:"Optimal latency for North American operations. Standard encryption.",ping:"14ms",selected:!0}),A.jsx(ep,{icon:A.jsx(R1,{size:18}),title:"Eurasia_Core_Relay (EC-09)",description:"High-security node with cascading signal redundancy.",ping:"120ms",selected:!1}),A.jsx(ep,{icon:A.jsx(b1,{size:18}),title:"Sat_Deep_Space_Mesh (SM-4)",description:"Extreme coverage for remote field data collection.",ping:"240ms",selected:!1})]})]}),A.jsxs("div",{className:"p-6 bg-indigo-600/5 border border-indigo-500/20 relative overflow-hidden group",children:[A.jsx("div",{className:"absolute -right-8 -bottom-8 opacity-5 group-hover:rotate-12 transition-transform duration-1000",children:A.jsx(hw,{size:160})}),A.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest mb-1",children:"Burst Mode Uplink"}),A.jsx("p",{className:"text-[10px] text-zinc-500 uppercase",children:"Enable short-duration high-bandwidth data transfers."})]}),A.jsx("button",{className:"px-4 py-2 border border-indigo-500 text-indigo-400 text-[10px] font-bold uppercase tracking-widest hover:bg-indigo-600 hover:text-white transition-all",children:"Optimize Link"})]})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsxs("div",{className:"flex-1 p-4 bg-zinc-950 border border-zinc-900",children:[A.jsx("h5",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",children:"Protocol Stack"}),A.jsxs("select",{className:"w-full bg-black border border-zinc-800 p-2 text-[10px] font-mono text-zinc-400 focus:outline-none focus:border-indigo-500 uppercase",children:[A.jsx("option",{children:"IPv6 / Secure_Mesh_v4"}),A.jsx("option",{children:"Legacy_TCP_Over_Neural"}),A.jsx("option",{children:"Encapsulated_Ghost_Frame"})]})]}),A.jsxs("div",{className:"flex-1 p-4 bg-zinc-950 border border-zinc-900",children:[A.jsx("h5",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",children:"Signal Gain"}),A.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[A.jsx("input",{type:"range",className:"flex-1 h-1 bg-zinc-800 appearance-none accent-indigo-500"}),A.jsx("span",{className:"text-[10px] font-mono text-indigo-400",children:"+12dB"})]})]})]})]}),ep=({icon:i,title:e,description:t,ping:r,selected:o})=>A.jsxs("div",{className:`p-4 border flex items-center gap-4 cursor-pointer transition-all ${o?"bg-indigo-600/10 border-indigo-500/50":"bg-black border-zinc-900 hover:border-zinc-700"}`,children:[A.jsx("div",{className:`p-3 ${o?"text-indigo-500 bg-indigo-500/10":"text-zinc-600 bg-zinc-900"}`,children:i}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:e}),o&&A.jsx("span",{className:"text-[8px] text-green-500 font-bold uppercase tracking-tighter",children:"CONNECTED"})]}),A.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tight leading-none",children:t})]}),A.jsxs("div",{className:"text-right",children:[A.jsx("div",{className:"text-[10px] font-mono text-zinc-500 mb-0.5",children:r}),A.jsx("div",{className:"text-[8px] text-zinc-700 uppercase font-bold tracking-widest",children:"Latency"})]})]}),g4=()=>A.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] mb-4",children:"Neural Event Channels"}),A.jsx(wh,{icon:A.jsx(k1,{size:16,className:"text-red-500"}),label:"Critical System Alerts",description:"Visual and haptic feedback for hardware failure or security breaches.",enabled:!0}),A.jsx(wh,{icon:A.jsx(_1,{size:16,className:"text-indigo-500"}),label:"Operator Comms",description:"Voice-to-text notifications for incoming tactical messages.",enabled:!0}),A.jsx(wh,{icon:A.jsx(l0,{size:16,className:"text-cyan-500"}),label:"Status Updates",description:"Routine telemetry reports and background sync status.",enabled:!1}),A.jsx(wh,{icon:A.jsx(np,{size:16,className:"text-yellow-500"}),label:"Scheduled Operations",description:"Reminders for upcoming mission windows and uplink maintenance.",enabled:!0})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-4",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Alert Priority Threshold"}),A.jsxs("select",{className:"w-full bg-black border border-zinc-800 p-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest focus:outline-none focus:border-indigo-500",children:[A.jsx("option",{children:"LEVEL_1 - MINIMAL"}),A.jsx("option",{children:"LEVEL_2 - STANDARD"}),A.jsx("option",{children:"LEVEL_3 - HIGH_ONLY"})]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Notification Sound"}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("select",{className:"flex-1 bg-black border border-zinc-800 p-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest focus:outline-none focus:border-indigo-500",children:[A.jsx("option",{children:"KAI_SYSTEM_CHIME"}),A.jsx("option",{children:"NEURAL_TAP_PULSE"}),A.jsx("option",{children:"TACTICAL_BUZZ_SHORT"})]}),A.jsx("button",{className:"p-3 border border-zinc-800 hover:bg-zinc-900 text-zinc-500",children:A.jsx(np,{size:16})})]})]})]}),A.jsxs("div",{className:"p-4 bg-indigo-600/5 border border-indigo-500/10 flex items-start gap-4",children:[A.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-sm",children:A.jsx(l0,{size:18,className:"text-indigo-400"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-indigo-400 mb-1",children:"Silence Protocol"}),A.jsx("p",{className:"text-[9px] text-zinc-500 uppercase leading-normal",children:"Enabling this will suppress all non-critical visual notifications to maximize focus during high-intensity operations."})]}),A.jsx("button",{className:"px-4 py-2 border border-zinc-800 text-[10px] font-bold uppercase tracking-widest hover:border-indigo-500/50 transition-all",children:"Enable"})]})]}),wh=({icon:i,label:e,description:t,enabled:r})=>A.jsxs("div",{className:"p-4 border border-zinc-900 bg-black flex items-center justify-between hover:border-zinc-800 transition-colors",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"p-2 bg-zinc-900 rounded-sm",children:i}),A.jsxs("div",{children:[A.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest",children:e}),A.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tight",children:t})]})]}),A.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${r?"bg-indigo-600":"bg-zinc-800"}`,children:A.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${r?"left-5.5":"left-0.5"}`})})]}),y4={apiKey:"AIzaSyAVv4EhUiVZSf54iZlB-ud05pxIlO8zBWk",authDomain:"kai-g-80f9c.firebaseapp.com",projectId:"kai-g-80f9c",storageBucket:"kai-g-80f9c.appspot.com",messagingSenderId:"125633190886",appId:"1:125633190886:web:65e1a7b4f59048a1768853"},nS=Hp(y4),_4=iE(nS),v4=RT(nS),b4=()=>{var w,T;const[i,e]=bt.useState(Dt.PROFILE),[t,r]=bt.useState(null),[o,l]=bt.useState(!1),[c,m]=bt.useState(!1);bt.useEffect(()=>{const C=Gw(_4,P=>{if(P){const B=ON(Nh(v4,"users",P.uid,"data","profile"),H=>{if(H.exists()){const W=H.data();r({name:W.name||P.displayName||"KAI_TACTICAL_01",nickname:W.nickname||"",avatarUrl:W.avatarUrl||P.photoURL||""}),console.log("[App]  Profile synced from Firebase:",W)}else r({name:P.displayName||"KAI_TACTICAL_01",nickname:"",avatarUrl:P.photoURL||""})});return()=>B()}else r(null)});return()=>C()},[]);const p=()=>{switch(i){case Dt.PROFILE:return A.jsx(aw,{});case Dt.SECURITY:return A.jsx(f4,{});case Dt.TELEMETRY:return A.jsx(m4,{});case Dt.UPLINK:return A.jsx(p4,{});case Dt.NOTIFICATIONS:return A.jsx(g4,{});default:return A.jsx(aw,{})}},g=C=>{e(C),l(!1),m(!1)},b=C=>({[Dt.PROFILE]:"Operator Profile",[Dt.SECURITY]:"Security Protocols",[Dt.NOTIFICATIONS]:"Neural Alerts",[Dt.TELEMETRY]:"Live Telemetry",[Dt.UPLINK]:"Uplink Config"})[C]||C;return A.jsxs("div",{className:"flex h-screen bg-black text-white overflow-hidden font-mono",children:[o&&A.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 lg:hidden backdrop-blur-sm",onClick:()=>l(!1)}),A.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50
        w-[280px] sm:w-72 border-r border-indigo-900/30 bg-[#050505] 
        flex flex-col shrink-0
        transform transition-transform duration-300 ease-out
        ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[A.jsx("button",{onClick:()=>l(!1),className:"lg:hidden absolute top-4 right-4 p-2 text-zinc-400 hover:text-white z-50",children:A.jsx(c0,{size:20})}),A.jsx("div",{className:"p-4 sm:p-6 border-b border-indigo-900/30",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded flex items-center justify-center border border-indigo-400/50 shadow-[0_0_15px_rgba(99,102,241,0.3)]",children:A.jsx(cw,{className:"text-white w-5 h-5 sm:w-6 sm:h-6"})}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-lg sm:text-xl font-bold tracking-tighter",children:"KAI OS"}),A.jsxs("div",{className:"flex items-center gap-1.5",children:[A.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full status-dot shadow-[0_0_5px_#22c55e]"}),A.jsx("span",{className:"text-[9px] sm:text-[10px] text-green-500 font-bold uppercase tracking-widest",children:"SETTINGS"})]})]})]})}),A.jsxs("nav",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-1 sm:space-y-2 scrollbar-hide",children:[A.jsx("div",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold mb-3 sm:mb-4 ml-2 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:"Management"}),A.jsx(tp,{icon:A.jsx(P1,{size:16}),label:"Operator Profile",active:i===Dt.PROFILE,onClick:()=>g(Dt.PROFILE)}),A.jsx(tp,{icon:A.jsx(np,{size:16}),label:"Neural Alerts",active:i===Dt.NOTIFICATIONS,onClick:()=>g(Dt.NOTIFICATIONS)}),A.jsx("div",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold mt-6 sm:mt-8 mb-3 sm:mb-4 ml-2 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:"Systems"}),A.jsx(tp,{icon:A.jsx(hw,{size:16}),label:"Uplink Config",active:i===Dt.UPLINK,onClick:()=>g(Dt.UPLINK)}),A.jsx("div",{className:"pt-8 sm:pt-12 mt-auto",children:A.jsxs("button",{onClick:()=>window.location.href="/",className:"w-full flex items-center gap-2 sm:gap-3 p-2.5 sm:p-3 text-indigo-500/80 hover:text-indigo-400 hover:bg-indigo-500/10 transition-colors rounded-sm group",children:[A.jsx(c0,{size:16,className:"group-hover:scale-110 transition-transform"}),A.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider sm:tracking-widest",children:"Back to Chat"})]})})]}),A.jsx("div",{className:"p-3 sm:p-4 border-t border-indigo-900/30 bg-[#020202]",children:A.jsxs("div",{className:"text-[9px] sm:text-[10px] text-zinc-600 flex justify-between items-center",children:[A.jsx("span",{children:"SYS_VER_2.5.0_PRO"}),A.jsx(O1,{size:10,className:"sm:w-3 sm:h-3"})]})})]}),A.jsxs("main",{className:"flex-1 flex flex-col bg-[#000000] relative min-w-0",children:[A.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(15,23,42,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(15,23,42,0.1)_1px,transparent_1px)] bg-[size:24px_24px] sm:bg-[size:32px_32px] pointer-events-none opacity-20"}),A.jsxs("header",{className:"h-14 sm:h-16 lg:h-20 border-b border-indigo-900/30 flex items-center justify-between px-3 sm:px-5 lg:px-8 bg-black/80 backdrop-blur-md z-10",children:[A.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[A.jsx("button",{onClick:()=>l(!0),className:"lg:hidden p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:A.jsx(g1,{size:20})}),A.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-indigo-500 rounded-full hidden sm:block"}),A.jsx("h2",{className:"text-xs sm:text-sm font-bold uppercase tracking-[0.15em] sm:tracking-[0.3em] glow-text truncate",children:i.replace("_"," ")}),A.jsx("div",{className:"hidden sm:flex px-2 py-0.5 bg-indigo-500/10 border border-indigo-500/20 text-[9px] sm:text-[10px] text-indigo-400 font-bold rounded-sm",children:"SID-176634"})]}),A.jsxs("div",{className:"lg:hidden relative",children:[A.jsxs("button",{onClick:()=>m(!c),className:"flex items-center gap-1.5 px-2.5 py-1.5 border border-indigo-900/50 bg-indigo-950/30 rounded text-[10px] font-bold uppercase tracking-wide text-zinc-300",children:[A.jsx("span",{className:"max-w-[100px] truncate",children:b(i).split(" ")[0]}),A.jsx(n1,{size:14,className:`transition-transform ${c?"rotate-180":""}`})]}),c&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),A.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#0a0a0f] border border-indigo-900/50 rounded-lg shadow-xl z-50 py-1 overflow-hidden",children:Object.values(Dt).map(C=>A.jsx("button",{onClick:()=>g(C),className:`w-full text-left px-4 py-2.5 text-[11px] font-bold uppercase tracking-wide transition-colors ${i===C?"bg-indigo-600/20 text-indigo-400":"text-zinc-400 hover:bg-indigo-900/10 hover:text-white"}`,children:b(C)},C))})]})]}),A.jsxs("div",{className:"hidden lg:flex items-center gap-4",children:[A.jsx("div",{className:"h-8 w-px bg-indigo-900/30 mx-2"}),A.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",children:[A.jsxs("div",{className:"text-right",children:[A.jsx("p",{className:"text-[10px] font-bold leading-tight",children:(t==null?void 0:t.nickname)||(t==null?void 0:t.name)||"OP_KAI_01"}),A.jsx("p",{className:"text-[8px] text-indigo-400 font-bold leading-none tracking-tighter uppercase",children:"Clearance Level 5"})]}),A.jsx("div",{className:"w-8 h-8 rounded-sm bg-indigo-900/40 border border-indigo-500/30 overflow-hidden",children:t!=null&&t.avatarUrl?A.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover opacity-80"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-900/30",children:A.jsx("span",{className:"text-sm text-indigo-400",children:((T=(w=t==null?void 0:t.name)==null?void 0:w[0])==null?void 0:T.toUpperCase())||"K"})})})]})]})]}),A.jsx("section",{className:"flex-1 overflow-y-auto p-3 sm:p-5 lg:p-8 z-10 scrollbar-hide",children:A.jsx("div",{className:"max-w-4xl mx-auto",children:p()})})]})]})},tp=({icon:i,label:e,active:t,onClick:r})=>A.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-3 transition-all rounded-sm group ${t?"bg-indigo-600/10 border-l-2 border-indigo-600 text-indigo-400":"text-zinc-500 hover:text-indigo-400 hover:bg-indigo-900/5 border-l-2 border-transparent"}`,children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:`${t?"text-indigo-500":"text-zinc-600 group-hover:text-indigo-500"} transition-colors`,children:i}),A.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:e})]}),t&&A.jsx(r1,{size:14,className:"opacity-50"})]}),iS=document.getElementById("root");if(!iS)throw new Error("Could not find root element to mount to");const w4=qA.createRoot(iS);w4.render(A.jsx(PA.StrictMode,{children:A.jsx(b4,{})}));
