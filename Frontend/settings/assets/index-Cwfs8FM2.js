(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function gw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ip={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function L1(){if(i0)return Ql;i0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var p in o)p!=="key"&&(l[p]=o[p])}else l=o;return o=l.ref,{$$typeof:i,type:r,key:c,ref:o!==void 0?o:null,props:l}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var r0;function z1(){return r0||(r0=1,Ip.exports=L1()),Ip.exports}var w=z1(),Op={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function B1(){if(s0)return Re;s0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=S&&k[S]||k["@@iterator"],typeof k=="function"?k:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function J(k,K,ne){this.props=k,this.context=K,this.refs=q,this.updater=ne||j}J.prototype.isReactComponent={},J.prototype.setState=function(k,K){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,K,"setState")},J.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function te(){}te.prototype=J.prototype;function H(k,K,ne){this.props=k,this.context=K,this.refs=q,this.updater=ne||j}var re=H.prototype=new te;re.constructor=H,z(re,J.prototype),re.isPureReactComponent=!0;var ge=Array.isArray;function ce(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(k,K,ne){var le=ne.ref;return{$$typeof:i,type:k,key:K,ref:le!==void 0?le:null,props:ne}}function P(k,K){return C(k.type,K,k.props)}function M(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function U(k){var K={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ne){return K[ne]})}var N=/\/+/g;function vt(k,K){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):K.toString(36)}function kt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(ce,ce):(k.status="pending",k.then(function(K){k.status==="pending"&&(k.status="fulfilled",k.value=K)},function(K){k.status==="pending"&&(k.status="rejected",k.reason=K)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Q(k,K,ne,le,be){var Ie=typeof k;(Ie==="undefined"||Ie==="boolean")&&(k=null);var Be=!1;if(k===null)Be=!0;else switch(Ie){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(k.$$typeof){case i:case e:Be=!0;break;case b:return Be=k._init,Q(Be(k._payload),K,ne,le,be)}}if(Be)return be=be(k),Be=le===""?"."+vt(k,0):le,ge(be)?(ne="",Be!=null&&(ne=Be.replace(N,"$&/")+"/"),Q(be,K,ne,"",function(hi){return hi})):be!=null&&(M(be)&&(be=P(be,ne+(be.key==null||k&&k.key===be.key?"":(""+be.key).replace(N,"$&/")+"/")+Be)),K.push(be)),1;Be=0;var Ft=le===""?".":le+":";if(ge(k))for(var ut=0;ut<k.length;ut++)le=k[ut],Ie=Ft+vt(le,ut),Be+=Q(le,K,ne,Ie,be);else if(ut=x(k),typeof ut=="function")for(k=ut.call(k),ut=0;!(le=k.next()).done;)le=le.value,Ie=Ft+vt(le,ut++),Be+=Q(le,K,ne,Ie,be);else if(Ie==="object"){if(typeof k.then=="function")return Q(kt(k),K,ne,le,be);throw K=String(k),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ae(k,K,ne){if(k==null)return k;var le=[],be=0;return Q(k,le,"","",function(Ie){return K.call(ne,Ie,be++)}),le}function me(k){if(k._status===-1){var K=k._result;K=K(),K.then(function(ne){(k._status===0||k._status===-1)&&(k._status=1,k._result=ne)},function(ne){(k._status===0||k._status===-1)&&(k._status=2,k._result=ne)}),k._status===-1&&(k._status=0,k._result=K)}if(k._status===1)return k._result.default;throw k._result}var ze=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},oe={map:ae,forEach:function(k,K,ne){ae(k,function(){K.apply(this,arguments)},ne)},count:function(k){var K=0;return ae(k,function(){K++}),K},toArray:function(k){return ae(k,function(K){return K})||[]},only:function(k){if(!M(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Re.Activity=E,Re.Children=oe,Re.Component=J,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=H,Re.StrictMode=r,Re.Suspense=m,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Re.__COMPILER_RUNTIME={__proto__:null,c:function(k){return I.H.useMemoCache(k)}},Re.cache=function(k){return function(){return k.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(k,K,ne){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=z({},k.props),be=k.key;if(K!=null)for(Ie in K.key!==void 0&&(be=""+K.key),K)!R.call(K,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&K.ref===void 0||(le[Ie]=K[Ie]);var Ie=arguments.length-2;if(Ie===1)le.children=ne;else if(1<Ie){for(var Be=Array(Ie),Ft=0;Ft<Ie;Ft++)Be[Ft]=arguments[Ft+2];le.children=Be}return C(k.type,be,le)},Re.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Re.createElement=function(k,K,ne){var le,be={},Ie=null;if(K!=null)for(le in K.key!==void 0&&(Ie=""+K.key),K)R.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(be[le]=K[le]);var Be=arguments.length-2;if(Be===1)be.children=ne;else if(1<Be){for(var Ft=Array(Be),ut=0;ut<Be;ut++)Ft[ut]=arguments[ut+2];be.children=Ft}if(k&&k.defaultProps)for(le in Be=k.defaultProps,Be)be[le]===void 0&&(be[le]=Be[le]);return C(k,Ie,be)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(k){return{$$typeof:p,render:k}},Re.isValidElement=M,Re.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:me}},Re.memo=function(k,K){return{$$typeof:g,type:k,compare:K===void 0?null:K}},Re.startTransition=function(k){var K=I.T,ne={};I.T=ne;try{var le=k(),be=I.S;be!==null&&be(ne,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ce,ze)}catch(Ie){ze(Ie)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),I.T=K}},Re.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Re.use=function(k){return I.H.use(k)},Re.useActionState=function(k,K,ne){return I.H.useActionState(k,K,ne)},Re.useCallback=function(k,K){return I.H.useCallback(k,K)},Re.useContext=function(k){return I.H.useContext(k)},Re.useDebugValue=function(){},Re.useDeferredValue=function(k,K){return I.H.useDeferredValue(k,K)},Re.useEffect=function(k,K){return I.H.useEffect(k,K)},Re.useEffectEvent=function(k){return I.H.useEffectEvent(k)},Re.useId=function(){return I.H.useId()},Re.useImperativeHandle=function(k,K,ne){return I.H.useImperativeHandle(k,K,ne)},Re.useInsertionEffect=function(k,K){return I.H.useInsertionEffect(k,K)},Re.useLayoutEffect=function(k,K){return I.H.useLayoutEffect(k,K)},Re.useMemo=function(k,K){return I.H.useMemo(k,K)},Re.useOptimistic=function(k,K){return I.H.useOptimistic(k,K)},Re.useReducer=function(k,K,ne){return I.H.useReducer(k,K,ne)},Re.useRef=function(k){return I.H.useRef(k)},Re.useState=function(k){return I.H.useState(k)},Re.useSyncExternalStore=function(k,K,ne){return I.H.useSyncExternalStore(k,K,ne)},Re.useTransition=function(){return I.H.useTransition()},Re.version="19.2.3",Re}var a0;function Hm(){return a0||(a0=1,Op.exports=B1()),Op.exports}var ke=Hm();const q1=gw(ke);var Np={exports:{}},Xl={},kp={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function $1(){return o0||(o0=1,(function(i){function e(Q,ae){var me=Q.length;Q.push(ae);e:for(;0<me;){var ze=me-1>>>1,oe=Q[ze];if(0<o(oe,ae))Q[ze]=ae,Q[me]=oe,me=ze;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ae=Q[0],me=Q.pop();if(me!==ae){Q[0]=me;e:for(var ze=0,oe=Q.length,k=oe>>>1;ze<k;){var K=2*(ze+1)-1,ne=Q[K],le=K+1,be=Q[le];if(0>o(ne,me))le<oe&&0>o(be,ne)?(Q[ze]=be,Q[le]=me,ze=le):(Q[ze]=ne,Q[K]=me,ze=K);else if(le<oe&&0>o(be,me))Q[ze]=be,Q[le]=me,ze=le;else break e}}return ae}function o(Q,ae){var me=Q.sortIndex-ae.sortIndex;return me!==0?me:Q.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,p=c.now();i.unstable_now=function(){return c.now()-p}}var m=[],g=[],b=1,E=null,S=3,x=!1,j=!1,z=!1,q=!1,J=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function re(Q){for(var ae=t(g);ae!==null;){if(ae.callback===null)r(g);else if(ae.startTime<=Q)r(g),ae.sortIndex=ae.expirationTime,e(m,ae);else break;ae=t(g)}}function ge(Q){if(z=!1,re(Q),!j)if(t(m)!==null)j=!0,ce||(ce=!0,U());else{var ae=t(g);ae!==null&&kt(ge,ae.startTime-Q)}}var ce=!1,I=-1,R=5,C=-1;function P(){return q?!0:!(i.unstable_now()-C<R)}function M(){if(q=!1,ce){var Q=i.unstable_now();C=Q;var ae=!0;try{e:{j=!1,z&&(z=!1,te(I),I=-1),x=!0;var me=S;try{t:{for(re(Q),E=t(m);E!==null&&!(E.expirationTime>Q&&P());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,S=E.priorityLevel;var oe=ze(E.expirationTime<=Q);if(Q=i.unstable_now(),typeof oe=="function"){E.callback=oe,re(Q),ae=!0;break t}E===t(m)&&r(m),re(Q)}else r(m);E=t(m)}if(E!==null)ae=!0;else{var k=t(g);k!==null&&kt(ge,k.startTime-Q),ae=!1}}break e}finally{E=null,S=me,x=!1}ae=void 0}}finally{ae?U():ce=!1}}}var U;if(typeof H=="function")U=function(){H(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,vt=N.port2;N.port1.onmessage=M,U=function(){vt.postMessage(null)}}else U=function(){J(M,0)};function kt(Q,ae){I=J(function(){Q(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var me=S;S=ae;try{return Q()}finally{S=me}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=S;S=Q;try{return ae()}finally{S=me}},i.unstable_scheduleCallback=function(Q,ae,me){var ze=i.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ze+me:ze):me=ze,Q){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=me+oe,Q={id:b++,callback:ae,priorityLevel:Q,startTime:me,expirationTime:oe,sortIndex:-1},me>ze?(Q.sortIndex=me,e(g,Q),t(m)===null&&Q===t(g)&&(z?(te(I),I=-1):z=!0,kt(ge,me-ze))):(Q.sortIndex=oe,e(m,Q),j||x||(j=!0,ce||(ce=!0,U()))),Q},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(Q){var ae=S;return function(){var me=S;S=ae;try{return Q.apply(this,arguments)}finally{S=me}}}})(Dp)),Dp}var l0;function H1(){return l0||(l0=1,kp.exports=$1()),kp.exports}var jp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function F1(){if(u0)return on;u0=1;var i=Hm();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(m,g,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:g,implementation:b}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,b)},on.flushSync=function(m){var g=c.T,b=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=b,r.d.f()}},on.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},on.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},on.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,E=p(b,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:x}):b==="script"&&r.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},on.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,E=p(b,g.crossOrigin);r.d.L(m,b,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=p(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},on.requestFormReset=function(m){r.d.r(m)},on.unstable_batchedUpdates=function(m,g){return m(g)},on.useFormState=function(m,g,b){return c.H.useFormState(m,g,b)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.3",on}var c0;function G1(){if(c0)return jp.exports;c0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jp.exports=F1(),jp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function K1(){if(h0)return Xl;h0=1;var i=H1(),e=Hm(),t=G1();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,u=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){a=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),n;if(f===u)return m(d),s;f=f.sibling}throw Error(r(188))}if(a.return!==u.return)a=d,u=f;else{for(var _=!1,T=d.child;T;){if(T===a){_=!0,a=d,u=f;break}if(T===u){_=!0,u=d,a=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===a){_=!0,a=f,u=d;break}if(T===u){_=!0,u=f,a=d;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==u)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function b(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=b(n),s!==null)return s;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),H=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function vt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case J:return"Profiler";case q:return"StrictMode";case ge:return"Suspense";case ce:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case H:return n.displayName||"Context";case te:return(n._context.displayName||"Context")+".Consumer";case re:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return s=n.displayName||null,s!==null?s:vt(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return vt(n(s))}catch{}}return null}var kt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ze=[],oe=-1;function k(n){return{current:n}}function K(n){0>oe||(n.current=ze[oe],ze[oe]=null,oe--)}function ne(n,s){oe++,ze[oe]=n.current,n.current=s}var le=k(null),be=k(null),Ie=k(null),Be=k(null);function Ft(n,s){switch(ne(Ie,s),ne(be,n),ne(le,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Rv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Rv(s),n=xv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(le),ne(le,n)}function ut(){K(le),K(be),K(Ie)}function hi(n){n.memoizedState!==null&&ne(Be,n);var s=le.current,a=xv(s,n.type);s!==a&&(ne(be,n),ne(le,a))}function ji(n){be.current===n&&(K(le),K(be)),Be.current===n&&(K(Be),Fl._currentValue=me)}var xs,Ta;function Zn(n){if(xs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);xs=s&&s[1]||"",Ta=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+n+Ta}var Cs=!1;function Sa(n,s){if(!n||Cs)return"";Cs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(G){var F=G}Reflect.construct(n,[],Z)}else{try{Z.call()}catch(G){F=G}n.call(Z.prototype)}}else{try{throw Error()}catch(G){F=G}(Z=n())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=u.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var O=_.split(`
`),$=T.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===$.length)for(u=O.length-1,d=$.length-1;1<=u&&0<=d&&O[u]!==$[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==$[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==$[d]){var X=`
`+O[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=d);break}}}finally{Cs=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Zn(a):""}function Ad(n,s){switch(n.tag){case 26:case 27:case 5:return Zn(n.type);case 16:return Zn("Lazy");case 13:return n.child!==s&&s!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Sa(n.type,!1);case 11:return Sa(n.type.render,!1);case 1:return Sa(n.type,!0);case 31:return Zn("Activity");default:return""}}function Vu(n){try{var s="",a=null;do s+=Ad(n,a),a=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Aa=Object.prototype.hasOwnProperty,Is=i.unstable_scheduleCallback,Ra=i.unstable_cancelCallback,Rd=i.unstable_shouldYield,Yo=i.unstable_requestPaint,Gt=i.unstable_now,Uu=i.unstable_getCurrentPriorityLevel,Dt=i.unstable_ImmediatePriority,Lt=i.unstable_UserBlockingPriority,Pi=i.unstable_NormalPriority,Lu=i.unstable_LowPriority,Qo=i.unstable_IdlePriority,xd=i.log,Os=i.unstable_setDisableYieldValue,_r=null,sn=null;function Un(n){if(typeof xd=="function"&&Os(n),sn&&typeof sn.setStrictMode=="function")try{sn.setStrictMode(_r,n)}catch{}}var dn=Math.clz32?Math.clz32:zu,Cd=Math.log,Xo=Math.LN2;function zu(n){return n>>>=0,n===0?32:31-(Cd(n)/Xo|0)|0}var Ns=256,di=262144,vr=4194304;function ei(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ln(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var d=0,f=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~f,u!==0?d=ei(u):(_&=T,_!==0?d=ei(_):a||(a=T&~n,a!==0&&(d=ei(a))))):(T=u&~f,T!==0?d=ei(T):_!==0?d=ei(_):a||(a=u&~n,a!==0&&(d=ei(a)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:d}function br(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function xa(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jo(){var n=vr;return vr<<=1,(vr&62914560)===0&&(vr=4194304),n}function Mi(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function wr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Kt(n,s,a,u,d,f){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,$=n.hiddenUpdates;for(a=_&~a;0<a;){var X=31-dn(a),Z=1<<X;T[X]=0,O[X]=-1;var F=$[X];if(F!==null)for($[X]=null,X=0;X<F.length;X++){var G=F[X];G!==null&&(G.lane&=-536870913)}a&=~Z}u!==0&&Wo(n,u,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(_&~s))}function Wo(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-dn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function Er(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-dn(a),d=1<<u;d&s|n[u]&s&&(n[u]|=s),a&=~d}}function Tr(n,s){var a=s&-s;return a=(a&42)!==0?1:Zo(a),(a&(n.suspendedLanes|s))!==0?0:a}function Zo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function el(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Vi(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:Xv(n.type))}function Bu(n,s){var a=ae.p;try{return ae.p=n,s()}finally{ae.p=a}}var fi=Math.random().toString(36).slice(2),pt="__reactFiber$"+fi,Yt="__reactProps$"+fi,pi="__reactContainer$"+fi,Sr="__reactEvents$"+fi,mi="__reactListeners$"+fi,qu="__reactHandles$"+fi,tl="__reactResources$"+fi,Ui="__reactMarker$"+fi;function ks(n){delete n[pt],delete n[Yt],delete n[Sr],delete n[mi],delete n[qu]}function Li(n){var s=n[pt];if(s)return s;for(var a=n.parentNode;a;){if(s=a[pi]||a[pt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=jv(n);n!==null;){if(a=n[pt])return a;n=jv(n)}return s}n=a,a=n.parentNode}return null}function zi(n){if(n=n[pt]||n[pi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ds(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function ti(n){var s=n[tl];return s||(s=n[tl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bt(n){n[Ui]=!0}var Ca=new Set,Ar={};function fn(n,s){gi(n,s),gi(n+"Capture",s)}function gi(n,s){for(Ar[n]=s,n=0;n<s.length;n++)Ca.add(s[n])}var Id=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nl={},il={};function $u(n){return Aa.call(il,n)?!0:Aa.call(nl,n)?!1:Id.test(n)?il[n]=!0:(nl[n]=!0,!1)}function Rr(n,s,a){if($u(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function xr(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function zn(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}function pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Hu(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Od(n,s,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,f=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ia(n){if(!n._valueTracker){var s=Hu(n)?"checked":"value";n._valueTracker=Od(n,s,""+n[s])}}function rl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=Hu(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function Oa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bi=/[\n"\\]/g;function mt(n){return n.replace(Bi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cr(n,s,a,u,d,f,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),s!=null?_==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+pn(s)):n.value!==""+pn(s)&&(n.value=""+pn(s)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),s!=null?Na(n,_,pn(s)):a!=null?Na(n,_,pn(a)):u!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+pn(T):n.removeAttribute("name")}function js(n,s,a,u,d,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null)){Ia(n);return}a=a!=null?""+pn(a):"",s=s!=null?""+pn(s):a,T||s===n.value||(n.value=s),n.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ia(n)}function Na(n,s,a){s==="number"&&Oa(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Fe(n,s,a,u){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&u&&(n[a].defaultSelected=!0)}else{for(a=""+pn(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Ps(n,s,a){if(s!=null&&(s=""+pn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+pn(a):""}function Ir(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(r(92));if(kt(u)){if(1<u.length)throw Error(r(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=pn(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),Ia(n)}function Bn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||Nd.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Fu(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&a[d]!==u&&sl(n,d,u)}else for(var f in s)s.hasOwnProperty(f)&&sl(n,f,s[f])}function al(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yi(n){return Dd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function zt(){}var ka=null;function Da(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qi=null,Rn=null;function Gu(n){var s=zi(n);if(s&&(n=s.stateNode)){var a=n[Yt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Cr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+mt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var d=u[Yt]||null;if(!d)throw Error(r(90));Cr(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&rl(u)}break e;case"textarea":Ps(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Fe(n,!!a.multiple,s,!1)}}}var ol=!1;function Ku(n,s,a){if(ol)return n(s,a);ol=!0;try{var u=n(s);return u}finally{if(ol=!1,(qi!==null||Rn!==null)&&($c(),qi&&(s=qi,n=Rn,Rn=qi=null,Gu(s),n)))for(s=0;s<n.length;s++)Gu(n[s])}}function _n(n,s){var a=n.stateNode;if(a===null)return null;var u=a[Yt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ll=!1;if(ni)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){ll=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{ll=!1}var xn=null,ja=null,vi=null;function Or(){if(vi)return vi;var n,s=ja,a=s.length,u,d="value"in xn?xn.value:xn.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var _=a-n;for(u=1;u<=_&&s[a-u]===d[f-u];u++);return vi=d.slice(n,1<u?1-u:void 0)}function Ms(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function rt(){return!1}function an(n){function s(a,u,d,f,_){this._reactName=a,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Nr:rt,this.isPropagationStopped=rt,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vs=an($i),kr=E({},$i,{view:0,detail:0}),Yu=an(kr),Dr,Pa,mn,Us=E({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mn&&(mn&&n.type==="mousemove"?(Dr=n.screenX-mn.screenX,Pa=n.screenY-mn.screenY):Pa=Dr=0,mn=n),Dr)},movementY:function(n){return"movementY"in n?n.movementY:Pa}}),Qu=an(Us),Ls=E({},Us,{dataTransfer:0}),Xu=an(Ls),ul=E({},kr,{relatedTarget:0}),jr=an(ul),Ju=E({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=an(Ju),jd=E({},$i,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wu=an(jd),zs=E({},$i,{data:0}),cl=an(zs),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=dl[n])?!!s[n]:!1}function Pr(){return ec}var tc=E({},kr,{key:function(n){if(n.key){var s=Zu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ms(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hl[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(n){return n.type==="keypress"?Ms(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ms(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),nc=an(tc),Hi=E({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fl=an(Hi),ic=E({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),rc=an(ic),sc=E({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=an(sc),gn=E({},Us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ac=an(gn),oc=E({},$i,{newState:0,oldState:0}),Mr=an(oc),h=[9,13,27,32],y=ni&&"CompositionEvent"in window,v=null;ni&&"documentMode"in document&&(v=document.documentMode);var A=ni&&"TextEvent"in window&&!v,L=ni&&(!y||v&&8<v&&11>=v),Y=" ",se=!1;function Qe(n,s){switch(n){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function St(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ne=!1;function Bt(n,s){switch(n){case"compositionend":return St(s);case"keypress":return s.which!==32?null:(se=!0,Y);case"textInput":return n=s.data,n===Y&&se?null:n;default:return null}}function qt(n,s){if(Ne)return n==="compositionend"||!y&&Qe(n,s)?(n=Or(),vi=ja=xn=null,Ne=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return L&&s.locale!=="ko"?null:s.data;default:return null}}var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Vr[n.type]:s==="textarea"}function Bs(n,s,a,u){qi?Rn?Rn.push(u):Rn=[u]:qi=u,s=Xc(s,"onChange"),0<s.length&&(a=new Vs("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Fi=null,pl=null;function dS(n){bv(n,0)}function lc(n){var s=Ds(n);if(rl(s))return n}function Lg(n,s){if(n==="change")return s}var zg=!1;if(ni){var Pd;if(ni){var Md="oninput"in document;if(!Md){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),Md=typeof Bg.oninput=="function"}Pd=Md}else Pd=!1;zg=Pd&&(!document.documentMode||9<document.documentMode)}function qg(){Fi&&(Fi.detachEvent("onpropertychange",$g),pl=Fi=null)}function $g(n){if(n.propertyName==="value"&&lc(pl)){var s=[];Bs(s,pl,n,Da(n)),Ku(dS,s)}}function fS(n,s,a){n==="focusin"?(qg(),Fi=s,pl=a,Fi.attachEvent("onpropertychange",$g)):n==="focusout"&&qg()}function pS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lc(pl)}function mS(n,s){if(n==="click")return lc(s)}function gS(n,s){if(n==="input"||n==="change")return lc(s)}function yS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Cn=typeof Object.is=="function"?Object.is:yS;function ml(n,s){if(Cn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var d=a[u];if(!Aa.call(s,d)||!Cn(n[d],s[d]))return!1}return!0}function Hg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fg(n,s){var a=Hg(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Hg(a)}}function Gg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Gg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Kg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Oa(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Oa(n.document)}return s}function Vd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var _S=ni&&"documentMode"in document&&11>=document.documentMode,Ua=null,Ud=null,gl=null,Ld=!1;function Yg(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ld||Ua==null||Ua!==Oa(u)||(u=Ua,"selectionStart"in u&&Vd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),gl&&ml(gl,u)||(gl=u,u=Xc(Ud,"onSelect"),0<u.length&&(s=new Vs("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=Ua)))}function qs(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var La={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},zd={},Qg={};ni&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function $s(n){if(zd[n])return zd[n];if(!La[n])return n;var s=La[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Qg)return zd[n]=s[a];return n}var Xg=$s("animationend"),Jg=$s("animationiteration"),Wg=$s("animationstart"),vS=$s("transitionrun"),bS=$s("transitionstart"),wS=$s("transitioncancel"),Zg=$s("transitionend"),ey=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function ii(n,s){ey.set(n,s),fn(s,[n])}var uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qn=[],za=0,qd=0;function cc(){for(var n=za,s=qd=za=0;s<n;){var a=qn[s];qn[s++]=null;var u=qn[s];qn[s++]=null;var d=qn[s];qn[s++]=null;var f=qn[s];if(qn[s++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}f!==0&&ty(a,d,f)}}function hc(n,s,a,u){qn[za++]=n,qn[za++]=s,qn[za++]=a,qn[za++]=u,qd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function $d(n,s,a,u){return hc(n,s,a,u),dc(n)}function Hs(n,s){return hc(n,null,null,s),dc(n)}function ty(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var d=!1,f=n.return;f!==null;)f.childLanes|=a,u=f.alternate,u!==null&&(u.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&s!==null&&(d=31-dn(a),n=f.hiddenUpdates,u=n[d],u===null?n[d]=[s]:u.push(s),s.lane=a|536870912),f):null}function dc(n){if(50<Ul)throw Ul=0,Zf=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ba={};function ES(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,s,a,u){return new ES(n,s,a,u)}function Hd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gi(n,s){var a=n.alternate;return a===null?(a=In(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function ny(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function fc(n,s,a,u,d,f){var _=0;if(u=n,typeof n=="function")Hd(n)&&(_=1);else if(typeof n=="string")_=x1(n,a,le.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=In(31,a,s,d),n.elementType=C,n.lanes=f,n;case z:return Fs(a.children,d,f,s);case q:_=8,d|=24;break;case J:return n=In(12,a,s,d|2),n.elementType=J,n.lanes=f,n;case ge:return n=In(13,a,s,d),n.elementType=ge,n.lanes=f,n;case ce:return n=In(19,a,s,d),n.elementType=ce,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:_=10;break e;case te:_=9;break e;case re:_=11;break e;case I:_=14;break e;case R:_=16,u=null;break e}_=29,a=Error(r(130,n===null?"null":typeof n,"")),u=null}return s=In(_,a,s,d),s.elementType=n,s.type=u,s.lanes=f,s}function Fs(n,s,a,u){return n=In(7,n,u,s),n.lanes=a,n}function Fd(n,s,a){return n=In(6,n,null,s),n.lanes=a,n}function iy(n){var s=In(18,null,null,0);return s.stateNode=n,s}function Gd(n,s,a){return s=In(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ry=new WeakMap;function $n(n,s){if(typeof n=="object"&&n!==null){var a=ry.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Vu(s)},ry.set(n,s),s)}return{value:n,source:s,stack:Vu(s)}}var qa=[],$a=0,pc=null,yl=0,Hn=[],Fn=0,Ur=null,bi=1,wi="";function Ki(n,s){qa[$a++]=yl,qa[$a++]=pc,pc=n,yl=s}function sy(n,s,a){Hn[Fn++]=bi,Hn[Fn++]=wi,Hn[Fn++]=Ur,Ur=n;var u=bi;n=wi;var d=32-dn(u)-1;u&=~(1<<d),a+=1;var f=32-dn(s)+d;if(30<f){var _=d-d%5;f=(u&(1<<_)-1).toString(32),u>>=_,d-=_,bi=1<<32-dn(s)+d|a<<d|u,wi=f+n}else bi=1<<f|a<<d|u,wi=n}function Kd(n){n.return!==null&&(Ki(n,1),sy(n,1,0))}function Yd(n){for(;n===pc;)pc=qa[--$a],qa[$a]=null,yl=qa[--$a],qa[$a]=null;for(;n===Ur;)Ur=Hn[--Fn],Hn[Fn]=null,wi=Hn[--Fn],Hn[Fn]=null,bi=Hn[--Fn],Hn[Fn]=null}function ay(n,s){Hn[Fn++]=bi,Hn[Fn++]=wi,Hn[Fn++]=Ur,bi=s.id,wi=s.overflow,Ur=n}var Qt=null,st=null,qe=!1,Lr=null,Gn=!1,Qd=Error(r(519));function zr(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l($n(s,n)),Qd}function oy(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[pt]=n,s[Yt]=u,a){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<zl.length;a++)Pe(zl[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),js(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Ir(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||Sv(s.textContent,a)?(u.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),u.onScroll!=null&&Pe("scroll",s),u.onScrollEnd!=null&&Pe("scrollend",s),u.onClick!=null&&(s.onclick=zt),s=!0):s=!1,s||zr(n,!0)}function ly(n){for(Qt=n.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Qt=Qt.return}}function Ha(n){if(n!==Qt)return!1;if(!qe)return ly(n),qe=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||pp(n.type,n.memoizedProps)),a=!a),a&&st&&zr(n),ly(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));st=Dv(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));st=Dv(n)}else s===27?(s=st,es(n.type)?(n=vp,vp=null,st=n):st=s):st=Qt?Yn(n.stateNode.nextSibling):null;return!0}function Gs(){st=Qt=null,qe=!1}function Xd(){var n=Lr;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),Lr=null),n}function _l(n){Lr===null?Lr=[n]:Lr.push(n)}var Jd=k(null),Ks=null,Yi=null;function Br(n,s,a){ne(Jd,s._currentValue),s._currentValue=a}function Qi(n){n._currentValue=Jd.current,K(Jd)}function Wd(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Zd(n,s,a,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var O=0;O<s.length;O++)if(T.context===s[O]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Wd(f.return,a,n),u||(_=null);break e}f=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Wd(_,a,n),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===n){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Fa(n,s,a,u){n=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=d.type;Cn(d.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(d===Be.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Fl):n=[Fl])}d=d.return}n!==null&&Zd(s,n,a,u),s.flags|=262144}function mc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ys(n){Ks=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return uy(Ks,n)}function gc(n,s){return Ks===null&&Ys(n),uy(n,s)}function uy(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yi===null){if(n===null)throw Error(r(308));Yi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Yi=Yi.next=s;return a}var TS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},SS=i.unstable_scheduleCallback,AS=i.unstable_NormalPriority,At={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ef(){return{controller:new TS,data:new Map,refCount:0}}function vl(n){n.refCount--,n.refCount===0&&SS(AS,function(){n.controller.abort()})}var bl=null,tf=0,Ga=0,Ka=null;function RS(n,s){if(bl===null){var a=bl=[];tf=0,Ga=sp(),Ka={status:"pending",value:void 0,then:function(u){a.push(u)}}}return tf++,s.then(cy,cy),s}function cy(){if(--tf===0&&bl!==null){Ka!==null&&(Ka.status="fulfilled");var n=bl;bl=null,Ga=0,Ka=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function xS(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),u}var hy=Q.S;Q.S=function(n,s){Y_=Gt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&RS(n,s),hy!==null&&hy(n,s)};var Qs=k(null);function nf(){var n=Qs.current;return n!==null?n:nt.pooledCache}function yc(n,s){s===null?ne(Qs,Qs.current):ne(Qs,s.pool)}function dy(){var n=nf();return n===null?null:{parent:At._currentValue,pool:n}}var Ya=Error(r(460)),rf=Error(r(474)),_c=Error(r(542)),vc={then:function(){}};function fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function py(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(zt,zt),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gy(n),n;default:if(typeof s.status=="string")s.then(zt,zt);else{if(n=nt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gy(n),n}throw Js=s,Ya}}function Xs(n){try{var s=n._init;return s(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Js=a,Ya):a}}var Js=null;function my(){if(Js===null)throw Error(r(459));var n=Js;return Js=null,n}function gy(n){if(n===Ya||n===_c)throw Error(r(483))}var Qa=null,wl=0;function bc(n){var s=wl;return wl+=1,Qa===null&&(Qa=[]),py(Qa,n,s)}function El(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function wc(n,s){throw s.$$typeof===S?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function yy(n){function s(V,D){if(n){var B=V.deletions;B===null?(V.deletions=[D],V.flags|=16):B.push(D)}}function a(V,D){if(!n)return null;for(;D!==null;)s(V,D),D=D.sibling;return null}function u(V){for(var D=new Map;V!==null;)V.key!==null?D.set(V.key,V):D.set(V.index,V),V=V.sibling;return D}function d(V,D){return V=Gi(V,D),V.index=0,V.sibling=null,V}function f(V,D,B){return V.index=B,n?(B=V.alternate,B!==null?(B=B.index,B<D?(V.flags|=67108866,D):B):(V.flags|=67108866,D)):(V.flags|=1048576,D)}function _(V){return n&&V.alternate===null&&(V.flags|=67108866),V}function T(V,D,B,W){return D===null||D.tag!==6?(D=Fd(B,V.mode,W),D.return=V,D):(D=d(D,B),D.return=V,D)}function O(V,D,B,W){var ye=B.type;return ye===z?X(V,D,B.props.children,W,B.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&Xs(ye)===D.type)?(D=d(D,B.props),El(D,B),D.return=V,D):(D=fc(B.type,B.key,B.props,null,V.mode,W),El(D,B),D.return=V,D)}function $(V,D,B,W){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=Gd(B,V.mode,W),D.return=V,D):(D=d(D,B.children||[]),D.return=V,D)}function X(V,D,B,W,ye){return D===null||D.tag!==7?(D=Fs(B,V.mode,W,ye),D.return=V,D):(D=d(D,B),D.return=V,D)}function Z(V,D,B){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Fd(""+D,V.mode,B),D.return=V,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return B=fc(D.type,D.key,D.props,null,V.mode,B),El(B,D),B.return=V,B;case j:return D=Gd(D,V.mode,B),D.return=V,D;case R:return D=Xs(D),Z(V,D,B)}if(kt(D)||U(D))return D=Fs(D,V.mode,B,null),D.return=V,D;if(typeof D.then=="function")return Z(V,bc(D),B);if(D.$$typeof===H)return Z(V,gc(V,D),B);wc(V,D)}return null}function F(V,D,B,W){var ye=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ye!==null?null:T(V,D,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return B.key===ye?O(V,D,B,W):null;case j:return B.key===ye?$(V,D,B,W):null;case R:return B=Xs(B),F(V,D,B,W)}if(kt(B)||U(B))return ye!==null?null:X(V,D,B,W,null);if(typeof B.then=="function")return F(V,D,bc(B),W);if(B.$$typeof===H)return F(V,D,gc(V,B),W);wc(V,B)}return null}function G(V,D,B,W,ye){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return V=V.get(B)||null,T(D,V,""+W,ye);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return V=V.get(W.key===null?B:W.key)||null,O(D,V,W,ye);case j:return V=V.get(W.key===null?B:W.key)||null,$(D,V,W,ye);case R:return W=Xs(W),G(V,D,B,W,ye)}if(kt(W)||U(W))return V=V.get(B)||null,X(D,V,W,ye,null);if(typeof W.then=="function")return G(V,D,B,bc(W),ye);if(W.$$typeof===H)return G(V,D,B,gc(D,W),ye);wc(D,W)}return null}function he(V,D,B,W){for(var ye=null,Ge=null,de=D,Oe=D=0,Ve=null;de!==null&&Oe<B.length;Oe++){de.index>Oe?(Ve=de,de=null):Ve=de.sibling;var Ke=F(V,de,B[Oe],W);if(Ke===null){de===null&&(de=Ve);break}n&&de&&Ke.alternate===null&&s(V,de),D=f(Ke,D,Oe),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke,de=Ve}if(Oe===B.length)return a(V,de),qe&&Ki(V,Oe),ye;if(de===null){for(;Oe<B.length;Oe++)de=Z(V,B[Oe],W),de!==null&&(D=f(de,D,Oe),Ge===null?ye=de:Ge.sibling=de,Ge=de);return qe&&Ki(V,Oe),ye}for(de=u(de);Oe<B.length;Oe++)Ve=G(de,V,Oe,B[Oe],W),Ve!==null&&(n&&Ve.alternate!==null&&de.delete(Ve.key===null?Oe:Ve.key),D=f(Ve,D,Oe),Ge===null?ye=Ve:Ge.sibling=Ve,Ge=Ve);return n&&de.forEach(function(ss){return s(V,ss)}),qe&&Ki(V,Oe),ye}function ve(V,D,B,W){if(B==null)throw Error(r(151));for(var ye=null,Ge=null,de=D,Oe=D=0,Ve=null,Ke=B.next();de!==null&&!Ke.done;Oe++,Ke=B.next()){de.index>Oe?(Ve=de,de=null):Ve=de.sibling;var ss=F(V,de,Ke.value,W);if(ss===null){de===null&&(de=Ve);break}n&&de&&ss.alternate===null&&s(V,de),D=f(ss,D,Oe),Ge===null?ye=ss:Ge.sibling=ss,Ge=ss,de=Ve}if(Ke.done)return a(V,de),qe&&Ki(V,Oe),ye;if(de===null){for(;!Ke.done;Oe++,Ke=B.next())Ke=Z(V,Ke.value,W),Ke!==null&&(D=f(Ke,D,Oe),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke);return qe&&Ki(V,Oe),ye}for(de=u(de);!Ke.done;Oe++,Ke=B.next())Ke=G(de,V,Oe,Ke.value,W),Ke!==null&&(n&&Ke.alternate!==null&&de.delete(Ke.key===null?Oe:Ke.key),D=f(Ke,D,Oe),Ge===null?ye=Ke:Ge.sibling=Ke,Ge=Ke);return n&&de.forEach(function(U1){return s(V,U1)}),qe&&Ki(V,Oe),ye}function tt(V,D,B,W){if(typeof B=="object"&&B!==null&&B.type===z&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case x:e:{for(var ye=B.key;D!==null;){if(D.key===ye){if(ye=B.type,ye===z){if(D.tag===7){a(V,D.sibling),W=d(D,B.props.children),W.return=V,V=W;break e}}else if(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&Xs(ye)===D.type){a(V,D.sibling),W=d(D,B.props),El(W,B),W.return=V,V=W;break e}a(V,D);break}else s(V,D);D=D.sibling}B.type===z?(W=Fs(B.props.children,V.mode,W,B.key),W.return=V,V=W):(W=fc(B.type,B.key,B.props,null,V.mode,W),El(W,B),W.return=V,V=W)}return _(V);case j:e:{for(ye=B.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){a(V,D.sibling),W=d(D,B.children||[]),W.return=V,V=W;break e}else{a(V,D);break}else s(V,D);D=D.sibling}W=Gd(B,V.mode,W),W.return=V,V=W}return _(V);case R:return B=Xs(B),tt(V,D,B,W)}if(kt(B))return he(V,D,B,W);if(U(B)){if(ye=U(B),typeof ye!="function")throw Error(r(150));return B=ye.call(B),ve(V,D,B,W)}if(typeof B.then=="function")return tt(V,D,bc(B),W);if(B.$$typeof===H)return tt(V,D,gc(V,B),W);wc(V,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,D!==null&&D.tag===6?(a(V,D.sibling),W=d(D,B),W.return=V,V=W):(a(V,D),W=Fd(B,V.mode,W),W.return=V,V=W),_(V)):a(V,D)}return function(V,D,B,W){try{wl=0;var ye=tt(V,D,B,W);return Qa=null,ye}catch(de){if(de===Ya||de===_c)throw de;var Ge=In(29,de,null,V.mode);return Ge.lanes=W,Ge.return=V,Ge}finally{}}}var Ws=yy(!0),_y=yy(!1),qr=!1;function sf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function af(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function $r(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hr(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=dc(n),ty(n,null,a),s}return hc(n,u,s,a),dc(n)}function Tl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Er(n,a)}}function of(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var lf=!1;function Sl(){if(lf){var n=Ka;if(n!==null)throw n}}function Al(n,s,a,u){lf=!1;var d=n.updateQueue;qr=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var O=T,$=O.next;O.next=null,_===null?f=$:_.next=$,_=O;var X=n.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==_&&(T===null?X.firstBaseUpdate=$:T.next=$,X.lastBaseUpdate=O))}if(f!==null){var Z=d.baseState;_=0,X=$=O=null,T=f;do{var F=T.lane&-536870913,G=F!==T.lane;if(G?(Me&F)===F:(u&F)===F){F!==0&&F===Ga&&(lf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var he=n,ve=T;F=s;var tt=a;switch(ve.tag){case 1:if(he=ve.payload,typeof he=="function"){Z=he.call(tt,Z,F);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=ve.payload,F=typeof he=="function"?he.call(tt,Z,F):he,F==null)break e;Z=E({},Z,F);break e;case 2:qr=!0}}F=T.callback,F!==null&&(n.flags|=64,G&&(n.flags|=8192),G=d.callbacks,G===null?d.callbacks=[F]:G.push(F))}else G={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?($=X=G,O=Z):X=X.next=G,_|=F;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;G=T,T=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);X===null&&(O=Z),d.baseState=O,d.firstBaseUpdate=$,d.lastBaseUpdate=X,f===null&&(d.shared.lanes=0),Qr|=_,n.lanes=_,n.memoizedState=Z}}function vy(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function by(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)vy(a[n],s)}var Xa=k(null),Ec=k(0);function wy(n,s){n=rr,ne(Ec,n),ne(Xa,s),rr=n|s.baseLanes}function uf(){ne(Ec,rr),ne(Xa,Xa.current)}function cf(){rr=Ec.current,K(Xa),K(Ec)}var On=k(null),Kn=null;function Fr(n){var s=n.alternate;ne(wt,wt.current&1),ne(On,n),Kn===null&&(s===null||Xa.current!==null||s.memoizedState!==null)&&(Kn=n)}function hf(n){ne(wt,wt.current),ne(On,n),Kn===null&&(Kn=n)}function Ey(n){n.tag===22?(ne(wt,wt.current),ne(On,n),Kn===null&&(Kn=n)):Gr()}function Gr(){ne(wt,wt.current),ne(On,On.current)}function Nn(n){K(On),Kn===n&&(Kn=null),K(wt)}var wt=k(0);function Tc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yp(a)||_p(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xi=0,Ce=null,Ze=null,Rt=null,Sc=!1,Ja=!1,Zs=!1,Ac=0,Rl=0,Wa=null,CS=0;function gt(){throw Error(r(321))}function df(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Cn(n[a],s[a]))return!1;return!0}function ff(n,s,a,u,d,f){return Xi=f,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?s_:Cf,Zs=!1,f=a(u,d),Zs=!1,Ja&&(f=Sy(s,a,u,d)),Ty(n),f}function Ty(n){Q.H=Il;var s=Ze!==null&&Ze.next!==null;if(Xi=0,Rt=Ze=Ce=null,Sc=!1,Rl=0,Wa=null,s)throw Error(r(300));n===null||xt||(n=n.dependencies,n!==null&&mc(n)&&(xt=!0))}function Sy(n,s,a,u){Ce=n;var d=0;do{if(Ja&&(Wa=null),Rl=0,Ja=!1,25<=d)throw Error(r(301));if(d+=1,Rt=Ze=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=a_,f=s(a,u)}while(Ja);return f}function IS(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?xl(s):s,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Ce.flags|=1024),s}function pf(){var n=Ac!==0;return Ac=0,n}function mf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function gf(n){if(Sc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sc=!1}Xi=0,Rt=Ze=Ce=null,Ja=!1,Rl=Ac=0,Wa=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ce.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function Et(){if(Ze===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var s=Rt===null?Ce.memoizedState:Rt.next;if(s!==null)Rt=s,Ze=n;else{if(n===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Rt===null?Ce.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function Rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(n){var s=Rl;return Rl+=1,Wa===null&&(Wa=[]),n=py(Wa,n,s),s=Ce,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?s_:Cf),n}function xc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xl(n);if(n.$$typeof===H)return Xt(n)}throw Error(r(438,String(n)))}function yf(n){var s=null,a=Ce.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Rc(),Ce.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=P;return s.index++,a}function Ji(n,s){return typeof s=="function"?s(n):s}function Cc(n){var s=Et();return _f(s,Ze,n)}function _f(n,s,a){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=n.baseQueue,f=u.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}s.baseQueue=d=f,u.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{s=d.next;var T=_=null,O=null,$=s,X=!1;do{var Z=$.lane&-536870913;if(Z!==$.lane?(Me&Z)===Z:(Xi&Z)===Z){var F=$.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),Z===Ga&&(X=!0);else if((Xi&F)===F){$=$.next,F===Ga&&(X=!0);continue}else Z={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=Z,_=f):O=O.next=Z,Ce.lanes|=F,Qr|=F;Z=$.action,Zs&&a(f,Z),f=$.hasEagerState?$.eagerState:a(f,Z)}else F={lane:Z,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=F,_=f):O=O.next=F,Ce.lanes|=Z,Qr|=Z;$=$.next}while($!==null&&$!==s);if(O===null?_=f:O.next=T,!Cn(f,n.memoizedState)&&(xt=!0,X&&(a=Ka,a!==null)))throw a;n.memoizedState=f,n.baseState=_,n.baseQueue=O,u.lastRenderedState=f}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function vf(n){var s=Et(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var u=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=n(f,_.action),_=_.next;while(_!==d);Cn(f,s.memoizedState)||(xt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,u]}function Ay(n,s,a){var u=Ce,d=Et(),f=qe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=s();var _=!Cn((Ze||d).memoizedState,a);if(_&&(d.memoizedState=a,xt=!0),d=d.queue,Ef(Cy.bind(null,u,d,n),[n]),d.getSnapshot!==s||_||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,Za(9,{destroy:void 0},xy.bind(null,u,d,a,s),null),nt===null)throw Error(r(349));f||(Xi&127)!==0||Ry(u,s,a)}return a}function Ry(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Ce.updateQueue,s===null?(s=Rc(),Ce.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function xy(n,s,a,u){s.value=a,s.getSnapshot=u,Iy(s)&&Oy(n)}function Cy(n,s,a){return a(function(){Iy(s)&&Oy(n)})}function Iy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Cn(n,a)}catch{return!0}}function Oy(n){var s=Hs(n,2);s!==null&&Sn(s,n,2)}function bf(n){var s=yn();if(typeof n=="function"){var a=n;if(n=a(),Zs){Un(!0);try{a()}finally{Un(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:n},s}function Ny(n,s,a,u){return n.baseState=a,_f(n,Ze,typeof u=="function"?u:Ji)}function OS(n,s,a,u,d){if(Nc(n))throw Error(r(485));if(n=s.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};Q.T!==null?a(!0):f.isTransition=!1,u(f),a=s.pending,a===null?(f.next=s.pending=f,ky(s,f)):(f.next=a.next,s.pending=a.next=f)}}function ky(n,s){var a=s.action,u=s.payload,d=n.state;if(s.isTransition){var f=Q.T,_={};Q.T=_;try{var T=a(d,u),O=Q.S;O!==null&&O(_,T),Dy(n,s,T)}catch($){wf(n,s,$)}finally{f!==null&&_.types!==null&&(f.types=_.types),Q.T=f}}else try{f=a(d,u),Dy(n,s,f)}catch($){wf(n,s,$)}}function Dy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){jy(n,s,u)},function(u){return wf(n,s,u)}):jy(n,s,a)}function jy(n,s,a){s.status="fulfilled",s.value=a,Py(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,ky(n,a)))}function wf(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,Py(s),s=s.next;while(s!==u)}n.action=null}function Py(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function My(n,s){return s}function Vy(n,s){if(qe){var a=nt.formState;if(a!==null){e:{var u=Ce;if(qe){if(st){t:{for(var d=st,f=Gn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Yn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){st=Yn(d.nextSibling),u=d.data==="F!";break e}}zr(u)}u=!1}u&&(s=a[0])}}return a=yn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:s},a.queue=u,a=n_.bind(null,Ce,u),u.dispatch=a,u=bf(!1),f=xf.bind(null,Ce,!1,u.queue),u=yn(),d={state:s,dispatch:null,action:n,pending:null},u.queue=d,a=OS.bind(null,Ce,d,f,a),d.dispatch=a,u.memoizedState=n,[s,a,!1]}function Uy(n){var s=Et();return Ly(s,Ze,n)}function Ly(n,s,a){if(s=_f(n,s,My)[0],n=Cc(Ji)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=xl(s)}catch(_){throw _===Ya?_c:_}else u=s;s=Et();var d=s.queue,f=d.dispatch;return a!==s.memoizedState&&(Ce.flags|=2048,Za(9,{destroy:void 0},NS.bind(null,d,a),null)),[u,f,n]}function NS(n,s){n.action=s}function zy(n){var s=Et(),a=Ze;if(a!==null)return Ly(s,a,n);Et(),s=s.memoizedState,a=Et();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function Za(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=Rc(),Ce.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function By(){return Et().memoizedState}function Ic(n,s,a,u){var d=yn();Ce.flags|=n,d.memoizedState=Za(1|s,{destroy:void 0},a,u===void 0?null:u)}function Oc(n,s,a,u){var d=Et();u=u===void 0?null:u;var f=d.memoizedState.inst;Ze!==null&&u!==null&&df(u,Ze.memoizedState.deps)?d.memoizedState=Za(s,f,a,u):(Ce.flags|=n,d.memoizedState=Za(1|s,f,a,u))}function qy(n,s){Ic(8390656,8,n,s)}function Ef(n,s){Oc(2048,8,n,s)}function kS(n){Ce.flags|=4;var s=Ce.updateQueue;if(s===null)s=Rc(),Ce.updateQueue=s,s.events=[n];else{var a=s.events;a===null?s.events=[n]:a.push(n)}}function $y(n){var s=Et().memoizedState;return kS({ref:s,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Hy(n,s){return Oc(4,2,n,s)}function Fy(n,s){return Oc(4,4,n,s)}function Gy(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ky(n,s,a){a=a!=null?a.concat([n]):null,Oc(4,4,Gy.bind(null,s,n),a)}function Tf(){}function Yy(n,s){var a=Et();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&df(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function Qy(n,s){var a=Et();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&df(s,u[1]))return u[0];if(u=n(),Zs){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[u,s],u}function Sf(n,s,a){return a===void 0||(Xi&1073741824)!==0&&(Me&261930)===0?n.memoizedState=s:(n.memoizedState=a,n=X_(),Ce.lanes|=n,Qr|=n,a)}function Xy(n,s,a,u){return Cn(a,s)?a:Xa.current!==null?(n=Sf(n,a,u),Cn(n,s)||(xt=!0),n):(Xi&42)===0||(Xi&1073741824)!==0&&(Me&261930)===0?(xt=!0,n.memoizedState=a):(n=X_(),Ce.lanes|=n,Qr|=n,s)}function Jy(n,s,a,u,d){var f=ae.p;ae.p=f!==0&&8>f?f:8;var _=Q.T,T={};Q.T=T,xf(n,!1,s,a);try{var O=d(),$=Q.S;if($!==null&&$(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=xS(O,u);Cl(n,s,X,jn(n))}else Cl(n,s,u,jn(n))}catch(Z){Cl(n,s,{then:function(){},status:"rejected",reason:Z},jn())}finally{ae.p=f,_!==null&&T.types!==null&&(_.types=T.types),Q.T=_}}function DS(){}function Af(n,s,a,u){if(n.tag!==5)throw Error(r(476));var d=Wy(n).queue;Jy(n,d,s,me,a===null?DS:function(){return Zy(n),a(u)})}function Wy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:me},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Zy(n){var s=Wy(n);s.next===null&&(s=n.alternate.memoizedState),Cl(n,s.next.queue,{},jn())}function Rf(){return Xt(Fl)}function e_(){return Et().memoizedState}function t_(){return Et().memoizedState}function jS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=jn();n=$r(a);var u=Hr(s,n,a);u!==null&&(Sn(u,s,a),Tl(u,s,a)),s={cache:ef()},n.payload=s;return}s=s.return}}function PS(n,s,a){var u=jn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Nc(n)?i_(s,a):(a=$d(n,s,a,u),a!==null&&(Sn(a,n,u),r_(a,s,u)))}function n_(n,s,a){var u=jn();Cl(n,s,a,u)}function Cl(n,s,a,u){var d={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nc(n))i_(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var _=s.lastRenderedState,T=f(_,a);if(d.hasEagerState=!0,d.eagerState=T,Cn(T,_))return hc(n,s,d,0),nt===null&&cc(),!1}catch{}finally{}if(a=$d(n,s,d,u),a!==null)return Sn(a,n,u),r_(a,s,u),!0}return!1}function xf(n,s,a,u){if(u={lane:2,revertLane:sp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Nc(n)){if(s)throw Error(r(479))}else s=$d(n,a,u,2),s!==null&&Sn(s,n,2)}function Nc(n){var s=n.alternate;return n===Ce||s!==null&&s===Ce}function i_(n,s){Ja=Sc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function r_(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,Er(n,a)}}var Il={readContext:Xt,use:xc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Il.useEffectEvent=gt;var s_={readContext:Xt,use:xc,useCallback:function(n,s){return yn().memoizedState=[n,s===void 0?null:s],n},useContext:Xt,useEffect:qy,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Ic(4194308,4,Gy.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Ic(4194308,4,n,s)},useInsertionEffect:function(n,s){Ic(4,2,n,s)},useMemo:function(n,s){var a=yn();s=s===void 0?null:s;var u=n();if(Zs){Un(!0);try{n()}finally{Un(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=yn();if(a!==void 0){var d=a(s);if(Zs){Un(!0);try{a(s)}finally{Un(!1)}}}else d=s;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=PS.bind(null,Ce,n),[u.memoizedState,n]},useRef:function(n){var s=yn();return n={current:n},s.memoizedState=n},useState:function(n){n=bf(n);var s=n.queue,a=n_.bind(null,Ce,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Tf,useDeferredValue:function(n,s){var a=yn();return Sf(a,n,s)},useTransition:function(){var n=bf(!1);return n=Jy.bind(null,Ce,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=Ce,d=yn();if(qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),nt===null)throw Error(r(349));(Me&127)!==0||Ry(u,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,qy(Cy.bind(null,u,f,n),[n]),u.flags|=2048,Za(9,{destroy:void 0},xy.bind(null,u,f,a,s),null),a},useId:function(){var n=yn(),s=nt.identifierPrefix;if(qe){var a=wi,u=bi;a=(u&~(1<<32-dn(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Ac++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=CS++,s="_"+s+"r_"+a.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Rf,useFormState:Vy,useActionState:Vy,useOptimistic:function(n){var s=yn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=xf.bind(null,Ce,!0,a),a.dispatch=s,[n,s]},useMemoCache:yf,useCacheRefresh:function(){return yn().memoizedState=jS.bind(null,Ce)},useEffectEvent:function(n){var s=yn(),a={impl:n};return s.memoizedState=a,function(){if((Ye&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Cf={readContext:Xt,use:xc,useCallback:Yy,useContext:Xt,useEffect:Ef,useImperativeHandle:Ky,useInsertionEffect:Hy,useLayoutEffect:Fy,useMemo:Qy,useReducer:Cc,useRef:By,useState:function(){return Cc(Ji)},useDebugValue:Tf,useDeferredValue:function(n,s){var a=Et();return Xy(a,Ze.memoizedState,n,s)},useTransition:function(){var n=Cc(Ji)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:xl(n),s]},useSyncExternalStore:Ay,useId:e_,useHostTransitionStatus:Rf,useFormState:Uy,useActionState:Uy,useOptimistic:function(n,s){var a=Et();return Ny(a,Ze,n,s)},useMemoCache:yf,useCacheRefresh:t_};Cf.useEffectEvent=$y;var a_={readContext:Xt,use:xc,useCallback:Yy,useContext:Xt,useEffect:Ef,useImperativeHandle:Ky,useInsertionEffect:Hy,useLayoutEffect:Fy,useMemo:Qy,useReducer:vf,useRef:By,useState:function(){return vf(Ji)},useDebugValue:Tf,useDeferredValue:function(n,s){var a=Et();return Ze===null?Sf(a,n,s):Xy(a,Ze.memoizedState,n,s)},useTransition:function(){var n=vf(Ji)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:xl(n),s]},useSyncExternalStore:Ay,useId:e_,useHostTransitionStatus:Rf,useFormState:zy,useActionState:zy,useOptimistic:function(n,s){var a=Et();return Ze!==null?Ny(a,Ze,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:yf,useCacheRefresh:t_};a_.useEffectEvent=$y;function If(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:E({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Of={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=jn(),d=$r(u);d.payload=s,a!=null&&(d.callback=a),s=Hr(n,d,u),s!==null&&(Sn(s,n,u),Tl(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=jn(),d=$r(u);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Hr(n,d,u),s!==null&&(Sn(s,n,u),Tl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=jn(),u=$r(a);u.tag=2,s!=null&&(u.callback=s),s=Hr(n,u,a),s!==null&&(Sn(s,n,a),Tl(s,n,a))}};function o_(n,s,a,u,d,f,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,f,_):s.prototype&&s.prototype.isPureReactComponent?!ml(a,u)||!ml(d,f):!0}function l_(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&Of.enqueueReplaceState(s,s.state,null)}function ea(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=E({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}function u_(n){uc(n)}function c_(n){console.error(n)}function h_(n){uc(n)}function kc(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function d_(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nf(n,s,a){return a=$r(a),a.tag=3,a.payload={element:null},a.callback=function(){kc(n,s)},a}function f_(n){return n=$r(n),n.tag=3,n}function p_(n,s,a,u){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=u.value;n.payload=function(){return d(f)},n.callback=function(){d_(s,a,u)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){d_(s,a,u),typeof d!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function MS(n,s,a,u,d){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&Fa(s,a,d,!0),a=On.current,a!==null){switch(a.tag){case 31:case 13:return Kn===null?Hc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,u===vc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),np(n,u,d)),!1;case 22:return a.flags|=65536,u===vc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),np(n,u,d)),!1}throw Error(r(435,a.tag))}return np(n,u,d),Hc(),!1}if(qe)return s=On.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==Qd&&(n=Error(r(422),{cause:u}),_l($n(n,a)))):(u!==Qd&&(s=Error(r(423),{cause:u}),_l($n(s,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=$n(u,a),d=Nf(n.stateNode,u,d),of(n,d),yt!==4&&(yt=2)),!1;var f=Error(r(520),{cause:u});if(f=$n(f,a),Vl===null?Vl=[f]:Vl.push(f),yt!==4&&(yt=2),s===null)return!0;u=$n(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Nf(a.stateNode,u,n),of(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Xr===null||!Xr.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=f_(d),p_(d,n,a,u),of(a,d),!1}a=a.return}while(a!==null);return!1}var kf=Error(r(461)),xt=!1;function Jt(n,s,a,u){s.child=n===null?_y(s,null,a,u):Ws(s,n.child,a,u)}function m_(n,s,a,u,d){a=a.render;var f=s.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return Ys(s),u=ff(n,s,a,_,f,d),T=pf(),n!==null&&!xt?(mf(n,s,d),Wi(n,s,d)):(qe&&T&&Kd(s),s.flags|=1,Jt(n,s,u,d),s.child)}function g_(n,s,a,u,d){if(n===null){var f=a.type;return typeof f=="function"&&!Hd(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,y_(n,s,f,u,d)):(n=fc(a.type,null,u,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!zf(n,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(_,u)&&n.ref===s.ref)return Wi(n,s,d)}return s.flags|=1,n=Gi(f,u),n.ref=s.ref,n.return=s,s.child=n}function y_(n,s,a,u,d){if(n!==null){var f=n.memoizedProps;if(ml(f,u)&&n.ref===s.ref)if(xt=!1,s.pendingProps=u=f,zf(n,d))(n.flags&131072)!==0&&(xt=!0);else return s.lanes=n.lanes,Wi(n,s,d)}return Df(n,s,a,u,d)}function __(n,s,a,u){var d=u.children,f=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,n!==null){for(u=s.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~f}else u=0,s.child=null;return v_(n,s,f,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&yc(s,f!==null?f.cachePool:null),f!==null?wy(s,f):uf(),Ey(s);else return u=s.lanes=536870912,v_(n,s,f!==null?f.baseLanes|a:a,a,u)}else f!==null?(yc(s,f.cachePool),wy(s,f),Gr(),s.memoizedState=null):(n!==null&&yc(s,null),uf(),Gr());return Jt(n,s,d,a),s.child}function Ol(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function v_(n,s,a,u,d){var f=nf();return f=f===null?null:{parent:At._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},n!==null&&yc(s,null),uf(),Ey(s),n!==null&&Fa(n,s,u,!0),s.childLanes=d,null}function Dc(n,s){return s=Pc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function b_(n,s,a){return Ws(s,n.child,null,a),n=Dc(s,s.pendingProps),n.flags|=2,Nn(s),s.memoizedState=null,n}function VS(n,s,a){var u=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(qe){if(u.mode==="hidden")return n=Dc(s,u),s.lanes=536870912,Ol(null,n);if(hf(s),(n=st)?(n=kv(n,Gn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ur!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=iy(n),a.return=s,s.child=a,Qt=s,st=null)):n=null,n===null)throw zr(s);return s.lanes=536870912,null}return Dc(s,u)}var f=n.memoizedState;if(f!==null){var _=f.dehydrated;if(hf(s),d)if(s.flags&256)s.flags&=-257,s=b_(n,s,a);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(xt||Fa(n,s,a,!1),d=(a&n.childLanes)!==0,xt||d){if(u=nt,u!==null&&(_=Tr(u,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Hs(n,_),Sn(u,n,_),kf;Hc(),s=b_(n,s,a)}else n=f.treeContext,st=Yn(_.nextSibling),Qt=s,qe=!0,Lr=null,Gn=!1,n!==null&&ay(s,n),s=Dc(s,u),s.flags|=4096;return s}return n=Gi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function jc(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Df(n,s,a,u,d){return Ys(s),a=ff(n,s,a,u,void 0,d),u=pf(),n!==null&&!xt?(mf(n,s,d),Wi(n,s,d)):(qe&&u&&Kd(s),s.flags|=1,Jt(n,s,a,d),s.child)}function w_(n,s,a,u,d,f){return Ys(s),s.updateQueue=null,a=Sy(s,u,a,d),Ty(n),u=pf(),n!==null&&!xt?(mf(n,s,f),Wi(n,s,f)):(qe&&u&&Kd(s),s.flags|=1,Jt(n,s,a,f),s.child)}function E_(n,s,a,u,d){if(Ys(s),s.stateNode===null){var f=Ba,_=a.contextType;typeof _=="object"&&_!==null&&(f=Xt(_)),f=new a(u,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Of,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=u,f.state=s.memoizedState,f.refs={},sf(s),_=a.contextType,f.context=typeof _=="object"&&_!==null?Xt(_):Ba,f.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(If(s,a,_,u),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Of.enqueueReplaceState(f,f.state,null),Al(s,u,f,d),Sl(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){f=s.stateNode;var T=s.memoizedProps,O=ea(a,T);f.props=O;var $=f.context,X=a.contextType;_=Ba,typeof X=="object"&&X!==null&&(_=Xt(X));var Z=a.getDerivedStateFromProps;X=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||$!==_)&&l_(s,f,u,_),qr=!1;var F=s.memoizedState;f.state=F,Al(s,u,f,d),Sl(),$=s.memoizedState,T||F!==$||qr?(typeof Z=="function"&&(If(s,a,Z,u),$=s.memoizedState),(O=qr||o_(s,a,O,u,F,$,_))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=$),f.props=u,f.state=$,f.context=_,u=O):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{f=s.stateNode,af(n,s),_=s.memoizedProps,X=ea(a,_),f.props=X,Z=s.pendingProps,F=f.context,$=a.contextType,O=Ba,typeof $=="object"&&$!==null&&(O=Xt($)),T=a.getDerivedStateFromProps,($=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==Z||F!==O)&&l_(s,f,u,O),qr=!1,F=s.memoizedState,f.state=F,Al(s,u,f,d),Sl();var G=s.memoizedState;_!==Z||F!==G||qr||n!==null&&n.dependencies!==null&&mc(n.dependencies)?(typeof T=="function"&&(If(s,a,T,u),G=s.memoizedState),(X=qr||o_(s,a,X,u,F,G,O)||n!==null&&n.dependencies!==null&&mc(n.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(u,G,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(u,G,O)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),f.props=u,f.state=G,f.context=O,u=X):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&F===n.memoizedState||(s.flags|=1024),u=!1)}return f=u,jc(n,s),u=(s.flags&128)!==0,f||u?(f=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&u?(s.child=Ws(s,n.child,null,d),s.child=Ws(s,null,a,d)):Jt(n,s,a,d),s.memoizedState=f.state,n=s.child):n=Wi(n,s,d),n}function T_(n,s,a,u){return Gs(),s.flags|=256,Jt(n,s,a,u),s.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(n){return{baseLanes:n,cachePool:dy()}}function Mf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Dn),n}function S_(n,s,a){var u=s.pendingProps,d=!1,f=(s.flags&128)!==0,_;if((_=f)||(_=n!==null&&n.memoizedState===null?!1:(wt.current&2)!==0),_&&(d=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,n===null){if(qe){if(d?Fr(s):Gr(),(n=st)?(n=kv(n,Gn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Ur!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=iy(n),a.return=s,s.child=a,Qt=s,st=null)):n=null,n===null)throw zr(s);return _p(n)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Gr(),d=s.mode,T=Pc({mode:"hidden",children:T},d),u=Fs(u,d,a,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=Pf(a),u.childLanes=Mf(n,_,a),s.memoizedState=jf,Ol(null,u)):(Fr(s),Vf(s,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(f)s.flags&256?(Fr(s),s.flags&=-257,s=Uf(n,s,a)):s.memoizedState!==null?(Gr(),s.child=n.child,s.flags|=128,s=null):(Gr(),T=u.fallback,d=s.mode,u=Pc({mode:"visible",children:u.children},d),T=Fs(T,d,a,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,Ws(s,n.child,null,a),u=s.child,u.memoizedState=Pf(a),u.childLanes=Mf(n,_,a),s.memoizedState=jf,s=Ol(null,u));else if(Fr(s),_p(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var $=_.dgst;_=$,u=Error(r(419)),u.stack="",u.digest=_,_l({value:u,source:null,stack:null}),s=Uf(n,s,a)}else if(xt||Fa(n,s,a,!1),_=(a&n.childLanes)!==0,xt||_){if(_=nt,_!==null&&(u=Tr(_,a),u!==0&&u!==O.retryLane))throw O.retryLane=u,Hs(n,u),Sn(_,n,u),kf;yp(T)||Hc(),s=Uf(n,s,a)}else yp(T)?(s.flags|=192,s.child=n.child,s=null):(n=O.treeContext,st=Yn(T.nextSibling),Qt=s,qe=!0,Lr=null,Gn=!1,n!==null&&ay(s,n),s=Vf(s,u.children),s.flags|=4096);return s}return d?(Gr(),T=u.fallback,d=s.mode,O=n.child,$=O.sibling,u=Gi(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,$!==null?T=Gi($,T):(T=Fs(T,d,a,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,Ol(null,u),u=s.child,T=n.child.memoizedState,T===null?T=Pf(a):(d=T.cachePool,d!==null?(O=At._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=dy(),T={baseLanes:T.baseLanes|a,cachePool:d}),u.memoizedState=T,u.childLanes=Mf(n,_,a),s.memoizedState=jf,Ol(n.child,u)):(Fr(s),a=n.child,n=a.sibling,a=Gi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(_=s.deletions,_===null?(s.deletions=[n],s.flags|=16):_.push(n)),s.child=a,s.memoizedState=null,a)}function Vf(n,s){return s=Pc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Pc(n,s){return n=In(22,n,null,s),n.lanes=0,n}function Uf(n,s,a){return Ws(s,n.child,null,a),n=Vf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function A_(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Wd(n.return,s,a)}function Lf(n,s,a,u,d,f){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:d,treeForkCount:f}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=a,_.tailMode=d,_.treeForkCount=f)}function R_(n,s,a){var u=s.pendingProps,d=u.revealOrder,f=u.tail;u=u.children;var _=wt.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,ne(wt,_),Jt(n,s,u,a),u=qe?yl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&A_(n,a,s);else if(n.tag===19)A_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&Tc(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Lf(s,!1,d,a,f,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Tc(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Lf(s,!0,a,null,f,u);break;case"together":Lf(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Wi(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Qr|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(Fa(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=Gi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Gi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function zf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&mc(n)))}function US(n,s,a){switch(s.tag){case 3:Ft(s,s.stateNode.containerInfo),Br(s,At,n.memoizedState.cache),Gs();break;case 27:case 5:hi(s);break;case 4:Ft(s,s.stateNode.containerInfo);break;case 10:Br(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,hf(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Fr(s),s.flags|=128,null):(a&s.child.childLanes)!==0?S_(n,s,a):(Fr(s),n=Wi(n,s,a),n!==null?n.sibling:null);Fr(s);break;case 19:var d=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(Fa(n,s,a,!1),u=(a&s.childLanes)!==0),d){if(u)return R_(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ne(wt,wt.current),u)break;return null;case 22:return s.lanes=0,__(n,s,a,s.pendingProps);case 24:Br(s,At,n.memoizedState.cache)}return Wi(n,s,a)}function x_(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)xt=!0;else{if(!zf(n,a)&&(s.flags&128)===0)return xt=!1,US(n,s,a);xt=(n.flags&131072)!==0}else xt=!1,qe&&(s.flags&1048576)!==0&&sy(s,yl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Xs(s.elementType),s.type=n,typeof n=="function")Hd(n)?(u=ea(n,u),s.tag=1,s=E_(null,s,n,u,a)):(s.tag=0,s=Df(null,s,n,u,a));else{if(n!=null){var d=n.$$typeof;if(d===re){s.tag=11,s=m_(null,s,n,u,a);break e}else if(d===I){s.tag=14,s=g_(null,s,n,u,a);break e}}throw s=vt(n)||n,Error(r(306,s,""))}}return s;case 0:return Df(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,d=ea(u,s.pendingProps),E_(n,s,u,d,a);case 3:e:{if(Ft(s,s.stateNode.containerInfo),n===null)throw Error(r(387));u=s.pendingProps;var f=s.memoizedState;d=f.element,af(n,s),Al(s,u,null,a);var _=s.memoizedState;if(u=_.cache,Br(s,At,u),u!==f.cache&&Zd(s,[At],a,!0),Sl(),u=_.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=T_(n,s,u,a);break e}else if(u!==d){d=$n(Error(r(424)),s),_l(d),s=T_(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(st=Yn(n.firstChild),Qt=s,qe=!0,Lr=null,Gn=!0,a=_y(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gs(),u===d){s=Wi(n,s,a);break e}Jt(n,s,u,a)}s=s.child}return s;case 26:return jc(n,s),n===null?(a=Uv(s.type,null,s.pendingProps,null))?s.memoizedState=a:qe||(a=s.type,n=s.pendingProps,u=Jc(Ie.current).createElement(a),u[pt]=s,u[Yt]=n,Wt(u,a,n),bt(u),s.stateNode=u):s.memoizedState=Uv(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return hi(s),n===null&&qe&&(u=s.stateNode=Pv(s.type,s.pendingProps,Ie.current),Qt=s,Gn=!0,d=st,es(s.type)?(vp=d,st=Yn(u.firstChild)):st=d),Jt(n,s,s.pendingProps.children,a),jc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&qe&&((d=u=st)&&(u=p1(u,s.type,s.pendingProps,Gn),u!==null?(s.stateNode=u,Qt=s,st=Yn(u.firstChild),Gn=!1,d=!0):d=!1),d||zr(s)),hi(s),d=s.type,f=s.pendingProps,_=n!==null?n.memoizedProps:null,u=f.children,pp(d,f)?u=null:_!==null&&pp(d,_)&&(s.flags|=32),s.memoizedState!==null&&(d=ff(n,s,IS,null,null,a),Fl._currentValue=d),jc(n,s),Jt(n,s,u,a),s.child;case 6:return n===null&&qe&&((n=a=st)&&(a=m1(a,s.pendingProps,Gn),a!==null?(s.stateNode=a,Qt=s,st=null,n=!0):n=!1),n||zr(s)),null;case 13:return S_(n,s,a);case 4:return Ft(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ws(s,null,u,a):Jt(n,s,u,a),s.child;case 11:return m_(n,s,s.type,s.pendingProps,a);case 7:return Jt(n,s,s.pendingProps,a),s.child;case 8:return Jt(n,s,s.pendingProps.children,a),s.child;case 12:return Jt(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Br(s,s.type,u.value),Jt(n,s,u.children,a),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Ys(s),d=Xt(d),u=u(d),s.flags|=1,Jt(n,s,u,a),s.child;case 14:return g_(n,s,s.type,s.pendingProps,a);case 15:return y_(n,s,s.type,s.pendingProps,a);case 19:return R_(n,s,a);case 31:return VS(n,s,a);case 22:return __(n,s,a,s.pendingProps);case 24:return Ys(s),u=Xt(At),n===null?(d=nf(),d===null&&(d=nt,f=ef(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),s.memoizedState={parent:u,cache:d},sf(s),Br(s,At,d)):((n.lanes&a)!==0&&(af(n,s),Al(s,null,null,a),Sl()),d=n.memoizedState,f=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Br(s,At,u)):(u=f.cache,Br(s,At,u),u!==d.cache&&Zd(s,[At],a,!0))),Jt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Zi(n){n.flags|=4}function Bf(n,s,a,u,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(ev())n.flags|=8192;else throw Js=vc,rf}else n.flags&=-16777217}function C_(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$v(s))if(ev())n.flags|=8192;else throw Js=vc,rf}function Mc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Jo():536870912,n.lanes|=s,io|=s)}function Nl(n,s){if(!qe)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function at(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function LS(n,s,a){var u=s.pendingProps;switch(Yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(s),null;case 1:return at(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Qi(At),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ha(s)?Zi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xd())),at(s),null;case 26:var d=s.type,f=s.memoizedState;return n===null?(Zi(s),f!==null?(at(s),C_(s,f)):(at(s),Bf(s,d,null,u,a))):f?f!==n.memoizedState?(Zi(s),at(s),C_(s,f)):(at(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Zi(s),at(s),Bf(s,d,n,u,a)),null;case 27:if(ji(s),a=Ie.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return at(s),null}n=le.current,Ha(s)?oy(s):(n=Pv(d,u,a),s.stateNode=n,Zi(s))}return at(s),null;case 5:if(ji(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return at(s),null}if(f=le.current,Ha(s))oy(s);else{var _=Jc(Ie.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?f.multiple=!0:u.size&&(f.size=u.size);break;default:f=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}f[pt]=s,f[Yt]=u;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=f;e:switch(Wt(f,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Zi(s)}}return at(s),Bf(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,a),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Zi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ie.current,Ha(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,d=Qt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[pt]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Sv(n.nodeValue,a)),n||zr(s,!0)}else n=Jc(n).createTextNode(u),n[pt]=s,s.stateNode=n}return at(s),null;case 31:if(a=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ha(s),a!==null){if(n===null){if(!u)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[pt]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),n=!1}else a=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return s.flags&256?(Nn(s),s):(Nn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return at(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ha(s),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[pt]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;at(s),d=!1}else d=Xd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Nn(s),s):(Nn(s),null)}return Nn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),f=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),f!==d&&(u.flags|=2048)),a!==n&&a&&(s.child.flags|=8192),Mc(s,s.updateQueue),at(s),null);case 4:return ut(),n===null&&up(s.stateNode.containerInfo),at(s),null;case 10:return Qi(s.type),at(s),null;case 19:if(K(wt),u=s.memoizedState,u===null)return at(s),null;if(d=(s.flags&128)!==0,f=u.rendering,f===null)if(d)Nl(u,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Tc(n),f!==null){for(s.flags|=128,Nl(u,!1),n=f.updateQueue,s.updateQueue=n,Mc(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)ny(a,n),a=a.sibling;return ne(wt,wt.current&1|2),qe&&Ki(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Gt()>Bc&&(s.flags|=128,d=!0,Nl(u,!1),s.lanes=4194304)}else{if(!d)if(n=Tc(f),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,Mc(s,n),Nl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!qe)return at(s),null}else 2*Gt()-u.renderingStartTime>Bc&&a!==536870912&&(s.flags|=128,d=!0,Nl(u,!1),s.lanes=4194304);u.isBackwards?(f.sibling=s.child,s.child=f):(n=u.last,n!==null?n.sibling=f:s.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Gt(),n.sibling=null,a=wt.current,ne(wt,d?a&1|2:a&1),qe&&Ki(s,u.treeForkCount),n):(at(s),null);case 22:case 23:return Nn(s),cf(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(at(s),s.subtreeFlags&6&&(s.flags|=8192)):at(s),a=s.updateQueue,a!==null&&Mc(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&K(Qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Qi(At),at(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function zS(n,s){switch(Yd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Qi(At),ut(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ji(s),null;case 31:if(s.memoizedState!==null){if(Nn(s),s.alternate===null)throw Error(r(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Nn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return K(wt),null;case 4:return ut(),null;case 10:return Qi(s.type),null;case 22:case 23:return Nn(s),cf(),n!==null&&K(Qs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Qi(At),null;case 25:return null;default:return null}}function I_(n,s){switch(Yd(s),s.tag){case 3:Qi(At),ut();break;case 26:case 27:case 5:ji(s);break;case 4:ut();break;case 31:s.memoizedState!==null&&Nn(s);break;case 13:Nn(s);break;case 19:K(wt);break;case 10:Qi(s.type);break;case 22:case 23:Nn(s),cf(),n!==null&&K(Qs);break;case 24:Qi(At)}}function kl(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var d=u.next;a=d;do{if((a.tag&n)===n){u=void 0;var f=a.create,_=a.inst;u=f(),_.destroy=u}a=a.next}while(a!==d)}}catch(T){We(s,s.return,T)}}function Kr(n,s,a){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var f=d.next;u=f;do{if((u.tag&n)===n){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=s;var O=a,$=T;try{$()}catch(X){We(d,O,X)}}}u=u.next}while(u!==f)}}catch(X){We(s,s.return,X)}}function O_(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{by(s,a)}catch(u){We(n,n.return,u)}}}function N_(n,s,a){a.props=ea(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){We(n,s,u)}}function Dl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(d){We(n,s,d)}}function Ei(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(d){We(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){We(n,s,d)}else a.current=null}function k_(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(d){We(n,n.return,d)}}function qf(n,s,a){try{var u=n.stateNode;l1(u,n.type,a,s),u[Yt]=s}catch(d){We(n,n.return,d)}}function D_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&es(n.type)||n.tag===4}function $f(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||D_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&es(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hf(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=zt));else if(u!==4&&(u===27&&es(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Hf(n,s,a),n=n.sibling;n!==null;)Hf(n,s,a),n=n.sibling}function Vc(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&es(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Vc(n,s,a),n=n.sibling;n!==null;)Vc(n,s,a),n=n.sibling}function j_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Wt(s,u,a),s[pt]=n,s[Yt]=a}catch(f){We(n,n.return,f)}}var er=!1,Ct=!1,Ff=!1,P_=typeof WeakSet=="function"?WeakSet:Set,$t=null;function BS(n,s){if(n=n.containerInfo,dp=rh,n=Kg(n),Vd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,T=-1,O=-1,$=0,X=0,Z=n,F=null;t:for(;;){for(var G;Z!==a||d!==0&&Z.nodeType!==3||(T=_+d),Z!==f||u!==0&&Z.nodeType!==3||(O=_+u),Z.nodeType===3&&(_+=Z.nodeValue.length),(G=Z.firstChild)!==null;)F=Z,Z=G;for(;;){if(Z===n)break t;if(F===a&&++$===d&&(T=_),F===f&&++X===u&&(O=_),(G=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=G}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(fp={focusedElem:n,selectionRange:a},rh=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,f=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)d=n[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,d=f.memoizedProps,f=f.memoizedState,u=a.stateNode;try{var he=ea(a.type,d);n=u.getSnapshotBeforeUpdate(he,f),u.__reactInternalSnapshotBeforeUpdate=n}catch(ve){We(a,a.return,ve)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)gp(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":gp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function M_(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:nr(n,a),u&4&&kl(5,a);break;case 1:if(nr(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(_){We(a,a.return,_)}else{var d=ea(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(_){We(a,a.return,_)}}u&64&&O_(a),u&512&&Dl(a,a.return);break;case 3:if(nr(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{by(n,s)}catch(_){We(a,a.return,_)}}break;case 27:s===null&&u&4&&j_(a);case 26:case 5:nr(n,a),s===null&&u&4&&k_(a),u&512&&Dl(a,a.return);break;case 12:nr(n,a);break;case 31:nr(n,a),u&4&&L_(n,a);break;case 13:nr(n,a),u&4&&z_(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=XS.bind(null,a),g1(n,a))));break;case 22:if(u=a.memoizedState!==null||er,!u){s=s!==null&&s.memoizedState!==null||Ct,d=er;var f=Ct;er=u,(Ct=s)&&!f?ir(n,a,(a.subtreeFlags&8772)!==0):nr(n,a),er=d,Ct=f}break;case 30:break;default:nr(n,a)}}function V_(n){var s=n.alternate;s!==null&&(n.alternate=null,V_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ks(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,bn=!1;function tr(n,s,a){for(a=a.child;a!==null;)U_(n,s,a),a=a.sibling}function U_(n,s,a){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(_r,a)}catch{}switch(a.tag){case 26:Ct||Ei(a,s),tr(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ct||Ei(a,s);var u=lt,d=bn;es(a.type)&&(lt=a.stateNode,bn=!1),tr(n,s,a),ql(a.stateNode),lt=u,bn=d;break;case 5:Ct||Ei(a,s);case 6:if(u=lt,d=bn,lt=null,tr(n,s,a),lt=u,bn=d,lt!==null)if(bn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(f){We(a,s,f)}else try{lt.removeChild(a.stateNode)}catch(f){We(a,s,f)}break;case 18:lt!==null&&(bn?(n=lt,Ov(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),ho(n)):Ov(lt,a.stateNode));break;case 4:u=lt,d=bn,lt=a.stateNode.containerInfo,bn=!0,tr(n,s,a),lt=u,bn=d;break;case 0:case 11:case 14:case 15:Kr(2,a,s),Ct||Kr(4,a,s),tr(n,s,a);break;case 1:Ct||(Ei(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&N_(a,s,u)),tr(n,s,a);break;case 21:tr(n,s,a);break;case 22:Ct=(u=Ct)||a.memoizedState!==null,tr(n,s,a),Ct=u;break;default:tr(n,s,a)}}function L_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ho(n)}catch(a){We(s,s.return,a)}}}function z_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ho(n)}catch(a){We(s,s.return,a)}}function qS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new P_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new P_),s;default:throw Error(r(435,n.tag))}}function Uc(n,s){var a=qS(n);s.forEach(function(u){if(!a.has(u)){a.add(u);var d=JS.bind(null,n,u);u.then(d,d)}})}function wn(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var d=a[u],f=n,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(es(T.type)){lt=T.stateNode,bn=!1;break e}break;case 5:lt=T.stateNode,bn=!1;break e;case 3:case 4:lt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(lt===null)throw Error(r(160));U_(f,_,d),lt=null,bn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)B_(s,n),s=s.sibling}var ri=null;function B_(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:wn(s,n),En(n),u&4&&(Kr(3,n,n.return),kl(3,n),Kr(5,n,n.return));break;case 1:wn(s,n),En(n),u&512&&(Ct||a===null||Ei(a,a.return)),u&64&&er&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var d=ri;if(wn(s,n),En(n),u&512&&(Ct||a===null||Ei(a,a.return)),u&4){var f=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Ui]||f[pt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(u),d.head.insertBefore(f,d.querySelector("head > title"))),Wt(f,u,a),f[pt]=n,bt(f),u=f;break e;case"link":var _=Bv("link","href",d).get(u+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}f=d.createElement(u),Wt(f,u,a),d.head.appendChild(f);break;case"meta":if(_=Bv("meta","content",d).get(u+(a.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}f=d.createElement(u),Wt(f,u,a),d.head.appendChild(f);break;default:throw Error(r(468,u))}f[pt]=n,bt(f),u=f}n.stateNode=u}else qv(d,n.type,n.stateNode);else n.stateNode=zv(d,u,n.memoizedProps);else f!==u?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,u===null?qv(d,n.type,n.stateNode):zv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&qf(n,n.memoizedProps,a.memoizedProps)}break;case 27:wn(s,n),En(n),u&512&&(Ct||a===null||Ei(a,a.return)),a!==null&&u&4&&qf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(wn(s,n),En(n),u&512&&(Ct||a===null||Ei(a,a.return)),n.flags&32){d=n.stateNode;try{Bn(d,"")}catch(he){We(n,n.return,he)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,qf(n,d,a!==null?a.memoizedProps:d)),u&1024&&(Ff=!0);break;case 6:if(wn(s,n),En(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(he){We(n,n.return,he)}}break;case 3:if(eh=null,d=ri,ri=Wc(s.containerInfo),wn(s,n),ri=d,En(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{ho(s.containerInfo)}catch(he){We(n,n.return,he)}Ff&&(Ff=!1,q_(n));break;case 4:u=ri,ri=Wc(n.stateNode.containerInfo),wn(s,n),En(n),ri=u;break;case 12:wn(s,n),En(n);break;case 31:wn(s,n),En(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uc(n,u)));break;case 13:wn(s,n),En(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zc=Gt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uc(n,u)));break;case 22:d=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,$=er,X=Ct;if(er=$||d,Ct=X||O,wn(s,n),Ct=X,er=$,En(n),u&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||O||er||Ct||ta(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){O=a=s;try{if(f=O.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var Z=O.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(he){We(O,O.return,he)}}}else if(s.tag===6){if(a===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(he){We(O,O.return,he)}}}else if(s.tag===18){if(a===null){O=s;try{var G=O.stateNode;d?Nv(G,!0):Nv(O.stateNode,!1)}catch(he){We(O,O.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Uc(n,a))));break;case 19:wn(s,n),En(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Uc(n,u)));break;case 30:break;case 21:break;default:wn(s,n),En(n)}}function En(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(D_(u)){a=u;break}u=u.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,f=$f(n);Vc(n,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(Bn(_,""),a.flags&=-33);var T=$f(n);Vc(n,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,$=$f(n);Hf(n,$,O);break;default:throw Error(r(161))}}catch(X){We(n,n.return,X)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function q_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;q_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function nr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)M_(n,s.alternate,s),s=s.sibling}function ta(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Kr(4,s,s.return),ta(s);break;case 1:Ei(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&N_(s,s.return,a),ta(s);break;case 27:ql(s.stateNode);case 26:case 5:Ei(s,s.return),ta(s);break;case 22:s.memoizedState===null&&ta(s);break;case 30:ta(s);break;default:ta(s)}n=n.sibling}}function ir(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=n,f=s,_=f.flags;switch(f.tag){case 0:case 11:case 15:ir(d,f,a),kl(4,f);break;case 1:if(ir(d,f,a),u=f,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){We(u,u.return,$)}if(u=f,d=u.updateQueue,d!==null){var T=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)vy(O[d],T)}catch($){We(u,u.return,$)}}a&&_&64&&O_(f),Dl(f,f.return);break;case 27:j_(f);case 26:case 5:ir(d,f,a),a&&u===null&&_&4&&k_(f),Dl(f,f.return);break;case 12:ir(d,f,a);break;case 31:ir(d,f,a),a&&_&4&&L_(d,f);break;case 13:ir(d,f,a),a&&_&4&&z_(d,f);break;case 22:f.memoizedState===null&&ir(d,f,a),Dl(f,f.return);break;case 30:break;default:ir(d,f,a)}s=s.sibling}}function Gf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&vl(a))}function Kf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vl(n))}function si(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$_(n,s,a,u),s=s.sibling}function $_(n,s,a,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:si(n,s,a,u),d&2048&&kl(9,s);break;case 1:si(n,s,a,u);break;case 3:si(n,s,a,u),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vl(n)));break;case 12:if(d&2048){si(n,s,a,u),n=s.stateNode;try{var f=s.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){We(s,s.return,O)}}else si(n,s,a,u);break;case 31:si(n,s,a,u);break;case 13:si(n,s,a,u);break;case 23:break;case 22:f=s.stateNode,_=s.alternate,s.memoizedState!==null?f._visibility&2?si(n,s,a,u):jl(n,s):f._visibility&2?si(n,s,a,u):(f._visibility|=2,eo(n,s,a,u,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Gf(_,s);break;case 24:si(n,s,a,u),d&2048&&Kf(s.alternate,s);break;default:si(n,s,a,u)}}function eo(n,s,a,u,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var f=n,_=s,T=a,O=u,$=_.flags;switch(_.tag){case 0:case 11:case 15:eo(f,_,T,O,d),kl(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?eo(f,_,T,O,d):jl(f,_):(X._visibility|=2,eo(f,_,T,O,d)),d&&$&2048&&Gf(_.alternate,_);break;case 24:eo(f,_,T,O,d),d&&$&2048&&Kf(_.alternate,_);break;default:eo(f,_,T,O,d)}s=s.sibling}}function jl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,d=u.flags;switch(u.tag){case 22:jl(a,u),d&2048&&Gf(u.alternate,u);break;case 24:jl(a,u),d&2048&&Kf(u.alternate,u);break;default:jl(a,u)}s=s.sibling}}var Pl=8192;function to(n,s,a){if(n.subtreeFlags&Pl)for(n=n.child;n!==null;)H_(n,s,a),n=n.sibling}function H_(n,s,a){switch(n.tag){case 26:to(n,s,a),n.flags&Pl&&n.memoizedState!==null&&C1(a,ri,n.memoizedState,n.memoizedProps);break;case 5:to(n,s,a);break;case 3:case 4:var u=ri;ri=Wc(n.stateNode.containerInfo),to(n,s,a),ri=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Pl,Pl=16777216,to(n,s,a),Pl=u):to(n,s,a));break;default:to(n,s,a)}}function F_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ml(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];$t=u,K_(u,n)}F_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)G_(n),n=n.sibling}function G_(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&Kr(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Lc(n)):Ml(n);break;default:Ml(n)}}function Lc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];$t=u,K_(u,n)}F_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Kr(8,s,s.return),Lc(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(s));break;default:Lc(s)}n=n.sibling}}function K_(n,s){for(;$t!==null;){var a=$t;switch(a.tag){case 0:case 11:case 15:Kr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,$t=u;else e:for(a=n;$t!==null;){u=$t;var d=u.sibling,f=u.return;if(V_(u),u===a){$t=null;break e}if(d!==null){d.return=f,$t=d;break e}$t=f}}}var $S={getCacheForType:function(n){var s=Xt(At),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a},cacheSignal:function(){return Xt(At).controller.signal}},HS=typeof WeakMap=="function"?WeakMap:Map,Ye=0,nt=null,je=null,Me=0,Je=0,kn=null,Yr=!1,no=!1,Yf=!1,rr=0,yt=0,Qr=0,na=0,Qf=0,Dn=0,io=0,Vl=null,Tn=null,Xf=!1,zc=0,Y_=0,Bc=1/0,qc=null,Xr=null,jt=0,Jr=null,ro=null,sr=0,Jf=0,Wf=null,Q_=null,Ul=0,Zf=null;function jn(){return(Ye&2)!==0&&Me!==0?Me&-Me:Q.T!==null?sp():Vi()}function X_(){if(Dn===0)if((Me&536870912)===0||qe){var n=di;di<<=1,(di&3932160)===0&&(di=262144),Dn=n}else Dn=536870912;return n=On.current,n!==null&&(n.flags|=32),Dn}function Sn(n,s,a){(n===nt&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(so(n,0),Wr(n,Me,Dn,!1)),wr(n,a),((Ye&2)===0||n!==nt)&&(n===nt&&((Ye&2)===0&&(na|=a),yt===4&&Wr(n,Me,Dn,!1)),Ti(n))}function J_(n,s,a){if((Ye&6)!==0)throw Error(r(327));var u=!a&&(s&127)===0&&(s&n.expiredLanes)===0||br(n,s),d=u?KS(n,s):tp(n,s,!0),f=u;do{if(d===0){no&&!u&&Wr(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!FS(a)){d=tp(n,s,!1),f=!1;continue}if(d===2){if(f=s,n.errorRecoveryDisabledLanes&f)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=n;d=Vl;var O=T.current.memoizedState.isDehydrated;if(O&&(so(T,_).flags|=256),_=tp(T,_,!1),_!==2){if(Yf&&!O){T.errorRecoveryDisabledLanes|=f,na|=f,d=4;break e}f=Tn,Tn=d,f!==null&&(Tn===null?Tn=f:Tn.push.apply(Tn,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){so(n,0),Wr(n,s,0,!0);break}e:{switch(u=n,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Wr(u,s,Dn,!Yr);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=zc+300-Gt(),10<d)){if(Wr(u,s,Dn,!Yr),Ln(u,0,!0)!==0)break e;sr=s,u.timeoutHandle=Cv(W_.bind(null,u,a,Tn,qc,Xf,s,Dn,na,io,Yr,f,"Throttled",-0,0),d);break e}W_(u,a,Tn,qc,Xf,s,Dn,na,io,Yr,f,null,-0,0)}}break}while(!0);Ti(n)}function W_(n,s,a,u,d,f,_,T,O,$,X,Z,F,G){if(n.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zt},H_(s,f,Z);var he=(f&62914560)===f?zc-Gt():(f&4194048)===f?Y_-Gt():0;if(he=I1(Z,he),he!==null){sr=f,n.cancelPendingCommit=he(av.bind(null,n,s,f,a,u,d,_,T,O,X,Z,null,F,G)),Wr(n,f,_,!$);return}}av(n,s,f,a,u,d,_,T,O)}function FS(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var d=a[u],f=d.getSnapshot;d=d.value;try{if(!Cn(f(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wr(n,s,a,u){s&=~Qf,s&=~na,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var d=s;0<d;){var f=31-dn(d),_=1<<f;u[f]=-1,d&=~_}a!==0&&Wo(n,a,s)}function $c(){return(Ye&6)===0?(Ll(0),!1):!0}function ep(){if(je!==null){if(Je===0)var n=je.return;else n=je,Yi=Ks=null,gf(n),Qa=null,wl=0,n=je;for(;n!==null;)I_(n.alternate,n),n=n.return;je=null}}function so(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,h1(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),sr=0,ep(),nt=n,je=a=Gi(n.current,null),Me=s,Je=0,kn=null,Yr=!1,no=br(n,s),Yf=!1,io=Dn=Qf=na=Qr=yt=0,Tn=Vl=null,Xf=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var d=31-dn(u),f=1<<d;s|=n[d],u&=~f}return rr=s,cc(),a}function Z_(n,s){Ce=null,Q.H=Il,s===Ya||s===_c?(s=my(),Je=3):s===rf?(s=my(),Je=4):Je=s===kf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kn=s,je===null&&(yt=1,kc(n,$n(s,n.current)))}function ev(){var n=On.current;return n===null?!0:(Me&4194048)===Me?Kn===null:(Me&62914560)===Me||(Me&536870912)!==0?n===Kn:!1}function tv(){var n=Q.H;return Q.H=Il,n===null?Il:n}function nv(){var n=Q.A;return Q.A=$S,n}function Hc(){yt=4,Yr||(Me&4194048)!==Me&&On.current!==null||(no=!0),(Qr&134217727)===0&&(na&134217727)===0||nt===null||Wr(nt,Me,Dn,!1)}function tp(n,s,a){var u=Ye;Ye|=2;var d=tv(),f=nv();(nt!==n||Me!==s)&&(qc=null,so(n,s)),s=!1;var _=yt;e:do try{if(Je!==0&&je!==null){var T=je,O=kn;switch(Je){case 8:ep(),_=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(s=!0);var $=Je;if(Je=0,kn=null,ao(n,T,O,$),a&&no){_=0;break e}break;default:$=Je,Je=0,kn=null,ao(n,T,O,$)}}GS(),_=yt;break}catch(X){Z_(n,X)}while(!0);return s&&n.shellSuspendCounter++,Yi=Ks=null,Ye=u,Q.H=d,Q.A=f,je===null&&(nt=null,Me=0,cc()),_}function GS(){for(;je!==null;)iv(je)}function KS(n,s){var a=Ye;Ye|=2;var u=tv(),d=nv();nt!==n||Me!==s?(qc=null,Bc=Gt()+500,so(n,s)):no=br(n,s);e:do try{if(Je!==0&&je!==null){s=je;var f=kn;t:switch(Je){case 1:Je=0,kn=null,ao(n,s,f,1);break;case 2:case 9:if(fy(f)){Je=0,kn=null,rv(s);break}s=function(){Je!==2&&Je!==9||nt!==n||(Je=7),Ti(n)},f.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:fy(f)?(Je=0,kn=null,rv(s)):(Je=0,kn=null,ao(n,s,f,7));break;case 5:var _=null;switch(je.tag){case 26:_=je.memoizedState;case 5:case 27:var T=je;if(_?$v(_):T.stateNode.complete){Je=0,kn=null;var O=T.sibling;if(O!==null)je=O;else{var $=T.return;$!==null?(je=$,Fc($)):je=null}break t}}Je=0,kn=null,ao(n,s,f,5);break;case 6:Je=0,kn=null,ao(n,s,f,6);break;case 8:ep(),yt=6;break e;default:throw Error(r(462))}}YS();break}catch(X){Z_(n,X)}while(!0);return Yi=Ks=null,Q.H=u,Q.A=d,Ye=a,je!==null?0:(nt=null,Me=0,cc(),yt)}function YS(){for(;je!==null&&!Rd();)iv(je)}function iv(n){var s=x_(n.alternate,n,rr);n.memoizedProps=n.pendingProps,s===null?Fc(n):je=s}function rv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=w_(a,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=w_(a,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:gf(s);default:I_(a,s),s=je=ny(s,rr),s=x_(a,s,rr)}n.memoizedProps=n.pendingProps,s===null?Fc(n):je=s}function ao(n,s,a,u){Yi=Ks=null,gf(s),Qa=null,wl=0;var d=s.return;try{if(MS(n,d,s,a,Me)){yt=1,kc(n,$n(a,n.current)),je=null;return}}catch(f){if(d!==null)throw je=d,f;yt=1,kc(n,$n(a,n.current)),je=null;return}s.flags&32768?(qe||u===1?n=!0:no||(Me&536870912)!==0?n=!1:(Yr=n=!0,(u===2||u===9||u===3||u===6)&&(u=On.current,u!==null&&u.tag===13&&(u.flags|=16384))),sv(s,n)):Fc(s)}function Fc(n){var s=n;do{if((s.flags&32768)!==0){sv(s,Yr);return}n=s.return;var a=LS(s.alternate,s,rr);if(a!==null){je=a;return}if(s=s.sibling,s!==null){je=s;return}je=s=n}while(s!==null);yt===0&&(yt=5)}function sv(n,s){do{var a=zS(n.alternate,n);if(a!==null){a.flags&=32767,je=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){je=n;return}je=n=a}while(n!==null);yt=6,je=null}function av(n,s,a,u,d,f,_,T,O){n.cancelPendingCommit=null;do Gc();while(jt!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(f=s.lanes|s.childLanes,f|=qd,Kt(n,a,f,_,T,O),n===nt&&(je=nt=null,Me=0),ro=s,Jr=n,sr=a,Jf=f,Wf=d,Q_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,WS(Pi,function(){return hv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,d=ae.p,ae.p=2,_=Ye,Ye|=4;try{BS(n,s,a)}finally{Ye=_,ae.p=d,Q.T=u}}jt=1,ov(),lv(),uv()}}function ov(){if(jt===1){jt=0;var n=Jr,s=ro,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var d=Ye;Ye|=4;try{B_(s,n);var f=fp,_=Kg(n.containerInfo),T=f.focusedElem,O=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&Gg(T.ownerDocument.documentElement,T)){if(O!==null&&Vd(T)){var $=O.start,X=O.end;if(X===void 0&&(X=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(X,T.value.length);else{var Z=T.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var G=F.getSelection(),he=T.textContent.length,ve=Math.min(O.start,he),tt=O.end===void 0?ve:Math.min(O.end,he);!G.extend&&ve>tt&&(_=tt,tt=ve,ve=_);var V=Fg(T,ve),D=Fg(T,tt);if(V&&D&&(G.rangeCount!==1||G.anchorNode!==V.node||G.anchorOffset!==V.offset||G.focusNode!==D.node||G.focusOffset!==D.offset)){var B=Z.createRange();B.setStart(V.node,V.offset),G.removeAllRanges(),ve>tt?(G.addRange(B),G.extend(D.node,D.offset)):(B.setEnd(D.node,D.offset),G.addRange(B))}}}}for(Z=[],G=T;G=G.parentNode;)G.nodeType===1&&Z.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Z.length;T++){var W=Z[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}rh=!!dp,fp=dp=null}finally{Ye=d,ae.p=u,Q.T=a}}n.current=s,jt=2}}function lv(){if(jt===2){jt=0;var n=Jr,s=ro,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var d=Ye;Ye|=4;try{M_(n,s.alternate,s)}finally{Ye=d,ae.p=u,Q.T=a}}jt=3}}function uv(){if(jt===4||jt===3){jt=0,Yo();var n=Jr,s=ro,a=sr,u=Q_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?jt=5:(jt=0,ro=Jr=null,cv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Xr=null),el(a),s=s.stateNode,sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(_r,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,d=ae.p,ae.p=2,Q.T=null;try{for(var f=n.onRecoverableError,_=0;_<u.length;_++){var T=u[_];f(T.value,{componentStack:T.stack})}}finally{Q.T=s,ae.p=d}}(sr&3)!==0&&Gc(),Ti(n),d=n.pendingLanes,(a&261930)!==0&&(d&42)!==0?n===Zf?Ul++:(Ul=0,Zf=n):Ul=0,Ll(0)}}function cv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,vl(s)))}function Gc(){return ov(),lv(),uv(),hv()}function hv(){if(jt!==5)return!1;var n=Jr,s=Jf;Jf=0;var a=el(sr),u=Q.T,d=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Wf,Wf=null;var f=Jr,_=sr;if(jt=0,ro=Jr=null,sr=0,(Ye&6)!==0)throw Error(r(331));var T=Ye;if(Ye|=4,G_(f.current),$_(f,f.current,_,a),Ye=T,Ll(0,!1),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(_r,f)}catch{}return!0}finally{ae.p=d,Q.T=u,cv(n,s)}}function dv(n,s,a){s=$n(a,s),s=Nf(n.stateNode,s,2),n=Hr(n,s,2),n!==null&&(wr(n,2),Ti(n))}function We(n,s,a){if(n.tag===3)dv(n,n,a);else for(;s!==null;){if(s.tag===3){dv(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xr===null||!Xr.has(u))){n=$n(a,n),a=f_(2),u=Hr(s,a,2),u!==null&&(p_(a,u,s,n),wr(u,2),Ti(u));break}}s=s.return}}function np(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new HS;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(a)||(Yf=!0,d.add(a),n=QS.bind(null,n,s,a),s.then(n,n))}function QS(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,nt===n&&(Me&a)===a&&(yt===4||yt===3&&(Me&62914560)===Me&&300>Gt()-zc?(Ye&2)===0&&so(n,0):Qf|=a,io===Me&&(io=0)),Ti(n)}function fv(n,s){s===0&&(s=Jo()),n=Hs(n,s),n!==null&&(wr(n,s),Ti(n))}function XS(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),fv(n,a)}function JS(n,s){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),fv(n,a)}function WS(n,s){return Is(n,s)}var Kc=null,oo=null,ip=!1,Yc=!1,rp=!1,Zr=0;function Ti(n){n!==oo&&n.next===null&&(oo===null?Kc=oo=n:oo=oo.next=n),Yc=!0,ip||(ip=!0,e1())}function Ll(n,s){if(!rp&&Yc){rp=!0;do for(var a=!1,u=Kc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var f=0;else{var _=u.suspendedLanes,T=u.pingedLanes;f=(1<<31-dn(42|n)+1)-1,f&=d&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,yv(u,f))}else f=Me,f=Ln(u,u===nt?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(f&3)===0||br(u,f)||(a=!0,yv(u,f));u=u.next}while(a);rp=!1}}function ZS(){pv()}function pv(){Yc=ip=!1;var n=0;Zr!==0&&c1()&&(n=Zr);for(var s=Gt(),a=null,u=Kc;u!==null;){var d=u.next,f=mv(u,s);f===0?(u.next=null,a===null?Kc=d:a.next=d,d===null&&(oo=a)):(a=u,(n!==0||(f&3)!==0)&&(Yc=!0)),u=d}jt!==0&&jt!==5||Ll(n),Zr!==0&&(Zr=0)}function mv(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var _=31-dn(f),T=1<<_,O=d[_];O===-1?((T&a)===0||(T&u)!==0)&&(d[_]=xa(T,s)):O<=s&&(n.expiredLanes|=T),f&=~T}if(s=nt,a=Me,a=Ln(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ra(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||br(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&Ra(u),el(a)){case 2:case 8:a=Lt;break;case 32:a=Pi;break;case 268435456:a=Qo;break;default:a=Pi}return u=gv.bind(null,n),a=Is(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&Ra(u),n.callbackPriority=2,n.callbackNode=null,2}function gv(n,s){if(jt!==0&&jt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Gc()&&n.callbackNode!==a)return null;var u=Me;return u=Ln(n,n===nt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(J_(n,u,s),mv(n,Gt()),n.callbackNode!=null&&n.callbackNode===a?gv.bind(null,n):null)}function yv(n,s){if(Gc())return null;J_(n,s,!0)}function e1(){d1(function(){(Ye&6)!==0?Is(Dt,ZS):pv()})}function sp(){if(Zr===0){var n=Ga;n===0&&(n=Ns,Ns<<=1,(Ns&261888)===0&&(Ns=256)),Zr=n}return Zr}function _v(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yi(""+n)}function vv(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function t1(n,s,a,u,d){if(s==="submit"&&a&&a.stateNode===d){var f=_v((d[Yt]||null).action),_=u.submitter;_&&(s=(s=_[Yt]||null)?_v(s.formAction):_.getAttribute("formAction"),s!==null&&(f=s,_=null));var T=new Vs("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zr!==0){var O=_?vv(d,_):new FormData(d);Af(a,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(T.preventDefault(),O=_?vv(d,_):new FormData(d),Af(a,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var ap=0;ap<Bd.length;ap++){var op=Bd[ap],n1=op.toLowerCase(),i1=op[0].toUpperCase()+op.slice(1);ii(n1,"on"+i1)}ii(Xg,"onAnimationEnd"),ii(Jg,"onAnimationIteration"),ii(Wg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(vS,"onTransitionRun"),ii(bS,"onTransitionStart"),ii(wS,"onTransitionCancel"),ii(Zg,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function bv(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],d=u.event;u=u.listeners;e:{var f=void 0;if(s)for(var _=u.length-1;0<=_;_--){var T=u[_],O=T.instance,$=T.currentTarget;if(T=T.listener,O!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=$;try{f(d)}catch(X){uc(X)}d.currentTarget=null,f=O}else for(_=0;_<u.length;_++){if(T=u[_],O=T.instance,$=T.currentTarget,T=T.listener,O!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=$;try{f(d)}catch(X){uc(X)}d.currentTarget=null,f=O}}}}function Pe(n,s){var a=s[Sr];a===void 0&&(a=s[Sr]=new Set);var u=n+"__bubble";a.has(u)||(wv(s,n,2,!1),a.add(u))}function lp(n,s,a){var u=0;s&&(u|=4),wv(a,n,u,s)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function up(n){if(!n[Qc]){n[Qc]=!0,Ca.forEach(function(a){a!=="selectionchange"&&(r1.has(a)||lp(a,!1,n),lp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Qc]||(s[Qc]=!0,lp("selectionchange",!1,s))}}function wv(n,s,a,u){switch(Xv(s)){case 2:var d=k1;break;case 8:d=D1;break;default:d=Sp}a=d.bind(null,s,a,n),d=void 0,!ll||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function cp(n,s,a,u,d){var f=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=u.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=Li(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){u=f=_;continue e}T=T.parentNode}}u=u.return}Ku(function(){var $=f,X=Da(a),Z=[];e:{var F=ey.get(n);if(F!==void 0){var G=Vs,he=n;switch(n){case"keypress":if(Ms(a)===0)break e;case"keydown":case"keyup":G=nc;break;case"focusin":he="focus",G=jr;break;case"focusout":he="blur",G=jr;break;case"beforeblur":case"afterblur":G=jr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=rc;break;case Xg:case Jg:case Wg:G=Ma;break;case Zg:G=Va;break;case"scroll":case"scrollend":G=Yu;break;case"wheel":G=ac;break;case"copy":case"cut":case"paste":G=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=fl;break;case"toggle":case"beforetoggle":G=Mr}var ve=(s&4)!==0,tt=!ve&&(n==="scroll"||n==="scrollend"),V=ve?F!==null?F+"Capture":null:F;ve=[];for(var D=$,B;D!==null;){var W=D;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||V===null||(W=_n(D,V),W!=null&&ve.push(Bl(D,W,B))),tt)break;D=D.return}0<ve.length&&(F=new G(F,he,null,a,X),Z.push({event:F,listeners:ve}))}}if((s&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",F&&a!==ka&&(he=a.relatedTarget||a.fromElement)&&(Li(he)||he[pi]))break e;if((G||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,G?(he=a.relatedTarget||a.toElement,G=$,he=he?Li(he):null,he!==null&&(tt=l(he),ve=he.tag,he!==tt||ve!==5&&ve!==27&&ve!==6)&&(he=null)):(G=null,he=$),G!==he)){if(ve=Qu,W="onMouseLeave",V="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ve=fl,W="onPointerLeave",V="onPointerEnter",D="pointer"),tt=G==null?F:Ds(G),B=he==null?F:Ds(he),F=new ve(W,D+"leave",G,a,X),F.target=tt,F.relatedTarget=B,W=null,Li(X)===$&&(ve=new ve(V,D+"enter",he,a,X),ve.target=B,ve.relatedTarget=tt,W=ve),tt=W,G&&he)t:{for(ve=s1,V=G,D=he,B=0,W=V;W;W=ve(W))B++;W=0;for(var ye=D;ye;ye=ve(ye))W++;for(;0<B-W;)V=ve(V),B--;for(;0<W-B;)D=ve(D),W--;for(;B--;){if(V===D||D!==null&&V===D.alternate){ve=V;break t}V=ve(V),D=ve(D)}ve=null}else ve=null;G!==null&&Ev(Z,F,G,ve,!1),he!==null&&tt!==null&&Ev(Z,tt,he,ve,!0)}}e:{if(F=$?Ds($):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var Ge=Lg;else if(vn(F))if(zg)Ge=gS;else{Ge=pS;var de=fS}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?$&&al($.elementType)&&(Ge=Lg):Ge=mS;if(Ge&&(Ge=Ge(n,$))){Bs(Z,Ge,a,X);break e}de&&de(n,F,$),n==="focusout"&&$&&F.type==="number"&&$.memoizedProps.value!=null&&Na(F,"number",F.value)}switch(de=$?Ds($):window,n){case"focusin":(vn(de)||de.contentEditable==="true")&&(Ua=de,Ud=$,gl=null);break;case"focusout":gl=Ud=Ua=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,Yg(Z,a,X);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":Yg(Z,a,X)}var Oe;if(y)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Ne?Qe(n,a)&&(Ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(L&&a.locale!=="ko"&&(Ne||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Ne&&(Oe=Or()):(xn=X,ja="value"in xn?xn.value:xn.textContent,Ne=!0)),de=Xc($,Ve),0<de.length&&(Ve=new cl(Ve,n,null,a,X),Z.push({event:Ve,listeners:de}),Oe?Ve.data=Oe:(Oe=St(a),Oe!==null&&(Ve.data=Oe)))),(Oe=A?Bt(n,a):qt(n,a))&&(Ve=Xc($,"onBeforeInput"),0<Ve.length&&(de=new cl("onBeforeInput","beforeinput",null,a,X),Z.push({event:de,listeners:Ve}),de.data=Oe)),t1(Z,n,$,a,X)}bv(Z,s)})}function Bl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Xc(n,s){for(var a=s+"Capture",u=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=_n(n,a),d!=null&&u.unshift(Bl(n,d,f)),d=_n(n,s),d!=null&&u.push(Bl(n,d,f))),n.tag===3)return u;n=n.return}return[]}function s1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ev(n,s,a,u,d){for(var f=s._reactName,_=[];a!==null&&a!==u;){var T=a,O=T.alternate,$=T.stateNode;if(T=T.tag,O!==null&&O===u)break;T!==5&&T!==26&&T!==27||$===null||(O=$,d?($=_n(a,f),$!=null&&_.unshift(Bl(a,$,O))):d||($=_n(a,f),$!=null&&_.push(Bl(a,$,O)))),a=a.return}_.length!==0&&n.push({event:s,listeners:_})}var a1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function Tv(n){return(typeof n=="string"?n:""+n).replace(a1,`
`).replace(o1,"")}function Sv(n,s){return s=Tv(s),Tv(n)===s}function et(n,s,a,u,d,f){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Bn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Bn(n,""+u);break;case"className":xr(n,"class",u);break;case"tabIndex":xr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xr(n,a,u);break;case"style":Fu(n,u,f);break;case"data":if(s!=="object"){xr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=yi(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&et(n,s,"name",d.name,d,null),et(n,s,"formEncType",d.formEncType,d,null),et(n,s,"formMethod",d.formMethod,d,null),et(n,s,"formTarget",d.formTarget,d,null)):(et(n,s,"encType",d.encType,d,null),et(n,s,"method",d.method,d,null),et(n,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=yi(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=zt);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=yi(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Rr(n,"popover",u);break;case"xlinkActuate":zn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Rr(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kd.get(a)||a,Rr(n,a,u))}}function hp(n,s,a,u,d,f){switch(a){case"style":Fu(n,u,f);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(a=u.__html,a!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof u=="string"?Bn(n,u):(typeof u=="number"||typeof u=="bigint")&&Bn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=zt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ar.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),f=n[Yt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,d),typeof u=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,d);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Rr(n,a,u)}}}function Wt(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,f,_,a,null)}}d&&et(n,s,"srcSet",a.srcSet,a,null),u&&et(n,s,"src",a.src,a,null);return;case"input":Pe("invalid",n);var T=f=_=d=null,O=null,$=null;for(u in a)if(a.hasOwnProperty(u)){var X=a[u];if(X!=null)switch(u){case"name":d=X;break;case"type":_=X;break;case"checked":O=X;break;case"defaultChecked":$=X;break;case"value":f=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:et(n,s,u,X,a,null)}}js(n,f,T,O,$,_,d,!1);return;case"select":Pe("invalid",n),u=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:et(n,s,d,T,a,null)}s=f,a=_,n.multiple=!!u,s!=null?Fe(n,!!u,s,!1):a!=null&&Fe(n,!!u,a,!0);return;case"textarea":Pe("invalid",n),f=d=u=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:et(n,s,_,T,a,null)}Ir(n,u,d,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(u=a[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(n,s,O,u,a,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<zl.length;u++)Pe(zl[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(u=a[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:et(n,s,$,u,a,null)}return;default:if(al(s)){for(X in a)a.hasOwnProperty(X)&&(u=a[X],u!==void 0&&hp(n,s,X,u,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(u=a[T],u!=null&&et(n,s,T,u,a,null))}function l1(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,T=null,O=null,$=null,X=null;for(G in a){var Z=a[G];if(a.hasOwnProperty(G)&&Z!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":O=Z;default:u.hasOwnProperty(G)||et(n,s,G,null,u,Z)}}for(var F in u){var G=u[F];if(Z=a[F],u.hasOwnProperty(F)&&(G!=null||Z!=null))switch(F){case"type":f=G;break;case"name":d=G;break;case"checked":$=G;break;case"defaultChecked":X=G;break;case"value":_=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:G!==Z&&et(n,s,F,G,u,Z)}}Cr(n,_,T,O,$,X,f,d);return;case"select":G=_=T=F=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":G=O;default:u.hasOwnProperty(f)||et(n,s,f,null,u,O)}for(d in u)if(f=u[d],O=a[d],u.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":F=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==O&&et(n,s,d,f,u,O)}s=T,a=_,u=G,F!=null?Fe(n,!!a,F,!1):!!u!=!!a&&(s!=null?Fe(n,!!a,s,!0):Fe(n,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(n,s,T,null,u,d)}for(_ in u)if(d=u[_],f=a[_],u.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":F=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&et(n,s,_,d,u,f)}Ps(n,F,G);return;case"option":for(var he in a)if(F=a[he],a.hasOwnProperty(he)&&F!=null&&!u.hasOwnProperty(he))switch(he){case"selected":n.selected=!1;break;default:et(n,s,he,null,u,F)}for(O in u)if(F=u[O],G=a[O],u.hasOwnProperty(O)&&F!==G&&(F!=null||G!=null))switch(O){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:et(n,s,O,F,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)F=a[ve],a.hasOwnProperty(ve)&&F!=null&&!u.hasOwnProperty(ve)&&et(n,s,ve,null,u,F);for($ in u)if(F=u[$],G=a[$],u.hasOwnProperty($)&&F!==G&&(F!=null||G!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:et(n,s,$,F,u,G)}return;default:if(al(s)){for(var tt in a)F=a[tt],a.hasOwnProperty(tt)&&F!==void 0&&!u.hasOwnProperty(tt)&&hp(n,s,tt,void 0,u,F);for(X in u)F=u[X],G=a[X],!u.hasOwnProperty(X)||F===G||F===void 0&&G===void 0||hp(n,s,X,F,u,G);return}}for(var V in a)F=a[V],a.hasOwnProperty(V)&&F!=null&&!u.hasOwnProperty(V)&&et(n,s,V,null,u,F);for(Z in u)F=u[Z],G=a[Z],!u.hasOwnProperty(Z)||F===G||F==null&&G==null||et(n,s,Z,F,u,G)}function Av(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var d=a[u],f=d.transferSize,_=d.initiatorType,T=d.duration;if(f&&T&&Av(_)){for(_=0,T=d.responseEnd,u+=1;u<a.length;u++){var O=a[u],$=O.startTime;if($>T)break;var X=O.transferSize,Z=O.initiatorType;X&&Av(Z)&&(O=O.responseEnd,_+=X*(O<T?1:(T-$)/(O-$)))}if(--u,s+=8*(f+_)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var dp=null,fp=null;function Jc(n){return n.nodeType===9?n:n.ownerDocument}function Rv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function pp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mp=null;function c1(){var n=window.event;return n&&n.type==="popstate"?n===mp?!1:(mp=n,!0):(mp=null,!1)}var Cv=typeof setTimeout=="function"?setTimeout:void 0,h1=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,d1=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(n){return Iv.resolve(null).then(n).catch(f1)}:Cv;function f1(n){setTimeout(function(){throw n})}function es(n){return n==="head"}function Ov(n,s){var a=s,u=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(d),ho(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")ql(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,ql(a);for(var f=a.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[Ui]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&ql(n.ownerDocument.body);a=d}while(a);ho(s)}function Nv(n,s){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function gp(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gp(a),ks(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function p1(n,s,a,u){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ui])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function m1(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Yn(n.nextSibling),n===null))return null;return n}function kv(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Yn(n.nextSibling),n===null))return null;return n}function yp(n){return n.data==="$?"||n.data==="$~"}function _p(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function g1(n,s){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var vp=null;function Dv(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(s===0)return Yn(n.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}n=n.nextSibling}return null}function jv(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return n;s--}else a!=="/$"&&a!=="/&"||s++}n=n.previousSibling}return null}function Pv(n,s,a){switch(s=Jc(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function ql(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ks(n)}var Qn=new Map,Mv=new Set;function Wc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ar=ae.d;ae.d={f:y1,r:_1,D:v1,C:b1,L:w1,m:E1,X:S1,S:T1,M:A1};function y1(){var n=ar.f(),s=$c();return n||s}function _1(n){var s=zi(n);s!==null&&s.tag===5&&s.type==="form"?Zy(s):ar.r(n)}var lo=typeof document>"u"?null:document;function Vv(n,s,a){var u=lo;if(u&&typeof s=="string"&&s){var d=mt(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Mv.has(d)||(Mv.add(d),n={rel:n,crossOrigin:a,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),Wt(s,"link",n),bt(s),u.head.appendChild(s)))}}function v1(n){ar.D(n),Vv("dns-prefetch",n,null)}function b1(n,s){ar.C(n,s),Vv("preconnect",n,s)}function w1(n,s,a){ar.L(n,s,a);var u=lo;if(u&&n&&s){var d='link[rel="preload"][as="'+mt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+mt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+mt(a.imageSizes)+'"]')):d+='[href="'+mt(n)+'"]';var f=d;switch(s){case"style":f=uo(n);break;case"script":f=co(n)}Qn.has(f)||(n=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Qn.set(f,n),u.querySelector(d)!==null||s==="style"&&u.querySelector($l(f))||s==="script"&&u.querySelector(Hl(f))||(s=u.createElement("link"),Wt(s,"link",n),bt(s),u.head.appendChild(s)))}}function E1(n,s){ar.m(n,s);var a=lo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+mt(u)+'"][href="'+mt(n)+'"]',f=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=co(n)}if(!Qn.has(f)&&(n=E({rel:"modulepreload",href:n},s),Qn.set(f,n),a.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hl(f)))return}u=a.createElement("link"),Wt(u,"link",n),bt(u),a.head.appendChild(u)}}}function T1(n,s,a){ar.S(n,s,a);var u=lo;if(u&&n){var d=ti(u).hoistableStyles,f=uo(n);s=s||"default";var _=d.get(f);if(!_){var T={loading:0,preload:null};if(_=u.querySelector($l(f)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Qn.get(f))&&bp(n,a);var O=_=u.createElement("link");bt(O),Wt(O,"link",n),O._p=new Promise(function($,X){O.onload=$,O.onerror=X}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Zc(_,s,u)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(f,_)}}}function S1(n,s){ar.X(n,s);var a=lo;if(a&&n){var u=ti(a).hoistableScripts,d=co(n),f=u.get(d);f||(f=a.querySelector(Hl(d)),f||(n=E({src:n,async:!0},s),(s=Qn.get(d))&&wp(n,s),f=a.createElement("script"),bt(f),Wt(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function A1(n,s){ar.M(n,s);var a=lo;if(a&&n){var u=ti(a).hoistableScripts,d=co(n),f=u.get(d);f||(f=a.querySelector(Hl(d)),f||(n=E({src:n,async:!0,type:"module"},s),(s=Qn.get(d))&&wp(n,s),f=a.createElement("script"),bt(f),Wt(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function Uv(n,s,a,u){var d=(d=Ie.current)?Wc(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=uo(a.href),a=ti(d).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=uo(a.href);var f=ti(d).hoistableStyles,_=f.get(n);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,_),(f=d.querySelector($l(n)))&&!f._p&&(_.instance=f,_.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),f||R1(d,n,a,_.state))),s&&u===null)throw Error(r(528,""));return _}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=co(a),a=ti(d).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function uo(n){return'href="'+mt(n)+'"'}function $l(n){return'link[rel="stylesheet"]['+n+"]"}function Lv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function R1(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Wt(s,"link",a),bt(s),n.head.appendChild(s))}function co(n){return'[src="'+mt(n)+'"]'}function Hl(n){return"script[async]"+n}function zv(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+mt(a.href)+'"]');if(u)return s.instance=u,bt(u),u;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),bt(u),Wt(u,"style",d),Zc(u,a.precedence,n),s.instance=u;case"stylesheet":d=uo(a.href);var f=n.querySelector($l(d));if(f)return s.state.loading|=4,s.instance=f,bt(f),f;u=Lv(a),(d=Qn.get(d))&&bp(u,d),f=(n.ownerDocument||n).createElement("link"),bt(f);var _=f;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),Wt(f,"link",u),s.state.loading|=4,Zc(f,a.precedence,n),s.instance=f;case"script":return f=co(a.src),(d=n.querySelector(Hl(f)))?(s.instance=d,bt(d),d):(u=a,(d=Qn.get(f))&&(u=E({},a),wp(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),bt(d),Wt(d,"link",u),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Zc(u,a.precedence,n));return s.instance}function Zc(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,f=d,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===s)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function bp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function wp(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var eh=null;function Bv(n,s,a){if(eh===null){var u=new Map,d=eh=new Map;d.set(a,u)}else d=eh,u=d.get(a),u||(u=new Map,d.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var f=a[d];if(!(f[Ui]||f[pt]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(s)||"";_=n+_;var T=u.get(_);T?T.push(f):u.set(_,[f])}}return u}function qv(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function x1(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $v(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function C1(n,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=uo(u.href),f=s.querySelector($l(d));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=th.bind(n),s.then(n,n)),a.state.loading|=4,a.instance=f,bt(f);return}f=s.ownerDocument||s,u=Lv(u),(d=Qn.get(d))&&bp(u,d),f=f.createElement("link"),bt(f);var _=f;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),Wt(f,"link",u),a.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=th.bind(n),s.addEventListener("load",a),s.addEventListener("error",a))}}var Ep=0;function I1(n,s){return n.stylesheets&&n.count===0&&ih(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4+s);0<n.imgBytes&&Ep===0&&(Ep=62500*u1());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ih(n,n.stylesheets),n.unsuspend)){var f=n.unsuspend;n.unsuspend=null,f()}},(n.imgBytes>Ep?50:800)+s);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function th(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ih(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var nh=null;function ih(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,nh=new Map,s.forEach(O1,n),nh=null,th.call(n))}function O1(n,s){if(!(s.state.loading&4)){var a=nh.get(n);if(a)var u=a.get(null);else{a=new Map,nh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),u=_)}u&&a.set(null,u)}d=s.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||u,f===u&&a.set(null,d),a.set(_,d),this.count++,u=th.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var Fl={$$typeof:H,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function N1(n,s,a,u,d,f,_,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Hv(n,s,a,u,d,f,_,T,O,$,X,Z){return n=new N1(n,s,a,_,O,$,X,Z,T),s=1,f===!0&&(s|=24),f=In(3,null,null,s),n.current=f,f.stateNode=n,s=ef(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:u,isDehydrated:a,cache:s},sf(f),n}function Fv(n){return n?(n=Ba,n):Ba}function Gv(n,s,a,u,d,f){d=Fv(d),u.context===null?u.context=d:u.pendingContext=d,u=$r(s),u.payload={element:a},f=f===void 0?null:f,f!==null&&(u.callback=f),a=Hr(n,u,s),a!==null&&(Sn(a,n,s),Tl(a,n,s))}function Kv(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Tp(n,s){Kv(n,s),(n=n.alternate)&&Kv(n,s)}function Yv(n){if(n.tag===13||n.tag===31){var s=Hs(n,67108864);s!==null&&Sn(s,n,67108864),Tp(n,67108864)}}function Qv(n){if(n.tag===13||n.tag===31){var s=jn();s=Zo(s);var a=Hs(n,s);a!==null&&Sn(a,n,s),Tp(n,s)}}var rh=!0;function k1(n,s,a,u){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=2,Sp(n,s,a,u)}finally{ae.p=f,Q.T=d}}function D1(n,s,a,u){var d=Q.T;Q.T=null;var f=ae.p;try{ae.p=8,Sp(n,s,a,u)}finally{ae.p=f,Q.T=d}}function Sp(n,s,a,u){if(rh){var d=Ap(u);if(d===null)cp(n,s,u,sh,a),Jv(n,u);else if(P1(d,n,s,a,u))u.stopPropagation();else if(Jv(n,u),s&4&&-1<j1.indexOf(n)){for(;d!==null;){var f=zi(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=ei(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-dn(_);T.entanglements[1]|=O,_&=~O}Ti(f),(Ye&6)===0&&(Bc=Gt()+500,Ll(0))}}break;case 31:case 13:T=Hs(f,2),T!==null&&Sn(T,f,2),$c(),Tp(f,2)}if(f=Ap(u),f===null&&cp(n,s,u,sh,a),f===d)break;d=f}d!==null&&u.stopPropagation()}else cp(n,s,u,null,a)}}function Ap(n){return n=Da(n),Rp(n)}var sh=null;function Rp(n){if(sh=null,n=Li(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===31){if(n=p(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return sh=n,null}function Xv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uu()){case Dt:return 2;case Lt:return 8;case Pi:case Lu:return 32;case Qo:return 268435456;default:return 32}default:return 32}}var xp=!1,ts=null,ns=null,is=null,Gl=new Map,Kl=new Map,rs=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jv(n,s){switch(n){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":Gl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(s.pointerId)}}function Yl(n,s,a,u,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},s!==null&&(s=zi(s),s!==null&&Yv(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function P1(n,s,a,u,d){switch(s){case"focusin":return ts=Yl(ts,n,s,a,u,d),!0;case"dragenter":return ns=Yl(ns,n,s,a,u,d),!0;case"mouseover":return is=Yl(is,n,s,a,u,d),!0;case"pointerover":var f=d.pointerId;return Gl.set(f,Yl(Gl.get(f)||null,n,s,a,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Kl.set(f,Yl(Kl.get(f)||null,n,s,a,u,d)),!0}return!1}function Wv(n){var s=Li(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,Bu(n.priority,function(){Qv(a)});return}}else if(s===31){if(s=p(a),s!==null){n.blockedOn=s,Bu(n.priority,function(){Qv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ah(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ap(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);ka=u,a.target.dispatchEvent(u),ka=null}else return s=zi(a),s!==null&&Yv(s),n.blockedOn=a,!1;s.shift()}return!0}function Zv(n,s,a){ah(n)&&a.delete(s)}function M1(){xp=!1,ts!==null&&ah(ts)&&(ts=null),ns!==null&&ah(ns)&&(ns=null),is!==null&&ah(is)&&(is=null),Gl.forEach(Zv),Kl.forEach(Zv)}function oh(n,s){n.blockedOn===s&&(n.blockedOn=null,xp||(xp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,M1)))}var lh=null;function e0(n){lh!==n&&(lh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){lh===n&&(lh=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],d=n[s+2];if(typeof u!="function"){if(Rp(u||a)===null)continue;break}var f=zi(a);f!==null&&(n.splice(s,3),s-=3,Af(f,{pending:!0,data:d,method:a.method,action:u},u,d))}}))}function ho(n){function s(O){return oh(O,n)}ts!==null&&oh(ts,n),ns!==null&&oh(ns,n),is!==null&&oh(is,n),Gl.forEach(s),Kl.forEach(s);for(var a=0;a<rs.length;a++){var u=rs[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<rs.length&&(a=rs[0],a.blockedOn===null);)Wv(a),a.blockedOn===null&&rs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var d=a[u],f=a[u+1],_=d[Yt]||null;if(typeof f=="function")_||e0(a);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[Yt]||null)T=_.formAction;else if(Rp(d)!==null)continue}else T=_.action;typeof T=="function"?a[u+1]=T:(a.splice(u,3),u-=3),e0(a)}}}function t0(){function n(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Cp(n){this._internalRoot=n}uh.prototype.render=Cp.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,u=jn();Gv(a,u,n,s,null,null)},uh.prototype.unmount=Cp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Gv(n.current,2,null,n,null,null),$c(),s[pi]=null}};function uh(n){this._internalRoot=n}uh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Vi();n={blockedOn:null,target:n,priority:s};for(var a=0;a<rs.length&&s!==0&&s<rs[a].priority;a++);rs.splice(a,0,n),a===0&&Wv(n)}};var n0=e.version;if(n0!=="19.2.3")throw Error(r(527,n0,"19.2.3"));ae.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var V1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ch=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ch.isDisabled&&ch.supportsFiber)try{_r=ch.inject(V1),sn=ch}catch{}}return Xl.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,u="",d=u_,f=c_,_=h_;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Hv(n,1,!1,null,null,a,u,null,d,f,_,t0),n[pi]=s.current,up(n),new Cp(s)},Xl.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var u=!1,d="",f=u_,_=c_,T=h_,O=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),s=Hv(n,1,!0,s,a??null,u,d,O,f,_,T,t0),s.context=Fv(null),a=s.current,u=jn(),u=Zo(u),d=$r(u),d.callback=null,Hr(a,d,u),a=u,s.current.lanes=a,wr(s,a),Ti(s),n[pi]=s.current,up(n),new uh(s)},Xl.version="19.2.3",Xl}var d0;function Y1(){if(d0)return Np.exports;d0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Np.exports=K1(),Np.exports}var Q1=Y1();const X1=gw(Q1);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W1=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),f0=i=>{const e=W1(i);return e.charAt(0).toUpperCase()+e.slice(1)},yw=(...i)=>i.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Z1=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ke.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...p},m)=>ke.createElement("svg",{ref:m,...eA,width:e,height:e,stroke:i,strokeWidth:r?Number(t)*24/Number(e):t,className:yw("lucide",o),...!l&&!Z1(p)&&{"aria-hidden":"true"},...p},[...c.map(([g,b])=>ke.createElement(g,b)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(i,e)=>{const t=ke.forwardRef(({className:r,...o},l)=>ke.createElement(tA,{ref:l,iconNode:e,className:yw(`lucide-${J1(f0(i))}`,`lucide-${i}`,r),...o}));return t.displayName=f0(i),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],iA=He("activity",nA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],am=He("bell",rA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],aA=He("camera",sA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],om=He("check",oA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uA=He("chevron-down",lA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hA=He("chevron-right",cA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fA=He("circle-alert",dA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],p0=He("clock",pA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_w=He("copy",mA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],vw=He("cpu",gA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_A=He("database",yA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bA=He("globe",vA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],m0=He("info",wA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],TA=He("key",EA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Pp=He("loader-circle",SA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],g0=He("lock",AA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xA=He("menu",RA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],IA=He("message-square",CA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],jh=He("monitor",OA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bw=He("plus",NA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],DA=He("radio",kA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ph=He("refresh-cw",jA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],MA=He("save",PA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],UA=He("server",VA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zA=He("shield-check",LA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],qA=He("smartphone",BA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],HA=He("terminal",$A);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],GA=He("trash-2",FA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],YA=He("triangle-alert",KA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XA=He("user",QA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],WA=He("wifi-off",JA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],eR=He("wifi",ZA);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],y0=He("x",tR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ww=He("zap",nR);var ct=(i=>(i.PROFILE="PROFILE",i.SECURITY="SECURITY",i.DEVICES="DEVICES",i.TELEMETRY="TELEMETRY",i.UPLINK="UPLINK",i.NOTIFICATIONS="NOTIFICATIONS",i))(ct||{});const iR=()=>{};var _0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},rR=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=i[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=i[t++],c=i[t++],p=i[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const l=i[o],c=o+1<i.length,p=c?i[o+1]:0,m=o+2<i.length,g=m?i[o+2]:0,b=l>>2,E=(l&3)<<4|p>>4;let S=(p&15)<<2|g>>6,x=g&63;m||(x=64,c||(S=64)),r.push(t[b],t[E],t[S],t[x])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ew(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):rR(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const l=t[i.charAt(o++)],p=o<i.length?t[i.charAt(o)]:0;++o;const g=o<i.length?t[i.charAt(o)]:64;++o;const E=o<i.length?t[i.charAt(o)]:64;if(++o,l==null||p==null||g==null||E==null)throw new sR;const S=l<<2|p>>4;if(r.push(S),g!==64){const x=p<<4&240|g>>2;if(r.push(x),E!==64){const j=g<<6&192|E;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class sR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aR=function(i){const e=Ew(i);return Tw.encodeByteArray(e,!0)},Mh=function(i){return aR(i).replace(/\./g,"")},Sw=function(i){try{return Tw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=()=>oR().__FIREBASE_DEFAULTS__,uR=()=>{if(typeof process>"u"||typeof _0>"u")return;const i=_0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},cR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Sw(i[1]);return e&&JSON.parse(e)},sd=()=>{try{return iR()||lR()||uR()||cR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Aw=i=>{var e,t;return(t=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},hR=i=>{const e=Aw(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Rw=()=>{var i;return(i=sd())===null||i===void 0?void 0:i.config},xw=i=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cw(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Mh(JSON.stringify(t)),Mh(JSON.stringify(c)),""].join(".")}const nu={};function pR(){const i={prod:[],emulator:[]};for(const e of Object.keys(nu))nu[e]?i.emulator.push(e):i.prod.push(e);return i}function mR(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let v0=!1;function Iw(i,e){if(typeof window>"u"||typeof document>"u"||!Bo(window.location.host)||nu[i]===e||nu[i]||v0)return;nu[i]=e;function t(S){return`__firebase__banner__${S}`}const r="__firebase__banner",l=pR().prod.length>0;function c(){const S=document.getElementById(r);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{v0=!0,c()},S}function b(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=mR(r),x=t("text"),j=document.getElementById(x)||document.createElement("span"),z=t("learnmore"),q=document.getElementById(z)||document.createElement("a"),J=t("preprendIcon"),te=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const H=S.element;p(H),b(q,z);const re=g();m(te,J),H.append(te,j,q,re),document.body.appendChild(H)}l?(j.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function yR(){var i;const e=(i=sd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _R(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vR(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function bR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wR(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ER(){return!yR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TR(){try{return typeof indexedDB=="object"}catch{return!1}}function SR(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="FirebaseError";class gr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=AR,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?RR(l,r):"Error",p=`${this.serviceName}: ${c} (${o}).`;return new gr(o,p,r)}}function RR(i,e){return i.replace(xR,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const xR=/\{\$([^}]+)}/g;function CR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=i[o],c=e[o];if(b0(l)&&b0(c)){if(!fa(l,c))return!1}else if(l!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function b0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IR(i,e){const t=new OR(i,e);return t.subscribe.bind(t)}class OR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");NR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Mp),o.error===void 0&&(o.error=Mp),o.complete===void 0&&(o.complete=Mp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NR(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(i){return i&&i._delegate?i._delegate:i}class pa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new dR;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jR(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);r===p&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DR(i){return i===sa?void 0:i}function jR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ue||(Ue={}));const MR={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},VR=Ue.INFO,UR={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},LR=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=UR[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=VR,this._logHandler=LR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const zR=(i,e)=>e.some(t=>i instanceof t);let w0,E0;function BR(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qR(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,lm=new WeakMap,Nw=new WeakMap,Vp=new WeakMap,Gm=new WeakMap;function $R(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(ps(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ow.set(t,i)}).catch(()=>{}),Gm.set(e,i),e}function HR(i){if(lm.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});lm.set(i,e)}let um={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return lm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Nw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ps(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function FR(i){um=i(um)}function GR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Up(this),e,...t);return Nw.set(r,e.sort?e.sort():[e]),ps(r)}:qR().includes(i)?function(...e){return i.apply(Up(this),e),ps(Ow.get(this))}:function(...e){return ps(i.apply(Up(this),e))}}function KR(i){return typeof i=="function"?GR(i):(i instanceof IDBTransaction&&HR(i),zR(i,BR())?new Proxy(i,um):i)}function ps(i){if(i instanceof IDBRequest)return $R(i);if(Vp.has(i))return Vp.get(i);const e=KR(i);return e!==i&&(Vp.set(i,e),Gm.set(e,i)),e}const Up=i=>Gm.get(i);function YR(i,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const c=indexedDB.open(i,e),p=ps(c);return r&&c.addEventListener("upgradeneeded",m=>{r(ps(c.result),m.oldVersion,m.newVersion,ps(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const QR=["get","getKey","getAll","getAllKeys","count"],XR=["put","add","delete","clear"],Lp=new Map;function T0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=XR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||QR.includes(t)))return;const l=async function(c,...p){const m=this.transaction(c,o?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),o&&m.done]))[0]};return Lp.set(e,l),l}FR(i=>({...i,get:(e,t,r)=>T0(e,t)||i.get(e,t,r),has:(e,t)=>!!T0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cm="@firebase/app",S0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Fm("@firebase/app"),ZR="@firebase/app-compat",ex="@firebase/analytics-compat",tx="@firebase/analytics",nx="@firebase/app-check-compat",ix="@firebase/app-check",rx="@firebase/auth",sx="@firebase/auth-compat",ax="@firebase/database",ox="@firebase/data-connect",lx="@firebase/database-compat",ux="@firebase/functions",cx="@firebase/functions-compat",hx="@firebase/installations",dx="@firebase/installations-compat",fx="@firebase/messaging",px="@firebase/messaging-compat",mx="@firebase/performance",gx="@firebase/performance-compat",yx="@firebase/remote-config",_x="@firebase/remote-config-compat",vx="@firebase/storage",bx="@firebase/storage-compat",wx="@firebase/firestore",Ex="@firebase/ai",Tx="@firebase/firestore-compat",Sx="firebase",Ax="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="[DEFAULT]",Rx={[cm]:"fire-core",[ZR]:"fire-core-compat",[tx]:"fire-analytics",[ex]:"fire-analytics-compat",[ix]:"fire-app-check",[nx]:"fire-app-check-compat",[rx]:"fire-auth",[sx]:"fire-auth-compat",[ax]:"fire-rtdb",[ox]:"fire-data-connect",[lx]:"fire-rtdb-compat",[ux]:"fire-fn",[cx]:"fire-fn-compat",[hx]:"fire-iid",[dx]:"fire-iid-compat",[fx]:"fire-fcm",[px]:"fire-fcm-compat",[mx]:"fire-perf",[gx]:"fire-perf-compat",[yx]:"fire-rc",[_x]:"fire-rc-compat",[vx]:"fire-gcs",[bx]:"fire-gcs-compat",[wx]:"fire-fst",[Tx]:"fire-fst-compat",[Ex]:"fire-vertex","fire-js":"fire-js",[Sx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,xx=new Map,dm=new Map;function A0(i,e){try{i.container.addComponent(e)}catch(t){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function jo(i){const e=i.name;if(dm.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;dm.set(e,i);for(const t of Vh.values())A0(t,i);for(const t of xx.values())A0(t,i);return!0}function Km(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Ai(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Ru("app","Firebase",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=Ax;function ad(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ms.create("bad-app-name",{appName:String(o)});if(t||(t=Rw()),!t)throw ms.create("no-options");const l=Vh.get(o);if(l){if(fa(t,l.options)&&fa(r,l.config))return l;throw ms.create("duplicate-app",{appName:o})}const c=new PR(o);for(const m of dm.values())c.addComponent(m);const p=new Ix(t,r,c);return Vh.set(o,p),p}function kw(i=hm){const e=Vh.get(i);if(!e&&i===hm&&Rw())return ad();if(!e)throw ms.create("no-app",{appName:i});return e}function gs(i,e,t){var r;let o=(r=Rx[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const p=[`Unable to register library "${o}" with version "${e}":`];l&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(p.join(" "));return}jo(new pa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firebase-heartbeat-database",Nx=1,cu="firebase-heartbeat-store";let zp=null;function Dw(){return zp||(zp=YR(Ox,Nx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(i=>{throw ms.create("idb-open",{originalErrorMessage:i.message})})),zp}async function kx(i){try{const t=(await Dw()).transaction(cu),r=await t.objectStore(cu).get(jw(i));return await t.done,r}catch(e){if(e instanceof gr)hr.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(t.message)}}}async function R0(i,e){try{const r=(await Dw()).transaction(cu,"readwrite");await r.objectStore(cu).put(e,jw(i)),await r.done}catch(t){if(t instanceof gr)hr.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hr.warn(r.message)}}}function jw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=1024,jx=30;class Px{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Vx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=x0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>jx){const c=Ux(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=x0(),{heartbeatsToSend:r,unsentEntries:o}=Mx(this._heartbeatsCache.heartbeats),l=Mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hr.warn(t),""}}}function x0(){return new Date().toISOString().substring(0,10)}function Mx(i,e=Dx){const t=[];let r=i.slice();for(const o of i){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),C0(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),C0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Vx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TR()?SR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return R0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function C0(i){return Mh(JSON.stringify({version:2,heartbeats:i})).length}function Ux(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(i){jo(new pa("platform-logger",e=>new JR(e),"PRIVATE")),jo(new pa("heartbeat",e=>new Px(e),"PRIVATE")),gs(cm,S0,i),gs(cm,S0,"esm2017"),gs("fire-js","")}Lx("");var zx="firebase",Bx="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(zx,Bx,"app");function _a(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function qx(i,e,t,r){function o(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function p(b){try{g(r.next(b))}catch(E){c(E)}}function m(b){try{g(r.throw(b))}catch(E){c(E)}}function g(b){b.done?l(b.value):o(b.value).then(p,m)}g((r=r.apply(i,e||[])).next())})}function Pw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $x=Pw,Mw=new Ru("auth","Firebase",Pw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Fm("@firebase/auth");function Hx(i,...e){Uh.logLevel<=Ue.WARN&&Uh.warn(`Auth (${qo}): ${i}`,...e)}function Th(i,...e){Uh.logLevel<=Ue.ERROR&&Uh.error(`Auth (${qo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(i,...e){throw Ym(i,...e)}function Ri(i,...e){return Ym(i,...e)}function Vw(i,e,t){const r=Object.assign(Object.assign({},$x()),{[e]:t});return new Ru("auth","Firebase",r).create(e,{appName:i.name})}function ha(i){return Vw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ym(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Mw.create(i,...e)}function Se(i,e,...t){if(!i)throw Ym(e,...t)}function lr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Th(e),new Error(e)}function fr(i,e){i||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Fx(){return I0()==="http:"||I0()==="https:"}function I0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fx()||vR()||"connection"in navigator)?navigator.onLine:!0}function Kx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t){this.shortDelay=e,this.longDelay=t,fr(t>e,"Short delay should be less than long delay!"),this.isMobile=gR()||bR()}get(){return Gx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i,e){fr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Xx=new Cu(3e4,6e4);function Xm(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function $o(i,e,t,r,o={}){return Lw(i,o,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const p=xu(Object.assign({key:i.config.apiKey},c)).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:m},l);return _R()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(g.credentials="include"),Uw.fetch()(await zw(i,i.config.apiHost,t,p),g)})}async function Lw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},Yx),e);try{const o=new Wx(i),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw hh(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const p=l.ok?c.errorMessage:c.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw hh(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw hh(i,"user-disabled",c);const b=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Vw(i,b,g);dr(i,b)}}catch(o){if(o instanceof gr)throw o;dr(i,"network-request-failed",{message:String(o)})}}async function Jx(i,e,t,r,o={}){const l=await $o(i,e,t,r,o);return"mfaPendingCredential"in l&&dr(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function zw(i,e,t,r){const o=`${e}${t}?${r}`,l=i,c=l.config.emulator?Qm(i.config,o):`${i.config.apiScheme}://${o}`;return Qx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class Wx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ri(this.auth,"network-request-failed")),Xx.get())})}}function hh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Ri(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(i,e){return $o(i,"POST","/v1/accounts:delete",e)}async function Lh(i,e){return $o(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eC(i,e=!1){const t=Wn(i),r=await t.getIdToken(e),o=Jm(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:r,authTime:iu(Bp(o.auth_time)),issuedAtTime:iu(Bp(o.iat)),expirationTime:iu(Bp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Bp(i){return Number(i)*1e3}function Jm(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Th("JWT malformed, contained fewer than 3 sections"),null;try{const o=Sw(t);return o?JSON.parse(o):(Th("Failed to decode base64 JWT payload"),null)}catch(o){return Th("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function O0(i){const e=Jm(i);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gr&&tC(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function tC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(i){var e;const t=i.auth,r=await i.getIdToken(),o=await hu(i,Lh(t,{idToken:r}));Se(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];i._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Bw(l.providerUserInfo):[],p=rC(i.providerData,c),m=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!(p!=null&&p.length),b=m?g:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:p,metadata:new pm(l.createdAt,l.lastLoginAt),isAnonymous:b};Object.assign(i,E)}async function iC(i){const e=Wn(i);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rC(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Bw(i){return i.map(e=>{var{providerId:t}=e,r=_a(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(i,e){const t=await Lw(i,{},async()=>{const r=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=i.config,c=await zw(i,o,"/v1/token",`key=${l}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:r};return i.emulatorConfig&&Bo(i.emulatorConfig.host)&&(m.credentials="include"),Uw.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aC(i,e){return $o(i,"POST","/v2/accounts:revokeToken",Xm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=O0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await sC(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,c=new Co;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(i,e){Se(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=_a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new pm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eC(this,e)}reload(){return iC(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(ha(this.auth));const e=await this.getIdToken();return await hu(this,Zx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,c,p,m,g,b;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,x=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,j=(c=t.photoURL)!==null&&c!==void 0?c:void 0,z=(p=t.tenantId)!==null&&p!==void 0?p:void 0,q=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,J=(g=t.createdAt)!==null&&g!==void 0?g:void 0,te=(b=t.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:H,emailVerified:re,isAnonymous:ge,providerData:ce,stsTokenManager:I}=t;Se(H&&I,e,"internal-error");const R=Co.fromJSON(this.name,I);Se(typeof H=="string",e,"internal-error"),as(E,e.name),as(S,e.name),Se(typeof re=="boolean",e,"internal-error"),Se(typeof ge=="boolean",e,"internal-error"),as(x,e.name),as(j,e.name),as(z,e.name),as(q,e.name),as(J,e.name),as(te,e.name);const C=new ui({uid:H,auth:e,email:S,emailVerified:re,displayName:E,isAnonymous:ge,photoURL:j,phoneNumber:x,tenantId:z,stsTokenManager:R,createdAt:J,lastLoginAt:te});return ce&&Array.isArray(ce)&&(C.providerData=ce.map(P=>Object.assign({},P))),q&&(C._redirectEventId=q),C}static async _fromIdTokenResponse(e,t,r=!1){const o=new Co;o.updateFromServerResponse(t);const l=new ui({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await zh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Bw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),p=new Co;p.updateFromIdToken(r);const m=new ui({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new pm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;function ur(i){fr(i instanceof Function,"Expected a class definition");let e=N0.get(i);return e?(fr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,N0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qw.type="NONE";const k0=qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(i,e,t){return`firebase:${i}:${e}:${t}`}class Io{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Sh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lh(this.auth,{idToken:e}).catch(()=>{});return t?ui._fromGetAccountInfoResponse(this.auth,t,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Io(ur(k0),e,r);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ur(k0);const c=Sh(r,e.config.apiKey,e.name);let p=null;for(const g of t)try{const b=await g._get(c);if(b){let E;if(typeof b=="string"){const S=await Lh(e,{idToken:b}).catch(()=>{});if(!S)break;E=await ui._fromGetAccountInfoResponse(e,S,b)}else E=ui._fromJSON(e,b);g!==l&&(p=E),l=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Io(l,e,r):(l=m[0],p&&await l._set(c,p.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Io(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yw(e))return"Blackberry";if(Qw(e))return"Webos";if(Hw(e))return"Safari";if((e.includes("chrome/")||Fw(e))&&!e.includes("edge/"))return"Chrome";if(Kw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $w(i=hn()){return/firefox\//i.test(i)}function Hw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fw(i=hn()){return/crios\//i.test(i)}function Gw(i=hn()){return/iemobile/i.test(i)}function Kw(i=hn()){return/android/i.test(i)}function Yw(i=hn()){return/blackberry/i.test(i)}function Qw(i=hn()){return/webos/i.test(i)}function Wm(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function oC(i=hn()){var e;return Wm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lC(){return wR()&&document.documentMode===10}function Xw(i=hn()){return Wm(i)||Kw(i)||Qw(i)||Yw(i)||/windows phone/i.test(i)||Gw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(i,e=[]){let t;switch(i){case"Browser":t=D0(hn());break;case"Worker":t=`${D0(hn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,p)=>{try{const m=e(l);c(m)}catch(m){p(m)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(i,e={}){return $o(i,"GET","/v2/passwordPolicy",Xm(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=6;class dC{constructor(e){var t,r,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:hC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,c,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new uC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lh(this,{idToken:e}),r=await ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(p,p))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,p=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===p)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(ha(this));const t=e?Wn(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cC(this),t=new dC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(p,this,"internal-error"),p.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,o);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Hx(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Zm(i){return Wn(i)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=IR(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pC(i){eg=i}function mC(i){return eg.loadJS(i)}function gC(){return eg.gapiScript}function yC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(i,e){const t=Km(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fa(l,e??{}))return o;dr(o,"already-initialized")}return t.initialize({options:e})}function vC(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ur);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bC(i,e,t){const r=Zm(i);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=Ww(e),{host:c,port:p}=wC(e),m=p===null?"":`:${p}`,g={url:`${l}//${c}${m}/`},b=Object.freeze({host:c,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(fa(g,r.config.emulator)&&fa(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Bo(c)?(Cw(`${l}//${c}${m}`),Iw("Auth",!0)):EC()}function Ww(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function wC(i){const e=Ww(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:P0(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:P0(c)}}}function P0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function EC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(i,e){return Jx(i,"POST","/v1/accounts:signInWithIdp",Xm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="http://localhost";class ma extends Zw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,l=_a(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new ma(r,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:TC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends eE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Iu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ma._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return us.credential(t,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Iu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Iu{constructor(){super("twitter.com")}static credential(e,t){return ma._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hs.credential(t,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await ui._fromIdTokenResponse(e,r,o),c=M0(r);return new Po({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=M0(r);return new Po({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function M0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends gr{constructor(e,t,r,o){var l;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Bh(e,t,r,o)}}function tE(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(i,l,e,r):l})}async function SC(i,e,t=!1){const r=await hu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Po._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(i,e,t=!1){const{auth:r}=i;if(Ai(r.app))return Promise.reject(ha(r));const o="reauthenticate";try{const l=await hu(i,tE(r,o,e,i),t);Se(l.idToken,r,"internal-error");const c=Jm(l.idToken);Se(c,r,"internal-error");const{sub:p}=c;return Se(i.uid===p,r,"user-mismatch"),Po._forOperation(i,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(i,e,t=!1){if(Ai(i.app))return Promise.reject(ha(i));const r="signIn",o=await tE(i,r,e),l=await Po._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(l.user),l}function xC(i,e,t,r){return Wn(i).onIdTokenChanged(e,t,r)}function CC(i,e,t){return Wn(i).beforeAuthStateChanged(e,t)}function tg(i,e,t,r){return Wn(i).onAuthStateChanged(e,t,r)}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1e3,OC=10;class iE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,p,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);lC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,OC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iE.type="LOCAL";const NC=iE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rE.type="SESSION";const sE=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(c).map(async g=>g(t.origin,l)),m=await kC(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((p,m)=>{const g=ng("",20);o.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(S.data.response);break;default:clearTimeout(b),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(){return window}function jC(i){xi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof xi().WorkerGlobalScope<"u"&&typeof xi().importScripts=="function"}async function PC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function VC(){return aE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firebaseLocalStorageDb",UC=1,$h="firebaseLocalStorage",lE="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ld(i,e){return i.transaction([$h],e?"readwrite":"readonly").objectStore($h)}function LC(){const i=indexedDB.deleteDatabase(oE);return new Ou(i).toPromise()}function mm(){const i=indexedDB.open(oE,UC);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore($h,{keyPath:lE})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains($h)?e(r):(r.close(),await LC(),e(await mm()))})})}async function V0(i,e,t){const r=ld(i,!0).put({[lE]:e,value:t});return new Ou(r).toPromise()}async function zC(i,e){const t=ld(i,!1).get(e),r=await new Ou(t).toPromise();return r===void 0?null:r.value}function U0(i,e){const t=ld(i,!0).delete(e);return new Ou(t).toPromise()}const BC=800,qC=3;class uE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>qC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(VC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await PC(),!this.activeServiceWorker)return;this.sender=new DC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await V0(e,qh,"1"),await U0(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>U0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ld(o,!1).getAll();return new Ou(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uE.type="LOCAL";const $C=uE;new Cu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(i,e){return e?ur(e):(Se(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends Zw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FC(i){return RC(i.auth,new ig(i),i.bypassAuthState)}function GC(i){const{auth:e,user:t}=i;return Se(t,e,"internal-error"),AC(t,new ig(i),i.bypassAuthState)}async function KC(i){const{auth:e,user:t}=i;return Se(t,e,"internal-error"),SC(t,new ig(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:c,type:p}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FC;case"linkViaPopup":case"linkViaRedirect":return KC;case"reauthViaPopup":case"reauthViaRedirect":return GC;default:dr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new Cu(2e3,1e4);class Ro extends cE{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YC.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="pendingRedirect",Ah=new Map;class XC extends cE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const r=await JC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JC(i,e){const t=eI(e),r=ZC(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function WC(i,e){Ah.set(i._key(),e)}function ZC(i){return ur(i._redirectPersistence)}function eI(i){return Sh(QC,i.config.apiKey,i.name)}async function tI(i,e,t=!1){if(Ai(i.app))return Promise.reject(ha(i));const r=Zm(i),o=HC(r,e),c=await new XC(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=600*1e3;class iI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hE(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ri(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nI&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}}function L0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function hE({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(i,e={}){return $o(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oI=/^https?/;async function lI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await sI(i);for(const t of e)try{if(uI(t))return}catch{}dr(i,"unauthorized-domain")}function uI(i){const e=fm(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!oI.test(t))return!1;if(aI.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Cu(3e4,6e4);function z0(){const i=xi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function hI(i){return new Promise((e,t)=>{var r,o,l;function c(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),t(Ri(i,"network-request-failed"))},timeout:cI.get()})}if(!((o=(r=xi().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=xi().gapi)===null||l===void 0)&&l.load)c();else{const p=yC("iframefcb");return xi()[p]=()=>{gapi.load?c():t(Ri(i,"network-request-failed"))},mC(`${gC()}?onload=${p}`).catch(m=>t(m))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function dI(i){return Rh=Rh||hI(i),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Cu(5e3,15e3),pI="__/auth/iframe",mI="emulator/auth/iframe",gI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _I(i){const e=i.config;Se(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Qm(e,mI):`https://${i.config.authDomain}/${pI}`,r={apiKey:e.apiKey,appName:i.name,v:qo},o=yI.get(i.config.apiHost);o&&(r.eid=o);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${xu(r).slice(1)}`}async function vI(i){const e=await dI(i),t=xi().gapi;return Se(t,i,"internal-error"),e.open({where:document.body,url:_I(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gI,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ri(i,"network-request-failed"),p=xi().setTimeout(()=>{l(c)},fI.get());function m(){xi().clearTimeout(p),o(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wI=500,EI=600,TI="_blank",SI="http://localhost";class B0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AI(i,e,t,r=wI,o=EI){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const m=Object.assign(Object.assign({},bI),{width:r.toString(),height:o.toString(),top:l,left:c}),g=hn().toLowerCase();t&&(p=Fw(g)?TI:t),$w(g)&&(e=e||SI,m.scrollbars="yes");const b=Object.entries(m).reduce((S,[x,j])=>`${S}${x}=${j},`,"");if(oC(g)&&p!=="_self")return RI(e||"",p),new B0(null);const E=window.open(e||"",p,b);Se(E,i,"popup-blocked");try{E.focus()}catch{}return new B0(E)}function RI(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="__/auth/handler",CI="emulator/auth/handler",II=encodeURIComponent("fac");async function q0(i,e,t,r,o,l){Se(i.config.authDomain,i,"auth-domain-config-required"),Se(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:qo,eventId:o};if(e instanceof eE){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",CR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof Iu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}i.tenantId&&(c.tid=i.tenantId);const p=c;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const m=await i._getAppCheckToken(),g=m?`#${II}=${encodeURIComponent(m)}`:"";return`${OI(i)}?${xu(p).slice(1)}${g}`}function OI({config:i}){return i.emulator?Qm(i,CI):`https://${i.authDomain}/${xI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="webStorageSupport";class NI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=tI,this._overrideRedirectResult=WC}async _openPopup(e,t,r,o){var l;fr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await q0(e,t,r,fm(),o);return AI(e,c,ng())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await q0(e,t,r,fm(),o);return jC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vI(e),r=new iI(e);return t.register("authEvent",o=>(Se(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qp,{type:qp},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[qp];c!==void 0&&t(!!c),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Xw()||Hw()||Wm()}}const kI=NI;var $0="@firebase/auth",H0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PI(i){jo(new pa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:p}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jw(i)},g=new fC(r,o,l,m);return vC(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jo(new pa("auth-internal",e=>{const t=Zm(e.getProvider("auth").getImmediate());return(r=>new DI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs($0,H0,jI(i)),gs($0,H0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=300,VI=xw("authIdTokenMaxAge")||MI;let F0=null;const UI=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VI)return;const o=t==null?void 0:t.token;F0!==o&&(F0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rg(i=kw()){const e=Km(i,"auth");if(e.isInitialized())return e.getImmediate();const t=_C(i,{popupRedirectResolver:kI,persistence:[$C,NC,sE]}),r=xw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=UI(l.toString());CC(t,c,()=>c(t.currentUser)),xC(t,p=>c(p))}}const o=Aw("auth");return o&&bC(t,`http://${o}`),t}function LI(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}pC({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const l=Ri("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",LI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PI("Browser");var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,dE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function C(){}C.prototype=R.prototype,I.D=R.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(P,M,U){for(var N=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)N[vt-2]=arguments[vt];return R.prototype[M].apply(P,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,C){C||(C=0);var P=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)P[M]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(M=0;16>M;++M)P[M]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=I.g[0],C=I.g[1],M=I.g[2];var U=I.g[3],N=R+(U^C&(M^U))+P[0]+3614090360&4294967295;R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+P[1]+3905402710&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+P[2]+606105819&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+P[3]+3250441966&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+P[4]+4118548399&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+P[5]+1200080426&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+P[6]+2821735955&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+P[7]+4249261313&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+P[8]+1770035416&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+P[9]+2336552879&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+P[10]+4294925233&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+P[11]+2304563134&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(U^C&(M^U))+P[12]+1804603682&4294967295,R=C+(N<<7&4294967295|N>>>25),N=U+(M^R&(C^M))+P[13]+4254626195&4294967295,U=R+(N<<12&4294967295|N>>>20),N=M+(C^U&(R^C))+P[14]+2792965006&4294967295,M=U+(N<<17&4294967295|N>>>15),N=C+(R^M&(U^R))+P[15]+1236535329&4294967295,C=M+(N<<22&4294967295|N>>>10),N=R+(M^U&(C^M))+P[1]+4129170786&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+P[6]+3225465664&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+P[11]+643717713&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+P[0]+3921069994&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+P[5]+3593408605&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+P[10]+38016083&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+P[15]+3634488961&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+P[4]+3889429448&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+P[9]+568446438&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+P[14]+3275163606&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+P[3]+4107603335&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+P[8]+1163531501&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(M^U&(C^M))+P[13]+2850285829&4294967295,R=C+(N<<5&4294967295|N>>>27),N=U+(C^M&(R^C))+P[2]+4243563512&4294967295,U=R+(N<<9&4294967295|N>>>23),N=M+(R^C&(U^R))+P[7]+1735328473&4294967295,M=U+(N<<14&4294967295|N>>>18),N=C+(U^R&(M^U))+P[12]+2368359562&4294967295,C=M+(N<<20&4294967295|N>>>12),N=R+(C^M^U)+P[5]+4294588738&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+P[8]+2272392833&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+P[11]+1839030562&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+P[14]+4259657740&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+P[1]+2763975236&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+P[4]+1272893353&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+P[7]+4139469664&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+P[10]+3200236656&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+P[13]+681279174&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+P[0]+3936430074&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+P[3]+3572445317&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+P[6]+76029189&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(C^M^U)+P[9]+3654602809&4294967295,R=C+(N<<4&4294967295|N>>>28),N=U+(R^C^M)+P[12]+3873151461&4294967295,U=R+(N<<11&4294967295|N>>>21),N=M+(U^R^C)+P[15]+530742520&4294967295,M=U+(N<<16&4294967295|N>>>16),N=C+(M^U^R)+P[2]+3299628645&4294967295,C=M+(N<<23&4294967295|N>>>9),N=R+(M^(C|~U))+P[0]+4096336452&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+P[7]+1126891415&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+P[14]+2878612391&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+P[5]+4237533241&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+P[12]+1700485571&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+P[3]+2399980690&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+P[10]+4293915773&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+P[1]+2240044497&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+P[8]+1873313359&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+P[15]+4264355552&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+P[6]+2734768916&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+P[13]+1309151649&4294967295,C=M+(N<<21&4294967295|N>>>11),N=R+(M^(C|~U))+P[4]+4149444226&4294967295,R=C+(N<<6&4294967295|N>>>26),N=U+(C^(R|~M))+P[11]+3174756917&4294967295,U=R+(N<<10&4294967295|N>>>22),N=M+(R^(U|~C))+P[2]+718787259&4294967295,M=U+(N<<15&4294967295|N>>>17),N=C+(U^(M|~R))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+U&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var C=R-this.blockSize,P=this.B,M=this.h,U=0;U<R;){if(M==0)for(;U<=C;)o(this,I,U),U+=this.blockSize;if(typeof I=="string"){for(;U<R;)if(P[M++]=I.charCodeAt(U++),M==this.blockSize){o(this,P),M=0;break}}else for(;U<R;)if(P[M++]=I[U++],M==this.blockSize){o(this,P),M=0;break}}this.h=M,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var C=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=C&255,C/=256;for(this.u(I),I=Array(16),R=C=0;4>R;++R)for(var P=0;32>P;P+=8)I[C++]=this.g[R]>>>P&255;return I};function l(I,R){var C=p;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=R(I)}function c(I,R){this.h=R;for(var C=[],P=!0,M=I.length-1;0<=M;M--){var U=I[M]|0;P&&U==R||(C[M]=U,P=!1)}this.g=C}var p={};function m(I){return-128<=I&&128>I?l(I,function(R){return new c([R|0],0>R?-1:0)}):new c([I|0],0>I?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return q(g(-I));for(var R=[],C=1,P=0;I>=C;P++)R[P]=I/C|0,C*=4294967296;return new c(R,0)}function b(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return q(b(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(R,8)),P=E,M=0;M<I.length;M+=8){var U=Math.min(8,I.length-M),N=parseInt(I.substring(M,M+U),R);8>U?(U=g(Math.pow(R,U)),P=P.j(U).add(g(N))):(P=P.j(C),P=P.add(g(N)))}return P}var E=m(0),S=m(1),x=m(16777216);i=c.prototype,i.m=function(){if(z(this))return-q(this).m();for(var I=0,R=1,C=0;C<this.g.length;C++){var P=this.i(C);I+=(0<=P?P:4294967296+P)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(j(this))return"0";if(z(this))return"-"+q(this).toString(I);for(var R=g(Math.pow(I,6)),C=this,P="";;){var M=re(C,R).g;C=J(C,M.j(R));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=M,j(C))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function j(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function z(I){return I.h==-1}i.l=function(I){return I=J(this,I),z(I)?-1:j(I)?0:1};function q(I){for(var R=I.g.length,C=[],P=0;P<R;P++)C[P]=~I.g[P];return new c(C,~I.h).add(S)}i.abs=function(){return z(this)?q(this):this},i.add=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],P=0,M=0;M<=R;M++){var U=P+(this.i(M)&65535)+(I.i(M)&65535),N=(U>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);P=N>>>16,U&=65535,N&=65535,C[M]=N<<16|U}return new c(C,C[C.length-1]&-2147483648?-1:0)};function J(I,R){return I.add(q(R))}i.j=function(I){if(j(this)||j(I))return E;if(z(this))return z(I)?q(this).j(q(I)):q(q(this).j(I));if(z(I))return q(this.j(q(I)));if(0>this.l(x)&&0>I.l(x))return g(this.m()*I.m());for(var R=this.g.length+I.g.length,C=[],P=0;P<2*R;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<I.g.length;M++){var U=this.i(P)>>>16,N=this.i(P)&65535,vt=I.i(M)>>>16,kt=I.i(M)&65535;C[2*P+2*M]+=N*kt,te(C,2*P+2*M),C[2*P+2*M+1]+=U*kt,te(C,2*P+2*M+1),C[2*P+2*M+1]+=N*vt,te(C,2*P+2*M+1),C[2*P+2*M+2]+=U*vt,te(C,2*P+2*M+2)}for(P=0;P<R;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=R;P<2*R;P++)C[P]=0;return new c(C,0)};function te(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function H(I,R){this.g=I,this.h=R}function re(I,R){if(j(R))throw Error("division by zero");if(j(I))return new H(E,E);if(z(I))return R=re(q(I),R),new H(q(R.g),q(R.h));if(z(R))return R=re(I,q(R)),new H(q(R.g),R.h);if(30<I.g.length){if(z(I)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var C=S,P=R;0>=P.l(I);)C=ge(C),P=ge(P);var M=ce(C,1),U=ce(P,1);for(P=ce(P,2),C=ce(C,2);!j(P);){var N=U.add(P);0>=N.l(I)&&(M=M.add(C),U=N),P=ce(P,1),C=ce(C,1)}return R=J(I,M.j(R)),new H(M,R)}for(M=E;0<=I.l(R);){for(C=Math.max(1,Math.floor(I.m()/R.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=g(C),N=U.j(R);z(N)||0<N.l(I);)C-=P,U=g(C),N=U.j(R);j(U)&&(U=S),M=M.add(U),I=J(I,N)}return new H(M,I)}i.A=function(I){return re(this,I).h},i.and=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],P=0;P<R;P++)C[P]=this.i(P)&I.i(P);return new c(C,this.h&I.h)},i.or=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],P=0;P<R;P++)C[P]=this.i(P)|I.i(P);return new c(C,this.h|I.h)},i.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),C=[],P=0;P<R;P++)C[P]=this.i(P)^I.i(P);return new c(C,this.h^I.h)};function ge(I){for(var R=I.g.length+1,C=[],P=0;P<R;P++)C[P]=I.i(P)<<1|I.i(P-1)>>>31;return new c(C,I.h)}function ce(I,R){var C=R>>5;R%=32;for(var P=I.g.length-C,M=[],U=0;U<P;U++)M[U]=0<R?I.i(U+C)>>>R|I.i(U+C+1)<<32-R:I.i(U+C);return new c(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=b,ys=c}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fE,Jl,pE,xh,gm,mE,gE,yE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var v=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var L=h[A];if(!(L in v))break e;v=v[L]}h=h[h.length-1],A=v[h],y=y(A),y!=A&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,A=!1,L={next:function(){if(!A&&v<h.length){var Y=v++;return{value:y(Y,h[Y]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function b(h,y,v){return h.call.apply(h.bind,arguments)}function E(h,y,v){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),h.apply(y,L)}}return function(){return h.apply(y,arguments)}}function S(h,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:E,S.apply(null,arguments)}function x(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function j(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(A,L,Y){for(var se=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)se[Qe-2]=arguments[Qe];return y.prototype[L].apply(A,se)}}function z(h){const y=h.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=h[A];return v}return[]}function q(h,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(m(A)){const L=h.length||0,Y=A.length||0;h.length=L+Y;for(let se=0;se<Y;se++)h[L+se]=A[se]}else h.push(A)}}class J{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){return/^[\s\xa0]*$/.test(h)}function H(){var h=p.navigator;return h&&(h=h.userAgent)?h:""}function re(h){return re[" "](h),h}re[" "]=function(){};var ge=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ce(h,y,v){for(const A in h)y.call(v,h[A],A,h)}function I(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function R(h){const y={};for(const v in h)y[v]=h[v];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,y){let v,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(v in A)h[v]=A[v];for(let Y=0;Y<C.length;Y++)v=C[Y],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function M(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function U(h){p.setTimeout(()=>{throw h},0)}function N(){var h=ze;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class vt{constructor(){this.h=this.g=null}add(y,v){const A=kt.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var kt=new J(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,me=!1,ze=new vt,oe=()=>{const h=p.Promise.resolve(void 0);ae=()=>{h.then(k)}};var k=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(v){U(v)}var y=kt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}me=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var le=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};p.addEventListener("test",v,y),p.removeEventListener("test",v,y)}catch{}return h})();function be(h,y){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ge){e:{try{re(y.nodeName);var L=!0;break e}catch{}L=!1}L||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&be.aa.h.call(this)}}j(be,ne);var Ie={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function ut(h,y,v,A,L){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=L,this.key=++Ft,this.da=this.fa=!1}function hi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ji(h){this.src=h,this.g={},this.h=0}ji.prototype.add=function(h,y,v,A,L){var Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);var se=Ta(h,y,A,L);return-1<se?(y=h[se],v||(y.fa=!1)):(y=new ut(y,this.src,Y,!!A,L),y.fa=v,h.push(y)),y};function xs(h,y){var v=y.type;if(v in h.g){var A=h.g[v],L=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=0<=L)&&Array.prototype.splice.call(A,L,1),Y&&(hi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ta(h,y,v,A){for(var L=0;L<h.length;++L){var Y=h[L];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==A)return L}return-1}var Zn="closure_lm_"+(1e6*Math.random()|0),Cs={};function Sa(h,y,v,A,L){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Sa(h,y[Y],v,A,L);return null}return v=Uu(v),h&&h[Be]?h.K(y,v,g(A)?!!A.capture:!1,L):Ad(h,y,v,!1,A,L)}function Ad(h,y,v,A,L,Y){if(!y)throw Error("Invalid event type");var se=g(L)?!!L.capture:!!L,Qe=Yo(h);if(Qe||(h[Zn]=Qe=new ji(h)),v=Qe.add(y,v,A,se,Y),v.proxy)return v;if(A=Vu(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)le||(L=se),L===void 0&&(L=!1),h.addEventListener(y.toString(),A,L);else if(h.attachEvent)h.attachEvent(Ra(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vu(){function h(v){return y.call(h.src,h.listener,v)}const y=Rd;return h}function Aa(h,y,v,A,L){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Aa(h,y[Y],v,A,L);else A=g(A)?!!A.capture:!!A,v=Uu(v),h&&h[Be]?(h=h.i,y=String(y).toString(),y in h.g&&(Y=h.g[y],v=Ta(Y,v,A,L),-1<v&&(hi(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete h.g[y],h.h--)))):h&&(h=Yo(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ta(y,v,A,L)),(v=-1<h?y[h]:null)&&Is(v))}function Is(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Be])xs(y.i,h);else{var v=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(v,A,h.capture):y.detachEvent?y.detachEvent(Ra(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Yo(y))?(xs(v,h),v.h==0&&(v.src=null,y[Zn]=null)):hi(h)}}}function Ra(h){return h in Cs?Cs[h]:Cs[h]="on"+h}function Rd(h,y){if(h.da)h=!0;else{y=new be(y,this);var v=h.listener,A=h.ha||h.src;h.fa&&Is(h),h=v.call(A,y)}return h}function Yo(h){return h=h[Zn],h instanceof ji?h:null}var Gt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uu(h){return typeof h=="function"?h:(h[Gt]||(h[Gt]=function(y){return h.handleEvent(y)}),h[Gt])}function Dt(){K.call(this),this.i=new ji(this),this.M=this,this.F=null}j(Dt,K),Dt.prototype[Be]=!0,Dt.prototype.removeEventListener=function(h,y,v,A){Aa(this,h,y,v,A)};function Lt(h,y){var v,A=h.F;if(A)for(v=[];A;A=A.F)v.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new ne(y,h);else if(y instanceof ne)y.target=y.target||h;else{var L=y;y=new ne(A,h),P(y,L)}if(L=!0,v)for(var Y=v.length-1;0<=Y;Y--){var se=y.g=v[Y];L=Pi(se,A,!0,y)&&L}if(se=y.g=h,L=Pi(se,A,!0,y)&&L,L=Pi(se,A,!1,y)&&L,v)for(Y=0;Y<v.length;Y++)se=y.g=v[Y],L=Pi(se,A,!1,y)&&L}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],A=0;A<v.length;A++)hi(v[A]);delete h.g[y],h.h--}}this.F=null},Dt.prototype.K=function(h,y,v,A){return this.i.add(String(h),y,!1,v,A)},Dt.prototype.L=function(h,y,v,A){return this.i.add(String(h),y,!0,v,A)};function Pi(h,y,v,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var L=!0,Y=0;Y<y.length;++Y){var se=y[Y];if(se&&!se.da&&se.capture==v){var Qe=se.listener,St=se.ha||se.src;se.fa&&xs(h.i,se),L=Qe.call(St,A)!==!1&&L}}return L&&!A.defaultPrevented}function Lu(h,y,v){if(typeof h=="function")v&&(h=S(h,v));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:p.setTimeout(h,y||0)}function Qo(h){h.g=Lu(()=>{h.g=null,h.i&&(h.i=!1,Qo(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class xd extends K{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qo(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(h){K.call(this),this.h=h,this.g={}}j(Os,K);var _r=[];function sn(h){ce(h.g,function(y,v){this.g.hasOwnProperty(v)&&Is(y)},h),h.g={}}Os.prototype.N=function(){Os.aa.N.call(this),sn(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=p.JSON.stringify,dn=p.JSON.parse,Cd=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Xo(){}Xo.prototype.h=null;function zu(h){return h.h||(h.h=h.i())}function Ns(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vr(){ne.call(this,"d")}j(vr,ne);function ei(){ne.call(this,"c")}j(ei,ne);var Ln={},br=null;function xa(){return br=br||new Dt}Ln.La="serverreachability";function Jo(h){ne.call(this,Ln.La,h)}j(Jo,ne);function Mi(h){const y=xa();Lt(y,new Jo(y))}Ln.STAT_EVENT="statevent";function wr(h,y){ne.call(this,Ln.STAT_EVENT,h),this.stat=y}j(wr,ne);function Kt(h){const y=xa();Lt(y,new wr(y,h))}Ln.Ma="timingevent";function Wo(h,y){ne.call(this,Ln.Ma,h),this.size=y}j(Wo,ne);function Er(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},y)}function Tr(){this.g=!0}Tr.prototype.xa=function(){this.g=!1};function Zo(h,y,v,A,L,Y){h.info(function(){if(h.g)if(Y)for(var se="",Qe=Y.split("&"),St=0;St<Qe.length;St++){var Ne=Qe[St].split("=");if(1<Ne.length){var Bt=Ne[0];Ne=Ne[1];var qt=Bt.split("_");se=2<=qt.length&&qt[1]=="type"?se+(Bt+"="+Ne+"&"):se+(Bt+"=redacted&")}}else se=null;else se=Y;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+y+`
`+v+`
`+se})}function el(h,y,v,A,L,Y,se){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+y+`
`+v+`
`+Y+" "+se})}function Vi(h,y,v,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+fi(h,v)+(A?" "+A:"")})}function Bu(h,y){h.info(function(){return"TIMEOUT: "+y})}Tr.prototype.info=function(){};function fi(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var A=v[h];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var Y=L[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var se=1;se<L.length;se++)L[se]=""}}}}return Un(v)}catch{return y}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pi;function Sr(){}j(Sr,Xo),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},pi=new Sr;function mi(h,y,v,A){this.j=h,this.i=y,this.l=v,this.R=A||1,this.U=new Os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qu}function qu(){this.i=null,this.g="",this.h=!1}var tl={},Ui={};function ks(h,y,v){h.L=1,h.v=Ps(mt(y)),h.m=v,h.P=!0,Li(h,null)}function Li(h,y){h.F=Date.now(),ti(h),h.A=mt(h.v);var v=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),qi(v.i,"t",A),h.C=0,v=h.j.J,h.h=new qu,h.g=rc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new xd(S(h.Y,h,h.g),h.O)),y=h.U,v=h.g,A=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(_r[0]=L.toString()),L=_r);for(var Y=0;Y<L.length;Y++){var se=Sa(v,L[Y],A||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Mi(),Zo(h.i,h.u,h.A,h.l,h.R,h.m)}mi.prototype.ca=function(h){h=h.target;const y=this.M;y&&mn(h)==3?y.j():this.Y(h)},mi.prototype.Y=function(h){try{if(h==this.g)e:{const qt=mn(this.g);var y=this.g.Ba();const Vr=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Us(this.g)))){this.J||qt!=4||y==7||(y==8||0>=Vr?Mi(3):Mi(2)),Ca(this);var v=this.g.Z();this.X=v;t:if(zi(this)){var A=Us(this.g);h="";var L=A.length,Y=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ar(this);var se="";break t}this.h.i=new p.TextDecoder}for(y=0;y<L;y++)this.h.h=!0,h+=this.h.i.decode(A[y],{stream:!(Y&&y==L-1)});A.length=0,this.h.g+=h,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,el(this.i,this.u,this.A,this.l,this.R,qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,St=this.g;if((Qe=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Qe)){var Ne=Qe;break t}}Ne=null}if(v=Ne)Vi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gi(this,v);else{this.o=!1,this.s=3,Kt(12),fn(this),Ar(this);break e}}if(this.P){v=!0;let vn;for(;!this.J&&this.C<se.length;)if(vn=Ds(this,se),vn==Ui){qt==4&&(this.s=4,Kt(14),v=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==tl){this.s=4,Kt(15),Vi(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Vi(this.i,this.l,vn,null),gi(this,vn);if(zi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||se.length!=0||this.h.h||(this.s=1,Kt(16),v=!1),this.o=this.o&&v,!v)Vi(this.i,this.l,se,"[Invalid Chunked Response]"),fn(this),Ar(this);else if(0<se.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),dl(Bt),Bt.M=!0,Kt(11))}}else Vi(this.i,this.l,se,null),gi(this,se);qt==4&&fn(this),this.o&&!this.J&&(qt==4?tc(this.j,this):(this.o=!1,ti(this)))}else Qu(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),fn(this),Ar(this)}}}catch{}finally{}};function zi(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ds(h,y){var v=h.C,A=y.indexOf(`
`,v);return A==-1?Ui:(v=Number(y.substring(v,A)),isNaN(v)?tl:(A+=1,A+v>y.length?Ui:(y=y.slice(A,A+v),h.C=A+v,y)))}mi.prototype.cancel=function(){this.J=!0,fn(this)};function ti(h){h.S=Date.now()+h.I,bt(h,h.I)}function bt(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Er(S(h.ba,h),y)}function Ca(h){h.B&&(p.clearTimeout(h.B),h.B=null)}mi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Bu(this.i,this.A),this.L!=2&&(Mi(),Kt(17)),fn(this),this.s=2,Ar(this)):bt(this,this.S-h)};function Ar(h){h.j.G==0||h.J||tc(h.j,h)}function fn(h){Ca(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,sn(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function gi(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Rr(v.h,h))){if(!h.K&&Rr(v.h,h)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Pr(v),jr(v);else break e;hl(v),Kt(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Er(S(v.Za,v),6e3));if(1>=$u(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Hi(v,11)}else if((h.K||v.g==h)&&Pr(v),!te(y))for(L=v.Da.g.parse(y),y=0;y<L.length;y++){let Ne=L[y];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const Bt=Ne[3];Bt!=null&&(v.la=Bt,v.j.info("VER="+v.la));const qt=Ne[4];qt!=null&&(v.Aa=qt,v.j.info("SVER="+v.Aa));const Vr=Ne[5];Vr!=null&&typeof Vr=="number"&&0<Vr&&(A=1.5*Vr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const vn=h.g;if(vn){const Bs=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var Y=A.h;Y.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(xr(Y,Y.h),Y.h=null))}if(A.D){const Fi=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fi&&(A.ya=Fi,Fe(A.I,A.D,Fi))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var se=h;if(A.qa=ic(A,A.J?A.ia:null,A.W),se.K){zn(A.h,se);var Qe=se,St=A.L;St&&(Qe.I=St),Qe.B&&(Ca(Qe),ti(Qe)),A.g=se}else Zu(A);0<v.i.length&&Ma(v)}else Ne[0]!="stop"&&Ne[0]!="close"||Hi(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Hi(v,7):ul(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}Mi(4)}catch{}}var Id=class{constructor(h,y){this.g=h,this.map=y}};function nl(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $u(h){return h.h?1:h.g?h.g.size:0}function Rr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function xr(h,y){h.g?h.g.add(y):h.h=y}function zn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}nl.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return z(h.i)}function Hu(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,A=0;A<v;A++)y.push(h[A]);return y}y=[],v=0;for(A in h)y[v++]=h[A];return y}function Od(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const A in h)y[v++]=A;return y}}}function Ia(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Od(h),A=Hu(h),L=A.length,Y=0;Y<L;Y++)y.call(void 0,A[Y],v&&v[Y],h)}var rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var A=h[v].indexOf("="),L=null;if(0<=A){var Y=h[v].substring(0,A);L=h[v].substring(A+1)}else Y=h[v];y(Y,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Bi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Bi){this.h=h.h,Cr(this,h.j),this.o=h.o,this.g=h.g,js(this,h.s),this.l=h.l;var y=h.i,v=new yi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Na(this,v),this.m=h.m}else h&&(y=String(h).match(rl))?(this.h=!1,Cr(this,y[1]||"",!0),this.o=Ir(y[2]||""),this.g=Ir(y[3]||"",!0),js(this,y[4]),this.l=Ir(y[5]||"",!0),Na(this,y[6]||"",!0),this.m=Ir(y[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}Bi.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Bn(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Bn(y,sl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Bn(v,v.charAt(0)=="/"?al:Fu,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Bn(v,Dd)),h.join("")};function mt(h){return new Bi(h)}function Cr(h,y,v){h.j=v?Ir(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function js(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Na(h,y,v){y instanceof yi?(h.i=y,Gu(h.i,h.h)):(v||(y=Bn(y,kd)),h.i=new yi(y,h.h))}function Fe(h,y,v){h.i.set(y,v)}function Ps(h){return Fe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Ir(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bn(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Nd),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var sl=/[#\/\?@]/g,Fu=/[#\?:]/g,al=/[#\?]/g,kd=/[#\?@]/g,Dd=/#/g;function yi(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function zt(h){h.g||(h.g=new Map,h.h=0,h.i&&Oa(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=yi.prototype,i.add=function(h,y){zt(this),this.i=null,h=Rn(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function ka(h,y){zt(h),y=Rn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Da(h,y){return zt(h),y=Rn(h,y),h.g.has(y)}i.forEach=function(h,y){zt(this),this.g.forEach(function(v,A){v.forEach(function(L){h.call(y,L,A,this)},this)},this)},i.na=function(){zt(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const L=h[A];for(let Y=0;Y<L.length;Y++)v.push(y[A])}return v},i.V=function(h){zt(this);let y=[];if(typeof h=="string")Da(this,h)&&(y=y.concat(this.g.get(Rn(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},i.set=function(h,y){return zt(this),this.i=null,h=Rn(this,h),Da(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function qi(h,y,v){ka(h,y),0<v.length&&(h.i=null,h.g.set(Rn(h,y),z(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const Y=encodeURIComponent(String(A)),se=this.V(A);for(A=0;A<se.length;A++){var L=Y;se[A]!==""&&(L+="="+encodeURIComponent(String(se[A]))),h.push(L)}}return this.i=h.join("&")};function Rn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Gu(h,y){y&&!h.j&&(zt(h),h.i=null,h.g.forEach(function(v,A){var L=A.toLowerCase();A!=L&&(ka(this,A),qi(this,L,v))},h)),h.j=y}function ol(h,y){const v=new Tr;if(p.Image){const A=new Image;A.onload=x(_n,v,"TestLoadImage: loaded",!0,y,A),A.onerror=x(_n,v,"TestLoadImage: error",!1,y,A),A.onabort=x(_n,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=x(_n,v,"TestLoadImage: timeout",!1,y,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Ku(h,y){const v=new Tr,A=new AbortController,L=setTimeout(()=>{A.abort(),_n(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(Y=>{clearTimeout(L),Y.ok?_n(v,"TestPingServer: ok",!0,y):_n(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),_n(v,"TestPingServer: error",!1,y)})}function _n(h,y,v,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(v)}catch{}}function ni(){this.g=new Cd}function ll(h,y,v){const A=v||"";try{Ia(h,function(L,Y){let se=L;g(L)&&(se=Un(L)),y.push(A+Y+"="+encodeURIComponent(se))})}catch(L){throw y.push(A+"type="+encodeURIComponent("_badmap")),L}}function _i(h){this.l=h.Ub||null,this.j=h.eb||!1}j(_i,Xo),_i.prototype.g=function(){return new xn(this.l,this.j)},_i.prototype.i=(function(h){return function(){return h}})({});function xn(h,y){Dt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(xn,Dt),i=xn.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Or(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||p).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ja(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ja(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vi(this):Or(this),this.readyState==3&&ja(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,vi(this))},i.Qa=function(h){this.g&&(this.response=h,vi(this))},i.ga=function(){this.g&&vi(this)};function vi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Or(h)}i.setRequestHeader=function(h,y){this.u.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ms(h){let y="";return ce(h,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function Nr(h,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Ms(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Fe(h,y,v))}function rt(h){Dt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(rt,Dt);var an=/^https?$/i,$i=["POST","PUT"];i=rt.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pi.g(),this.v=this.o?zu(this.o):zu(pi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Vs(this,Y);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)v.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())v.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),L=p.FormData&&h instanceof p.FormData,!(0<=Array.prototype.indexOf.call($i,y,void 0))||A||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,se]of v)this.g.setRequestHeader(Y,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(h),this.u=!1}catch(Y){Vs(this,Y)}};function Vs(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,kr(h),Dr(h)}function kr(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Lt(this,"complete"),Lt(this,"abort"),Dr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),rt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Yu(this):this.bb())},i.bb=function(){Yu(this)};function Yu(h){if(h.h&&typeof c<"u"&&(!h.v[1]||mn(h)!=4||h.Z()!=2)){if(h.u&&mn(h)==4)Lu(h.Ea,0,h);else if(Lt(h,"readystatechange"),mn(h)==4){h.h=!1;try{const se=h.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=se===0){var L=String(h.D).match(rl)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),A=!an.test(L?L.toLowerCase():"")}v=A}if(v)Lt(h,"complete"),Lt(h,"success");else{h.m=6;try{var Y=2<mn(h)?h.g.statusText:""}catch{Y=""}h.l=Y+" ["+h.Z()+"]",kr(h)}}finally{Dr(h)}}}}function Dr(h,y){if(h.g){Pa(h);const v=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Lt(h,"ready");try{v.onreadystatechange=A}catch{}}}function Pa(h){h.I&&(p.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function mn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),dn(y)}};function Us(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qu(h){const y={};h=(h.g&&2<=mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(te(h[A]))continue;var v=M(h[A]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[L]||[];y[L]=Y,Y.push(v)}I(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Xu(h){this.Aa=0,this.i=[],this.j=new Tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,h),this.cb=Ls("retryDelaySeedMs",1e4,h),this.Wa=Ls("forwardChannelMaxRetries",2,h),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(h&&h.concurrentRequestLimit),this.Da=new ni,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Xu.prototype,i.la=8,i.G=1,i.connect=function(h,y,v,A){Kt(0),this.W=h,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=ic(this,null,this.W),Ma(this)};function ul(h){if(Ju(h),h.G==3){var y=h.U++,v=mt(h.I);if(Fe(v,"SID",h.K),Fe(v,"RID",y),Fe(v,"TYPE","terminate"),zs(h,v),y=new mi(h,h.j,y),y.L=2,y.v=Ps(mt(v)),v=!1,p.navigator&&p.navigator.sendBeacon)try{v=p.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&p.Image&&(new Image().src=y.v,v=!0),v||(y.g=rc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ti(y)}fl(h)}function jr(h){h.g&&(dl(h),h.g.cancel(),h.g=null)}function Ju(h){jr(h),h.u&&(p.clearTimeout(h.u),h.u=null),Pr(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&p.clearTimeout(h.s),h.s=null)}function Ma(h){if(!il(h.h)&&!h.s){h.s=!0;var y=h.Ga;ae||oe(),me||(ae(),me=!0),ze.add(y,h),h.B=0}}function jd(h,y){return $u(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Er(S(h.Ga,h,y),nc(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new mi(this,this.j,h);let Y=this.o;if(this.S&&(Y?(Y=R(Y),P(Y,this.S)):Y=this.S),this.m!==null||this.O||(L.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=cl(this,L,y),v=mt(this.I),Fe(v,"RID",h),Fe(v,"CVER",22),this.D&&Fe(v,"X-HTTP-Session-Id",this.D),zs(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(Ms(Y)))+"&"+y:this.m&&Nr(v,this.m,Y)),xr(this.h,L),this.Ua&&Fe(v,"TYPE","init"),this.P?(Fe(v,"$req",y),Fe(v,"SID","null"),L.T=!0,ks(L,v,null)):ks(L,v,y),this.G=2}}else this.G==3&&(h?Wu(this,h):this.i.length==0||il(this.h)||Wu(this))};function Wu(h,y){var v;y?v=y.l:v=h.U++;const A=mt(h.I);Fe(A,"SID",h.K),Fe(A,"RID",v),Fe(A,"AID",h.T),zs(h,A),h.m&&h.o&&Nr(A,h.m,h.o),v=new mi(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=cl(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),xr(h.h,v),ks(v,A,y)}function zs(h,y){h.H&&ce(h.H,function(v,A){Fe(y,A,v)}),h.l&&Ia({},function(v,A){Fe(y,A,v)})}function cl(h,y,v){v=Math.min(h.i.length,v);var A=h.l?S(h.l.Na,h.l,h):null;e:{var L=h.i;let Y=-1;for(;;){const se=["count="+v];Y==-1?0<v?(Y=L[0].g,se.push("ofs="+Y)):Y=0:se.push("ofs="+Y);let Qe=!0;for(let St=0;St<v;St++){let Ne=L[St].g;const Bt=L[St].map;if(Ne-=Y,0>Ne)Y=Math.max(0,L[St].g-100),Qe=!1;else try{ll(Bt,se,"req"+Ne+"_")}catch{A&&A(Bt)}}if(Qe){A=se.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,A}function Zu(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ae||oe(),me||(ae(),me=!0),ze.add(y,h),h.v=0}}function hl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Er(S(h.Fa,h),nc(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Er(S(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),jr(this),ec(this))};function dl(h){h.A!=null&&(p.clearTimeout(h.A),h.A=null)}function ec(h){h.g=new mi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=mt(h.qa);Fe(y,"RID","rpc"),Fe(y,"SID",h.K),Fe(y,"AID",h.T),Fe(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Fe(y,"TO",h.ja),Fe(y,"TYPE","xmlhttp"),zs(h,y),h.m&&h.o&&Nr(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Ps(mt(y)),v.m=null,v.P=!0,Li(v,h)}i.Za=function(){this.C!=null&&(this.C=null,jr(this),hl(this),Kt(19))};function Pr(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function tc(h,y){var v=null;if(h.g==y){Pr(h),dl(h),h.g=null;var A=2}else if(Rr(h.h,y))v=y.D,zn(h.h,y),A=1;else return;if(h.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var L=h.B;A=xa(),Lt(A,new Wo(A,v)),Ma(h)}else Zu(h);else if(L=y.s,L==3||L==0&&0<y.X||!(A==1&&jd(h,y)||A==2&&hl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),L){case 1:Hi(h,5);break;case 4:Hi(h,10);break;case 3:Hi(h,6);break;default:Hi(h,2)}}}function nc(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Hi(h,y){if(h.j.info("Error code "+y),y==2){var v=S(h.fb,h),A=h.Xa;const L=!A;A=new Bi(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Cr(A,"https"),Ps(A),L?ol(A.toString(),v):Ku(A.toString(),v)}else Kt(2);h.G=0,h.l&&h.l.sa(y),fl(h),Ju(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function fl(h){if(h.G=0,h.ka=[],h.l){const y=pn(h.h);(y.length!=0||h.i.length!=0)&&(q(h.ka,y),q(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function ic(h,y,v){var A=v instanceof Bi?mt(v):new Bi(v);if(A.g!="")y&&(A.g=y+"."+A.g),js(A,A.s);else{var L=p.location;A=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;var Y=new Bi(null);A&&Cr(Y,A),y&&(Y.g=y),L&&js(Y,L),v&&(Y.l=v),A=Y}return v=h.D,y=h.ya,v&&y&&Fe(A,v,y),Fe(A,"VER",h.la),zs(h,A),A}function rc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new rt(new _i({eb:v})):new rt(h.pa),y.Ha(h.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}i=sc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Va(){}Va.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){Dt.call(this),this.g=new Xu(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!te(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!te(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Mr(this)}j(gn,Dt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){ul(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Un(h),h=v);y.i.push(new Id(y.Ya++,h)),y.G==3&&Ma(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,gn.aa.N.call(this)};function ac(h){vr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}j(ac,vr);function oc(){ei.call(this),this.status=1}j(oc,ei);function Mr(h){this.g=h}j(Mr,sc),Mr.prototype.ua=function(){Lt(this.g,"a")},Mr.prototype.ta=function(h){Lt(this.g,new ac(h))},Mr.prototype.sa=function(h){Lt(this.g,new oc)},Mr.prototype.ra=function(){Lt(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,yE=function(){return new Va},gE=function(){return xa()},mE=Ln,gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,xh=pt,Yt.COMPLETE="complete",pE=Yt,Ns.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Jl=Ns,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,fE=rt}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const K0="@firebase/firestore",Y0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Fm("@firebase/firestore");function vo(){return ga.logLevel}function ue(i,...e){if(ga.logLevel<=Ue.DEBUG){const t=e.map(sg);ga.debug(`Firestore (${Ho}): ${i}`,...t)}}function pr(i,...e){if(ga.logLevel<=Ue.ERROR){const t=e.map(sg);ga.error(`Firestore (${Ho}): ${i}`,...t)}}function bs(i,...e){if(ga.logLevel<=Ue.WARN){const t=e.map(sg);ga.warn(`Firestore (${Ho}): ${i}`,...t)}}function sg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_E(i,r,t)}function _E(i,e,t){let r=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pr(r),new Error(r)}function Xe(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||_E(e,o,r)}function xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends gr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class BI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qI{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i;const o=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new vE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class $I{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $I(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const r=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Q0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=GI(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function De(i,e){return i<e?-1:i>e?1:0}function ym(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return De(r,o);{const l=bE(),c=KI(l.encode(X0(i,t)),l.encode(X0(e,t)));return c!==0?c:De(r,o)}}t+=r>65535?2:1}return De(i.length,e.length)}function X0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function KI(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return De(i[t],e[t]);return De(i.length,e.length)}function Mo(i,e,t){return i.length===e.length&&i.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="__name__";class Si{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=Si.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const r=Si.isNumericId(e),o=Si.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Si.extractNumericId(e).compare(Si.extractNumericId(t)):ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class dt extends Si{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const YI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Si{construct(e,t,r){return new nn(e,t,r)}static isValidIdentifier(e){return YI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J0}static keyField(){return new nn([J0])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,o+=2}else p==="`"?(c=!c,o++):p!=="."||c?(r+=p,o++):(l(),o++)}if(l(),c)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(dt.fromString(e))}static fromName(e){return new _e(dt.fromString(e).popFirst(5))}static empty(){return new _e(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(i,e,t){if(!t)throw new pe(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function XI(i,e,t,r){if(e===!0&&r===!0)throw new pe(ie.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function W0(i){if(!_e.isDocumentKey(i))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function og(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Te(12329,{type:typeof i})}function vs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=og(i);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Nu(i,e){if(!wE(i))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const c=i[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new pe(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0=-62135596800,eb=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*eb);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Z0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eb}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Nt("string",ot._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ot(0,0))}static max(){return new Ae(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function JI(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new ws(o,_e.empty(),e)}function WI(i){return new ws(i.readTime,i.key,du)}class ws{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ws(Ae.min(),_e.empty(),du)}static max(){return new ws(Ae.max(),_e.empty(),du)}}function ZI(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(i.documentKey,e.documentKey),t!==0?t:De(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fo(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==e2)throw i;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let o=0,l=0,c=!1;e.forEach((p=>{++o,p.next((()=>{++l,c&&l===o&&t()}),(m=>r(m)))})),c=!0,l===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((o=>o?ee.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,o)=>{const l=e.length,c=new Array(l);let p=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((b=>{c[g]=b,++p,p===l&&r(c)}),(b=>o(b)))}}))}static doWhile(e,t){return new ee(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}function n2(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Go(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function cd(i){return i==null}function Hh(i){return i===0&&1/i==-1/0}function i2(i){return typeof i=="number"&&Number.isInteger(i)&&!Hh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="";function r2(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=tb(e)),e=s2(i.get(t),e);return tb(e)}function s2(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const l=i.charAt(o);switch(l){case"\0":t+="";break;case EE:t+="";break;default:t+=l}}return t}function tb(i){return i+EE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function va(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function TE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??tn.RED,this.left=o??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new tn(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return tn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ib(this.data.getIterator())}getIteratorFrom(e){return new ib(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class ib{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new ci([])}unionWith(e){let t=new Ut(nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new SE("Invalid base64 string: "+l):l}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const a2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const t=a2.exec(i);if(Xe(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(i.seconds),nanos:Tt(i.nanos)}}function Tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ts(i){return typeof i=="string"?rn.fromBase64String(i):rn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",RE="__type__",xE="__previous_value__",CE="__local_write_time__";function ug(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[RE])===null||t===void 0?void 0:t.stringValue)===AE}function hd(i){const e=i.mapValue.fields[xE];return ug(e)?hd(e):e}function fu(i){const e=Es(i.mapValue.fields[CE].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t,r,o,l,c,p,m,g,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=b}}const Fh="(default)";class pu{constructor(e,t){this.projectId=e,this.database=t||Fh}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__type__",l2="__max__",ph={mapValue:{}},OE="__vector__",Gh="value";function Ss(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ug(i)?4:c2(i)?9007199254740991:u2(i)?10:11:Te(28295,{value:i})}function ki(i,e){if(i===e)return!0;const t=Ss(i);if(t!==Ss(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fu(i).isEqual(fu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Es(o.timestampValue),p=Es(l.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,l){return Ts(o.bytesValue).isEqual(Ts(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,l){return Tt(o.geoPointValue.latitude)===Tt(l.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(l.geoPointValue.longitude)})(i,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Tt(o.integerValue)===Tt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Tt(o.doubleValue),p=Tt(l.doubleValue);return c===p?Hh(c)===Hh(p):isNaN(c)&&isNaN(p)}return!1})(i,e);case 9:return Mo(i.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},p=l.mapValue.fields||{};if(nb(c)!==nb(p))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(p[m]===void 0||!ki(c[m],p[m])))return!1;return!0})(i,e);default:return Te(52216,{left:i})}}function mu(i,e){return(i.values||[]).find((t=>ki(t,e)))!==void 0}function Vo(i,e){if(i===e)return 0;const t=Ss(i),r=Ss(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(i.booleanValue,e.booleanValue);case 2:return(function(l,c){const p=Tt(l.integerValue||l.doubleValue),m=Tt(c.integerValue||c.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(i,e);case 3:return rb(i.timestampValue,e.timestampValue);case 4:return rb(fu(i),fu(e));case 5:return ym(i.stringValue,e.stringValue);case 6:return(function(l,c){const p=Ts(l),m=Ts(c);return p.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,c){const p=l.split("/"),m=c.split("/");for(let g=0;g<p.length&&g<m.length;g++){const b=De(p[g],m[g]);if(b!==0)return b}return De(p.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,c){const p=De(Tt(l.latitude),Tt(c.latitude));return p!==0?p:De(Tt(l.longitude),Tt(c.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return sb(i.arrayValue,e.arrayValue);case 10:return(function(l,c){var p,m,g,b;const E=l.fields||{},S=c.fields||{},x=(p=E[Gh])===null||p===void 0?void 0:p.arrayValue,j=(m=S[Gh])===null||m===void 0?void 0:m.arrayValue,z=De(((g=x==null?void 0:x.values)===null||g===void 0?void 0:g.length)||0,((b=j==null?void 0:j.values)===null||b===void 0?void 0:b.length)||0);return z!==0?z:sb(x,j)})(i.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ph.mapValue&&c===ph.mapValue)return 0;if(l===ph.mapValue)return 1;if(c===ph.mapValue)return-1;const p=l.fields||{},m=Object.keys(p),g=c.fields||{},b=Object.keys(g);m.sort(),b.sort();for(let E=0;E<m.length&&E<b.length;++E){const S=ym(m[E],b[E]);if(S!==0)return S;const x=Vo(p[m[E]],g[b[E]]);if(x!==0)return x}return De(m.length,b.length)})(i.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function rb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return De(i,e);const t=Es(i),r=Es(e),o=De(t.seconds,r.seconds);return o!==0?o:De(t.nanos,r.nanos)}function sb(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Vo(t[o],r[o]);if(l)return l}return De(t.length,r.length)}function Uo(i){return _m(i)}function _m(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Es(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ts(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return _e.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=_m(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${_m(t.fields[c])}`;return o+"}"})(i.mapValue):Te(61005,{value:i})}function Ch(i){switch(Ss(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(i);return e?16+Ch(e):16;case 5:return 2*i.stringValue.length;case 6:return Ts(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+Ch(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return va(r.fields,((l,c)=>{o+=l.length+Ch(c)})),o})(i.mapValue);default:throw Te(13486,{value:i})}}function vm(i){return!!i&&"integerValue"in i}function cg(i){return!!i&&"arrayValue"in i}function ab(i){return!!i&&"nullValue"in i}function ob(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ih(i){return!!i&&"mapValue"in i}function u2(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[IE])===null||t===void 0?void 0:t.stringValue)===OE}function ru(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return va(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ru(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ru(i.arrayValue.values[t]);return e}return Object.assign({},i)}function c2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===l2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(t)}setAll(e){let t=nn.emptyPath(),r={},o=[];e.forEach(((c,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=ru(c):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){va(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new Xn(ru(this.value))}}function NE(i){const e=[];return va(i.fields,((t,r)=>{const o=new nn([t]);if(Ih(r)){const l=NE(r.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,r,o,l,c,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=p}static newInvalidDocument(e){return new cn(e,0,Ae.min(),Ae.min(),Ae.min(),Xn.empty(),0)}static newFoundDocument(e,t,r,o){return new cn(e,1,t,Ae.min(),r,o,0)}static newNoDocument(e,t){return new cn(e,2,t,Ae.min(),Ae.min(),Xn.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ae.min(),Ae.min(),Xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function lb(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const l=e[o],c=i.position[o];if(l.field.isKeyField()?r=_e.comparator(_e.fromName(c.referenceValue),t.key):r=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ub(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ki(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function h2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{}class Mt extends kE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new f2(e,t,r):t==="array-contains"?new g2(e,r):t==="in"?new y2(e,r):t==="not-in"?new _2(e,r):t==="array-contains-any"?new v2(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new p2(e,r):new m2(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Ss(this.value)===Ss(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends kE{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Di(e,t)}matches(e){return DE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function DE(i){return i.op==="and"}function jE(i){return d2(i)&&DE(i)}function d2(i){for(const e of i.filters)if(e instanceof Di)return!1;return!0}function bm(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Uo(i.value);if(jE(i))return i.filters.map((e=>bm(e))).join(",");{const e=i.filters.map((t=>bm(t))).join(",");return`${i.op}(${e})`}}function PE(i,e){return i instanceof Mt?(function(r,o){return o instanceof Mt&&r.op===o.op&&r.field.isEqual(o.field)&&ki(r.value,o.value)})(i,e):i instanceof Di?(function(r,o){return o instanceof Di&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,c,p)=>l&&PE(c,o.filters[p])),!0):!1})(i,e):void Te(19439)}function ME(i){return i instanceof Mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(i):i instanceof Di?(function(t){return t.op.toString()+" {"+t.getFilters().map(ME).join(" ,")+"}"})(i):"Filter"}class f2 extends Mt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class p2 extends Mt{constructor(e,t){super(e,"in",t),this.keys=VE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class m2 extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=VE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class g2 extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cg(t)&&mu(t.arrayValue,this.value)}}class y2 extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mu(this.value.arrayValue,t)}}class _2 extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mu(this.value.arrayValue,t)}}class v2 extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>mu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t=null,r=[],o=[],l=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=p,this.Pe=null}}function cb(i,e=null,t=[],r=[],o=null,l=null,c=null){return new b2(i,e,t,r,o,l,c)}function hg(i){const e=xe(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bm(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Uo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Uo(r))).join(",")),e.Pe=t}return e.Pe}function dg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!h2(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!PE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ub(i.startAt,e.startAt)&&ub(i.endAt,e.endAt)}function wm(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t=null,r=[],o=[],l=null,c="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=p,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function w2(i,e,t,r,o,l,c,p){return new dd(i,e,t,r,o,l,c,p)}function fd(i){return new dd(i)}function hb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function E2(i){return i.collectionGroup!==null}function su(i){const e=xe(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let p=new Ut(nn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Yh(l,r))})),t.has(nn.keyField().canonicalString())||e.Te.push(new Yh(nn.keyField(),r))}return e.Te}function Ci(i){const e=xe(i);return e.Ie||(e.Ie=T2(e,su(i))),e.Ie}function T2(i,e){if(i.limitType==="F")return cb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Yh(o.field,l)}));const t=i.endAt?new Kh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Kh(i.startAt.position,i.startAt.inclusive):null;return cb(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Em(i,e,t){return new dd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function pd(i,e){return dg(Ci(i),Ci(e))&&i.limitType===e.limitType}function UE(i){return`${hg(Ci(i))}|lt:${i.limitType}`}function bo(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>ME(o))).join(", ")}]`),cd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${r})`})(Ci(i))}; limitType=${i.limitType})`}function md(i,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):_e.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,o){for(const l of su(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(c,p,m){const g=lb(c,p,m);return c.inclusive?g<=0:g<0})(r.startAt,su(r),o)||r.endAt&&!(function(c,p,m){const g=lb(c,p,m);return c.inclusive?g>=0:g>0})(r.endAt,su(r),o))})(i,e)}function S2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function LE(i){return(e,t)=>{let r=!1;for(const o of su(i)){const l=A2(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function A2(i,e,t){const r=i.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,p){const m=c.data.field(l),g=p.data.field(l);return m!==null&&g!==null?Vo(m,g):Te(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new ft(_e.comparator);function mr(){return R2}const zE=new ft(_e.comparator);function Wl(...i){let e=zE;for(const t of i)e=e.insert(t.key,t);return e}function BE(i){let e=zE;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ua(){return au()}function qE(){return au()}function au(){return new ba((i=>i.toString()),((i,e)=>i.isEqual(e)))}const x2=new ft(_e.comparator),C2=new Ut(_e.comparator);function Le(...i){let e=C2;for(const t of i)e=e.add(t);return e}const I2=new Ut(De);function O2(){return I2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function $E(i){return{integerValue:""+i}}function N2(i,e){return i2(e)?$E(e):fg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function k2(i,e,t){return i instanceof Qh?(function(o,l){const c={fields:{[RE]:{stringValue:AE},[CE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ug(l)&&(l=hd(l)),l&&(c.fields[xE]=l),{mapValue:c}})(t,e):i instanceof gu?FE(i,e):i instanceof yu?GE(i,e):(function(o,l){const c=HE(o,l),p=db(c)+db(o.Ee);return vm(c)&&vm(o.Ee)?$E(p):fg(o.serializer,p)})(i,e)}function D2(i,e,t){return i instanceof gu?FE(i,e):i instanceof yu?GE(i,e):t}function HE(i,e){return i instanceof Xh?(function(r){return vm(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Qh extends gd{}class gu extends gd{constructor(e){super(),this.elements=e}}function FE(i,e){const t=KE(e);for(const r of i.elements)t.some((o=>ki(o,r)))||t.push(r);return{arrayValue:{values:t}}}class yu extends gd{constructor(e){super(),this.elements=e}}function GE(i,e){let t=KE(e);for(const r of i.elements)t=t.filter((o=>!ki(o,r)));return{arrayValue:{values:t}}}class Xh extends gd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function db(i){return Tt(i.integerValue||i.doubleValue)}function KE(i){return cg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function j2(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof gu&&o instanceof gu||r instanceof yu&&o instanceof yu?Mo(r.elements,o.elements,ki):r instanceof Xh&&o instanceof Xh?ki(r.Ee,o.Ee):r instanceof Qh&&o instanceof Qh})(i.transform,e.transform)}class P2{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class yd{}function YE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new XE(i.key,cr.none()):new ku(i.key,i.data,cr.none());{const t=i.data,r=Xn.empty();let o=new Ut(nn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),o=o.add(l)}return new wa(i.key,r,new ci(o.toArray()),cr.none())}}function M2(i,e,t){i instanceof ku?(function(o,l,c){const p=o.value.clone(),m=pb(o.fieldTransforms,l,c.transformResults);p.setAll(m),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(i,e,t):i instanceof wa?(function(o,l,c){if(!Oh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const p=pb(o.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(QE(o)),m.setAll(p),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(i,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ou(i,e,t,r){return i instanceof ku?(function(l,c,p,m){if(!Oh(l.precondition,c))return p;const g=l.value.clone(),b=mb(l.fieldTransforms,m,c);return g.setAll(b),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof wa?(function(l,c,p,m){if(!Oh(l.precondition,c))return p;const g=mb(l.fieldTransforms,m,c),b=c.data;return b.setAll(QE(l)),b.setAll(g),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(i,e,t,r):(function(l,c,p){return Oh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(i,e,t)}function V2(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),l=HE(r.transform,o||null);l!=null&&(t===null&&(t=Xn.empty()),t.set(r.field,l))}return t||null}function fb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Mo(r,o,((l,c)=>j2(l,c)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ku extends yd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wa extends yd{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function QE(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function pb(i,e,t){const r=new Map;Xe(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let o=0;o<t.length;o++){const l=i[o],c=l.transform,p=e.data.field(l.field);r.set(l.field,D2(c,p,t[o]))}return r}function mb(i,e,t){const r=new Map;for(const o of i){const l=o.transform,c=t.data.field(o.field);r.set(o.field,k2(l,c,e))}return r}class XE extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U2 extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&M2(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qE();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let p=this.applyToLocalView(c,l.mutatedFields);p=t.has(o.key)?null:p;const m=YE(c,p);m!==null&&r.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,r)=>fb(t,r)))&&Mo(this.baseMutations,e.baseMutations,((t,r)=>fb(t,r)))}}class pg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let o=(function(){return x2})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new pg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,$e;function q2(i){switch(i){case ie.OK:return Te(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Te(15467,{code:i})}}function JE(i){if(i===void 0)return pr("GRPC error has no .code"),ie.UNKNOWN;switch(i){case It.OK:return ie.OK;case It.CANCELLED:return ie.CANCELLED;case It.UNKNOWN:return ie.UNKNOWN;case It.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case It.INTERNAL:return ie.INTERNAL;case It.UNAVAILABLE:return ie.UNAVAILABLE;case It.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case It.NOT_FOUND:return ie.NOT_FOUND;case It.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case It.ABORTED:return ie.ABORTED;case It.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case It.DATA_LOSS:return ie.DATA_LOSS;default:return Te(39323,{code:i})}}($e=It||(It={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ys([4294967295,4294967295],0);function gb(i){const e=bE().encode(i),t=new dE;return t.update(e),new Uint8Array(t.digest())}function yb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ys([t,r],0),new ys([o,l],0)]}class mg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ys.fromNumber(this.fe)}pe(e,t,r){let o=e.add(t.multiply(ys.fromNumber(r)));return o.compare($2)===1&&(o=new ys([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=gb(e),[r,o]=yb(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);if(!this.ye(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new mg(l,o,t);return r.forEach((p=>c.insert(p))),c}insert(e){if(this.fe===0)return;const t=gb(e),[r,o]=yb(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,o,l);this.we(c)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _d(Ae.min(),o,new ft(De),mr(),Le())}}class Du{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Du(r,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=o}}class WE{constructor(e,t){this.targetId=e,this.De=t}}class ZE{constructor(e,t,r=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class _b{constructor(){this.ve=0,this.Ce=vb(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Le(),t=Le(),r=Le();return this.Ce.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Te(38017,{changeType:l})}})),new Du(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=vb()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class H2{constructor(e){this.We=e,this.Ge=new Map,this.ze=mr(),this.je=mh(),this.Je=mh(),this.He=new ft(De)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,o)=>{this.nt(o)&&t(o)}))}it(e){const t=e.targetId,r=e.De.count,o=this.st(t);if(o){const l=o.target;if(wm(l))if(r===0){const c=new _e(l.path);this.Xe(t,c,cn.newNoDocument(c,Ae.min()))}else Xe(r===1,20013,{expectedCount:r});else{const c=this.ot(t);if(c!==r){const p=this._t(e),m=p?this.ut(p,e,c):1;if(m!==0){this.rt(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let c,p;try{c=Ts(r).toUint8Array()}catch(m){if(m instanceof SE)return bs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new mg(c,o,l)}catch(m){return bs(m instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.fe===0?null:p}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const c=this.We.lt(),p=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.Xe(t,l,null),o++)})),o}Pt(e){const t=new Map;this.Ge.forEach(((l,c)=>{const p=this.st(c);if(p){if(l.current&&wm(p.target)){const m=new _e(p.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,cn.newNoDocument(m,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}}));let r=Le();this.Je.forEach(((l,c)=>{let p=!0;c.forEachWhile((m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(e)));const o=new _d(e,t,this.He,this.ze,r);return this.ze=mr(),this.je=mh(),this.Je=mh(),this.He=new ft(De),o}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new _b,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(De),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new _b),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function mh(){return new ft(_e.comparator)}function vb(){return new ft(_e.comparator)}const F2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K2={and:"AND",or:"OR"};class Y2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tm(i,e){return i.useProto3Json||cd(e)?e:{value:e}}function Jh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(i,e){return Jh(i,e.toTimestamp())}function Ii(i){return Xe(!!i,49232),Ae.fromTimestamp((function(t){const r=Es(t);return new ot(r.seconds,r.nanos)})(i))}function gg(i,e){return Sm(i,e).canonicalString()}function Sm(i,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function tT(i){const e=dt.fromString(i);return Xe(aT(e),10190,{key:e.toString()}),e}function Am(i,e){return gg(i.databaseId,e.path)}function $p(i,e){const t=tT(e);if(t.get(1)!==i.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new _e(iT(t))}function nT(i,e){return gg(i.databaseId,e)}function X2(i){const e=tT(i);return e.length===4?dt.emptyPath():iT(e)}function Rm(i){return new dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function iT(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bb(i,e,t){return{name:Am(i,e),fields:t.value.mapValue.fields}}function J2(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Te(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,b){return g.useProto3Json?(Xe(b===void 0||typeof b=="string",58123),rn.fromBase64String(b||"")):(Xe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),rn.fromUint8Array(b||new Uint8Array))})(i,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&(function(g){const b=g.code===void 0?ie.UNKNOWN:JE(g.code);return new pe(b,g.message||"")})(c);t=new ZE(r,o,l,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=$p(i,r.document.name),l=Ii(r.document.updateTime),c=r.document.createTime?Ii(r.document.createTime):Ae.min(),p=new Xn({mapValue:{fields:r.document.fields}}),m=cn.newFoundDocument(o,l,c,p),g=r.targetIds||[],b=r.removedTargetIds||[];t=new Nh(g,b,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=$p(i,r.document),l=r.readTime?Ii(r.readTime):Ae.min(),c=cn.newNoDocument(o,l),p=r.removedTargetIds||[];t=new Nh([],p,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=$p(i,r.document),l=r.removedTargetIds||[];t=new Nh([],l,o,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,c=new B2(o,l),p=r.targetId;t=new WE(p,c)}}return t}function W2(i,e){let t;if(e instanceof ku)t={update:bb(i,e.key,e.value)};else if(e instanceof XE)t={delete:Am(i,e.key)};else if(e instanceof wa)t={update:bb(i,e.key,e.data),updateMask:oO(e.fieldMask)};else{if(!(e instanceof U2))return Te(16599,{Rt:e.type});t={verify:Am(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const p=c.transform;if(p instanceof Qh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Xh)return{fieldPath:c.field.canonicalString(),increment:p.Ee};throw Te(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Q2(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(i,e.precondition)),t}function Z2(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((t=>(function(o,l){let c=o.updateTime?Ii(o.updateTime):Ii(l);return c.isEqual(Ae.min())&&(c=Ii(l)),new P2(c,o.transformResults||[])})(t,e)))):[]}function eO(i,e){return{documents:[nT(i,e.path)]}}function tO(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nT(i,o);const l=(function(g){if(g.length!==0)return sT(Di.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((b=>(function(S){return{field:wo(S.field),direction:rO(S.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=Tm(i,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:o}}function nO(i){let e=X2(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const S=rT(E);return S instanceof Di&&jE(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(j){return new Yh(Eo(j.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(S)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let S;return S=typeof E=="object"?E.value:E,cd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(E){const S=!!E.before,x=E.values||[];return new Kh(x,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,x=E.values||[];return new Kh(x,S)})(t.endAt)),w2(e,o,c,l,p,"F",m,g)}function iO(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rT(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Eo(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(t.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Eo(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Eo(t.unaryFilter.field);return Mt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Mt.create(Eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return Di.create(t.compositeFilter.filters.map((r=>rT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(i):Te(30097,{filter:i})}function rO(i){return F2[i]}function sO(i){return G2[i]}function aO(i){return K2[i]}function wo(i){return{fieldPath:i.canonicalString()}}function Eo(i){return nn.fromServerFormat(i.fieldPath)}function sT(i){return i instanceof Mt?(function(t){if(t.op==="=="){if(ob(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(ab(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ob(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(ab(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:sO(t.op),value:t.value}}})(i):i instanceof Di?(function(t){const r=t.getFilters().map((o=>sT(o)));return r.length===1?r[0]:{compositeFilter:{op:aO(t.op),filters:r}}})(i):Te(54877,{filter:i})}function oO(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t,r,o,l=Ae.min(),c=Ae.min(),p=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.gt=e}}function uO(i){const e=nO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Dn=new hO}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ws.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class hO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Ut(dt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ut(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oT=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(oT,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Lo(0)}static ur(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="LruGarbageCollector",dO=1048576;function Tb([i,e],[t,r]){const o=De(i,t);return o===0?De(e,r):o}class fO{constructor(e){this.Tr=e,this.buffer=new Ut(Tb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Tb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(Eb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Go(t)?ue(Eb,"Ignoring IndexedDB error during garbage collection: ",t):await Fo(t)}await this.Rr(3e5)}))}}class mO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(ud.ue);const r=new fO(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.gr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(wb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wb):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,o,l,c,p,m,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),vo()<=Ue.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${o} in `+(p-c)+`ms
	Removed ${l} targets in `+(m-p)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-b}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function gO(i,e){return new mO(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&ou(r.mutation,o,ci.empty(),ot.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Le()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Le()){const o=ua();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let c=Wl();return l.forEach(((p,m)=>{c=c.insert(p,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ua();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Le())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,p)=>{t.set(c,p)}))}))}computeViews(e,t,r,o){let l=mr();const c=au(),p=(function(){return au()})();return t.forEach(((m,g)=>{const b=r.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof wa)?l=l.insert(g.key,g):b!==void 0?(c.set(g.key,b.mutation.getFieldMask()),ou(b.mutation,g,b.mutation.getFieldMask(),ot.now())):c.set(g.key,ci.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,b)=>c.set(g,b))),t.forEach(((g,b)=>{var E;return p.set(g,new _O(b,(E=c.get(g))!==null&&E!==void 0?E:null))})),p)))}recalculateAndSaveOverlays(e,t){const r=au();let o=new ft(((c,p)=>c-p)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const p of c)p.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let b=r.get(m)||ci.empty();b=p.applyToLocalView(g,b),r.set(m,b);const E=(o.get(p.batchId)||Le()).add(m);o=o.insert(p.batchId,E)}))})).next((()=>{const c=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),g=m.key,b=m.value,E=qE();b.forEach((S=>{if(!l.has(S)){const x=YE(t.get(S),r.get(S));x!==null&&E.set(S,x),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):ee.resolve(ua());let p=du,m=l;return c.next((g=>ee.forEach(g,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),l.get(b)?ee.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{m=m.insert(b,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Le()))).next((b=>({batchId:p,changes:BE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let o=Wl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let c=Wl();return this.indexManager.getCollectionParents(e,l).next((p=>ee.forEach(p,(m=>{const g=(function(E,S){return new dd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,o).next((b=>{b.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((c=>{l.forEach(((m,g)=>{const b=g.getKey();c.get(b)===null&&(c=c.insert(b,cn.newInvalidDocument(b)))}));let p=Wl();return c.forEach(((m,g)=>{const b=l.get(m);b!==void 0&&ou(b.mutation,g,ci.empty(),ot.now()),md(t,g)&&(p=p.insert(m,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(o){return{name:o.name,query:uO(o.bundledQuery),readTime:Ii(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.overlays=new ft(_e.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ua();return ee.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.wt(e,t,l)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.kr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const o=ua(),l=t.length+1,c=new _e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const m=p.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&o.set(m.getKey(),m)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new ft(((g,b)=>g-b));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let b=l.get(g.largestBatchId);b===null&&(b=ua(),l=l.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const p=ua(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,b)=>p.set(g,b))),!(p.size()>=o)););return ee.resolve(p)}wt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(r.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new z2(t,r));let l=this.kr.get(t);l===void 0&&(l=Le(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.qr=new Ut(Ht.Qr),this.$r=new Ut(Ht.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ht(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new _e(new dt([])),r=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.$r.forEachInRange([r,o],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new _e(new dt([])),r=new Ht(t,e),o=new Ht(t,e+1);let l=Le();return this.$r.forEachInRange([r,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return _e.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut(Ht.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new L2(l,t,r,o);this.mutationQueue.push(c);for(const p of o)this.Yr=this.Yr.add(new Ht(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),l=o<0?0:o;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?lg:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,o],(c=>{const p=this.Zr(c.Hr);l.push(p)})),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(De);return t.forEach((o=>{const l=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(p=>{r=r.add(p.Hr)}))})),ee.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;_e.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new _e(l),0);let p=new Ut(De);return this.Yr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===o&&(p=p.add(m.Hr)),!0)}),c),ee.resolve(this.ei(p))}ei(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ee.forEach(t.mutations,(o=>{const l=new Ht(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new Ht(t,0),o=this.Yr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.ni=e,this.docs=(function(){return new ft(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=mr();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():cn.newInvalidDocument(o))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=mr();const c=t.path,p=new _e(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:g,value:{document:b}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||ZI(WI(b),r)<=0||(o.has(b.key)||md(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,r,o){Te(9500)}ri(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new AO(this)}getSize(e){return ee.resolve(this.size)}}class AO extends yO{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.persistence=e,this.ii=new ba((t=>hg(t)),dg),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new yg,this.targetCount=0,this._i=Lo.ar()}forEachTarget(e,t){return this.ii.forEach(((r,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.ii.forEach(((c,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ee.waitFor(l).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t){this.ai={},this.overlays={},this.ui=new ud(0),this.ci=!1,this.ci=!0,this.li=new EO,this.referenceDelegate=e(this),this.hi=new RO(this),this.indexManager=new cO,this.remoteDocumentCache=(function(o){return new SO(o)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new lO(t),this.Ti=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new TO(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const o=new xO(this.ui.next());return this.referenceDelegate.Ii(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ee.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class xO extends t2{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ai=new yg,this.Ri=null}static Vi(e){return new _g(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((o=>this.mi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,(r=>{const o=_e.fromPath(r);return this.fi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wh{constructor(e,t){this.persistence=e,this.gi=new ba((r=>r2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=gO(this,t)}static Vi(e,t){return new Wh(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return ee.forEach(this.gi,((r,o)=>this.Sr(e,r,o).next((l=>l?ee.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ri(e,(c=>this.Sr(e,c,t).next((p=>{p||(r++,l.removeEntry(c,Ae.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ch(e.data.value)),t}Sr(e,t,r){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=o}static Es(e,t){let r=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new vg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return ER()?8:n2(hn())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ps(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(e,t,o,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new CO;return this.ws(e,t,c).next((p=>{if(l.result=p,this.Rs)return this.Ss(e,t,c,p.size)}))})).next((()=>l.result))}Ss(e,t,r,o){return r.documentReadCount<this.Vs?(vo()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(vo()<=Ue.DEBUG&&ue("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.fs*o?(vo()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ci(t))):ee.resolve())}ps(e,t){if(hb(t))return ee.resolve(null);let r=Ci(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Em(t,null,"F"),r=Ci(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Le(...l);return this.gs.getDocuments(e,c).next((p=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,p);return this.Ds(t,g,c,m.readTime)?this.ps(e,Em(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ys(e,t,r,o){return hb(t)||o.isEqual(Ae.min())?ee.resolve(null):this.gs.getDocuments(e,r).next((l=>{const c=this.bs(t,l);return this.Ds(t,c,r,o)?ee.resolve(null):(vo()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(t)),this.vs(e,c,t,JI(o,du)).next((p=>p)))}))}bs(e,t){let r=new Ut(LE(e));return t.forEach(((o,l)=>{md(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ws(e,t,r){return vo()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",bo(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),r)}vs(e,t,r,o){return this.gs.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LocalStore",OO=3e8;class NO{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new ft(De),this.Ms=new ba((l=>hg(l)),dg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vO(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function kO(i,e,t,r){return new NO(i,e,t,r)}async function uT(i,e){const t=xe(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],p=[];let m=Le();for(const g of o){c.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}for(const g of l){p.push(g.batchId);for(const b of g.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Bs:g,removedBatchIds:c,addedBatchIds:p})))}))}))}function DO(i,e){const t=xe(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(p,m,g,b){const E=g.batch,S=E.keys();let x=ee.resolve();return S.forEach((j=>{x=x.next((()=>b.getEntry(m,j))).next((z=>{const q=g.docVersions.get(j);Xe(q!==null,48541),z.version.compareTo(q)<0&&(E.applyToRemoteDocument(z,g),z.isValidDocument()&&(z.setReadTime(g.commitVersion),b.addEntry(z)))}))})),x.next((()=>p.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let m=Le();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(m=m.add(p.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function cT(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function jO(i,e){const t=xe(i),r=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const p=[];e.targetChanges.forEach(((b,E)=>{const S=o.get(E);if(!S)return;p.push(t.hi.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.hi.addMatchingKeys(l,b.addedDocuments,E))));let x=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):b.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(b.resumeToken,r)),o=o.insert(E,x),(function(z,q,J){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=OO?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(S,x,b)&&p.push(t.hi.updateTargetData(l,x))}));let m=mr(),g=Le();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),p.push(PO(l,c,e.documentUpdates).next((b=>{m=b.Ls,g=b.ks}))),!r.isEqual(Ae.min())){const b=t.hi.getLastRemoteSnapshotVersion(l).next((E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));p.push(b)}return ee.waitFor(p).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Fs=o,l)))}function PO(i,e,t){let r=Le(),o=Le();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let c=mr();return t.forEach(((p,m)=>{const g=l.get(p);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(p,m.readTime),c=c.insert(p,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(p,m)):ue(bg,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",m.version)})),{Ls:c,ks:o}}))}function MO(i,e){const t=xe(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function VO(i,e){const t=xe(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.hi.getTargetData(r,e).next((l=>l?(o=l,ee.resolve(o)):t.hi.allocateTargetId(r).next((c=>(o=new fs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Fs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function xm(i,e,t){const r=xe(i),o=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Go(c))throw c;ue(bg,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(o.target)}function Sb(i,e,t){const r=xe(i);let o=Ae.min(),l=Le();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,b){const E=xe(m),S=E.Ms.get(b);return S!==void 0?ee.resolve(E.Fs.get(S)):E.hi.getTargetData(g,b)})(r,c,Ci(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,p.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,e,t?o:Ae.min(),t?l:Le()))).next((p=>(UO(r,S2(e),p),{documents:p,qs:l})))))}function UO(i,e,t){let r=i.xs.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}class Ab{constructor(){this.activeTargetIds=O2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LO{constructor(){this.Fo=new Ab,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ab,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="ConnectivityMonitor";class xb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(Rb,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(Rb,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Cm(){return gh===null?gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="RestConnection",BO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qO{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.Ko=this.databaseId.database===Fh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,l){const c=Cm(),p=this.Go(e,t.toUriEncodedString());ue(Hp,`Sending RPC '${e}' ${c}:`,p,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,o,l);const{host:g}=new URL(p),b=Bo(g);return this.jo(e,p,m,r,b).then((E=>(ue(Hp,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw bs(Hp,`RPC '${e}' ${c} failed with error: `,E,"url: ",p,"request:",r),E}))}Jo(e,t,r,o,l,c){return this.Wo(e,t,r,o,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}Go(e,t){const r=BO[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class HO extends qO{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,o,l){const c=Cm();return new Promise(((p,m)=>{const g=new fE;g.setWithCredentials(!0),g.listenOnce(pE.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case xh.NO_ERROR:const E=g.getResponseJson();ue(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),p(E);break;case xh.TIMEOUT:ue(ln,`RPC '${e}' ${c} timed out`),m(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const S=g.getStatus();if(ue(ln,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x==null?void 0:x.error;if(j&&j.status&&j.message){const z=(function(J){const te=J.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(te)>=0?te:ie.UNKNOWN})(j.status);m(new pe(z,j.message))}else m(new pe(ie.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue(ln,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(o);ue(ln,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",b,r,15)}))}P_(e,t,r){const o=Cm(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=yE(),p=gE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const b=l.join("");ue(ln,`Creating RPC '${e}' stream ${o}: ${b}`,m);const E=c.createWebChannel(b,m);this.T_(E);let S=!1,x=!1;const j=new $O({Ho:q=>{x?ue(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(S||(ue(ln,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ue(ln,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},Yo:()=>E.close()}),z=(q,J,te)=>{q.listen(J,(H=>{try{te(H)}catch(re){setTimeout((()=>{throw re}),0)}}))};return z(E,Jl.EventType.OPEN,(()=>{x||(ue(ln,`RPC '${e}' stream ${o} transport opened.`),j.s_())})),z(E,Jl.EventType.CLOSE,(()=>{x||(x=!0,ue(ln,`RPC '${e}' stream ${o} transport closed`),j.__(),this.I_(E))})),z(E,Jl.EventType.ERROR,(q=>{x||(x=!0,bs(ln,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.__(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),z(E,Jl.EventType.MESSAGE,(q=>{var J;if(!x){const te=q.data[0];Xe(!!te,16349);const H=te,re=(H==null?void 0:H.error)||((J=H[0])===null||J===void 0?void 0:J.error);if(re){ue(ln,`RPC '${e}' stream ${o} received error:`,re);const ge=re.status;let ce=(function(C){const P=It[C];if(P!==void 0)return JE(P)})(ge),I=re.message;ce===void 0&&(ce=ie.INTERNAL,I="Unknown error status: "+ge+" with message "+re.message),x=!0,j.__(new pe(ce,I)),E.close()}else ue(ln,`RPC '${e}' stream ${o} received:`,te),j.a_(te)}})),z(p,mE.STAT_EVENT,(q=>{q.stat===gm.PROXY?ue(ln,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===gm.NOPROXY&&ue(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.o_()}),0),j}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i){return new Y2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=o,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-r);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="PersistentStream";class dT{constructor(e,t,r,o,l,c,p,m){this.Fi=e,this.w_=r,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hT(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.b_===t&&this.W_(r,o)}),(r=>{e((()=>{const o=new pe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(o)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((o=>{r((()=>this.G_(o)))})),this.stream.onMessage((o=>{r((()=>++this.C_==1?this.j_(o):this.onNext(o)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ue(Cb,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ue(Cb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FO extends dT{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=J2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Ii(c.readTime):Ae.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Rm(this.serializer),t.addTarget=(function(l,c){let p;const m=c.target;if(p=wm(m)?{documents:eO(l,m)}:{query:tO(l,m).Vt},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=eT(l,c.resumeToken);const g=Tm(l,c.expectedCount);g!==null&&(p.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){p.readTime=Jh(l,c.snapshotVersion.toTimestamp());const g=Tm(l,c.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=iO(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Rm(this.serializer),t.removeTarget=e,this.k_(t)}}class GO extends dT{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Z2(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Rm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>W2(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{}class YO extends KO{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Sm(t,r),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(ie.UNKNOWN,l.toString())}))}Jo(e,t,r,o,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Jo(e,Sm(t,r),o,c,p,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ie.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class QO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(pr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class XO{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{Ea(this)&&(ue(ya,"Restarting streams for network reachability change."),await(async function(m){const g=xe(m);g.Ia.add(4),await ju(g),g.Aa.set("Unknown"),g.Ia.delete(4),await bd(g)})(this))}))})),this.Aa=new QO(r,o)}}async function bd(i){if(Ea(i))for(const e of i.da)await e(!0)}async function ju(i){for(const e of i.da)await e(!1)}function fT(i,e){const t=xe(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Sg(t)?Tg(t):Ko(t).x_()&&Eg(t,e))}function wg(i,e){const t=xe(i),r=Ko(t);t.Ta.delete(e),r.x_()&&pT(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ea(t)&&t.Aa.set("Unknown"))}function Eg(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(i).H_(e)}function pT(i,e){i.Ra.$e(e),Ko(i).Y_(e)}function Tg(i){i.Ra=new H2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),Ko(i).start(),i.Aa.aa()}function Sg(i){return Ea(i)&&!Ko(i).M_()&&i.Ta.size>0}function Ea(i){return xe(i).Ia.size===0}function mT(i){i.Ra=void 0}async function JO(i){i.Aa.set("Online")}async function WO(i){i.Ta.forEach(((e,t)=>{Eg(i,e)}))}async function ZO(i,e){mT(i),Sg(i)?(i.Aa.la(e),Tg(i)):i.Aa.set("Unknown")}async function eN(i,e,t){if(i.Aa.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const p of l.targetIds)o.Ta.has(p)&&(await o.remoteSyncer.rejectListen(p,c),o.Ta.delete(p),o.Ra.removeTarget(p))})(i,e)}catch(r){ue(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zh(i,r)}else if(e instanceof Nh?i.Ra.Ye(e):e instanceof WE?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Ae.min()))try{const r=await cT(i.localStore);t.compareTo(r)>=0&&await(function(l,c){const p=l.Ra.Pt(c);return p.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const b=l.Ta.get(g);b&&l.Ta.set(g,b.withResumeToken(m.resumeToken,c))}})),p.targetMismatches.forEach(((m,g)=>{const b=l.Ta.get(m);if(!b)return;l.Ta.set(m,b.withResumeToken(rn.EMPTY_BYTE_STRING,b.snapshotVersion)),pT(l,m);const E=new fs(b.target,m,g,b.sequenceNumber);Eg(l,E)})),l.remoteSyncer.applyRemoteEvent(p)})(i,t)}catch(r){ue(ya,"Failed to raise snapshot:",r),await Zh(i,r)}}async function Zh(i,e,t){if(!Go(e))throw e;i.Ia.add(1),await ju(i),i.Aa.set("Offline"),t||(t=()=>cT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ue(ya,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await bd(i)}))}function gT(i,e){return e().catch((t=>Zh(i,t,e)))}async function wd(i){const e=xe(i),t=As(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lg;for(;tN(e);)try{const o=await MO(e.localStore,r);if(o===null){e.Pa.length===0&&t.B_();break}r=o.batchId,nN(e,o)}catch(o){await Zh(e,o)}yT(e)&&_T(e)}function tN(i){return Ea(i)&&i.Pa.length<10}function nN(i,e){i.Pa.push(e);const t=As(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function yT(i){return Ea(i)&&!As(i).M_()&&i.Pa.length>0}function _T(i){As(i).start()}async function iN(i){As(i).na()}async function rN(i){const e=As(i);for(const t of i.Pa)e.X_(t.mutations)}async function sN(i,e,t){const r=i.Pa.shift(),o=pg.from(r,e,t);await gT(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await wd(i)}async function aN(i,e){e&&As(i).Z_&&await(async function(r,o){if((function(c){return q2(c)&&c!==ie.ABORTED})(o.code)){const l=r.Pa.shift();As(r).N_(),await gT(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await wd(r)}})(i,e),yT(i)&&_T(i)}async function Ib(i,e){const t=xe(i);t.asyncQueue.verifyOperationInProgress(),ue(ya,"RemoteStore received new credentials");const r=Ea(t);t.Ia.add(3),await ju(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bd(t)}async function oN(i,e){const t=xe(i);e?(t.Ia.delete(2),await bd(t)):e||(t.Ia.add(2),await ju(t),t.Aa.set("Unknown"))}function Ko(i){return i.Va||(i.Va=(function(t,r,o){const l=xe(t);return l.ia(),new FO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:JO.bind(null,i),e_:WO.bind(null,i),n_:ZO.bind(null,i),J_:eN.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),Sg(i)?Tg(i):i.Aa.set("Unknown")):(await i.Va.stop(),mT(i))}))),i.Va}function As(i){return i.ma||(i.ma=(function(t,r,o){const l=xe(t);return l.ia(),new GO(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:iN.bind(null,i),n_:aN.bind(null,i),ea:rN.bind(null,i),ta:sN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await wd(i)):(await i.ma.stop(),i.Pa.length>0&&(ue(ya,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,p=new Ag(e,t,c,o,l);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(i,e){if(pr("AsyncQueue",`${e}: ${i}`),Go(i))return new pe(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Wl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new No;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(){this.fa=new ft(_e.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Te(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class zo{constructor(e,t,r,o,l,c,p,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach((p=>{c.push({type:0,doc:p})})),new zo(e,t,No.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class uN{constructor(){this.queries=Nb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const o=xe(t),l=o.queries;o.queries=Nb(),l.forEach(((c,p)=>{for(const m of p.wa)m.onError(r)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function Nb(){return new ba((i=>UE(i)),pd)}async function vT(i,e){const t=xe(i);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.ba()&&(r=2):(l=new lN,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(o,!0);break;case 1:l.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const p=Rg(c,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&xg(t)}async function bT(i,e){const t=xe(i),r=e.query;let o=3;const l=t.queries.get(r);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?o=e.ba()?0:1:!l.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cN(i,e){const t=xe(i);let r=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const p of c.wa)p.Ca(o)&&(r=!0);c.ya=o}}r&&xg(t)}function hN(i,e,t){const r=xe(i),o=r.queries.get(e);if(o)for(const l of o.wa)l.onError(t);r.queries.delete(e)}function xg(i){i.Da.forEach((e=>{e.next()}))}var Im,kb;(kb=Im||(Im={})).Fa="default",kb.Cache="cache";class wT{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.key=e}}class TT{constructor(e){this.key=e}}class dN{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Le(),this.mutatedKeys=Le(),this.Xa=LE(e),this.eu=new No(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Ob,o=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,E)=>{const S=o.get(b),x=md(this.query,E)?E:null,j=!!S&&this.mutatedKeys.has(S.key),z=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let q=!1;S&&x?S.data.isEqual(x.data)?j!==z&&(r.track({type:3,doc:x}),q=!0):this.iu(S,x)||(r.track({type:2,doc:x}),q=!0,(m&&this.Xa(x,m)>0||g&&this.Xa(x,g)<0)&&(p=!0)):!S&&x?(r.track({type:0,doc:x}),q=!0):S&&!x&&(r.track({type:1,doc:S}),q=!0,(m||g)&&(p=!0)),q&&(x?(c=c.add(x),l=z?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{eu:c,ru:r,Ds:p,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort(((b,E)=>(function(x,j){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:q})}};return z(x)-z(j)})(b.type,E.type)||this.Xa(b.doc,E.doc))),this.su(r),o=o!=null&&o;const p=t&&!o?this.ou():[],m=this.Za.size===0&&this.current&&!o?1:0,g=m!==this.Ya;return this.Ya=m,c.length!==0||g?{snapshot:new zo(this.query,e.eu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:p}:{_u:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Ob,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Le(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new TT(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new ET(r))})),t}uu(e){this.Ha=e.qs,this.Za=Le();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return zo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Cg="SyncEngine";class fN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pN{constructor(e){this.key=e,this.lu=!1}}class mN{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ba((p=>UE(p)),pd),this.Tu=new Map,this.Iu=new Set,this.du=new ft(_e.comparator),this.Eu=new Map,this.Au=new yg,this.Ru={},this.Vu=new Map,this.mu=Lo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gN(i,e,t=!0){const r=IT(i);let o;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.cu()):o=await ST(r,e,t,!0),o}async function yN(i,e){const t=IT(i);await ST(t,e,!0,!1)}async function ST(i,e,t,r){const o=await VO(i.localStore,Ci(e)),l=o.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let p;return r&&(p=await _N(i,e,l,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&fT(i.remoteStore,o),p}async function _N(i,e,t,r,o){i.gu=(E,S,x)=>(async function(z,q,J,te){let H=q.view.nu(J);H.Ds&&(H=await Sb(z.localStore,q.query,!1).then((({documents:I})=>q.view.nu(I,H))));const re=te&&te.targetChanges.get(q.targetId),ge=te&&te.targetMismatches.get(q.targetId)!=null,ce=q.view.applyChanges(H,z.isPrimaryClient,re,ge);return jb(z,q.targetId,ce._u),ce.snapshot})(i,E,S,x);const l=await Sb(i.localStore,e,!0),c=new dN(e,l.qs),p=c.nu(l.documents),m=Du.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),g=c.applyChanges(p,i.isPrimaryClient,m);jb(i,t,g._u);const b=new fN(e,t,c);return i.Pu.set(e,b),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),g.snapshot}async function vN(i,e,t){const r=xe(i),o=r.Pu.get(e),l=r.Tu.get(o.targetId);if(l.length>1)return r.Tu.set(o.targetId,l.filter((c=>!pd(c,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await xm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&wg(r.remoteStore,o.targetId),Om(r,o.targetId)})).catch(Fo)):(Om(r,o.targetId),await xm(r.localStore,o.targetId,!0))}async function bN(i,e){const t=xe(i),r=t.Pu.get(e),o=t.Tu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),wg(t.remoteStore,r.targetId))}async function wN(i,e,t){const r=CN(i);try{const o=await(function(c,p){const m=xe(c),g=ot.now(),b=p.reduce(((x,j)=>x.add(j.key)),Le());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let j=mr(),z=Le();return m.Os.getEntries(x,b).next((q=>{j=q,j.forEach(((J,te)=>{te.isValidDocument()||(z=z.add(J))}))})).next((()=>m.localDocuments.getOverlayedDocuments(x,j))).next((q=>{E=q;const J=[];for(const te of p){const H=V2(te,E.get(te.key).overlayedDocument);H!=null&&J.push(new wa(te.key,H,NE(H.value.mapValue),cr.exists(!0)))}return m.mutationQueue.addMutationBatch(x,g,J,p)})).next((q=>{S=q;const J=q.applyToLocalDocumentSet(E,z);return m.documentOverlayCache.saveOverlays(x,q.batchId,J)}))})).then((()=>({batchId:S.batchId,changes:BE(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,p,m){let g=c.Ru[c.currentUser.toKey()];g||(g=new ft(De)),g=g.insert(p,m),c.Ru[c.currentUser.toKey()]=g})(r,o.batchId,t),await Pu(r,o.changes),await wd(r.remoteStore)}catch(o){const l=Rg(o,"Failed to persist write");t.reject(l)}}async function AT(i,e){const t=xe(i);try{const r=await jO(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Eu.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Xe(c.lu,14607):o.removedDocuments.size>0&&(Xe(c.lu,42227),c.lu=!1))})),await Pu(t,r,e)}catch(r){await Fo(r)}}function Db(i,e,t){const r=xe(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Pu.forEach(((l,c)=>{const p=c.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(c,p){const m=xe(c);m.onlineState=p;let g=!1;m.queries.forEach(((b,E)=>{for(const S of E.wa)S.va(p)&&(g=!0)})),g&&xg(m)})(r.eventManager,e),o.length&&r.hu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EN(i,e,t){const r=xe(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let c=new ft(_e.comparator);c=c.insert(l,cn.newNoDocument(l,Ae.min()));const p=Le().add(l),m=new _d(Ae.min(),new Map,new ft(De),c,p);await AT(r,m),r.du=r.du.remove(l),r.Eu.delete(e),Ig(r)}else await xm(r.localStore,e,!1).then((()=>Om(r,e,t))).catch(Fo)}async function TN(i,e){const t=xe(i),r=e.batch.batchId;try{const o=await DO(t.localStore,e);xT(t,r,null),RT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Pu(t,o)}catch(o){await Fo(o)}}async function SN(i,e,t){const r=xe(i);try{const o=await(function(c,p){const m=xe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let b;return m.mutationQueue.lookupMutationBatch(g,p).next((E=>(Xe(E!==null,37113),b=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,b,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b))).next((()=>m.localDocuments.getDocuments(g,b)))}))})(r.localStore,e);xT(r,e,t),RT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Pu(r,o)}catch(o){await Fo(o)}}function RT(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function xT(i,e,t){const r=xe(i);let o=r.Ru[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Ru[r.currentUser.toKey()]=o}}function Om(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||CT(i,r)}))}function CT(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(wg(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),Ig(i))}function jb(i,e,t){for(const r of t)r instanceof ET?(i.Au.addReference(r.key,e),AN(i,r)):r instanceof TT?(ue(Cg,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||CT(i,r.key)):Te(19791,{yu:r})}function AN(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(ue(Cg,"New document in limbo: "+t),i.Iu.add(r),Ig(i))}function Ig(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new _e(dt.fromString(e)),r=i.mu.next();i.Eu.set(r,new pN(t)),i.du=i.du.insert(t,r),fT(i.remoteStore,new fs(Ci(fd(t.path)),r,"TargetPurposeLimboResolution",ud.ue))}}async function Pu(i,e,t){const r=xe(i),o=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((p,m)=>{c.push(r.gu(m,e,t).then((g=>{var b;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(b=t==null?void 0:t.targetChanges.get(m.targetId))===null||b===void 0?void 0:b.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){o.push(g);const E=vg.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),r.hu.J_(o),await(async function(m,g){const b=xe(m);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ee.forEach(g,(S=>ee.forEach(S.Is,(x=>b.persistence.referenceDelegate.addReference(E,S.targetId,x))).next((()=>ee.forEach(S.ds,(x=>b.persistence.referenceDelegate.removeReference(E,S.targetId,x)))))))))}catch(E){if(!Go(E))throw E;ue(bg,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const x=b.Fs.get(S),j=x.snapshotVersion,z=x.withLastLimboFreeSnapshotVersion(j);b.Fs=b.Fs.insert(S,z)}}})(r.localStore,l))}async function RN(i,e){const t=xe(i);if(!t.currentUser.isEqual(e)){ue(Cg,"User change. New user:",e.toKey());const r=await uT(t.localStore,e);t.currentUser=e,(function(l,c){l.Vu.forEach((p=>{p.forEach((m=>{m.reject(new pe(ie.CANCELLED,c))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Pu(t,r.Bs)}}function xN(i,e){const t=xe(i),r=t.Eu.get(e);if(r&&r.lu)return Le().add(r.key);{let o=Le();const l=t.Tu.get(e);if(!l)return o;for(const c of l){const p=t.Pu.get(c);o=o.unionWith(p.view.tu)}return o}}function IT(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EN.bind(null,e),e.hu.J_=cN.bind(null,e.eventManager),e.hu.pu=hN.bind(null,e.eventManager),e}function CN(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SN.bind(null,e),e}class ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return kO(this.persistence,new IO,e.initialUser,this.serializer)}Du(e){return new lT(_g.Vi,this.serializer)}bu(e){return new LO}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ed.provider={build:()=>new ed};class IN extends ed{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Xe(this.persistence.referenceDelegate instanceof Wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pO(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new lT((r=>Wh.Vi(r,t)),this.serializer)}}class Nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Db(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RN.bind(null,this.syncEngine),await oN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uN})()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),r=(function(l){return new HO(l)})(e.databaseInfo);return(function(l,c,p,m){return new YO(l,c,p,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,c,p){return new XO(r,o,l,c,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Db(this.syncEngine,t,0)),(function(){return xb.C()?new xb:new zO})())}createSyncEngine(e,t){return(function(o,l,c,p,m,g,b){const E=new mN(o,l,c,p,m,g);return b&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=xe(o);ue(ya,"RemoteStore shutting down."),l.Ia.add(5),await ju(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Nm.provider={build:()=>new Nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class ON{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ue(Rs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ue(Rs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Rg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Gp(i,e){i.asyncQueue.verifyOperationInProgress(),ue(Rs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await uT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>{bs("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((o=>{bs("Terminating Firestore due to IndexedDb database deletion failed",o)}))})),i._offlineComponents=e}async function Pb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await NN(i);ue(Rs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>Ib(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Ib(e.remoteStore,o))),i._onlineComponents=e}async function NN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue(Rs,"Using user provided OfflineComponentProvider");try{await Gp(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),await Gp(i,new ed)}}else ue(Rs,"Using default OfflineComponentProvider"),await Gp(i,new IN(void 0));return i._offlineComponents}async function NT(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue(Rs,"Using user provided OnlineComponentProvider"),await Pb(i,i._uninitializedComponentsProvider._online)):(ue(Rs,"Using default OnlineComponentProvider"),await Pb(i,new Nm))),i._onlineComponents}function kN(i){return NT(i).then((e=>e.syncEngine))}async function km(i){const e=await NT(i),t=e.eventManager;return t.onListen=gN.bind(null,e.syncEngine),t.onUnlisten=vN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bN.bind(null,e.syncEngine),t}function DN(i,e,t={}){const r=new _s;return i.asyncQueue.enqueueAndForget((async()=>(function(l,c,p,m,g){const b=new OT({next:S=>{b.Ou(),c.enqueueAndForget((()=>bT(l,E)));const x=S.docs.has(p);!x&&S.fromCache?g.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&m&&m.source==="server"?g.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new wT(fd(p.path),b,{includeMetadataChanges:!0,ka:!0});return vT(l,E)})(await km(i),i.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firestore.googleapis.com",Vb=!0;class Ub{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DT,this.ssl=Vb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Vb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dO)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Og{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zI;switch(r.type){case"firstParty":return new HI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Mb.get(t);r&&(ue("ComponentProvider","Removing Datastore"),Mb.delete(t),r.terminate())})(this),Promise.resolve()}}function jN(i,e,t,r={}){var o;i=vs(i,Og);const l=Bo(e),c=i._getSettings(),p=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Cw(`https://${m}`),Iw("Firestore",!0)),c.host!==DT&&c.host!==m&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:r});if(!fa(g,p)&&(i._setSettings(g),r.mockUserToken)){let b,E;if(typeof r.mockUserToken=="string")b=r.mockUserToken,E=un.MOCK_USER;else{b=fR(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(S)}i._authCredentials=new BI(new vE(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ed(this.firestore,e,this._query)}}class Vt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Nu(t,Vt._jsonSchema))return new Vt(e,r||null,new _e(dt.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:Nt("string",Vt._jsonSchemaVersion),referencePath:Nt("string")};class _u extends Ed{constructor(e,t,r){super(e,t,fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new _e(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function kh(i,e,...t){if(i=Wn(i),arguments.length===1&&(e=ag.newId()),QI("doc","path",e),i instanceof Og){const r=dt.fromString(e,...t);return W0(r),new Vt(i,null,new _e(r))}{if(!(i instanceof Vt||i instanceof _u))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(dt.fromString(e,...t));return W0(r),new Vt(i.firestore,i instanceof _u?i.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="AsyncQueue";class zb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hT(this,"async_queue_retry"),this.oc=()=>{const r=Fp();r&&ue(Lb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Fp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Fp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new _s;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Go(e))throw e;ue(Lb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,pr("INTERNAL UNHANDLED ERROR: ",Bb(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Ag.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(o),o}ac(){this.tc&&Te(47125,{hc:Bb(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Bb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(i,["next","error","complete"])}class vu extends Og{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new zb,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zb(e),this._firestoreClient=void 0,await e}}}function jT(i,e){const t=typeof i=="object"?i:kw(),r=typeof i=="string"?i:Fh,o=Km(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=hR("firestore");l&&jN(o,...l)}return o}function Ng(i){if(i._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||PN(i),i._firestoreClient}function PN(i){var e,t,r;const o=i._freezeSettings(),l=(function(p,m,g,b){return new o2(p,m,g,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,kT(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new ON(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(rn.fromBase64String(e))}catch(t){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Nt("string",Jn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Nt("string",Oi._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ni(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Nt("string",Ni._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=/^__.*__$/;class VN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}function MT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:i})}}class Dg{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.fc(e),o}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:r,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return td(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(MT(this.Ec)&&MN.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class UN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vd(e)}Dc(e,t,r,o=!1){return new Dg({Ec:e,methodName:t,bc:r,path:nn.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LN(i){const e=i._freezeSettings(),t=vd(i._databaseId);return new UN(i._databaseId,!!e.ignoreUndefinedProperties,t)}function zN(i,e,t,r,o,l={}){const c=i.Dc(l.merge||l.mergeFields?2:0,e,t,o);zT("Data must be an object, but it was:",c,r);const p=UT(r,c);let m,g;if(l.merge)m=new ci(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const E of l.mergeFields){const S=BN(e,E,t);if(!c.contains(S))throw new pe(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$N(b,S)||b.push(S)}m=new ci(b),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new VN(new Xn(p),m,g)}function VT(i,e){if(LT(i=Wn(i)))return zT("Unsupported field value:",e,i),UT(i,e);if(i instanceof PT)return(function(r,o){if(!MT(o.Ec))throw o.wc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,o){const l=[];let c=0;for(const p of r){let m=VT(p,o.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(i,e)}return(function(r,o){if((r=Wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return N2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ot.fromDate(r);return{timestampValue:Jh(o.serializer,l)}}if(r instanceof ot){const l=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jh(o.serializer,l)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:eT(o.serializer,r._byteString)};if(r instanceof Vt){const l=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:gg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ni)return(function(c,p){return{mapValue:{fields:{[IE]:{stringValue:OE},[Gh]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw p.wc("VectorValues must only contain numeric values.");return fg(p.serializer,g)}))}}}}}})(r,o);throw o.wc(`Unsupported field value: ${og(r)}`)})(i,e)}function UT(i,e){const t={};return TE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(i,((r,o)=>{const l=VT(o,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function LT(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ot||i instanceof Oi||i instanceof Jn||i instanceof Vt||i instanceof PT||i instanceof Ni)}function zT(i,e,t){if(!LT(t)||!wE(t)){const r=og(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function BN(i,e,t){if((e=Wn(e))instanceof kg)return e._internalPath;if(typeof e=="string")return BT(i,e);throw td("Field path arguments must be of type string or ",i,!1,void 0,t)}const qN=new RegExp("[~\\*/\\[\\]]");function BT(i,e,t){if(e.search(qN)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new kg(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function td(i,e,t,r,o){const l=r&&!r.isEmpty(),c=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${o}`),m+=")"),new pe(ie.INVALID_ARGUMENT,p+i+m)}function $N(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($T("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HN extends qT{data(){return super.data()}}function $T(i,e){return typeof e=="string"?BT(i,e):e instanceof kg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GN{convertValue(e,t="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return va(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Gh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map((c=>Tt(c.doubleValue)));return new Ni(l)}convertGeoPoint(e){return new Oi(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const t=Es(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Xe(aT(r),9688,{name:e});const o=new pu(r.get(1),r.get(3)),l=new _e(r.popFirst(5));return o.isEqual(t)||pr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends qT{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($T("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:Nt("string",da._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Dh extends da{data(e={}){return super.data(e)}}class ko{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new eu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Dh(this._firestore,this._userDataWriter,r.key,r,new eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((p=>{const m=new Dh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const m=new Dh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new eu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return p.type!==0&&(g=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),b=c.indexOf(p.doc.key)),{type:YN(p.type),doc:m,oldIndex:g,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(i){i=vs(i,Vt);const e=vs(i.firestore,vu);return DN(Ng(e),i._key).then((t=>FT(e,i,t)))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:Nt("string",ko._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class HT extends GN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function $b(i,e,t){i=vs(i,Vt);const r=vs(i.firestore,vu),o=KN(i.converter,e,t);return JN(r,[zN(LN(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,cr.none())])}function XN(i,...e){var t,r,o;i=Wn(i);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||qb(e[c])||(l=e[c++]);const p={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(qb(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[c+2]=(o=E.complete)===null||o===void 0?void 0:o.bind(E)}let m,g,b;if(i instanceof Vt)g=vs(i.firestore,vu),b=fd(i._key.path),m={next:E=>{e[c]&&e[c](FT(g,i,E))},error:e[c+1],complete:e[c+2]};else{const E=vs(i,Ed);g=vs(E.firestore,vu),b=E._query;const S=new HT(g);m={next:x=>{e[c]&&e[c](new ko(g,S,E,x))},error:e[c+1],complete:e[c+2]},FN(i._query)}return(function(S,x,j,z){const q=new OT(z),J=new wT(x,q,j);return S.asyncQueue.enqueueAndForget((async()=>vT(await km(S),J))),()=>{q.Ou(),S.asyncQueue.enqueueAndForget((async()=>bT(await km(S),J)))}})(Ng(g),b,p,m)}function JN(i,e){return(function(r,o){const l=new _s;return r.asyncQueue.enqueueAndForget((async()=>wN(await kN(r),o,l))),l.promise})(Ng(i),e)}function FT(i,e,t){const r=t.docs.get(e._key),o=new HT(i);return new da(i,o,e._key,r,new eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Ho=o})(qo),jo(new pa("firestore",((r,{instanceIdentifier:o,options:l})=>{const c=r.getProvider("app").getImmediate(),p=new vu(new qI(r.getProvider("auth-internal")),new FI(c,r.getProvider("app-check-internal")),(function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(g.options.projectId,b)})(c,o),c);return l=Object.assign({useFetchStreams:t},l),p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),gs(K0,Y0,e),gs(K0,Y0,"esm2017")})();const WN=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class jg extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ZN extends jg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hb extends jg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fb extends jg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Dm;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Dm||(Dm={}));class ek{constructor(e,{headers:t={},customFetch:r,region:o=Dm.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=WN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return qx(this,arguments,void 0,function*(t,r={}){var o;let l,c;try{const{headers:p,method:m,body:g,signal:b,timeout:E}=r;let S={},{region:x}=r;x||(x=this.region);const j=new URL(`${this.url}/${t}`);x&&x!=="any"&&(S["x-region"]=x,j.searchParams.set("forceFunctionRegion",x));let z;g&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",z=g):typeof g=="string"?(S["Content-Type"]="text/plain",z=g):typeof FormData<"u"&&g instanceof FormData?z=g:(S["Content-Type"]="application/json",z=JSON.stringify(g)):z=g;let q=b;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),b?(q=c.signal,b.addEventListener("abort",()=>c.abort())):q=c.signal);const J=yield this.fetch(j.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),p),body:z,signal:q}).catch(ge=>{throw new ZN(ge)}),te=J.headers.get("x-relay-error");if(te&&te==="true")throw new Hb(J);if(!J.ok)throw new Fb(J);let H=((o=J.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),re;return H==="application/json"?re=yield J.json():H==="application/octet-stream"||H==="application/pdf"?re=yield J.blob():H==="text/event-stream"?re=J:H==="multipart/form-data"?re=yield J.formData():re=yield J.text(),{data:re,error:null,response:J}}catch(p){return{data:null,error:p,response:p instanceof Fb||p instanceof Hb?p.context:void 0}}finally{l&&clearTimeout(l)}})}}var tk=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},nk=class{constructor(i){var e,t;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(e=i.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=i.signal,this.isMaybeSingle=(t=i.isMaybeSingle)!==null&&t!==void 0?t:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,e){return this.headers=new Headers(this.headers),this.headers.set(i,e),this}then(i,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,p=null,m=null,g=l.status,b=l.statusText;if(l.ok){var E,S;if(t.method!=="HEAD"){var x;const J=await l.text();J===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((x=t.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?p=J:p=JSON.parse(J))}const z=(E=t.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),q=(S=l.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");z&&q&&q.length>1&&(m=parseInt(q[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(p)&&(p.length>1?(c={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,g=406,b="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var j;const z=await l.text();try{c=JSON.parse(z),Array.isArray(c)&&l.status===404&&(p=[],c=null,g=200,b="OK")}catch{l.status===404&&z===""?(g=204,b="No Content"):c={message:z}}if(c&&t.isMaybeSingle&&(!(c==null||(j=c.details)===null||j===void 0)&&j.includes("0 rows"))&&(c=null,g=200,b="OK"),c&&t.shouldThrowOnError)throw new tk(c)}return{error:c,data:p,count:m,status:g,statusText:b}});return this.shouldThrowOnError||(o=o.catch(l=>{var c;let p="";const m=l==null?void 0:l.cause;if(m){var g,b,E,S;const j=(g=m==null?void 0:m.message)!==null&&g!==void 0?g:"",z=(b=m==null?void 0:m.code)!==null&&b!==void 0?b:"";p=`${(E=l==null?void 0:l.name)!==null&&E!==void 0?E:"FetchError"}: ${l==null?void 0:l.message}`,p+=`

Caused by: ${(S=m==null?void 0:m.name)!==null&&S!==void 0?S:"Error"}: ${j}`,z&&(p+=` (${z})`),m!=null&&m.stack&&(p+=`
${m.stack}`)}else{var x;p=(x=l==null?void 0:l.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(i,e)}returns(){return this}overrideTypes(){return this}},ik=class extends nk{select(i){let e=!1;const t=(i??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:o=r}={}){const l=o?`${o}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${i}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${i}`),this}range(i,e,{foreignTable:t,referencedTable:r=t}={}){const o=typeof r>"u"?"offset":`${r}.offset`,l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(l,`${e-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:o=!1,format:l="text"}={}){var c;const p=[i?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${p};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const Gb=new RegExp("[,()]");var To=class extends ik{eq(i,e){return this.url.searchParams.append(i,`eq.${e}`),this}neq(i,e){return this.url.searchParams.append(i,`neq.${e}`),this}gt(i,e){return this.url.searchParams.append(i,`gt.${e}`),this}gte(i,e){return this.url.searchParams.append(i,`gte.${e}`),this}lt(i,e){return this.url.searchParams.append(i,`lt.${e}`),this}lte(i,e){return this.url.searchParams.append(i,`lte.${e}`),this}like(i,e){return this.url.searchParams.append(i,`like.${e}`),this}likeAllOf(i,e){return this.url.searchParams.append(i,`like(all).{${e.join(",")}}`),this}likeAnyOf(i,e){return this.url.searchParams.append(i,`like(any).{${e.join(",")}}`),this}ilike(i,e){return this.url.searchParams.append(i,`ilike.${e}`),this}ilikeAllOf(i,e){return this.url.searchParams.append(i,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(i,e){return this.url.searchParams.append(i,`ilike(any).{${e.join(",")}}`),this}regexMatch(i,e){return this.url.searchParams.append(i,`match.${e}`),this}regexIMatch(i,e){return this.url.searchParams.append(i,`imatch.${e}`),this}is(i,e){return this.url.searchParams.append(i,`is.${e}`),this}isDistinct(i,e){return this.url.searchParams.append(i,`isdistinct.${e}`),this}in(i,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Gb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(i,`in.(${t})`),this}notIn(i,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Gb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(i,`not.in.(${t})`),this}contains(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cs.{${e.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(e)}`),this}containedBy(i,e){return typeof e=="string"?this.url.searchParams.append(i,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(i,`cd.{${e.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(e)}`),this}rangeGt(i,e){return this.url.searchParams.append(i,`sr.${e}`),this}rangeGte(i,e){return this.url.searchParams.append(i,`nxl.${e}`),this}rangeLt(i,e){return this.url.searchParams.append(i,`sl.${e}`),this}rangeLte(i,e){return this.url.searchParams.append(i,`nxr.${e}`),this}rangeAdjacent(i,e){return this.url.searchParams.append(i,`adj.${e}`),this}overlaps(i,e){return typeof e=="string"?this.url.searchParams.append(i,`ov.${e}`):this.url.searchParams.append(i,`ov.{${e.join(",")}}`),this}textSearch(i,e,{config:t,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(i,`${o}fts${l}.${e}`),this}match(i){return Object.entries(i).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(i,e,t){return this.url.searchParams.append(i,`not.${e}.${t}`),this}or(i,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${i})`),this}filter(i,e,t){return this.url.searchParams.append(i,`${e}.${t}`),this}},rk=class{constructor(i,{headers:e={},schema:t,fetch:r}){this.url=i,this.headers=new Headers(e),this.schema=t,this.fetch=r}select(i,e){const{head:t=!1,count:r}=e??{},o=t?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join("");return this.url.searchParams.set("select",c),r&&this.headers.append("Prefer",`count=${r}`),new To({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:e,defaultToNull:t=!0}={}){var r;const o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const l=i.reduce((c,p)=>c.concat(Object.keys(p)),[]);if(l.length>0){const c=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",c.join(","))}}return new To({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(i,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:o=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),r&&this.headers.append("Prefer",`count=${r}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new To({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(i,{count:e}={}){var t;const r="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new To({method:r,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:i}={}){var e;const t="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new To({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},sk=class GT{constructor(e,{headers:t={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new rk(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new GT(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:o=!1,count:l}={}){var c;let p;const m=new URL(`${this.url}/rpc/${e}`);let g;r||o?(p=r?"HEAD":"GET",Object.entries(t).filter(([E,S])=>S!==void 0).map(([E,S])=>[E,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([E,S])=>{m.searchParams.append(E,S)})):(p="POST",g=t);const b=new Headers(this.headers);return l&&b.set("Prefer",`count=${l}`),new To({method:p,url:m,headers:b,schema:this.schemaName,body:g,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}};class ak{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ok="2.89.0",lk=`realtime-js/${ok}`,KT="1.0.0",uk="2.0.0",Kb=KT,jm=1e4,ck=1e3,hk=100;var os;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(os||(os={}));var Pt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Pt||(Pt={}));var li;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(li||(li={}));var Pm;(function(i){i.websocket="websocket"})(Pm||(Pm={}));var oa;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(oa||(oa={}));class dk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,r){var o,l;const c=e.topic,p=(o=e.ref)!==null&&o!==void 0?o:"",m=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(b).length===0?"":JSON.stringify(b);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+p.length+c.length+g.length+E.length,x=new ArrayBuffer(this.HEADER_LENGTH+S);let j=new DataView(x),z=0;j.setUint8(z++,this.KINDS.userBroadcastPush),j.setUint8(z++,m.length),j.setUint8(z++,p.length),j.setUint8(z++,c.length),j.setUint8(z++,g.length),j.setUint8(z++,E.length),j.setUint8(z++,t),Array.from(m,J=>j.setUint8(z++,J.charCodeAt(0))),Array.from(p,J=>j.setUint8(z++,J.charCodeAt(0))),Array.from(c,J=>j.setUint8(z++,J.charCodeAt(0))),Array.from(g,J=>j.setUint8(z++,J.charCodeAt(0))),Array.from(E,J=>j.setUint8(z++,J.charCodeAt(0)));var q=new Uint8Array(x.byteLength+r.byteLength);return q.set(new Uint8Array(x),0),q.set(new Uint8Array(r),x.byteLength),q.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[o,l,c,p,m]=r;return t({join_ref:o,ref:l,topic:c,event:p,payload:m})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,r){const o=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),p=t.getUint8(4);let m=this.HEADER_LENGTH+4;const g=r.decode(e.slice(m,m+o));m=m+o;const b=r.decode(e.slice(m,m+l));m=m+l;const E=r.decode(e.slice(m,m+c));m=m+c;const S=e.slice(m,e.byteLength),x=p===this.JSON_ENCODING?JSON.parse(r.decode(S)):S,j={type:this.BROADCAST_EVENT,event:b,payload:x};return c>0&&(j.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class YT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(it||(it={}));const Yb=(i,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=fk(c,i,e,o),l),{}):{}},fk=(i,e,t,r)=>{const o=e.find(p=>p.name===i),l=o==null?void 0:o.type,c=t[i];return l&&!r.includes(l)?QT(l,c):Mm(c)},QT=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return yk(e,t)}switch(i){case it.bool:return pk(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return mk(e);case it.json:case it.jsonb:return gk(e);case it.timestamp:return _k(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Mm(e);default:return Mm(e)}},Mm=i=>i,pk=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},mk=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},gk=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},yk=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let l;const c=i.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(p=>QT(e,p))}return i},_k=i=>typeof i=="string"?i.replace(" ","T"):i,XT=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Kp{constructor(e,t,r={},o=jm){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qb;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Qb||(Qb={}));class lu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:l,onLeave:c,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lu.syncState(this.state,o,l,c),this.pendingDiffs.forEach(m=>{this.state=lu.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],p()}),this.channel._on(r.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=lu.syncDiff(this.state,o,l,c),p())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const l=this.cloneDeep(e),c=this.transformState(t),p={},m={};return this.map(l,(g,b)=>{c[g]||(m[g]=b)}),this.map(c,(g,b)=>{const E=l[g];if(E){const S=b.map(q=>q.presence_ref),x=E.map(q=>q.presence_ref),j=b.filter(q=>x.indexOf(q.presence_ref)<0),z=E.filter(q=>S.indexOf(q.presence_ref)<0);j.length>0&&(p[g]=j),z.length>0&&(m[g]=z)}else p[g]=b}),this.syncDiff(l,{joins:p,leaves:m},r,o)}static syncDiff(e,t,r,o){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(l,(p,m)=>{var g;const b=(g=e[p])!==null&&g!==void 0?g:[];if(e[p]=this.cloneDeep(m),b.length>0){const E=e[p].map(x=>x.presence_ref),S=b.filter(x=>E.indexOf(x.presence_ref)<0);e[p].unshift(...S)}r(p,b,m)}),this.map(c,(p,m)=>{let g=e[p];if(!g)return;const b=m.map(E=>E.presence_ref);g=g.filter(E=>b.indexOf(E.presence_ref)<0),e[p]=g,o(p,g,m),g.length===0&&delete e[p]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xb;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Xb||(Xb={}));var uu;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(uu||(uu={}));var or;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class xo{constructor(e,t={config:{}},r){var o,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Kp(this,li.join,this.params,this.timeout),this.rejoinTimer=new YT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(li.reply,{},(c,p)=>{this._trigger(this._replyEventName(p),c)}),this.presence=new lu(this),this.broadcastEndpointURL=XT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:c,presence:p,private:m}}=this.params,g=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&o!==void 0?o:[],b=!!this.bindings[uu.PRESENCE]&&this.bindings[uu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},S={broadcast:c,presence:Object.assign(Object.assign({},p),{enabled:b}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(or.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(or.CLOSED)),this.updateJoinPayload(Object.assign({config:S},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){e==null||e(or.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,q=(j=z==null?void 0:z.length)!==null&&j!==void 0?j:0,J=[];for(let te=0;te<q;te++){const H=z[te],{filter:{event:re,schema:ge,table:ce,filter:I}}=H,R=x&&x[te];if(R&&R.event===re&&xo.isFilterValueEqual(R.schema,ge)&&xo.isFilterValueEqual(R.table,ce)&&xo.isFilterValueEqual(R.filter,I))J.push(Object.assign(Object.assign({},H),{id:R.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,e&&e(or.SUBSCRIBED);return}}).receive("error",x=>{this.state=Pt.errored,e==null||e(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Pt.joined&&e===uu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let m=p.statusText;try{const g=await p.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,p,m;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(p=(c=this.params)===null||c===void 0?void 0:c.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(li.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Kp(this,li.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const o=new AbortController,l=setTimeout(()=>o.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Kp(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>hk){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,l;const c=e.toLocaleLowerCase(),{close:p,error:m,leave:g,join:b}=li;if(r&&[p,m,g,b].indexOf(c)>=0&&r!==this._joinRef())return;let S=this._onMessage(c,t,r);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(x=>{var j,z,q;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((q=(z=x.filter)===null||z===void 0?void 0:z.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===c}).map(x=>x.callback(S,r)):(l=this.bindings[c])===null||l===void 0||l.filter(x=>{var j,z,q,J,te,H;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const re=x.id,ge=(j=x.filter)===null||j===void 0?void 0:j.event;return re&&((z=t.ids)===null||z===void 0?void 0:z.includes(re))&&(ge==="*"||(ge==null?void 0:ge.toLocaleLowerCase())===((q=t.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const re=(te=(J=x==null?void 0:x.filter)===null||J===void 0?void 0:J.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return re==="*"||re===((H=t==null?void 0:t.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof S=="object"&&"ids"in S){const j=S.data,{schema:z,table:q,commit_timestamp:J,type:te,errors:H}=j;S=Object.assign(Object.assign({},{schema:z,table:q,commit_timestamp:J,eventType:te,new:{},old:{},errors:H}),this._getPayloadRecords(j))}x.callback(S,r)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),l={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&xo.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(li.close,{},e)}_onError(e){this._on(li.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Yb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Yb(e.columns,e.old_record)),t}}const Yp=()=>{},yh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vk=[1e3,2e3,5e3,1e4],bk=1e4,wk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ek{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jm,this.transport=null,this.heartbeatIntervalMs=yh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yp,this.ref=0,this.reconnectTimer=null,this.vsn=Kb,this.logger=Yp,this.conn=null,this.sendBuffer=[],this.serializer=new dk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Pm.websocket}`,this.httpEndpoint=XT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ak.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case os.connecting:return oa.Connecting;case os.open:return oa.Open;case os.closing:return oa.Closing;default:return oa.Closed}}isConnected(){return this.connectionState()===oa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===r);if(o)return o;{const l=new xo(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:o,ref:l}=e,c=()=>{this.encode(e,p=>{var m;(m=this.conn)===null||m===void 0||m.send(p)})};this.log("push",`${t} ${r} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ck,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},yh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:l,ref:c}=t,p=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${r} ${o} ${p}`.trim(),l),this.channels.filter(g=>g._isMember(r)).forEach(g=>g._trigger(o,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===os.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===os.open||this.conn.readyState===os.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(li.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([wk],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const l={access_token:t,version:lk};t&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(li.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new YT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,l,c,p,m,g,b,E,S,x;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:jm,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:yh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(p=e==null?void 0:e.heartbeatCallback)!==null&&p!==void 0?p:Yp,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:Kb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(j=>vk[j-1]||bk),this.vsn){case KT:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:((j,z)=>z(JSON.stringify(j))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((j,z)=>z(JSON.parse(j)));break;case uk:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var bu=class extends Error{constructor(i,e){var t;super(i),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Tk(i,e,t){const r=new URL(e,i);if(t)for(const[o,l]of Object.entries(t))l!==void 0&&r.searchParams.set(o,l);return r.toString()}async function Sk(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function Ak(i){const e=i.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:o,body:l,headers:c}){const p=Tk(i.baseUrl,r,o),m=await Sk(i.auth),g=await e(p,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...m,...c},body:l?JSON.stringify(l):void 0}),b=await g.text(),E=(g.headers.get("content-type")||"").includes("application/json"),S=E&&b?JSON.parse(b):b;if(!g.ok){const x=E?S:void 0,j=x==null?void 0:x.error;throw new bu((j==null?void 0:j.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:x})}return{status:g.status,headers:g.headers,data:S}}}}function _h(i){return i.join("")}var Rk=class{constructor(i,e=""){this.client=i,this.prefix=e}async listNamespaces(i){const e=i?{parent:_h(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(i,e){const t={namespace:i.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_h(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_h(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_h(i.namespace)}`}),!0}catch(e){if(e instanceof bu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(i,e){try{return await this.createNamespace(i,e)}catch(t){if(t instanceof bu&&t.status===409)return;throw t}}};function fo(i){return i.join("")}var xk=class{constructor(i,e="",t){this.client=i,this.prefix=e,this.accessDelegation=t}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables`})).data.identifiers}async createTable(i,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(i,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(i,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(i){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,headers:e})).data.metadata}async tableExists(i){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fo(i.namespace)}/tables/${i.name}`,headers:e}),!0}catch(t){if(t instanceof bu&&t.status===404)return!1;throw t}}async createTableIfNotExists(i,e){try{return await this.createTable(i,e)}catch(t){if(t instanceof bu&&t.status===409)return await this.loadTable({namespace:i.namespace,name:e.name});throw t}}},Ck=class{constructor(i){var r;let e="v1";i.catalogName&&(e+=`/${i.catalogName}`);const t=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=Ak({baseUrl:t,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(r=i.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Rk(this.client,e),this.tableOps=new xk(this.client,e,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,e){return this.namespaceOps.createNamespace(i,e)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,e){return this.tableOps.createTable(i,e)}async updateTable(i,e){return this.tableOps.updateTable(i,e)}async dropTable(i,e){await this.tableOps.dropTable(i,e)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,e){return this.namespaceOps.createNamespaceIfNotExists(i,e)}async createTableIfNotExists(i,e){return this.tableOps.createTableIfNotExists(i,e)}},Td=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function ht(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Ik=class extends Td{constructor(i,e,t){super(i),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Vm=class extends Td{constructor(i,e){super(i),this.name="StorageUnknownError",this.originalError=e}};const Pg=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),Ok=()=>Response,Um=i=>{if(Array.isArray(i))return i.map(t=>Um(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=Um(r)}),e},Nk=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},kk=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function wu(i){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(i)}function Dk(i,e){if(wu(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function jk(i){var e=Dk(i,"string");return wu(e)=="symbol"?e:e+""}function Pk(i,e,t){return(e=jk(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Jb(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function Ee(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jb(Object(t),!0).forEach(function(r){Pk(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Jb(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}const Qp=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},Mk=async(i,e,t)=>{i instanceof await Ok()&&!(t!=null&&t.noResolveJson)?i.json().then(r=>{const o=i.status||500,l=(r==null?void 0:r.statusCode)||o+"";e(new Ik(Qp(r),o,l))}).catch(r=>{e(new Vm(Qp(r),r))}):e(new Vm(Qp(i),i))},Vk=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?o:(Nk(r)?(o.headers=Ee({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Ee(Ee({},o),t))};async function Mu(i,e,t,r,o,l){return new Promise((c,p)=>{i(t,Vk(e,r,o,l)).then(m=>{if(!m.ok)throw m;return r!=null&&r.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>Mk(m,p,r))})}async function Eu(i,e,t,r){return Mu(i,"GET",e,t,r)}async function oi(i,e,t,r,o){return Mu(i,"POST",e,r,o,t)}async function Lm(i,e,t,r,o){return Mu(i,"PUT",e,r,o,t)}async function Uk(i,e,t,r){return Mu(i,"HEAD",e,Ee(Ee({},t),{},{noResolveJson:!0}),r)}async function Mg(i,e,t,r,o){return Mu(i,"DELETE",e,r,o,t)}var Lk=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e}then(i,e){return this.execute().then(i,e)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(ht(e))return{data:null,error:e};throw e}}};let JT;JT=Symbol.toStringTag;var zk=class{constructor(i,e){this.downloadFn=i,this.shouldThrowOnError=e,this[JT]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lk(this.downloadFn,this.shouldThrowOnError)}then(i,e){return this.getPromise().then(i,e)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(e){if(i.shouldThrowOnError)throw e;if(ht(e))return{data:null,error:e};throw e}}};const Bk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var qk=class{constructor(i,e={},t,r){this.shouldThrowOnError=!1,this.url=i,this.headers=e,this.bucketId=t,this.fetch=Pg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,e,t,r){var o=this;try{let l;const c=Ee(Ee({},Wb),r);let p=Ee(Ee({},o.headers),i==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",o.encodeMetadata(m)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(m))):(l=t,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType,m&&(p["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(p=Ee(Ee({},p),r.headers));const g=o._removeEmptyFolders(e),b=o._getFinalPath(g),E=await(i=="PUT"?Lm:oi)(o.fetch,`${o.url}/object/${b}`,l,Ee({headers:p},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:g,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(ht(l))return{data:null,error:l};throw l}}async upload(i,e,t){return this.uploadOrUpdate("POST",i,e,t)}async uploadToSignedUrl(i,e,t,r){var o=this;const l=o._removeEmptyFolders(i),c=o._getFinalPath(l),p=new URL(o.url+`/object/upload/sign/${c}`);p.searchParams.set("token",e);try{let m;const g=Ee({upsert:Wb.upsert},r),b=Ee(Ee({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&t instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",t)):typeof FormData<"u"&&t instanceof FormData?(m=t,m.append("cacheControl",g.cacheControl)):(m=t,b["cache-control"]=`max-age=${g.cacheControl}`,b["content-type"]=g.contentType),{data:{path:l,fullPath:(await Lm(o.fetch,p.toString(),m,{headers:b})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(ht(m))return{data:null,error:m};throw m}}async createSignedUploadUrl(i,e){var t=this;try{let r=t._getFinalPath(i);const o=Ee({},t.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=await oi(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:o}),c=new URL(t.url+l.url),p=c.searchParams.get("token");if(!p)throw new Td("No token returned by API");return{data:{signedUrl:c.toString(),path:i,token:p},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}}async update(i,e,t){return this.uploadOrUpdate("PUT",i,e,t)}async move(i,e,t){var r=this;try{return{data:await oi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}}async copy(i,e,t){var r=this;try{return{data:{path:(await oi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:i,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}}async createSignedUrl(i,e,t){var r=this;try{let o=r._getFinalPath(i),l=await oi(r.fetch,`${r.url}/object/sign/${o}`,Ee({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const c=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return l={signedUrl:encodeURI(`${r.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}}async createSignedUrls(i,e,t){var r=this;try{const o=await oi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:i},{headers:r.headers}),l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:o.map(c=>Ee(Ee({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}}download(i,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=r?`?${r}`:"",l=this._getFinalPath(i),c=()=>Eu(this.fetch,`${this.url}/${t}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new zk(c,this.shouldThrowOnError)}async info(i){var e=this;const t=e._getFinalPath(i);try{return{data:Um(await Eu(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}}async exists(i){var e=this;const t=e._getFinalPath(i);try{return await Uk(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ht(r)&&r instanceof Vm){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}}getPublicUrl(i,e){const t=this._getFinalPath(i),r=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&r.push(o);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&r.push(c);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${p}`)}}}async remove(i){var e=this;try{return{data:await Mg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async list(i,e,t){var r=this;try{const o=Ee(Ee(Ee({},Bk),e),{},{prefix:i||""});return{data:await oi(r.fetch,`${r.url}/object/list/${r.bucketId}`,o,{headers:r.headers},t),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(ht(o))return{data:null,error:o};throw o}}async listV2(i,e){var t=this;try{const r=Ee({},i);return{data:await oi(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const e=[];return i.width&&e.push(`width=${i.width}`),i.height&&e.push(`height=${i.height}`),i.resize&&e.push(`resize=${i.resize}`),i.format&&e.push(`format=${i.format}`),i.quality&&e.push(`quality=${i.quality}`),e.join("&")}};const WT="2.89.0",ZT={"X-Client-Info":`storage-js/${WT}`};var $k=class{constructor(i,e={},t,r){this.shouldThrowOnError=!1;const o=new URL(i);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Ee(Ee({},ZT),e),this.fetch=Pg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var e=this;try{const t=e.listBucketOptionsToQueryString(i);return{data:await Eu(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await Eu(e.fetch,`${e.url}/bucket/${i}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async createBucket(i,e={public:!1}){var t=this;try{return{data:await oi(t.fetch,`${t.url}/bucket`,{id:i,name:i,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}}async updateBucket(i,e){var t=this;try{return{data:await Lm(t.fetch,`${t.url}/bucket/${i}`,{id:i,name:i,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ht(r))return{data:null,error:r};throw r}}async emptyBucket(i){var e=this;try{return{data:await oi(e.fetch,`${e.url}/bucket/${i}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Mg(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(i){const e={};return i&&("limit"in i&&(e.limit=String(i.limit)),"offset"in i&&(e.offset=String(i.offset)),i.search&&(e.search=i.search),i.sortColumn&&(e.sortColumn=i.sortColumn),i.sortOrder&&(e.sortOrder=i.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Hk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ee(Ee({},ZT),e),this.fetch=Pg(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await oi(e.fetch,`${e.url}/bucket`,{name:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async listBuckets(i){var e=this;try{const t=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&t.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&t.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&t.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&t.set("sortOrder",i.sortOrder),i!=null&&i.search&&t.set("search",i.search);const r=t.toString(),o=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Eu(e.fetch,o,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Mg(e.fetch,`${e.url}/bucket/${i}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ht(t))return{data:null,error:t};throw t}}from(i){var e=this;if(!kk(i))throw new Td("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new Ck({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(o,l){const c=o[l];return typeof c!="function"?c:async(...p)=>{try{return{data:await c.apply(o,p),error:null}}catch(m){if(r)throw m;return{data:null,error:m}}}}})}};const Vg={"X-Client-Info":`storage-js/${WT}`,"Content-Type":"application/json"};var eS=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Mn(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Xp=class extends eS{constructor(i,e,t){super(i),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Fk=class extends eS{constructor(i,e){super(i),this.name="StorageVectorsUnknownError",this.originalError=e}};const Ug=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),Gk=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Zb=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Kk=async(i,e,t)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(t!=null&&t.noResolveJson)){const r=i.status||500,o=i;if(typeof o.json=="function")o.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||r+"";e(new Xp(Zb(l),r,c))}).catch(()=>{const l=r+"";e(new Xp(o.statusText||`HTTP ${r} error`,r,l))});else{const l=r+"";e(new Xp(o.statusText||`HTTP ${r} error`,r,l))}}else e(new Fk(Zb(i),i))},Yk=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return r?(Gk(r)?(o.headers=Ee({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,Ee(Ee({},o),t)):o};async function Qk(i,e,t,r,o,l){return new Promise((c,p)=>{i(t,Yk(e,r,o,l)).then(m=>{if(!m.ok)throw m;if(r!=null&&r.noResolveJson)return m;const g=m.headers.get("content-type");return!g||!g.includes("application/json")?{}:m.json()}).then(m=>c(m)).catch(m=>Kk(m,p,r))})}async function Vn(i,e,t,r,o){return Qk(i,"POST",e,r,o,t)}var Xk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ee(Ee({},Vg),e),this.fetch=Ug(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/CreateIndex`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async getIndex(i,e){var t=this;try{return{data:await Vn(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}}async listIndexes(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/ListIndexes`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async deleteIndex(i,e){var t=this;try{return{data:await Vn(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:i,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}}},Jk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ee(Ee({},Vg),e),this.fetch=Ug(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var e=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Vn(e.fetch,`${e.url}/PutVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async getVectors(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/GetVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async listVectors(i){var e=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await Vn(e.fetch,`${e.url}/ListVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async queryVectors(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/QueryVectors`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async deleteVectors(i){var e=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Vn(e.fetch,`${e.url}/DeleteVectors`,i,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}},Wk=class{constructor(i,e={},t){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=Ee(Ee({},Vg),e),this.fetch=Ug(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async getBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:i},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async listBuckets(i={}){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/ListVectorBuckets`,i,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}async deleteBucket(i){var e=this;try{return{data:await Vn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}}},Zk=class extends Wk{constructor(i,e={}){super(i,e.headers||{},e.fetch)}from(i){return new eD(this.url,this.headers,i,this.fetch)}async createBucket(i){var e=()=>super.createBucket,t=this;return e().call(t,i)}async getBucket(i){var e=()=>super.getBucket,t=this;return e().call(t,i)}async listBuckets(i={}){var e=()=>super.listBuckets,t=this;return e().call(t,i)}async deleteBucket(i){var e=()=>super.deleteBucket,t=this;return e().call(t,i)}},eD=class extends Xk{constructor(i,e,t,r){super(i,e,r),this.vectorBucketName=t}async createIndex(i){var e=()=>super.createIndex,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(i={}){var e=()=>super.listIndexes,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(i){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,i)}async deleteIndex(i){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,i)}index(i){return new tD(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},tD=class extends Jk{constructor(i,e,t,r,o){super(i,e,o),this.vectorBucketName=t,this.indexName=r}async putVectors(i){var e=()=>super.putVectors,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(i){var e=()=>super.getVectors,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(i={}){var e=()=>super.listVectors,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(i){var e=()=>super.queryVectors,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(i){var e=()=>super.deleteVectors,t=this;return e().call(t,Ee(Ee({},i),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},nD=class extends $k{constructor(i,e={},t,r){super(i,e,t,r)}from(i){return new qk(this.url,this.headers,i,this.fetch)}get vectors(){return new Zk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hk(this.url+"/iceberg",this.headers,this.fetch)}};const tS="2.89.0",So=30*1e3,zm=3,Jp=zm*So,iD="http://localhost:9999",rD="supabase.auth.token",sD={"X-Client-Info":`gotrue-js/${tS}`},Bm="X-Supabase-Api-Version",nS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oD=600*1e3;class Tu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function fe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class lD extends Tu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function uD(i){return fe(i)&&i.name==="AuthApiError"}class la extends Tu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class yr extends Tu{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class Pn extends yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cD(i){return fe(i)&&i.name==="AuthSessionMissingError"}class po extends yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vh extends yr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bh extends yr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hD(i){return fe(i)&&i.name==="AuthImplicitGrantRedirectError"}class ew extends yr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dD extends yr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class qm extends yr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Wp(i){return fe(i)&&i.name==="AuthRetryableFetchError"}class tw extends yr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class $m extends yr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nw=` 	
\r=`.split(""),fD=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<nw.length;e+=1)i[nw[e].charCodeAt(0)]=-2;for(let e=0;e<nd.length;e+=1)i[nd[e].charCodeAt(0)]=e;return i})();function iw(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nd[r]),e.queuedBits-=6}}function iS(i,e,t){const r=fD[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function rw(i){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{gD(c,r,t)};for(let c=0;c<i.length;c+=1)iS(i.charCodeAt(c),o,l);return e.join("")}function pD(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function mD(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}pD(r,e)}}function gD(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Do(i){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)iS(i.charCodeAt(o),t,r);return new Uint8Array(e)}function yD(i){const e=[];return mD(i,t=>e.push(t)),new Uint8Array(e)}function ca(i){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};return i.forEach(o=>iw(o,t,r)),iw(null,t,r),e.join("")}function _D(i){return Math.round(Date.now()/1e3)+i}function vD(){return Symbol("auth-callback")}const en=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},rS=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function bD(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const sS=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),wD=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ao=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ra=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Zt=async(i,e)=>{await i.removeItem(e)};class Sd{constructor(){this.promise=new Sd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Sd.promiseConstructor=Promise;function Zp(i){const e=i.split(".");if(e.length!==3)throw new $m("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!aD.test(e[r]))throw new $m("JWT not in base64url format");return{header:JSON.parse(rw(e[0])),payload:JSON.parse(rw(e[1])),signature:Do(e[2]),raw:{header:e[0],payload:e[1]}}}async function ED(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function TD(i,e){return new Promise((r,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await i(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function SD(i){return("0"+i.toString(16)).substr(-2)}function AD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let l=0;l<56;l++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,SD).join("")}async function RD(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function xD(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await RD(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(i,e,t=!1){const r=AD();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await Ao(i,`${e}-code-verifier`,o);const l=await xD(r);return[l,r===l?"plain":"s256"]}const CD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ID(i){const e=i.headers.get(Bm);if(!e||!e.match(CD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function OD(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function ND(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(i){if(!kD.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function em(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function DD(i,e){return new Proxy(i,{get:(t,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,o)}})}function sw(i){return JSON.parse(JSON.stringify(i))}const aa=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),jD=[502,503,504];async function aw(i){var e;if(!wD(i))throw new qm(aa(i),0);if(jD.includes(i.status))throw new qm(aa(i),i.status);let t;try{t=await i.json()}catch(l){throw new la(aa(l),l)}let r;const o=ID(i);if(o&&o.getTime()>=nS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new tw(aa(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Pn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new tw(aa(t),i.status,t.weak_password.reasons);throw new lD(aa(t),i.status||500,r)}const PD=(i,e,t,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function we(i,e,t,r){var o;const l=Object.assign({},r==null?void 0:r.headers);l[Bm]||(l[Bm]=nS["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const p=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await MD(i,e,t+p,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(m):{data:Object.assign({},m),error:null}}async function MD(i,e,t,r,o,l){const c=PD(e,r,o,l);let p;try{p=await i(t,Object.assign({},c))}catch(m){throw console.error(m),new qm(aa(m),0)}if(p.ok||await aw(p),r!=null&&r.noResolveJson)return p;try{return await p.json()}catch(m){await aw(m)}}function ai(i){var e;let t=null;LD(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=_D(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function ow(i){const e=ai(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function ds(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function VD(i){return{data:i,error:null}}function UD(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:l}=i,c=_a(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:l},m=Object.assign({},c);return{data:{properties:p,user:m},error:null}}function lw(i){return i}function LD(i){return i.access_token&&i.refresh_token&&i.expires_in}const tm=["global","local","others"];class zD{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=sS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=tm[0]){if(tm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tm.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ds})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=_a(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:UD,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(t){if(fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,l,c,p,m;try{const g={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:lw});if(b.error)throw b.error;const E=await b.json(),S=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(m=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(j=>{const z=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(j.split(";")[1].split("=")[1]);g[`${q}Page`]=z}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(fe(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){go(e);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(t){if(fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){go(e);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ds})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){go(e);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ds})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){go(e.userId);try{const{data:t,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,o,l,c,p,m;try{const g={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:lw});if(b.error)throw b.error;const E=await b.json(),S=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(m=(p=b.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&m!==void 0?m:[];return x.length>0&&(x.forEach(j=>{const z=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(j.split(";")[1].split("=")[1]);g[`${q}Page`]=z}),g.total=parseInt(S)),{data:Object.assign(Object.assign({},E),g),error:null}}catch(g){if(fe(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(fe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(fe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(fe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(fe(t))return{data:null,error:t};throw t}}}function uw(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const yo={debug:!!(globalThis&&rS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class aS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class BD extends aS{}async function qD(i,e,t){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await t()}finally{yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new BD(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(yo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function $D(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function oS(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function HD(i){return parseInt(i,16)}function FD(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function GD(i){var e;const{chainId:t,domain:r,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:p,requestId:m,resources:g,scheme:b,uri:E,version:S}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const x=oS(i.address),j=b?`${b}://${r}`:r,z=i.statement?`${i.statement}
`:"",q=`${j} wants you to sign in with your Ethereum account:
${x}

${z}`;let J=`URI: ${E}
Version: ${S}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(J+=`
Expiration Time: ${o.toISOString()}`),p&&(J+=`
Not Before: ${p.toISOString()}`),m&&(J+=`
Request ID: ${m}`),g){let te=`
Resources:`;for(const H of g){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);te+=`
- ${H}`}J+=te}return`${q}
${J}`}class Ot extends Error{constructor({message:e,code:t,cause:r,name:o}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=o??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class id extends Ot{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function KD({error:i,options:e}){var t,r,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Ot({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return l.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(lS(c)){if(l.rp.id!==c)return new Ot({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function YD({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Ot({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(lS(r)){if(t.rpId!==r)return new Ot({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class QD{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const XD=new QD;function JD(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:r}=i,o=_a(i,["challenge","user","excludeCredentials"]),l=Do(e).buffer,c=Object.assign(Object.assign({},t),{id:Do(t.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:l,user:c});if(r&&r.length>0){p.excludeCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const g=r[m];p.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Do(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return p}function WD(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,r=_a(i,["challenge","allowCredentials"]),o=Do(e).buffer,l=Object.assign(Object.assign({},r),{challenge:o});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const p=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},p),{id:Do(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return l}function ZD(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:ca(new Uint8Array(i.response.attestationObject)),clientDataJSON:ca(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function e4(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,r=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:ca(new Uint8Array(o.authenticatorData)),clientDataJSON:ca(new Uint8Array(o.clientDataJSON)),signature:ca(new Uint8Array(o.signature)),userHandle:o.userHandle?ca(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lS(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function cw(){var i,e;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function t4(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new id("Browser returned unexpected credential type",e)}:{data:null,error:new id("Empty credential response",e)}}catch(e){return{data:null,error:KD({error:e,options:i})}}}async function n4(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new id("Browser returned unexpected credential type",e)}:{data:null,error:new id("Empty credential response",e)}}catch(e){return{data:null,error:YD({error:e,options:i})}}}const i4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function rd(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of i)if(o)for(const l in o){const c=o[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const p=r[l];e(p)?r[l]=rd(p,c):r[l]=rd(c)}else r[l]=c}return r}function s4(i,e){return rd(i4,i,e||{})}function a4(i,e){return rd(r4,i,e||{})}class o4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:o},l){try{const{data:c,error:p}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:p};const m=o??XD.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:g}=c.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${r}`),g.displayName||(g.displayName=g.name)}switch(c.webauthn.type){case"create":{const g=s4(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:E}=await t4({publicKey:g,signal:m});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}case"request":{const g=a4(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:E}=await n4(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:g,signal:m}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Tu("rpId is required for WebAuthn authentication")};try{if(!cw())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:o},{request:l});if(!c)return{data:null,error:p};const{webauthn:m}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:m.type,rpId:t,rpOrigins:r,credential_response:m.credential_response}})}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!t)return{data:null,error:new Tu("rpId is required for WebAuthn registration")};try{if(!cw())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var E;return(E=b.data)===null||E===void 0?void 0:E.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:p};const{data:m,error:g}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:o},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:t,rpOrigins:r,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new la("Unexpected error in register",c)}}}}$D();const l4={url:iD,storageKey:rD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function hw(i,e,t){return await t()}const _o={};class Su{get jwks(){var e,t;return(t=(e=_o[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){_o[this.storageKey]=Object.assign(Object.assign({},_o[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=_o[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_o[this.storageKey]=Object.assign(Object.assign({},_o[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},l4),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Su.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Su.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&en()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new zD({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=sS(l.fetch),this.lock=l.lock||hw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&en()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=qD:this.lock=hw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new o4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:rS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=uw(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${tS}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(en()&&(t=bD(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),en()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),hD(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",p),await this._saveSession(c),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return fe(t)?this._returnResult({error:t}):this._returnResult({error:new la("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:ai}),{data:c,error:p}=l;if(p||!c)return this._returnResult({data:{user:null,session:null},error:p});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,o;try{let l;if("email"in e){const{email:b,password:E,options:S}=e;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await mo(this.storage,this.storageKey)),l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:b,password:E,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:x,code_challenge_method:j},xform:ai})}else if("phone"in e){const{phone:b,password:E,options:S}=e;l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:E,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:ai})}else throw new vh("You must provide either an email or phone number and a password");const{data:c,error:p}=l;if(p||!c)return await Zt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const m=c.session,g=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:p}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ow})}else if("phone"in e){const{phone:l,password:c,options:p}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ow})}else throw new vh("You must provide either an email or phone number and a password");const{data:r,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!r||!r.session||!r.user){const l=new po;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,o,l,c,p,m,g,b,E,S;let x,j;if("message"in e)x=e.message,j=e.signature;else{const{chain:z,wallet:q,statement:J,options:te}=e;let H;if(en())if(typeof q=="object")H=q;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")H=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(te!=null&&te.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=q}const re=new URL((t=te==null?void 0:te.url)!==null&&t!==void 0?t:window.location.href),ge=await H.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ge||ge.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ce=oS(ge[0]);let I=(r=te==null?void 0:te.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const C=await H.request({method:"eth_chainId"});I=HD(C)}const R={domain:re.host,address:ce,statement:J,uri:re.href,version:"1",chainId:I,nonce:(o=te==null?void 0:te.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=te==null?void 0:te.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(p=te==null?void 0:te.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(m=te==null?void 0:te.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=te==null?void 0:te.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(b=te==null?void 0:te.signInWithEthereum)===null||b===void 0?void 0:b.resources};x=GD(R),j=await H.request({method:"personal_sign",params:[FD(x),ce]})}try{const{data:z,error:q}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:ai});if(q)throw q;if(!z||!z.session||!z.user){const J=new po;return this._returnResult({data:{user:null,session:null},error:J})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:q})}catch(z){if(fe(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(e){var t,r,o,l,c,p,m,g,b,E,S,x;let j,z;if("message"in e)j=e.message,z=e.signature;else{const{chain:q,wallet:J,statement:te,options:H}=e;let re;if(en())if(typeof J=="object")re=J;else{const ce=window;if("solana"in ce&&typeof ce.solana=="object"&&("signIn"in ce.solana&&typeof ce.solana.signIn=="function"||"signMessage"in ce.solana&&typeof ce.solana.signMessage=="function"))re=ce.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");re=J}const ge=new URL((t=H==null?void 0:H.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in re&&re.signIn){const ce=await re.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H==null?void 0:H.signInWithSolana),{version:"1",domain:ge.host,uri:ge.href}),te?{statement:te}:null));let I;if(Array.isArray(ce)&&ce[0]&&typeof ce[0]=="object")I=ce[0];else if(ce&&typeof ce=="object"&&"signedMessage"in ce&&"signature"in ce)I=ce;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)j=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),z=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in re)||typeof re.signMessage!="function"||!("publicKey"in re)||typeof re!="object"||!re.publicKey||!("toBase58"in re.publicKey)||typeof re.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${ge.host} wants you to sign in with your Solana account:`,re.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${ge.href}`,`Issued At: ${(o=(r=H==null?void 0:H.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=H==null?void 0:H.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((c=H==null?void 0:H.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((p=H==null?void 0:H.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((m=H==null?void 0:H.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((g=H==null?void 0:H.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((E=(b=H==null?void 0:H.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||E===void 0)&&E.length?["Resources",...H.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const ce=await re.signMessage(new TextEncoder().encode(j),"utf8");if(!ce||!(ce instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=ce}}try{const{data:q,error:J}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ca(z)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ai});if(J)throw J;if(!q||!q.session||!q.user){const te=new po;return this._returnResult({data:{user:null,session:null},error:te})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:J})}catch(q){if(fe(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async _exchangeCodeForSession(e){const t=await ra(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new dD;const{data:l,error:c}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ai});if(await Zt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const p=new po;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:l,nonce:c}=e,p=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ai}),{data:m,error:g}=p;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const b=new po;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(t){if(fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,o,l,c;try{if("email"in e){const{email:p,options:m}=e;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await mo(this.storage,this.storageKey));const{error:E}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},create_user:(r=m==null?void 0:m.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:b},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:p,options:m}=e,{data:g,error:b}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(c=m==null?void 0:m.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:b})}throw new vh("You must provide either an email or phone number.")}catch(p){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(e){var t,r;try{let o,l;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:p}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:ai});if(p)throw p;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,g=c.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(o){if(fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,r,o,l,c;try{let p=null,m=null;this.flowType==="pkce"&&([p,m]=await mo(this.storage,this.storageKey));const g=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:m}),headers:this.headers,xform:VD});return!((l=g.data)===null||l===void 0)&&l.url&&en()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(p){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Pn;const{error:o}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(fe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:l}=e,{error:c}=await we(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:o,options:l}=e,{data:c,error:p}=await we(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p})}throw new vh("You must provide either an email or phone number and a type")}catch(t){if(fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ra(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Jp:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await ra(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=em()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=DD(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async t=>{var r,o,l;const{data:c,error:p}=t;if(p)throw p;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:ds})})}catch(t){if(fe(t))return cD(t)&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:l}=r;if(l)throw l;if(!o.session)throw new Pn;const c=o.session;let p=null,m=null;this.flowType==="pkce"&&e.email!=null&&([p,m]=await mo(this.storage,this.storageKey));const{data:g,error:b}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:p,code_challenge_method:m}),jwt:c.access_token,xform:ds});if(b)throw b;return c.user=g.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const t=Date.now()/1e3;let r=t,o=!0,l=null;const{payload:c}=Zp(e.access_token);if(c.exp&&(r=c.exp,o=r<=t),o){const{data:p,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p)return{data:{user:null,session:null},error:null};l=p}else{const{data:p,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(fe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:p}=t;if(p)throw p;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!en())throw new bh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ew("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ew("No code detected.");const{data:te,error:H}=await this._exchangeCodeForSession(e.code);if(H)throw H;const re=new URL(window.location.href);return re.searchParams.delete("code"),window.history.replaceState(window.history.state,"",re.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:p,expires_at:m,token_type:g}=e;if(!l||!p||!c||!g)throw new bh("No session defined in URL");const b=Math.round(Date.now()/1e3),E=parseInt(p);let S=b+E;m&&(S=parseInt(m));const x=S-b;x*1e3<=So&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${E}s`);const j=S-E;b-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,S,b):b-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,S,b);const{data:z,error:q}=await this._getUser(l);if(q)throw q;const J={provider_token:r,provider_refresh_token:o,access_token:l,expires_in:E,expires_at:S,refresh_token:c,token_type:g,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:J,redirectType:e.type},error:null})}catch(r){if(fe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ra(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=o.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:p}=await this.admin.signOut(c,e);if(p&&!(uD(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return e!=="others"&&(await this._removeSession(),await Zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=vD(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await mo(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:o}=await this._useSession(async l=>{var c,p,m,g,b;const{data:E,error:S}=l;if(S)throw S;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",x,{headers:this.headers,jwt:(b=(g=E.session)===null||g===void 0?void 0:g.access_token)!==null&&b!==void 0?b:void 0})});if(o)throw o;return en()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(fe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:o,data:{session:l}}=t;if(o)throw o;const{options:c,provider:p,token:m,access_token:g,nonce:b}=e,E=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:p,id_token:m,access_token:g,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ai}),{data:S,error:x}=E;return x?this._returnResult({data:{user:null,session:null},error:x}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new po}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:x}))}catch(o){if(await Zt(this.storage,`${this.storageKey}-code-verifier`),fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:l,error:c}=t;if(c)throw c;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await TD(async o=>(o>0&&await ED(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ai})),(o,l)=>{const c=200*Math.pow(2,o);return l&&Wp(l)&&Date.now()+c-r<So})}catch(r){if(this._debug(t,"error",r),fe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),en()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await ra(this.storage,this.storageKey);if(o&&this.userStorage){let c=await ra(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await Ao(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:em()}else if(o&&!o.user&&!o.user){const c=await ra(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(o.user=c.user,await Zt(this.storage,this.storageKey+"-user"),await Ao(this.storage,this.storageKey,o)):o.user=em()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const l=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jp;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Jp}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),Wp(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:p}=await this._getUser(o.access_token);!p&&(c!=null&&c.user)?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Sd;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Pn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const p={data:l.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(l){if(this._debug(o,"error",l),fe(l)){const c={data:null,error:l};return Wp(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(e,t)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let p=0;p<l.length;p+=1)console.error(l[p]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Zt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ao(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const l=sw(o);await Ao(this.storage,this.storageKey,l)}else{const o=sw(t);await Ao(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Zt(this.storage,this.storageKey),await Zt(this.storage,this.storageKey+"-code-verifier"),await Zt(this.storage,this.storageKey+"-user"),this.userStorage&&await Zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),So);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/So);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${So}ms, refresh threshold is ${zm} ticks`),o<=zm&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof aS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await mo(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(p.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);o.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;return l?this._returnResult({data:null,error:l}):await we(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:g}=await we(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ZD(e.webauthn.credential_response):e4(e.webauthn.credential_response)})}:{code:e.code}),{data:p,error:m}=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:m}))})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:p}=c;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:JD(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:WD(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Zp(r.access_token);let c=null;l.aal&&(c=l.aal);let p=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(p="aal2");const g=l.amr||[];return{data:{currentLevel:c,nextLevel:p,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Pn});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(fe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Pn});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(fe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if(fe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(t){if(fe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(p=>p.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(p=>p.kid===e),r&&this.jwks_cached_at+oD>o)return r;const{data:l,error:c}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,r=l.keys.find(p=>p.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:j}=await this.getSession();if(j||!x.session)return this._returnResult({data:null,error:j});r=x.session.access_token}const{header:o,payload:l,signature:c,raw:{header:p,payload:m}}=Zp(r);t!=null&&t.allowExpired||OD(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!g){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:l,header:o,signature:c},error:null}}const b=ND(o.alg),E=await crypto.subtle.importKey("jwk",g,b,!0,["verify"]);if(!await crypto.subtle.verify(b,E,c,yD(`${p}.${m}`)))throw new $m("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(r){if(fe(r))return this._returnResult({data:null,error:r});throw r}}}Su.nextInstanceID={};const u4=Su,c4="2.89.0";let tu="";typeof Deno<"u"?tu="deno":typeof document<"u"?tu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tu="react-native":tu="node";const h4={"X-Client-Info":`supabase-js-${tu}/${c4}`},d4={headers:h4},f4={schema:"public"},p4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m4={};function Au(i){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(i)}function g4(i,e){if(Au(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e);if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function y4(i){var e=g4(i,"string");return Au(e)=="symbol"?e:e+""}function _4(i,e,t){return(e=y4(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function dw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function _t(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dw(Object(t),!0).forEach(function(r){_4(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):dw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}const v4=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),b4=()=>Headers,w4=(i,e,t)=>{const r=v4(t),o=b4();return async(l,c)=>{var p;const m=(p=await e())!==null&&p!==void 0?p:i;let g=new o(c==null?void 0:c.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),r(l,_t(_t({},c),{},{headers:g}))}};function E4(i){return i.endsWith("/")?i:i+"/"}function T4(i,e){var t,r;const{db:o,auth:l,realtime:c,global:p}=i,{db:m,auth:g,realtime:b,global:E}=e,S={db:_t(_t({},m),o),auth:_t(_t({},g),l),realtime:_t(_t({},b),c),storage:{},global:_t(_t(_t({},E),p),{},{headers:_t(_t({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?S.accessToken=i.accessToken:delete S.accessToken,S}function S4(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(E4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var A4=class extends u4{constructor(i){super(i)}},R4=class{constructor(i,e,t){var r,o;this.supabaseUrl=i,this.supabaseKey=e;const l=S4(i);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,p={db:f4,realtime:m4,auth:_t(_t({},p4),{},{storageKey:c}),global:d4},m=T4(t??{},p);if(this.storageKey=(r=m.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(b,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=w4(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(_t({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new sk(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new nD(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new ek(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,e,t)}channel(i,e={config:{}}){return this.realtime.channel(i,e)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,e,t;if(i.accessToken)return await i.accessToken();const{data:r}=await i.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,storageKey:l,flowType:c,lock:p,debug:m,throwOnError:g},b,E){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A4({url:this.authUrl.href,headers:_t(_t({},S),b),storageKey:l,autoRefreshToken:i,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,flowType:c,lock:p,debug:m,throwOnError:g,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new Ek(this.realtimeUrl.href,_t(_t({},i),{},{params:_t(_t({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,e)=>{this._handleTokenChanged(i,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(i,e,t){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const x4=(i,e,t)=>new R4(i,e,t);function C4(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}C4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const I4={apiKey:"AIzaSyAVv4EhUiVZSf54iZlB-ud05pxIlO8zBWk",authDomain:"kai-g-80f9c.firebaseapp.com",projectId:"kai-g-80f9c",storageBucket:"kai-g-80f9c.appspot.com",messagingSenderId:"125633190886",appId:"1:125633190886:web:65e1a7b4f59048a1768853"},O4="https://skbfmcwrshxnmaxfqyaw.supabase.co",N4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNrYmZtY3dyc2h4bm1heGZxeWF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQxNjYyMzksImV4cCI6MjA0OTc0MjIzOX0.bPoaXy5XxP4vhrE9VK8F8i_5As78GYUdlGAMLqLLjNw";x4(O4,N4);const uS=ad(I4),fw=rg(uS),nm=jT(uS),pw=()=>{var me,ze;const[i,e]=ke.useState({name:"",nickname:"",email:"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:""}),[t,r]=ke.useState(""),[o,l]=ke.useState(!1),[c,p]=ke.useState(!0),[m,g]=ke.useState(!1),[b,E]=ke.useState(!1),[S,x]=ke.useState(null),j=ke.useRef(null),[z,q]=ke.useState([]),[J,te]=ke.useState(null),[H,re]=ke.useState(0),[ge,ce]=ke.useState(!1),[I,R]=ke.useState(!1),[C,P]=ke.useState(null),M=window.location.hostname==="localhost"?"http://localhost:5000":"https://kai-api-nxxv.onrender.com";ke.useEffect(()=>{const oe=tg(fw,async k=>{var K;if(k){x(k.uid);try{const ne=await QN(kh(nm,"users",k.uid,"data","profile"));if(ne.exists()){const le=ne.data();e(le),r(((K=le.interests)==null?void 0:K.join(", "))||""),console.log("[ProfileSection] Profile loaded from Firebase:",le)}else{const le={name:k.displayName||"",nickname:"",email:k.email||"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:k.photoURL||""};e(le),r(""),console.log("[ProfileSection] No profile found, using defaults from auth")}}catch(ne){console.error("[ProfileSection] Failed to load profile from Firebase:",ne);const le={name:k.displayName||"",nickname:"",email:k.email||"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:k.photoURL||""};e(le),r("")}}else x(null),e({name:"",nickname:"",email:"",bio:"",responseStyle:"casual",responseLanguage:"english",interests:[],avatarUrl:""}),r("");p(!1)});return()=>oe()},[]);const U=async()=>{R(!0);try{const oe={"Content-Type":"application/json"};C&&(oe.Authorization=`Bearer ${C}`);const K=await(await fetch(`${M}/agent/devices`,{headers:oe})).json();K.success&&q(K.devices||[])}catch(oe){console.error("Error fetching devices:",oe)}finally{R(!1)}};ke.useEffect(()=>{var oe;S&&((oe=fw.currentUser)==null||oe.getIdToken().then(k=>{P(k)}),U())},[S]);const N=async()=>{try{const oe={"Content-Type":"application/json"};C&&(oe.Authorization=`Bearer ${C}`);const K=await(await fetch(`${M}/agent/generate-pairing-code`,{method:"POST",headers:oe})).json();K.success&&(te(K.code),re(600))}catch(oe){console.error("Error generating code:",oe)}};ke.useEffect(()=>{if(H>0){const oe=setInterval(()=>{re(k=>k<=1?(te(null),0):k-1)},1e3);return()=>clearInterval(oe)}},[H]);const vt=()=>{J&&(navigator.clipboard.writeText(J),ce(!0),setTimeout(()=>ce(!1),2e3))},kt=oe=>{const k=Math.floor(oe/60),K=oe%60;return`${k}:${K.toString().padStart(2,"0")}`},Q=async oe=>{var K;const k=(K=oe.target.files)==null?void 0:K[0];if(!(!k||!S)){if(k.size>2*1024*1024){alert("Image must be smaller than 2MB");return}E(!0);try{const ne=new FileReader;ne.onloadend=async()=>{const le=ne.result;e(Ie=>({...Ie,avatarUrl:le}));const be={...i,avatarUrl:le};await $b(kh(nm,"users",S,"data","profile"),be,{merge:!0}),console.log("[ProfileSection]  Avatar saved as data URL to Firebase"),E(!1)},ne.onerror=()=>{console.error("Failed to read image file"),alert("Failed to upload image. Please try again."),E(!1)},ne.readAsDataURL(k)}catch(ne){console.error("Failed to upload image:",ne),alert("Failed to upload image. Please try again."),E(!1)}}},ae=async()=>{if(!S){alert("Please sign in to save your profile");return}g(!0);try{const oe=t.split(",").map(K=>K.trim()).filter(K=>K.length>0),k={...i,interests:oe};console.log("[ProfileSection]  Saving profile to Firebase:",k),console.log("[ProfileSection] User ID:",S),console.log("[ProfileSection] Path:",`users/${S}/data/profile`),await $b(kh(nm,"users",S,"data","profile"),k),console.log("[ProfileSection]  Profile saved successfully!"),e(k),console.log("[ProfileSection]  Profile saved, main app will sync automatically"),l(!0),setTimeout(()=>l(!1),2e3)}catch(oe){console.error("Failed to save profile:",oe),alert("Failed to save profile. Please try again.")}finally{g(!1)}};return c?w.jsxs("div",{className:"flex items-center justify-center h-64",children:[w.jsx(Pp,{className:"w-8 h-8 text-indigo-500 animate-spin"}),w.jsx("span",{className:"ml-3 text-zinc-400",children:"Loading profile..."})]}):S?w.jsxs("div",{className:"space-y-5 sm:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4 sm:gap-8",children:[w.jsxs("div",{className:"relative group shrink-0",children:[w.jsxs("div",{className:"w-24 h-24 sm:w-32 sm:h-32 cyber-border bg-indigo-950/20 overflow-hidden rounded-lg",children:[i.avatarUrl?w.jsx("img",{src:i.avatarUrl,alt:"Profile",className:"w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform"}):w.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-900/30",children:w.jsx("span",{className:"text-3xl sm:text-4xl text-indigo-400",children:((ze=(me=i.name)==null?void 0:me[0])==null?void 0:ze.toUpperCase())||"?"})}),w.jsx("div",{onClick:()=>{var oe;return(oe=j.current)==null?void 0:oe.click()},className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 sm:flex items-center justify-center transition-opacity cursor-pointer hidden",children:b?w.jsx(Pp,{className:"text-white animate-spin"}):w.jsx(aA,{className:"text-white"})})]}),w.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:Q,className:"hidden"}),w.jsx("div",{className:"mt-2 sm:mt-4 text-center",children:w.jsx("span",{onClick:()=>{var oe;return(oe=j.current)==null?void 0:oe.click()},className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest underline decoration-indigo-500/30 underline-offset-4 cursor-pointer hover:text-indigo-400 active:text-indigo-300",children:b?"Uploading...":"Change Avatar"})})]}),w.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-4 w-full",children:[w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Your Name"}),w.jsx("input",{type:"text",value:i.name,onChange:oe=>{console.log("[ProfileSection]  Name changed to:",oe.target.value),e({...i,name:oe.target.value})},placeholder:"Your Name",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm"}),w.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will address you by this name"})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Nickname (Optional)"}),w.jsx("input",{type:"text",value:i.nickname,onChange:oe=>{console.log("[ProfileSection]  Nickname changed to:",oe.target.value),e({...i,nickname:oe.target.value})},placeholder:"Preferred Name",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm"}),w.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"Casual name KAI can use"})]})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Email"}),w.jsx("input",{type:"email",value:i.email,disabled:!0,className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-zinc-500 font-bold opacity-60 cursor-not-allowed rounded-sm"})]})]})]}),w.jsxs("div",{className:"border-t border-indigo-900/20 pt-5 sm:pt-6",children:[w.jsxs("h3",{className:"text-[11px] sm:text-xs font-bold text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"AI Personalization"]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Preferred Response Style"}),w.jsxs("select",{value:i.responseStyle,onChange:oe=>e({...i,responseStyle:oe.target.value}),className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm appearance-none cursor-pointer",children:[w.jsx("option",{value:"casual",children:"Casual & Friendly"}),w.jsx("option",{value:"professional",children:"Professional"}),w.jsx("option",{value:"brief",children:"Brief & Concise"}),w.jsx("option",{value:"detailed",children:"Detailed & Thorough"}),w.jsx("option",{value:"technical",children:"Technical & Precise"})]})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Response Language"}),w.jsxs("select",{value:i.responseLanguage,onChange:oe=>e({...i,responseLanguage:oe.target.value}),className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 font-bold rounded-sm appearance-none cursor-pointer",children:[w.jsx("option",{value:"english",children:"English"}),w.jsx("option",{value:"hindi",children:"Hindi"}),w.jsx("option",{value:"hinglish",children:"Hinglish"})]})]})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" Your Interests (Comma-Separated)"}),w.jsx("input",{type:"text",value:t,onChange:oe=>r(oe.target.value),placeholder:"coding, gaming, anime, music, AI",className:"w-full cyber-input p-2.5 sm:p-3 text-sm text-indigo-100 rounded-sm"}),w.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will tailor responses based on your interests"})]})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold uppercase tracking-widest flex items-center gap-1",children:" About You (Bio)"}),w.jsx("textarea",{className:"w-full cyber-input p-3 sm:p-4 text-sm text-indigo-100 min-h-[100px] sm:min-h-[120px] rounded-sm resize-none",value:i.bio,onChange:oe=>e({...i,bio:oe.target.value}),placeholder:"Tell KAI about yourself..."}),w.jsx("p",{className:"text-[8px] text-zinc-600 mt-0.5",children:"KAI will remember this context in conversations"})]}),w.jsxs("div",{className:"border-t border-indigo-900/20 pt-5 sm:pt-6 mt-6",children:[w.jsxs("h3",{className:"text-[11px] sm:text-xs font-bold text-indigo-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[w.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Device Link",w.jsx("button",{onClick:U,className:"ml-auto text-zinc-500 hover:text-indigo-400",children:w.jsx(Ph,{size:12,className:I?"animate-spin":""})})]}),w.jsx("div",{className:"space-y-2 mb-4",children:z.length===0?w.jsx("p",{className:"text-[10px] text-zinc-500 text-center py-4 bg-zinc-900/50 rounded border border-zinc-800",children:"No devices connected yet"}):z.map(oe=>w.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#0a0a0f] border border-indigo-900/30 rounded-lg",children:[w.jsx(jh,{size:16,className:oe.is_online?"text-green-400":"text-zinc-500"}),w.jsxs("div",{className:"flex-1",children:[w.jsx("span",{className:"text-sm font-bold",children:oe.name}),w.jsx("span",{className:`ml-2 text-[9px] px-1.5 py-0.5 rounded ${oe.is_online?"bg-green-500/20 text-green-400":"bg-zinc-800 text-zinc-500"}`,children:oe.is_online?"ONLINE":"OFFLINE"})]})]},oe.device_id))}),J?w.jsxs("div",{className:"bg-indigo-950/30 border border-indigo-500/30 rounded-lg p-4 text-center",children:[w.jsxs("p",{className:"text-[10px] text-indigo-400 uppercase tracking-widest mb-2",children:["Pairing Code (expires in ",kt(H),")"]}),w.jsxs("div",{className:"flex items-center justify-center gap-2",children:[w.jsx("code",{className:"text-2xl font-mono font-bold tracking-[0.2em] text-white bg-black/50 px-4 py-2 rounded border border-indigo-500/50",children:J}),w.jsx("button",{onClick:vt,className:"p-2 bg-indigo-600/20 hover:bg-indigo-600/30 border border-indigo-500/30 rounded",children:ge?w.jsx(om,{size:16,className:"text-green-400"}):w.jsx(_w,{size:16,className:"text-indigo-400"})})]}),w.jsxs("p",{className:"text-[9px] text-zinc-500 mt-3",children:["Run: ",w.jsxs("code",{className:"text-green-400",children:["python -m LocalAgent.agent --register ",J]})]})]}):w.jsxs("button",{onClick:N,className:"w-full flex items-center justify-center gap-2 p-3 bg-indigo-600/10 hover:bg-indigo-600/20 border border-indigo-500/30 rounded-lg transition-all",children:[w.jsx(bw,{size:16,className:"text-indigo-400"}),w.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wide",children:"Pair New Device"})]})]}),w.jsx("div",{className:"mt-6 sm:mt-8 pt-6 sm:pt-8 border-t border-white/10",children:w.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[w.jsx("p",{className:"text-[10px] sm:text-xs text-zinc-500 uppercase tracking-wide",children:"Changes sync automatically with KAI"}),w.jsx("button",{onClick:ae,disabled:m,className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-3.5 bg-indigo-600 hover:bg-indigo-500 disabled:bg-indigo-800 disabled:cursor-not-allowed text-white text-xs sm:text-sm font-bold uppercase tracking-widest rounded-sm transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-indigo-500/50 active:scale-95",children:m?w.jsxs(w.Fragment,{children:[w.jsx(Pp,{size:16,className:"animate-spin"}),w.jsx("span",{children:"Syncing..."})]}):o?w.jsxs(w.Fragment,{children:[w.jsx(om,{size:16}),w.jsx("span",{children:"Saved!"})]}):w.jsxs(w.Fragment,{children:[w.jsx(MA,{size:16}),w.jsx("span",{children:"Save & Sync"})]})})]})})]}):w.jsx("div",{className:"text-center py-12",children:w.jsx("p",{className:"text-zinc-400 text-sm",children:"Please sign in to manage your profile"})})},k4=()=>{const[i,e]=ke.useState(!0);return w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"bg-indigo-950/10 border border-indigo-500/10 p-6 rounded-sm",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(zA,{className:"text-indigo-500"}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",children:"Transport Layer Security (TLS)"}),w.jsx("p",{className:"text-[10px] text-zinc-500 mt-1 uppercase",children:"Encrypt all outgoing data packets across the mesh network."})]})]}),w.jsx("button",{onClick:()=>e(!i),className:`w-12 h-6 rounded-full relative transition-colors ${i?"bg-indigo-600":"bg-zinc-800"}`,children:w.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${i?"left-7":"left-1"}`})})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/40 border border-indigo-900/20",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(TA,{size:16,className:"text-indigo-400"}),w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"ACCESS_KEY_01"})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("span",{className:"text-[10px] text-zinc-600 font-mono",children:""}),w.jsx("button",{className:"text-indigo-500 hover:text-indigo-400",children:w.jsx(Ph,{size:14})})]})]}),w.jsx("button",{className:"w-full py-3 border border-dashed border-indigo-900/30 text-[10px] text-zinc-500 hover:text-indigo-400 hover:border-indigo-500/50 transition-all uppercase font-bold tracking-[0.2em]",children:"+ Generate Secondary Access Key"})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx(mw,{icon:w.jsx(g0,{size:18,className:"text-yellow-500"}),title:"Neural MFA",description:"Requires biometric neural signature for uplink establishment.",active:!0}),w.jsx(mw,{icon:w.jsx(g0,{size:18,className:"text-zinc-500"}),title:"Ghost Protocol",description:"Automated signal scrambling for deep-cover operations.",active:!1})]}),w.jsxs("div",{className:"p-4 border-l-2 border-red-500 bg-red-500/5",children:[w.jsx("h4",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest mb-2",children:"Emergency Purge"}),w.jsx("p",{className:"text-[10px] text-zinc-400 uppercase leading-relaxed mb-4",children:"Wipe all local session logs, cache, and decrypted credentials immediately. This action cannot be undone."}),w.jsx("button",{className:"px-4 py-2 bg-red-500/20 border border-red-500/50 text-red-500 hover:bg-red-500 hover:text-white transition-all text-[10px] font-bold uppercase tracking-widest",children:"Execute Purge Sequence"})]})]})},mw=({icon:i,title:e,description:t,active:r})=>w.jsxs("div",{className:`p-4 border transition-all ${r?"bg-indigo-600/5 border-indigo-500/30":"bg-zinc-950 border-zinc-900 opacity-60"}`,children:[w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i,w.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:e}),r&&w.jsx("span",{className:"ml-auto text-[8px] bg-indigo-500/20 text-indigo-400 px-1.5 py-0.5 rounded-sm",children:"ACTIVE"})]}),w.jsx("p",{className:"text-[9px] text-zinc-500 uppercase leading-normal",children:t})]}),D4={apiKey:"AIzaSyAVv4EhUiVZSf54iZlB-ud05pxIlO8zBWk",authDomain:"kai-g-80f9c.firebaseapp.com",projectId:"kai-g-80f9c",storageBucket:"kai-g-80f9c.appspot.com",messagingSenderId:"125633190886",appId:"1:125633190886:web:65e1a7b4f59048a1768853"},j4=ad(D4),P4=rg(j4),im="http://localhost:5000",M4=()=>{const[i,e]=ke.useState([]),[t,r]=ke.useState(!0),[o,l]=ke.useState(null),[c,p]=ke.useState(0),[m,g]=ke.useState(!1),[b,E]=ke.useState(null),[S,x]=ke.useState(null);ke.useEffect(()=>{const H=tg(P4,async re=>{if(re){const ge=await re.getIdToken();x(ge)}else x(null)});return()=>H()},[]);const j=async()=>{r(!0),E(null);try{const H={"Content-Type":"application/json"};S&&(H.Authorization=`Bearer ${S}`);const ge=await(await fetch(`${im}/agent/devices`,{headers:H})).json();ge.success?e(ge.devices||[]):E(ge.error||"Failed to fetch devices")}catch(H){console.error("Error fetching devices:",H),E("Unable to connect to server")}finally{r(!1)}};ke.useEffect(()=>{j();const H=setInterval(j,3e4);return()=>clearInterval(H)},[S]);const z=async()=>{E(null);try{const H={"Content-Type":"application/json"};S&&(H.Authorization=`Bearer ${S}`);const ge=await(await fetch(`${im}/agent/generate-pairing-code`,{method:"POST",headers:H})).json();ge.success?(l(ge.code),p(600)):E(ge.error||"Failed to generate pairing code")}catch(H){console.error("Error generating code:",H),E("Unable to generate pairing code")}};ke.useEffect(()=>{if(c>0){const H=setInterval(()=>{p(re=>re<=1?(l(null),0):re-1)},1e3);return()=>clearInterval(H)}},[c]);const q=()=>{o&&(navigator.clipboard.writeText(o),g(!0),setTimeout(()=>g(!1),2e3))},J=H=>{const re=Math.floor(H/60),ge=H%60;return`${re}:${ge.toString().padStart(2,"0")}`},te=H=>{const re=new Date(H),ce=new Date().getTime()-re.getTime(),I=Math.floor(ce/6e4);return I<1?"Just now":I<60?`${I}m ago`:I<1440?`${Math.floor(I/60)}h ago`:`${Math.floor(I/1440)}d ago`};return w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-lg font-bold uppercase tracking-wider text-indigo-400",children:"Connected Devices"}),w.jsx("p",{className:"text-[10px] text-zinc-500 mt-1 uppercase tracking-widest",children:"Manage your paired PC agents"})]}),w.jsx("button",{onClick:j,className:"p-2 text-zinc-500 hover:text-indigo-400 transition-colors",title:"Refresh",children:w.jsx(Ph,{size:16,className:t?"animate-spin":""})})]}),b&&w.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:[w.jsx(fA,{size:14}),w.jsx("span",{children:b})]}),w.jsx("div",{className:"space-y-3",children:t&&i.length===0?w.jsxs("div",{className:"text-center py-8 text-zinc-500",children:[w.jsx(Ph,{size:24,className:"animate-spin mx-auto mb-3 text-indigo-500"}),w.jsx("p",{className:"text-xs uppercase tracking-widest",children:"Scanning for devices..."})]}):i.length===0?w.jsxs("div",{className:"text-center py-8 bg-zinc-900/50 border border-zinc-800 rounded-lg",children:[w.jsx(jh,{size:32,className:"mx-auto mb-3 text-zinc-600"}),w.jsx("p",{className:"text-sm text-zinc-400",children:"No devices connected"}),w.jsx("p",{className:"text-[10px] text-zinc-600 mt-1",children:"Generate a pairing code to connect your PC"})]}):i.map(H=>w.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#0a0a0f] border border-indigo-900/30 rounded-lg hover:border-indigo-500/50 transition-colors group",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:`p-2 rounded-lg ${H.is_online?"bg-green-500/10":"bg-zinc-800"}`,children:w.jsx(jh,{size:20,className:H.is_online?"text-green-400":"text-zinc-500"})}),w.jsxs("div",{children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-bold text-sm",children:H.name}),H.is_online?w.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-green-500/10 border border-green-500/30 rounded-full text-[9px] text-green-400 font-bold uppercase",children:[w.jsx(eR,{size:10}),"Online"]}):w.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-zinc-800 border border-zinc-700 rounded-full text-[9px] text-zinc-500 font-bold uppercase",children:[w.jsx(WA,{size:10}),"Offline"]})]}),w.jsxs("div",{className:"flex items-center gap-3 mt-1 text-[10px] text-zinc-500",children:[w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx(p0,{size:10}),te(H.last_seen)]}),w.jsx("span",{className:"text-zinc-700",children:"|"}),w.jsxs("span",{className:"font-mono",children:[H.device_id.slice(0,8),"..."]})]})]})]}),w.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:w.jsx("button",{className:"p-2 text-zinc-500 hover:text-red-400 transition-colors",title:"Remove device",children:w.jsx(GA,{size:14})})})]},H.device_id))}),w.jsxs("div",{className:"border-t border-zinc-800 pt-8",children:[w.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-zinc-400 mb-4",children:"Pair New Device"}),o?w.jsx("div",{className:"bg-indigo-950/30 border border-indigo-500/30 rounded-lg p-6",children:w.jsxs("div",{className:"text-center",children:[w.jsx("p",{className:"text-[10px] text-indigo-400 uppercase tracking-widest mb-3",children:"Enter this code on your PC"}),w.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[w.jsx("code",{className:"text-3xl font-mono font-bold tracking-[0.3em] text-white bg-black/50 px-6 py-3 rounded-lg border border-indigo-500/50",children:o}),w.jsx("button",{onClick:q,className:"p-3 bg-indigo-600/20 hover:bg-indigo-600/30 border border-indigo-500/30 rounded-lg transition-colors",title:"Copy code",children:m?w.jsx(om,{size:18,className:"text-green-400"}):w.jsx(_w,{size:18,className:"text-indigo-400"})})]}),w.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-zinc-400",children:[w.jsx(p0,{size:14}),w.jsxs("span",{children:["Expires in ",w.jsx("span",{className:"text-indigo-400 font-bold",children:J(c)})]})]}),w.jsxs("div",{className:"mt-6 text-left bg-black/30 rounded-lg p-4 border border-zinc-800",children:[w.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-widest mb-2",children:"Run on your PC:"}),w.jsxs("code",{className:"block text-xs text-green-400 font-mono bg-black/50 p-3 rounded overflow-x-auto",children:["python -m LocalAgent.agent --register ",o," --api ",im]})]})]})}):w.jsxs("button",{onClick:z,className:"w-full flex items-center justify-center gap-3 p-4 bg-indigo-600/10 hover:bg-indigo-600/20 border border-indigo-500/30 hover:border-indigo-500/50 rounded-lg transition-all group",children:[w.jsx("div",{className:"p-2 bg-indigo-600/20 rounded-lg group-hover:bg-indigo-600/30 transition-colors",children:w.jsx(bw,{size:20,className:"text-indigo-400"})}),w.jsxs("div",{className:"text-left",children:[w.jsx("p",{className:"text-sm font-bold text-indigo-400",children:"Generate Pairing Code"}),w.jsx("p",{className:"text-[10px] text-zinc-500",children:"Connect a new PC to your Kai account"})]})]})]}),w.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-800 rounded-lg p-4 flex items-start gap-3",children:[w.jsx(qA,{size:18,className:"text-zinc-500 mt-0.5 shrink-0"}),w.jsxs("div",{className:"text-xs text-zinc-500",children:[w.jsx("p",{className:"font-bold text-zinc-400 mb-1",children:"About Device Pairing"}),w.jsx("p",{children:"Your devices are securely linked to your account. Only you can control your connected PCs. Each device requires the Local Agent to be running to receive commands."})]})]})]})},V4=()=>w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[w.jsx(rm,{icon:w.jsx(vw,{size:16}),label:"Neural Load",value:"24%",subValue:"3.2 GHz",color:"text-indigo-500"}),w.jsx(rm,{icon:w.jsx(_A,{size:16}),label:"Mem Stack",value:"12.8 GB",subValue:"Used / 32 GB",color:"text-cyan-500"}),w.jsx(rm,{icon:w.jsx(iA,{size:16}),label:"Uplink Sync",value:"99.9%",subValue:"Latency: 4ms",color:"text-green-500"})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Neural Load Allocation"}),w.jsx("span",{className:"text-[10px] text-indigo-400 font-bold",children:"450 TFLOPs"})]}),w.jsx("input",{type:"range",className:"w-full h-1 bg-zinc-900 appearance-none cursor-pointer accent-indigo-500"}),w.jsx("p",{className:"text-[8px] text-zinc-600 uppercase",children:"Warning: Exceeding 80% may cause operator burnout."})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Log Retention Period"}),w.jsx("span",{className:"text-[10px] text-indigo-400 font-bold",children:"24 HOURS"})]}),w.jsx("div",{className:"grid grid-cols-4 gap-2",children:["1 HR","12 HR","24 HR","7 DAYS"].map(i=>w.jsx("button",{className:`py-2 text-[10px] font-bold border transition-all ${i==="24 HR"?"bg-indigo-600/20 border-indigo-500 text-indigo-400":"border-zinc-800 text-zinc-600 hover:border-zinc-600"}`,children:i},i))})]})]}),w.jsxs("div",{className:"border border-indigo-500/10 bg-indigo-950/5 p-6 space-y-4",children:[w.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-[0.2em] border-b border-indigo-900/30 pb-4",children:"Background Processes"}),[{name:"Core_System_Watcher",status:"Running",pid:"0122"},{name:"Neural_Uplink_Sync",status:"Idle",pid:"4491"},{name:"Tactical_Overlay_Render",status:"Running",pid:"9902"}].map(i=>w.jsxs("div",{className:"flex items-center justify-between py-1",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${i.status==="Running"?"bg-green-500":"bg-zinc-600"}`}),w.jsx("span",{className:"text-[10px] font-mono text-zinc-400 uppercase",children:i.name})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("span",{className:"text-[8px] text-zinc-600 font-mono",children:["PID: ",i.pid]}),w.jsx("button",{className:"text-[8px] font-bold text-red-500 uppercase hover:underline",children:"Terminate"})]})]},i.pid))]})]}),rm=({icon:i,label:e,value:t,subValue:r,color:o})=>w.jsxs("div",{className:"bg-black border border-indigo-900/20 p-4 rounded-sm hover:border-indigo-500/40 transition-all group",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx("span",{className:`${o} opacity-60 group-hover:opacity-100 transition-opacity`,children:i}),w.jsx("span",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:e})]}),w.jsx("div",{className:"text-xl font-bold tracking-tight mb-1",children:t}),w.jsx("div",{className:"text-[9px] text-zinc-600 font-bold uppercase",children:r})]}),U4=()=>w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Primary Uplink Node"}),w.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[w.jsx(sm,{icon:w.jsx(bA,{size:18}),title:"North_Global_Server (NG-01)",description:"Optimal latency for North American operations. Standard encryption.",ping:"14ms",selected:!0}),w.jsx(sm,{icon:w.jsx(UA,{size:18}),title:"Eurasia_Core_Relay (EC-09)",description:"High-security node with cascading signal redundancy.",ping:"120ms",selected:!1}),w.jsx(sm,{icon:w.jsx(DA,{size:18}),title:"Sat_Deep_Space_Mesh (SM-4)",description:"Extreme coverage for remote field data collection.",ping:"240ms",selected:!1})]})]}),w.jsxs("div",{className:"p-6 bg-indigo-600/5 border border-indigo-500/20 relative overflow-hidden group",children:[w.jsx("div",{className:"absolute -right-8 -bottom-8 opacity-5 group-hover:rotate-12 transition-transform duration-1000",children:w.jsx(ww,{size:160})}),w.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest mb-1",children:"Burst Mode Uplink"}),w.jsx("p",{className:"text-[10px] text-zinc-500 uppercase",children:"Enable short-duration high-bandwidth data transfers."})]}),w.jsx("button",{className:"px-4 py-2 border border-indigo-500 text-indigo-400 text-[10px] font-bold uppercase tracking-widest hover:bg-indigo-600 hover:text-white transition-all",children:"Optimize Link"})]})]}),w.jsxs("div",{className:"flex gap-4",children:[w.jsxs("div",{className:"flex-1 p-4 bg-zinc-950 border border-zinc-900",children:[w.jsx("h5",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",children:"Protocol Stack"}),w.jsxs("select",{className:"w-full bg-black border border-zinc-800 p-2 text-[10px] font-mono text-zinc-400 focus:outline-none focus:border-indigo-500 uppercase",children:[w.jsx("option",{children:"IPv6 / Secure_Mesh_v4"}),w.jsx("option",{children:"Legacy_TCP_Over_Neural"}),w.jsx("option",{children:"Encapsulated_Ghost_Frame"})]})]}),w.jsxs("div",{className:"flex-1 p-4 bg-zinc-950 border border-zinc-900",children:[w.jsx("h5",{className:"text-[10px] font-bold uppercase tracking-widest mb-2",children:"Signal Gain"}),w.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[w.jsx("input",{type:"range",className:"flex-1 h-1 bg-zinc-800 appearance-none accent-indigo-500"}),w.jsx("span",{className:"text-[10px] font-mono text-indigo-400",children:"+12dB"})]})]})]})]}),sm=({icon:i,title:e,description:t,ping:r,selected:o})=>w.jsxs("div",{className:`p-4 border flex items-center gap-4 cursor-pointer transition-all ${o?"bg-indigo-600/10 border-indigo-500/50":"bg-black border-zinc-900 hover:border-zinc-700"}`,children:[w.jsx("div",{className:`p-3 ${o?"text-indigo-500 bg-indigo-500/10":"text-zinc-600 bg-zinc-900"}`,children:i}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:e}),o&&w.jsx("span",{className:"text-[8px] text-green-500 font-bold uppercase tracking-tighter",children:"CONNECTED"})]}),w.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tight leading-none",children:t})]}),w.jsxs("div",{className:"text-right",children:[w.jsx("div",{className:"text-[10px] font-mono text-zinc-500 mb-0.5",children:r}),w.jsx("div",{className:"text-[8px] text-zinc-700 uppercase font-bold tracking-widest",children:"Latency"})]})]}),L4=()=>w.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("h3",{className:"text-xs font-bold uppercase tracking-[0.2em] mb-4",children:"Neural Event Channels"}),w.jsx(wh,{icon:w.jsx(YA,{size:16,className:"text-red-500"}),label:"Critical System Alerts",description:"Visual and haptic feedback for hardware failure or security breaches.",enabled:!0}),w.jsx(wh,{icon:w.jsx(IA,{size:16,className:"text-indigo-500"}),label:"Operator Comms",description:"Voice-to-text notifications for incoming tactical messages.",enabled:!0}),w.jsx(wh,{icon:w.jsx(m0,{size:16,className:"text-cyan-500"}),label:"Status Updates",description:"Routine telemetry reports and background sync status.",enabled:!1}),w.jsx(wh,{icon:w.jsx(am,{size:16,className:"text-yellow-500"}),label:"Scheduled Operations",description:"Reminders for upcoming mission windows and uplink maintenance.",enabled:!0})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Alert Priority Threshold"}),w.jsxs("select",{className:"w-full bg-black border border-zinc-800 p-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest focus:outline-none focus:border-indigo-500",children:[w.jsx("option",{children:"LEVEL_1 - MINIMAL"}),w.jsx("option",{children:"LEVEL_2 - STANDARD"}),w.jsx("option",{children:"LEVEL_3 - HIGH_ONLY"})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase tracking-widest",children:"Notification Sound"}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("select",{className:"flex-1 bg-black border border-zinc-800 p-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest focus:outline-none focus:border-indigo-500",children:[w.jsx("option",{children:"KAI_SYSTEM_CHIME"}),w.jsx("option",{children:"NEURAL_TAP_PULSE"}),w.jsx("option",{children:"TACTICAL_BUZZ_SHORT"})]}),w.jsx("button",{className:"p-3 border border-zinc-800 hover:bg-zinc-900 text-zinc-500",children:w.jsx(am,{size:16})})]})]})]}),w.jsxs("div",{className:"p-4 bg-indigo-600/5 border border-indigo-500/10 flex items-start gap-4",children:[w.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-sm",children:w.jsx(m0,{size:18,className:"text-indigo-400"})}),w.jsxs("div",{className:"flex-1",children:[w.jsx("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-indigo-400 mb-1",children:"Silence Protocol"}),w.jsx("p",{className:"text-[9px] text-zinc-500 uppercase leading-normal",children:"Enabling this will suppress all non-critical visual notifications to maximize focus during high-intensity operations."})]}),w.jsx("button",{className:"px-4 py-2 border border-zinc-800 text-[10px] font-bold uppercase tracking-widest hover:border-indigo-500/50 transition-all",children:"Enable"})]})]}),wh=({icon:i,label:e,description:t,enabled:r})=>w.jsxs("div",{className:"p-4 border border-zinc-900 bg-black flex items-center justify-between hover:border-zinc-800 transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"p-2 bg-zinc-900 rounded-sm",children:i}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest",children:e}),w.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tight",children:t})]})]}),w.jsx("button",{className:`w-10 h-5 rounded-full relative transition-colors ${r?"bg-indigo-600":"bg-zinc-800"}`,children:w.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${r?"left-5.5":"left-0.5"}`})})]}),z4={apiKey:"AIzaSyAVv4EhUiVZSf54iZlB-ud05pxIlO8zBWk",authDomain:"kai-g-80f9c.firebaseapp.com",projectId:"kai-g-80f9c",storageBucket:"kai-g-80f9c.appspot.com",messagingSenderId:"125633190886",appId:"1:125633190886:web:65e1a7b4f59048a1768853"},cS=ad(z4),B4=rg(cS),q4=jT(cS),$4=()=>{var E,S;const[i,e]=ke.useState(ct.PROFILE),[t,r]=ke.useState(null),[o,l]=ke.useState(!1),[c,p]=ke.useState(!1);ke.useEffect(()=>{const x=tg(B4,j=>{if(j){const z=XN(kh(q4,"users",j.uid,"data","profile"),q=>{if(q.exists()){const J=q.data();r({name:J.name||j.displayName||"KAI_TACTICAL_01",nickname:J.nickname||"",avatarUrl:J.avatarUrl||j.photoURL||""}),console.log("[App]  Profile synced from Firebase:",J)}else r({name:j.displayName||"KAI_TACTICAL_01",nickname:"",avatarUrl:j.photoURL||""})});return()=>z()}else r(null)});return()=>x()},[]);const m=()=>{switch(i){case ct.PROFILE:return w.jsx(pw,{});case ct.SECURITY:return w.jsx(k4,{});case ct.DEVICES:return w.jsx(M4,{});case ct.TELEMETRY:return w.jsx(V4,{});case ct.UPLINK:return w.jsx(U4,{});case ct.NOTIFICATIONS:return w.jsx(L4,{});default:return w.jsx(pw,{})}},g=x=>{e(x),l(!1),p(!1)},b=x=>({[ct.PROFILE]:"Operator Profile",[ct.SECURITY]:"Security Protocols",[ct.DEVICES]:"Device Link",[ct.NOTIFICATIONS]:"Neural Alerts",[ct.TELEMETRY]:"Live Telemetry",[ct.UPLINK]:"Uplink Config"})[x]||x;return w.jsxs("div",{className:"flex h-screen bg-black text-white overflow-hidden font-mono",children:[o&&w.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 lg:hidden backdrop-blur-sm",onClick:()=>l(!1)}),w.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50
        w-[280px] sm:w-72 border-r border-indigo-900/30 bg-[#050505] 
        flex flex-col shrink-0
        transform transition-transform duration-300 ease-out
        ${o?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[w.jsx("button",{onClick:()=>l(!1),className:"lg:hidden absolute top-4 right-4 p-2 text-zinc-400 hover:text-white z-50",children:w.jsx(y0,{size:20})}),w.jsx("div",{className:"p-4 sm:p-6 border-b border-indigo-900/30",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-indigo-600 rounded flex items-center justify-center border border-indigo-400/50 shadow-[0_0_15px_rgba(99,102,241,0.3)]",children:w.jsx(vw,{className:"text-white w-5 h-5 sm:w-6 sm:h-6"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"text-lg sm:text-xl font-bold tracking-tighter",children:"KAI OS"}),w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full status-dot shadow-[0_0_5px_#22c55e]"}),w.jsx("span",{className:"text-[9px] sm:text-[10px] text-green-500 font-bold uppercase tracking-widest",children:"SETTINGS"})]})]})]})}),w.jsxs("nav",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-1 sm:space-y-2 scrollbar-hide",children:[w.jsx("div",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold mb-3 sm:mb-4 ml-2 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:"Management"}),w.jsx(Eh,{icon:w.jsx(XA,{size:16}),label:"Operator Profile",active:i===ct.PROFILE,onClick:()=>g(ct.PROFILE)}),w.jsx(Eh,{icon:w.jsx(am,{size:16}),label:"Neural Alerts",active:i===ct.NOTIFICATIONS,onClick:()=>g(ct.NOTIFICATIONS)}),w.jsx("div",{className:"text-[9px] sm:text-[10px] text-zinc-500 font-bold mt-6 sm:mt-8 mb-3 sm:mb-4 ml-2 uppercase tracking-[0.15em] sm:tracking-[0.2em]",children:"Systems"}),w.jsx(Eh,{icon:w.jsx(jh,{size:16}),label:"Device Link",active:i===ct.DEVICES,onClick:()=>g(ct.DEVICES)}),w.jsx(Eh,{icon:w.jsx(ww,{size:16}),label:"Uplink Config",active:i===ct.UPLINK,onClick:()=>g(ct.UPLINK)}),w.jsx("div",{className:"pt-8 sm:pt-12 mt-auto",children:w.jsxs("button",{onClick:()=>window.location.href="/",className:"w-full flex items-center gap-2 sm:gap-3 p-2.5 sm:p-3 text-indigo-500/80 hover:text-indigo-400 hover:bg-indigo-500/10 transition-colors rounded-sm group",children:[w.jsx(y0,{size:16,className:"group-hover:scale-110 transition-transform"}),w.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider sm:tracking-widest",children:"Back to Chat"})]})})]}),w.jsx("div",{className:"p-3 sm:p-4 border-t border-indigo-900/30 bg-[#020202]",children:w.jsxs("div",{className:"text-[9px] sm:text-[10px] text-zinc-600 flex justify-between items-center",children:[w.jsx("span",{children:"SYS_VER_2.5.0_PRO"}),w.jsx(HA,{size:10,className:"sm:w-3 sm:h-3"})]})})]}),w.jsxs("main",{className:"flex-1 flex flex-col bg-[#000000] relative min-w-0",children:[w.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(15,23,42,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(15,23,42,0.1)_1px,transparent_1px)] bg-[size:24px_24px] sm:bg-[size:32px_32px] pointer-events-none opacity-20"}),w.jsxs("header",{className:"h-14 sm:h-16 lg:h-20 border-b border-indigo-900/30 flex items-center justify-between px-3 sm:px-5 lg:px-8 bg-black/80 backdrop-blur-md z-10",children:[w.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[w.jsx("button",{onClick:()=>l(!0),className:"lg:hidden p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:w.jsx(xA,{size:20})}),w.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-indigo-500 rounded-full hidden sm:block"}),w.jsx("h2",{className:"text-xs sm:text-sm font-bold uppercase tracking-[0.15em] sm:tracking-[0.3em] glow-text truncate",children:i.replace("_"," ")}),w.jsx("div",{className:"hidden sm:flex px-2 py-0.5 bg-indigo-500/10 border border-indigo-500/20 text-[9px] sm:text-[10px] text-indigo-400 font-bold rounded-sm",children:"SID-176634"})]}),w.jsxs("div",{className:"lg:hidden relative",children:[w.jsxs("button",{onClick:()=>p(!c),className:"flex items-center gap-1.5 px-2.5 py-1.5 border border-indigo-900/50 bg-indigo-950/30 rounded text-[10px] font-bold uppercase tracking-wide text-zinc-300",children:[w.jsx("span",{className:"max-w-[100px] truncate",children:b(i).split(" ")[0]}),w.jsx(uA,{size:14,className:`transition-transform ${c?"rotate-180":""}`})]}),c&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1)}),w.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#0a0a0f] border border-indigo-900/50 rounded-lg shadow-xl z-50 py-1 overflow-hidden",children:Object.values(ct).map(x=>w.jsx("button",{onClick:()=>g(x),className:`w-full text-left px-4 py-2.5 text-[11px] font-bold uppercase tracking-wide transition-colors ${i===x?"bg-indigo-600/20 text-indigo-400":"text-zinc-400 hover:bg-indigo-900/10 hover:text-white"}`,children:b(x)},x))})]})]}),w.jsxs("div",{className:"hidden lg:flex items-center gap-4",children:[w.jsx("div",{className:"h-8 w-px bg-indigo-900/30 mx-2"}),w.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",children:[w.jsxs("div",{className:"text-right",children:[w.jsx("p",{className:"text-[10px] font-bold leading-tight",children:(t==null?void 0:t.nickname)||(t==null?void 0:t.name)||"OP_KAI_01"}),w.jsx("p",{className:"text-[8px] text-indigo-400 font-bold leading-none tracking-tighter uppercase",children:"Clearance Level 5"})]}),w.jsx("div",{className:"w-8 h-8 rounded-sm bg-indigo-900/40 border border-indigo-500/30 overflow-hidden",children:t!=null&&t.avatarUrl?w.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover opacity-80"}):w.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-900/30",children:w.jsx("span",{className:"text-sm text-indigo-400",children:((S=(E=t==null?void 0:t.name)==null?void 0:E[0])==null?void 0:S.toUpperCase())||"K"})})})]})]})]}),w.jsx("section",{className:"flex-1 overflow-y-auto p-3 sm:p-5 lg:p-8 z-10 scrollbar-hide",children:w.jsx("div",{className:"max-w-4xl mx-auto",children:m()})})]})]})},Eh=({icon:i,label:e,active:t,onClick:r})=>w.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between p-3 transition-all rounded-sm group ${t?"bg-indigo-600/10 border-l-2 border-indigo-600 text-indigo-400":"text-zinc-500 hover:text-indigo-400 hover:bg-indigo-900/5 border-l-2 border-transparent"}`,children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("span",{className:`${t?"text-indigo-500":"text-zinc-600 group-hover:text-indigo-500"} transition-colors`,children:i}),w.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:e})]}),t&&w.jsx(hA,{size:14,className:"opacity-50"})]}),hS=document.getElementById("root");if(!hS)throw new Error("Could not find root element to mount to");const H4=X1.createRoot(hS);H4.render(w.jsx(q1.StrictMode,{children:w.jsx($4,{})}));
